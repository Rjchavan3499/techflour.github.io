var ErrorCode=new function(){this.MANDATORY=1;this.INVALIDEMAIL=2;this.MAXLENGTHEXCEED=3;this.INVALIDNUMBER=4;this.ROUNDOFF=5;this.MISSINGARG=6;this.INVAILDARG=7};function MandatoryException(B,A){this.name="MandatoryException";this.message=B;this.stack=(new Error()).stack;this.code=ErrorCode.MANDATORY;this.$ele=$(A);this.handle=function(){if(this.$ele.siblings(".error").length==0){this.$ele.css("box-shadow","0px 0px 10px #FA0000");this.$ele.after('<span class="error"></span>').text(this.message)}}}MandatoryException.prototype=new Error();MandatoryException.prototype.constructor=MandatoryException;function InputChoiceMandatoryException(B,A){MandatoryException.call(this,B,A.getTarget()[0]);this.handle=function(){if(this.$ele.siblings(".error").length==0){$(A.getTarget()[0]).parents(".form-field").css("box-shadow","0px 0px 10px #FA0000");$(A.getTarget()[0]).parents(".form-field").append('<span class="error"></span>').text(this.message)}}}InputChoiceMandatoryException.prototype=new Error();InputChoiceMandatoryException.prototype.constructor=InputChoiceMandatoryException;function URLMandatoryException(B,A){MandatoryException.call(this,B,A.getTarget()[0]);this.handle=function(){if(this.$ele.siblings(".error").length==0){this.$ele.css("box-shadow","0px 0px 10px #FA0000");$(A.getTarget()[A.getReqLength()]).after('<span class="error"></span>').text(this.message)}}}URLMandatoryException.prototype=new Error();URLMandatoryException.prototype.constructor=URLMandatoryException;function InvalidEmailException(B,A){this.name="InvalidEmailException";this.message=B;this.stack=(new Error()).stack;this.code=ErrorCode.INVALIDEMAIL;this.$ele=$(A);this.handle=function(){if(this.$ele.siblings(".error").length==0){this.$ele.css("box-shadow","0px 0px 10px #FA0000");this.$ele.after('<span class="error"></span>').text(this.message)}}}InvalidEmailException.prototype=new Error();InvalidEmailException.prototype.constructor=InvalidEmailException;function MaxLengthExceedException(B,A){this.name="MaxLengthExceedException";this.message=B;this.stack=(new Error()).stack;this.code=ErrorCode.MAXLENGTHEXCEED;this.$ele=$(A);this.handle=function(){if(this.$ele.siblings(".error").length==0){this.$ele.css("box-shadow","0px 0px 10px #FA0000");this.$ele.after('<span class="error"></span>').text(this.message)}}}MaxLengthExceedException.prototype=new Error();MaxLengthExceedException.prototype.constructor=MaxLengthExceedException;function InvalidNumberException(B,A){this.name="InvalidNumberException";this.message=B;this.stack=(new Error()).stack;this.code=ErrorCode.INVALIDNUMBER;this.$ele=$(A);this.handle=function(){if(this.$ele.siblings(".error").length==0){this.$ele.css("box-shadow","0px 0px 10px #FA0000");this.$ele.after('<span class="error"></span>').text(this.message)}}}InvalidNumberException.prototype=new Error();InvalidNumberException.prototype.constructor=InvalidNumberException;function RoundOffException(B,A){this.name="RoundOffException";this.message=B;this.stack=(new Error()).stack;this.code=ErrorCode.INVALIDNUMBER;this.$ele=$(A);this.handle=function(){if(this.$ele.siblings(".error").length==0){this.$ele.css("box-shadow","0px 0px 10px #FA0000");this.$ele.after('<span class="error"></span>').text(this.message)}}}RoundOffException.prototype=new Error();RoundOffException.prototype.constructor=RoundOffException;function InvalidPhoneNumberException(B,A){this.name="InValidPhoneNumberException";this.message=B;this.stack=(new Error()).stack;this.code=ErrorCode.INVALIDPHONENUMBER;this.handle=function(){if(this.$ele.siblings(".error").length==0){this.$ele.css("box-shadow","0px 0px 10px #FA0000");this.$ele.after('<span class="error"></span>').text(this.message)}}}InvalidPhoneNumberException.prototype=new Error();InvalidPhoneNumberException.prototype.constructor=InvalidPhoneNumberException;function MissingArgumentException(A){this.name="MissingArgumentException";this.message=A;this.stack=(new Error()).stack;this.code=ErrorCode.MISSINGARG}MissingArgumentException.prototype=new Error();MissingArgumentException.prototype.constructor=MissingArgumentException;function AlphaOnlyException(A){this.name="AlphaOnlyException";this.message=A;this.stack=(new Error()).stack;this.code=ErrorCode.INVAILDARG}AlphaOnlyException.prototype=new Error();AlphaOnlyException.prototype.constructor=AlphaOnlyException;function InvalidArgumentException(A){this.name="InvalidArgumentException";this.message=A;this.stack=(new Error()).stack;this.code=ErrorCode.INVAILDARG}InvalidArgumentException.prototype=new Error();InvalidArgumentException.prototype.constructor=InvalidArgumentException;if(typeof Object.create!="function"){Object.create=(function(){var A=function(){};return function(C){if(arguments.length>1){throw Error("Second argument not supported")}if(typeof C!="object"){throw TypeError("Argument must be an object")}A.prototype=C;var B=new A();A.prototype=null;return B}})()}function Class(){}Class.prototype.construct=function(){};Class.extend=function(E){var A=function(){if(arguments[0]!==Class){this.construct.apply(this,arguments)}};var D=new this(Class);var B=this.prototype;for(var F in E){var C=E[F];if(C instanceof Function){C.$=B}D[F]=C}D._super=B;A.prototype=D;A.extend=this.extend;return A};var BasicValidator=Class.extend({validate:function(A){var C=A.getModel(),B=A.getView();A.clearError();if(C.isMandatory()&&isNull(B.getValue())){throw new MandatoryException(C.getDisplayName()+" cannot be empty",B.getField())}}});var TextFieldValidator=BasicValidator.extend({validate:function(B){this._super.validate(B);var D=B.getModel(),C=B.getView();var A=(B.getValue()!=undefined)?B.getValue().length:0;if(A>D.getMaxLength()){throw new MaxLengthExceedException(D.getDisplayName()+" exceeds maximum characters",C.getField())}}});var EmailValidator=BasicValidator.extend({validate:function(B){var D=B.getModel(),C=B.getView();this._super.validate(B);var A=/^[\w]([\w\-\!\.\+\'\&]*)@[a-zA-Z0-9]([\w\-\.]*)(\.[a-zA-Z]{2,15}(\.[a-zA-Z]{2}){0,2})$/;if(!isNull(C.getValue())&&!A.test(C.getValue())){throw new InvalidEmailException(i18n.validEmailMsg.replace("{0}",D.getDisplayName()),C.getField())}}});var PhoneNumberValidator=BasicValidator.extend({validate:function(C){var H=C.getModel(),G=C.getView();this._super.validate(C);var F=G.getPhoneNumberObj();var A=F.getSelectedCountryData();var E=(A.dialCode!=undefined&&F.isValidNumber());if(!E&&!isNull(G.getValue())){var D=Constants.PHONE_NUMBER_REGEX[A.iso2];if(D==undefined){throw new InvalidPhoneNumberException(i18n.phonenovalidationerror,G.getField())}D="\\+"+A.dialCode+D;var B=F.getNumber();B=B.replace(Constants.PHONE_NUMBER_SEPARATORS,"");if(!new RegExp(D).test(B)){throw new InvalidPhoneNumberException(i18n.phonenovalidationerror,G.getField())}}}});var NumericValidator=BasicValidator.extend({validate:function(B){var H=B.getModel(),G=B.getView();this._super.validate(B);var C=G.getValue(),A=C.length,D=H.fieldDecimalLength();if(A>H.length){throw new MaxLengthExceedException(H.getDisplayName()+" exceeds maximum characters",G.getField())}if(!isNull(C)&&!isNumber(C)||(/\s+$/).test(C)){throw new InvalidNumberException((i18n.validNumberMsg).replace("{0}",H.getDisplayName()),G.getField())}if(A==Constants.NUMBER_MAX_LENGTH&&BigInt(C)>BigInt(Constants.NUMBER_MAX_VALUE)){throw new InvalidNumberException(i18n.largeNumberMsg,G.getField())}var E=(i18n.roundDecimalMsg).replace("{0}",H.getDisplayName());if(D>0&&C.indexOf(".")!=-1){if(C.substring(C.indexOf(".")).length-1>D){throw new RoundOffException(E.replace("{1}",D),G.getField())}}else{var F=C.indexOf(".");if(F!=-1&&C.substring(F).length>0){throw new RoundOffException(E.replace("{1}",D),G.getField())}}}});var URLValidator=Class.extend({validate:function(A){A.resetError();if(A.isMandatory()&&isNull(A.getValue().URL)){throw new URLMandatoryException(A.getDisplayName()+" cannot be empty",A);return false}}});var InputChoiceValidator=Class.extend({validate:function(A){A.resetError();if(A.isMandatory()&&isNull(A.getValue())){throw new InputChoiceMandatoryException(A.getDisplayName()+" cannot be empty",A);return false}}});var LIB=LIB||{};LIB={_pagesList:null,_getPagesList:function(){if(LIB._pagesList==null||LIB._pagesList==undefined){$.ajax({url:ZCGlobal.appurl+"getComponent",method:"GET",async:false,success:function(A){LIB._pagesList=A},error:function(C,A,B){LIB._pagesList=[]}})}return LIB._pagesList},_isHtmlPage:function(A){return $.inArray(A,LIB._getPagesList())>-1},_sectionsList:undefined,_isSection:function(B){var A=LIB._sectionsList==undefined?[]:LIB._sectionsList;return $.inArray(B,A)>-1},_isGlobalsInited:false,_initGlobals:function(B,C){if(LIB._isGlobalsInited){return }var A=LIB._isNull(B)?ZCGlobal.scopeName:B,D=LIB._isNull(C)?ZCGlobal.appLinkName:C;$.ajax({url:"/"+A+"/"+D+"/initGlobals",method:"GET",async:false,success:function(E){ZCGlobal=ZCGlobal||{};ZCGlobal.loginName=E.loginName;ZCGlobal.loginEmail=E.loginEmail;LIB._isGlobalsInited=true;Console.log("Initialised globals..")},error:function(G,E,F){Console.log("Error while getting globals info.");Console.log(F)}})},_stopPropagation:function(A){if(navigator.userAgent.indexOf("msie")!=-1){if(A==null){return }A.cancelBubble=true;if(A.stopPropagation){A.stopPropagation()}}else{A.stopPropagation()}},_isNull:function(A){if(!A||A=="undefined"||typeof (A)=="undefined"||A=="NULL"||A=="null"||A.length==0||A==""){return true}return false},_startLoading:function(){if(ZCGlobal.isMobileLayout){var A=ifreeze({container:"body"});if(document.getElementById("zc-mob-loader")){document.getElementById("zc-mob-loader").classList.remove("hide")}}else{if(document.getElementById("preloader")){document.getElementById("preloader").style.display="block"}}},_stopLoading:function(){if(ZCGlobal.isMobileLayout){unfreeze({container:"body"});if(document.getElementById("zc-mob-loader")){document.getElementById("zc-mob-loader").classList.add("hide")}}else{if(document.getElementById("preloader")){document.getElementById("preloader").style.display="none"}}},_componentUrlPrefix:{form:"form/",report:"report/",page:"page/",approval:"approvals/",module:""},_trimLeftString:function(A){do{index=A.indexOf(" ");if(index==0){A=A.substring(1)}}while(index==0);return A},_openURL:function(A,K,J,F){if(ZCSecurity.isValidURL(A)){K=K.toLowerCase();A=LIB._trimLeftString(A);A=A.replace(/ /g,"%20");if(K=="new window"||K=="new"){var E=getParamsAsMap(!isNull(J)?J.toLowerCase():J,",","=");if(!isNull(E.successive)&&E.successive=="true"){ZSEC.secureRedirector.open(A,"_blank")}else{ZSEC.secureRedirector.open(A,"_new")}}else{if(K=="iframe"){if(window.self!==window.top&&isSandBoxedIframe(window)){Console.log("SandBoxed Frame true");openURLByPostMessage(A,J)}else{window.open(A,J)}}else{if(K=="popup"||K=="Popup window"||K=="popup window"){if(A.indexOf("#")==0||A.indexOf("/#")==0||A.indexOf("/")==0){if(!closeScriptHandle(A,F)){var E=getParamsAsMap(J,",","=");var I={};if(!isNull(E.height)){I.height=E.height}if(!isNull(E.width)){I.width=E.width}I.wrapperClass="zc-mob-fullscreen";var N=$(getModalProgress()).zcmodal(I);var B=new ApplicationView();B._Events._LoadComponent(A,N.getBody()[0])}}else{var D="resizable=false,scrollbars=yes,toolbar=false,location=false,directories=false,status=false,menubar=false,copyhistory=false";D=D+","+J;ZSEC.secureRedirector.open(A,"_blank",D)}}else{if(K=="same window"||K=="same"||K=="this window"||K=="this"){if($zcmodal.hasInstance()){isUrlContainsDialog=$.IsLoadInDialog(A);$zcmodal.getTopPopup().close()}if((A==window.location.hash||A==window.location.href)&&!isEmbedorPerma()){$(window).trigger("hashchange")}else{window.open(A,"_self")}return true}else{if(K=="parent window"||K=="parent"){var C;var G;try{C=window.self!=window.parent;G=window.self.location.origin===window.parent.location.origin}catch(H){C=true;G=false}if(C){if(G){openURLByPostMessage(A,"_parent")}else{try{if(window.open(A,"_parent")==null){window.open(A,"_top")}}catch(H){window.open(A,"_top")}}}else{this._openURL(A,"same window",J,F)}return true}else{if($zcmodal.hasInstance()){$zcmodal.getTopPopup().close()}if(A.indexOf("#")==0){var M=false;if(window.location.hash==A){M=true}window.location.hash=A;if(M){$(document).trigger("hashchange")}}else{if(A.indexOf("/#")==0){var M=false;if(window.location.hash==A.substr(1)){M=true}window.location.hash=A.substr(1);if(M){$(document).trigger("hashchange")}}else{if(A==location.href){window.location.reload()}else{window.location=A}}}return true}}}}}return false}else{$.alert({msg:i18n["zc.live.form.invalidurlerror"],callback:function(){if(K=="same window"||K=="same"||K=="this window"||K=="this"||K=="parent window"||K=="parent"){$(document).trigger("onAlertClose")}}});return false}},_info:function(C,B,A){$.zcmodal({title:C,type:ZCModalConstants.JIT_MODAL,bodyClass:"info-popup",width:450,beforeShow:function(D){for(var E in B){if(A==true){$(D).find("#info-"+E).html(B[E])}else{$(D).find("#info-"+E).text(B[E])}}},buildDOM:function(){var D="";for(var E in B){D+="<span id='info-"+E+"'></span></br>"}return'<div class="infoMsg" style="white-space:pre-line">'+D+"</div>"},buttons:[]})},_Loader:function(B){switch(B){case 1:var A=$("#preloader");break;case 2:var A=$("#splash-screen");break}this.start=function(){$(A).show()};this.stop=function(){$(A).hide()};return this},_trim:function(A){return A?A.trim():""}};LIB.REFERENCE_TYPES={PAGE_COMPONENT:1};function createPrototype(B,A,C){B.prototype=Object.create(A);B.prototype.constructor=B;B.prototype.validator=C}function isMobileBrowser(A){if(!A){A=navigator.userAgent}return(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(A))}function isEmbedorPerma(){var B=document.body.classList;var C=["zc-page-perma","zc-form-perma","zc-form-embed","zc-report-embed","zc-report-perma"];var A=C.some(function(D){return(B.contains(D))});return A}function isStandalone(){return ZCGlobal.isMobileLayout&&(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===true)}function resetViewport(){if(isMobileBrowser()){$("body").addClass("zc-mobile");var A=window.screen.width;var C=750;var B="yes";if(A>C){$("#zcViewport").attr("content","initial-scale=1.0, maximum-scale=2, minimum-scale=1.0, user-scalable="+B+", width="+A)}}}function openURLListener(B){var A=B.data.url;if(B.data.key==="openInIFrame"&&(window.name===B.data.frameName)){if(window.location.href===A){window.location.reload()}else{window.open(A,"_self")}}if(B.data.key==="openInIFrame"&&(B.data.frameName=="_parent")){if(B.data.isEmbedOrPerma){if(window.location.href===A){window.location.reload()}else{if(A.indexOf("#")==0){A=ZCGlobal.appurl+A}window.open(A,"_self")}}else{if(window.location.href===A||window.location.hash===A){$(window).trigger("hashchange")}else{window.open(A,"_self")}}}}function openURLByPostMessage(B,A){var F={key:"openInIFrame",url:B,frameName:A};var E=getFrameWindow(A);if(E==undefined&&A==="_parent"){var C=parent.document.location.href.slice(ZCGlobal.appurl.length,parent.document.location.href.lastIndexOf("/"));var G=(C.endsWith("-embed")||C.endsWith("-perma"));F.isEmbedOrPerma=G;window.parent.postMessage(F,"*")}else{if(E!==undefined){try{if(E.location.host===""){E.frameElement.src=B;return }}catch(D){Console.log(D)}E.postMessage(F,"*")}}}function getFrameWindow(B){return A(window.top,B);function A(C,E){try{var D=C.frames[E];if(D!==undefined&&D!==null){return D}}catch(G){}for(var F=0;F<C.frames.length;++F){var D=A(C.frames[F],E);if(D!==undefined&&D!==null){return D}}return undefined}}function initSW(){var A=ZCGlobal.scopeName,C=ZCGlobal.appLinkName;if("serviceWorker" in navigator){var B="/"+GlobalUrls.getAppUrlFragment();if(ZCGlobal.portalType!=undefined){if(ZCGlobal.portalType=="CustomDomain"){B=""}else{if(ZCGlobal.portalType=="DefaultPortalDomain"){B="/portal/"+ZCGlobal.appLinkName}}}navigator.serviceWorker.register(B+"/serviceworker").then(function(D){Console.log("ServiceWorker registration successful with scope: ",D.scope)},function(D){Console.log("ServiceWorker registration failed: ",D)})}window.addEventListener("beforeinstallprompt",function(D){Console.log("beforeinstallprompt")})}function initManifest(){$.ajax({url:ZCGlobal.appurl+"manifest",method:"GET",async:false,success:function(D){var C=JSON.stringify(D);var B=new Blob([C],{type:"application/json"});var A=URL.createObjectURL(B);$("#zcManifest").attr("href",A)},error:function(C,A,B){Console.log("Error while Manifest initialization"+B)}})}function initOfflineListener(){window.addEventListener("offline",function(){var A=ZCGlobal.appurl;if(ZCGlobal.portalType!=undefined){if(ZCGlobal.portalType=="CustomDomain"){urlParam=""}else{if(ZCGlobal.portalType=="DefaultPortalDomain"){urlParam="/portal/"+ZCGlobal.appLinkName+"/"}}A=window.location.origin+"/"+urlParam}if(!navigator.onLine){window.location.href=A}})}function openAppBannerTimeOut(C){var E="https://play.google.com/store/apps/details?id=com.zoho.creator.a";var B="https://itunes.apple.com/us/app/zoho-creator/id692005267?mt=8";var A="ZohoCreator:";if(C){E="https://play.google.com/store/apps/details?id=com.zoho.creator.portal";B="https://apps.apple.com/us/app/customer-portal-zoho-creator/id1146710936";A="zohocreatorportal:"}var D=window.navigator.userAgent.toUpperCase();if(D.indexOf("ANDROID")!=-1){LIB._startLoading();setTimeout(function(){LIB._stopLoading();window.location=E},3000)}else{if(D.indexOf("IPHONE")!=-1){LIB._startLoading();setTimeout(function(){LIB._stopLoading();window.location=B},3000)}}window.location=(window.location.href.replace(window.location.protocol,A))}function initMobile(){initSW();initOfflineListener();if(isStandalone()){$("#zc-header-top-bar-wrapper").show();$(".zc-mobile-home-button").hide()}}function isEdgeBrowser(){var A=navigator.userAgent;if(A.indexOf("Edge/")!=-1){return true}return false}function goToMobileSite(E,C,F){var D=document.domain;var B=D.substring(0,D.lastIndexOf("."));var A=D.substring(B.lastIndexOf("."),D.length);setCookie(E+"_isalwaysfullsite","false",null,A,"/");window.location.href=window.location.protocol+"//"+ZCGlobal.oldliveserver+"/mobile/"+C+"/"+F+"/"}function initWalkThrough(){if(!isNull(getCookie("zc-walkthroughstep"))){var A=parseInt(getCookie("zc-walkthroughstep"));if(A>=17&&A<=24){if(getConfig().useCompression){if(!walkthroughCSSFlag){loadCSS(ZCPath.appeditCss.walkthroughCss);walkthroughCSSFlag=true}require(["walkthrough"],function(){var C=new WalkThrough();C.proceed(A)})}else{var B=new WalkThrough();B.proceed(A)}}}}function isSandBoxedIframe(A){if(A.frameElement!=null){if($(window.frameElement).attr("sandbox")!==undefined){return true}else{return false}}try{document.domain=document.domain;return false}catch(B){if(B instanceof DOMException&&B.code==DOMException.SECURITY_ERR){return true}Console.error(B);return false}}function getScriptCloseType(A){return(A.indexOf("dialog.closeAll")!=-1)?ScriptConstants.CLOSE_ALL_SCRIPT:(A.indexOf("dialog.close")!=-1)||(A.indexOf("page.close")!=-1)?ScriptConstants.CLOSE_SCRIPT:ScriptConstants.NO_CLOSE_SCRIPT}function closeScriptHandle(D,C){var A=false;C=C!=undefined?C:false;switch(getScriptCloseType(D)){case ScriptConstants.NO_CLOSE_SCRIPT:A=false;break;case ScriptConstants.CLOSE_SCRIPT:(C?"":closeFirstPopup());A=true;break;case ScriptConstants.CLOSE_ALL_SCRIPT:while(1){var B=$zcmodal.getTopPopup();if(B==undefined){A=true;break}if(!isModalFullScreenPopup(B)){B.close()}else{A=true;break}}break}return A}function isModalFullScreenPopup(A){return $(A.$overlay).hasClass("fullscreen")}function FormURL(A){var B=A.getFormLinkName();this.getPrefix=function(C){return GlobalUrls.getAppUrlPrefix(A.getAppLinkName(),C)+"/"};this.getForm=function(){return this.getPrefix()+"form/"+B};this.getSubmitURL=function(){return this.getForm()+"/"+FormAccessType.getURL(A.getAccessType())};this.getCaptchaURL=function(){return this.getPrefix()+"form/"+B+"/getcaptcha"};this.getPaymentCallbackURL=function(C,G,E,D){var F=E?"form-perma":D?"form-embed":"form";return this.getPrefix()+F+"/"+B+"/payment/"+C+"/"+G};this.getPaymentPollURL=function(){var D=A.isPerma()?"form-perma":A.isEmbed()?"form-embed":"form";var C=this.getPrefix()+D+"/"+B+"/payment/poll";if(!LIB._isNull(A.getPrivateLink())&&(A.isPerma()||A.isEmbed())){C+="?privatelink="+A.getPrivateLink()}return C};this.getRecordSuccessURL=function(C){return this.getPrefix(true)+B+"/record-success/"+C+"/"};this.getNotificationUrl=function(C,G,E,D){var H=GlobalUrls.getAppUrlPrefix()+"/";var F=E?"form-perma":D?"form-embed":"form";return H+F+"/"+B+"/payment/"+C+"/"+G+"/"+ZCGlobal.loginName+"/notification"}}function FieldURL(B,A){FormURL.call(this,A);var C=B.isSubformField()?B.getActualLabelName():B.getLabelName();this.getUploadURL=function(){return this.getForm()+"/uploadFile/"+C};this.getDeleteFileURL=function(){return this.getForm()+"/deleteFile/"+C};this.getRelDataURL=function(){if(B.isIntegrationField()){return this.getForm()+"/integdata/"+C}else{if(B.getComponentType()==FieldType.POPUP_SINGLE||B.getComponentType()==FieldType.EXTERNAL_FIELD){return this.getForm()+"/extdata/"+C}else{if(B.isFromReport()){return this.getForm()+"/reportreldata/"+C}}}return this.getForm()+"/reldata/"+C};this.getRelatedPrefix=function(){return GlobalUrls.getAppUrlPrefix(B.getRefProdAppName())};this.getRelatedForm=function(){return this.getRelatedPrefix()+"/form/"+B.getRefFormLinkName()+"?formAccessType=5"};this.getZiaCalcURL=function(){return this.getForm()+"/calculatezia"}}createPrototype(FieldURL,FormURL.prototype);function ReportURL(C){var E=C.isSavedReport()?C.getParentReportLinkName():C.getReportLinkName();var D=C.getFormLinkName();var A=C.getAppLinkName();var B=C.getPrivateLink()==undefined?"":C.getPrivateLink();this.getPrefix=function(G){var F=G?"/export/":"/";return ZCGlobal.serverPrefix+F+GlobalUrls.getAppUrlFragment(C.getAppLinkName(),G)+"/"};this.getReport=function(){return this.getPrefix()+"report/"+E};this.getRecordFetchUrl=function(){return this.getPrefix()+"getReport/"+E};this.getShowReport=function(F){return this.getPrefix()+"report/"+F};this.getPublishReport=function(){var G=C.getIsPerma()?"report-perma-json":C.getIsEmbed()?"report-embed-json":"report";var F=this.getPrefix()+G+"/"+E;return F};this.getForm=function(){return this.getPrefix()+"form/"+D};this.getBulkEdit=function(){return this.getForm()+"/bulkedit"};this.getRecEdit=function(F){return this.getPrefix()+"/"+D+"/record-edit/"+E+"/"+F+"/"+B};this.getRecPrint=function(){return this.getPrefix()+"record-print/"+E};this.getRecSummary=function(){return this.getPrefix()+"record-summary/"+E};this.getApprovalAction=function(){return this.getPrefix()+"approval-action/"+E};this.getPrint=function(){return this.getPrefix(true)+"report-print/"+E};this.getExport=function(F){return this.getPrefix(true)+F+"/"+E};this.getViewRecord=function(){if(ZCGlobal.isPreviewAction){return ZCGlobal.serverPrefix+"/preview/"+GlobalUrls.getAppUrlFragment(C.getAppLinkName())+"/summary/"+E}return this.getPrefix()+"summary/"+E};this.getPermaViewRecord=function(){return this.getPrefix()+"summary-perma/"+E};this.getEmbedViewRecord=function(){return this.getPrefix()+"summary-embed/"+E};this.getLinkedViewRecord=function(F){return ZCGlobal.serverPrefix+"/"+ZCGlobal.scopeName+ZCGlobal.envUrlFragment+"/"+F};this.constructReportUrl=function(G,F){return ZCGlobal.serverPrefix+"/"+ZCGlobal.scopeName+ZCGlobal.envUrlFragment+"/"+G+"/report/"+F};this.getCustomAction=function(){return this.getPrefix()+"customworkflow/"+E};this.getRelDataURL=function(H,F,G){if(G.isIntegrationField()){return this.getForm()+"/integdata/"+H}else{if(F){return this.getForm()+"/extdata/"+H}}return this.getForm()+"/reldata/"+H};this.getTableRecordCountURL=function(F){return this.getPrefix()+"report/"+E+"/getTableRecordCount"};this.getSharedAnalyticsURL=function(){return this.getPrefix()+"sharedanalytics/"+E+"/showReportConfiguration"};this.getRecordSummaryTemplate=function(){return this.getServerPrefix(true)+"/record-summary-print/"+E+"/"};this.getReportSearchOptionURL=function(){var F=this.getPrefix()+"report/"+E+"/getSearchOptions";if(!LIB._isNull(C.getPrivateLink())){F+="?privatelink="+C.getPrivateLink()}return F};this.getDecryptUrl=function(){return this.getReport()+"/getDecryptedFieldValue"};this.exportRecSummaryPDF=function(F){return this.getServerPrefix(true)+"/report/"+E+"/exportRecSummary?recLinkID="+F};this.getServerPrefix=function(F){return ZCGlobal.serverPrefix+"/"+GlobalUrls.getAppUrlFragment(C.getAppLinkName(),F)}}function RecordURL(B,A){ReportURL.call(this,A)}createPrototype(RecordURL,ReportURL.prototype);function PageURL(B){var C=B.getPageLinkName();var A=B.getPrivateLink();this.getAppUrl=function(D){return GlobalUrls.getAppUrlPrefix(D)+"/"};this.getPrintUrl=function(){return ZCGlobal.serverPrefix+"/export/"+GlobalUrls.getAppUrlFragment()+"/print/"+C+"/"+((B.isExternal()&&!LIB._isNull(A))?A+"/":"")};this.getPdfUrl=function(){return ZCGlobal.serverPrefix+"/export/"+GlobalUrls.getAppUrlFragment()+"/pdf/"+C+"/"+((B.isExternal()&&!LIB._isNull(A))?A+"/":"")};this.getPrintToPdfUrl=function(){return ZCGlobal.serverPrefix+"/export/"+GlobalUrls.getAppUrlFragment()+"/print-pdf/"+C+"/"+((B.isExternal()&&!LIB._isNull(A))?A+"/":"")};this.getCompUrl=function(D){var E=D.elemType=="form"?"form":"report";E+="-embed";return GlobalUrls.getAppUrlPrefix(D.appLinkName)+"/"+E+"/"+D.compLinkName+"/"}}function ApprovalURL(A){this.getPrefix=function(){return GlobalUrls.getAppUrlPrefix()+"/"};this.getApprovalAction=function(){return this.getPrefix()+"approval-action"}}function AppURL(A){var B="adminpaneloperation";this.getAppUrl=function(C){return GlobalUrls.getAppUrlPrefix()+"/"};this.getSetDefaultThemeUrl=function(){return this.getAppUrl()+B+"/setDefaultTheme"};this.getLoadIconsUrl=function(){return this.getAppUrl()+B+"/loadIcons"};this.getSaveIconsUrl=function(){return this.getAppUrl()+B+"/saveIcons"};this.getRemoveIconsUrl=function(){return this.getAppUrl()+B+"/removeIcons"};this.getUpdateFeatureUrl=function(){return this.getAppUrl()+B+"/updateLiveFeature"};this.getSwitchForUsersUrl=function(){return this.getAppUrl()+B+"/switchLiveModeForUsers"};this.getEnvironmentsPageUrl=function(){return ZCGlobal.appbuilderserverprefix+"/userhome/"+ZCGlobal.scopeName+"/admindashboard#/environments"}}var ZCSecurity=new function(){this.isURLXSSVulnerable=function(E){if(E){var B=E.trim().toLowerCase();var D=document.createElement("a");D.href=B;var A=D.protocol;if(A.indexOf("javascript:")===0||A.indexOf("vbscript:")===0||A.indexOf("data:")===0){return true}B=B.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"').replace(/'/g,"'");try{var F=decodeURIComponent(ZCSecurity.safariCheck(B)).replace(/[^\w:]/g,"").toLowerCase()}catch(C){}if(F.indexOf("javascript:")===0||F.indexOf("vbscript:")===0||F.indexOf("data:")===0){return true}}return false};this.isValidURL=function(B){try{if(B){B=B.trim().toLowerCase();if(B.match("^(#|www|\\/|https?:|ftp:|mailto:)")){return true}}}catch(A){return false}return false};this.safariCheck=function(A){return A.replace(/&([#\w]+);/g,function(C,B){if(B==="colon"){return":"}if(B.charAt(0)==="#"){return B.charAt(1)==="x"?String.fromCharCode(parseInt(B.substring(2),16)):String.fromCharCode(+B.substring(1))}return""})}}();var Constants=new function(){this.DEVICE_WEB=1;this.DEVICE_PHONE=2;this.REC_SUMMARY_TABLE_LAYOUT=-1;this.REC_SUMMARY_LINEAR_LAYOUT=-2;this.OTHER_OPTION="-otherVal-";this.GRID_SUBFORM=1;this.POPUP_SUBFORM=2;this.COUNTRY_CODES={"1":["us","ca","do","pr"],"7":["ru","kz"],"20":["eg"],"27":["za"],"30":["gr"],"31":["nl"],"32":["be"],"33":["fr"],"34":["es"],"36":["hu"],"39":["it","va"],"40":["ro"],"41":["ch"],"43":["at"],"44":["gb","gg","im","je"],"45":["dk"],"46":["se"],"47":["no","sj"],"48":["pl"],"49":["de"],"51":["pe"],"52":["mx"],"53":["cu"],"54":["ar"],"55":["br"],"56":["cl"],"57":["co"],"58":["ve"],"60":["my"],"61":["au","cc","cx"],"62":["id"],"63":["ph"],"64":["nz"],"65":["sg"],"66":["th"],"81":["jp"],"82":["kr"],"84":["vn"],"86":["cn"],"90":["tr"],"91":["in"],"92":["pk"],"93":["af"],"94":["lk"],"95":["mm"],"98":["ir"],"211":["ss"],"212":["ma","eh"],"213":["dz"],"216":["tn"],"218":["ly"],"220":["gm"],"221":["sn"],"222":["mr"],"223":["ml"],"224":["gn"],"225":["ci"],"226":["bf"],"227":["ne"],"228":["tg"],"229":["bj"],"230":["mu"],"231":["lr"],"232":["sl"],"233":["gh"],"234":["ng"],"235":["td"],"236":["cf"],"237":["cm"],"238":["cv"],"239":["st"],"240":["gq"],"241":["ga"],"242":["cg"],"243":["cd"],"244":["ao"],"245":["gw"],"246":["io"],"248":["sc"],"249":["sd"],"250":["rw"],"251":["et"],"252":["so"],"253":["dj"],"254":["ke"],"255":["tz"],"256":["ug"],"257":["bi"],"258":["mz"],"260":["zm"],"261":["mg"],"262":["re","yt"],"263":["zw"],"264":["na"],"265":["mw"],"266":["ls"],"267":["bw"],"268":["sz"],"269":["km"],"290":["sh"],"291":["er"],"297":["aw"],"298":["fo"],"299":["gl"],"350":["gi"],"351":["pt"],"352":["lu"],"353":["ie"],"354":["is"],"355":["al"],"356":["mt"],"357":["cy"],"358":["fi","ax"],"359":["bg"],"370":["lt"],"371":["lv"],"372":["ee"],"373":["md"],"374":["am"],"375":["by"],"376":["ad"],"377":["mc"],"378":["sm"],"380":["ua"],"381":["rs"],"382":["me"],"385":["hr"],"386":["si"],"387":["ba"],"389":["mk"],"420":["cz"],"421":["sk"],"423":["li"],"500":["fk"],"501":["bz"],"502":["gt"],"503":["sv"],"504":["hn"],"505":["ni"],"506":["cr"],"507":["pa"],"508":["pm"],"509":["ht"],"590":["gp","bl","mf"],"591":["bo"],"592":["gy"],"593":["ec"],"594":["gf"],"595":["py"],"596":["mq"],"597":["sr"],"598":["uy"],"599":["cw","bq"],"670":["tl"],"672":["nf"],"673":["bn"],"674":["nr"],"675":["pg"],"676":["to"],"677":["sb"],"678":["vu"],"679":["fj"],"680":["pw"],"681":["wf"],"682":["ck"],"683":["nu"],"685":["ws"],"686":["ki"],"687":["nc"],"688":["tv"],"689":["pf"],"690":["tk"],"691":["fm"],"692":["mh"],"850":["kp"],"852":["hk"],"853":["mo"],"855":["kh"],"856":["la"],"880":["bd"],"886":["tw"],"960":["mv"],"961":["lb"],"962":["jo"],"963":["sy"],"964":["iq"],"965":["kw"],"966":["sa"],"967":["ye"],"968":["om"],"970":["ps"],"971":["ae"],"972":["il"],"973":["bh"],"974":["qa"],"975":["bt"],"976":["mn"],"977":["np"],"992":["tj"],"993":["tm"],"994":["az"],"995":["ge"],"996":["kg"],"998":["uz"],"1204":["ca"],"1226":["ca"],"1236":["ca"],"1242":["bs"],"1246":["bb"],"1249":["ca"],"1250":["ca"],"1264":["ai"],"1268":["ag"],"1284":["vg"],"1289":["ca"],"1306":["ca"],"1340":["vi"],"1343":["ca"],"1345":["ky"],"1365":["ca"],"1387":["ca"],"1403":["ca"],"1416":["ca"],"1418":["ca"],"1431":["ca"],"1437":["ca"],"1438":["ca"],"1441":["bm"],"1450":["ca"],"1473":["gd"],"1506":["ca"],"1514":["ca"],"1519":["ca"],"1548":["ca"],"1579":["ca"],"1581":["ca"],"1587":["ca"],"1604":["ca"],"1613":["ca"],"1639":["ca"],"1647":["ca"],"1649":["tc"],"1664":["ms"],"1670":["mp"],"1671":["gu"],"1672":["ca"],"1684":["as"],"1705":["ca"],"1709":["ca"],"1721":["sx"],"1742":["ca"],"1758":["lc"],"1767":["dm"],"1778":["ca"],"1780":["ca"],"1782":["ca"],"1784":["vc"],"1787":["pr"],"1807":["ca"],"1809":["do"],"1819":["ca"],"1825":["ca"],"1829":["do"],"1849":["do"],"1867":["ca"],"1868":["tt"],"1869":["kn"],"1873":["ca"],"1876":["jm"],"1902":["ca"],"1905":["ca"],"1939":["pr"]};this.COUNTRY_DATA=[{name:"Afghanistan",iso2:"af",dialCode:"93",priority:0,areaCodes:null,id:"af",text:"Afghanistan"},{name:"Albania",iso2:"al",dialCode:"355",priority:0,areaCodes:null,id:"al",text:"Albania"},{name:"Algeria",iso2:"dz",dialCode:"213",priority:0,areaCodes:null,id:"dz",text:"Algeria"},{name:"American Samoa",iso2:"as",dialCode:"1684",priority:0,areaCodes:null,id:"as",text:"American Samoa"},{name:"Andorra",iso2:"ad",dialCode:"376",priority:0,areaCodes:null,id:"ad",text:"Andorra"},{name:"Angola",iso2:"ao",dialCode:"244",priority:0,areaCodes:null,id:"ao",text:"Angola"},{name:"Anguilla",iso2:"ai",dialCode:"1264",priority:0,areaCodes:null,id:"ai",text:"Anguilla"},{name:"Antigua and Barbuda",iso2:"ag",dialCode:"1268",priority:0,areaCodes:null,id:"ag",text:"Antigua and Barbuda"},{name:"Argentina",iso2:"ar",dialCode:"54",priority:0,areaCodes:null,id:"ar",text:"Argentina"},{name:"Armenia",iso2:"am",dialCode:"374",priority:0,areaCodes:null,id:"am",text:"Armenia"},{name:"Aruba",iso2:"aw",dialCode:"297",priority:0,areaCodes:null,id:"aw",text:"Aruba"},{name:"Australia",iso2:"au",dialCode:"61",priority:0,areaCodes:null,id:"au",text:"Australia"},{name:"Austria",iso2:"at",dialCode:"43",priority:0,areaCodes:null,id:"at",text:"Austria"},{name:"Azerbaijan",iso2:"az",dialCode:"994",priority:0,areaCodes:null,id:"az",text:"Azerbaijan"},{name:"Bahamas",iso2:"bs",dialCode:"1242",priority:0,areaCodes:null,id:"bs",text:"Bahamas"},{name:"Bahrain",iso2:"bh",dialCode:"973",priority:0,areaCodes:null,id:"bh",text:"Bahrain"},{name:"Bangladesh",iso2:"bd",dialCode:"880",priority:0,areaCodes:null,id:"bd",text:"Bangladesh"},{name:"Barbados",iso2:"bb",dialCode:"1246",priority:0,areaCodes:null,id:"bb",text:"Barbados"},{name:"Belarus",iso2:"by",dialCode:"375",priority:0,areaCodes:null,id:"by",text:"Belarus"},{name:"Belgium",iso2:"be",dialCode:"32",priority:0,areaCodes:null,id:"be",text:"Belgium"},{name:"Belize",iso2:"bz",dialCode:"501",priority:0,areaCodes:null,id:"bz",text:"Belize"},{name:"Benin",iso2:"bj",dialCode:"229",priority:0,areaCodes:null,id:"bj",text:"Benin"},{name:"Bermuda",iso2:"bm",dialCode:"1441",priority:0,areaCodes:null,id:"bm",text:"Bermuda"},{name:"Bhutan",iso2:"bt",dialCode:"975",priority:0,areaCodes:null,id:"bt",text:"Bhutan"},{name:"Bolivia",iso2:"bo",dialCode:"591",priority:0,areaCodes:null,id:"bo",text:"Bolivia"},{name:"Bosnia and Herzegovina",iso2:"ba",dialCode:"387",priority:0,areaCodes:null,id:"ba",text:"Bosnia and Herzegovina"},{name:"Botswana",iso2:"bw",dialCode:"267",priority:0,areaCodes:null,id:"bw",text:"Botswana"},{name:"Brazil",iso2:"br",dialCode:"55",priority:0,areaCodes:null,id:"br",text:"Brazil"},{name:"British Indian Ocean Territory",iso2:"io",dialCode:"246",priority:0,areaCodes:null,id:"io",text:"British Indian Ocean Territory"},{name:"British Virgin Islands",iso2:"vg",dialCode:"1284",priority:0,areaCodes:null,id:"vg",text:"British Virgin Islands"},{name:"Brunei",iso2:"bn",dialCode:"673",priority:0,areaCodes:null,id:"bn",text:"Brunei"},{name:"Bulgaria",iso2:"bg",dialCode:"359",priority:0,areaCodes:null,id:"bg",text:"Bulgaria"},{name:"Burkina Faso",iso2:"bf",dialCode:"226",priority:0,areaCodes:null,id:"bf",text:"Burkina Faso"},{name:"Burundi",iso2:"bi",dialCode:"257",priority:0,areaCodes:null,id:"bi",text:"Burundi"},{name:"Cambodia",iso2:"kh",dialCode:"855",priority:0,areaCodes:null,id:"kh",text:"Cambodia"},{name:"Cameroon",iso2:"cm",dialCode:"237",priority:0,areaCodes:null,id:"cm",text:"Cameroon"},{name:"Canada",iso2:"ca",dialCode:"1",priority:1,areaCodes:["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"],id:"ca",text:"Canada"},{name:"Cape Verde",iso2:"cv",dialCode:"238",priority:0,areaCodes:null,id:"cv",text:"Cape Verde"},{name:"Caribbean Netherlands",iso2:"bq",dialCode:"599",priority:1,areaCodes:null,id:"bq",text:"Caribbean Netherlands"},{name:"Cayman Islands",iso2:"ky",dialCode:"1345",priority:0,areaCodes:null,id:"ky",text:"Cayman Islands"},{name:"Central African Republic",iso2:"cf",dialCode:"236",priority:0,areaCodes:null,id:"cf",text:"Central African Republic"},{name:"Chad",iso2:"td",dialCode:"235",priority:0,areaCodes:null,id:"td",text:"Chad"},{name:"Chile",iso2:"cl",dialCode:"56",priority:0,areaCodes:null,id:"cl",text:"Chile"},{name:"China",iso2:"cn",dialCode:"86",priority:0,areaCodes:null,id:"cn",text:"China"},{name:"Christmas Island",iso2:"cx",dialCode:"61",priority:2,areaCodes:null,id:"cx",text:"Christmas Island"},{name:"Cocos",iso2:"cc",dialCode:"61",priority:1,areaCodes:null,id:"cc",text:"Cocos"},{name:"Colombia",iso2:"co",dialCode:"57",priority:0,areaCodes:null,id:"co",text:"Colombia"},{name:"Comoros",iso2:"km",dialCode:"269",priority:0,areaCodes:null,id:"km",text:"Comoros"},{name:"Democratic Republic of the Congo",iso2:"cd",dialCode:"243",priority:0,areaCodes:null,id:"cd",text:"Democratic Republic of the Congo"},{name:"Republic of the Congo",iso2:"cg",dialCode:"242",priority:0,areaCodes:null,id:"cg",text:"Republic of the Congo"},{name:"Cook Islands",iso2:"ck",dialCode:"682",priority:0,areaCodes:null,id:"ck",text:"Cook Islands"},{name:"Costa Rica",iso2:"cr",dialCode:"506",priority:0,areaCodes:null,id:"cr",text:"Costa Rica"},{name:"Ivory Coast",iso2:"ci",dialCode:"225",priority:0,areaCodes:null,id:"ci",text:"Ivory Coast"},{name:"Croatia",iso2:"hr",dialCode:"385",priority:0,areaCodes:null,id:"hr",text:"Croatia"},{name:"Cuba",iso2:"cu",dialCode:"53",priority:0,areaCodes:null,id:"cu",text:"Cuba"},{name:"Cura√ßao",iso2:"cw",dialCode:"599",priority:0,areaCodes:null,id:"cw",text:"Cura√ßao"},{name:"Cyprus",iso2:"cy",dialCode:"357",priority:0,areaCodes:null,id:"cy",text:"Cyprus"},{name:"Czech Republic",iso2:"cz",dialCode:"420",priority:0,areaCodes:null,id:"cz",text:"Czech Republic"},{name:"Denmark",iso2:"dk",dialCode:"45",priority:0,areaCodes:null,id:"dk",text:"Denmark"},{name:"Djibouti",iso2:"dj",dialCode:"253",priority:0,areaCodes:null,id:"dj",text:"Djibouti"},{name:"Dominica",iso2:"dm",dialCode:"1767",priority:0,areaCodes:null,id:"dm",text:"Dominica"},{name:"Dominican Republic",iso2:"do",dialCode:"1",priority:2,areaCodes:["809","829","849"],id:"do",text:"Dominican Republic"},{name:"Ecuador",iso2:"ec",dialCode:"593",priority:0,areaCodes:null,id:"ec",text:"Ecuador"},{name:"Egypt",iso2:"eg",dialCode:"20",priority:0,areaCodes:null,id:"eg",text:"Egypt"},{name:"El Salvador",iso2:"sv",dialCode:"503",priority:0,areaCodes:null,id:"sv",text:"El Salvador"},{name:"Equatorial Guinea",iso2:"gq",dialCode:"240",priority:0,areaCodes:null,id:"gq",text:"Equatorial Guinea"},{name:"Eritrea",iso2:"er",dialCode:"291",priority:0,areaCodes:null,id:"er",text:"Eritrea"},{name:"Estonia",iso2:"ee",dialCode:"372",priority:0,areaCodes:null,id:"ee",text:"Estonia"},{name:"Ethiopia",iso2:"et",dialCode:"251",priority:0,areaCodes:null,id:"et",text:"Ethiopia"},{name:"Falkland Islands",iso2:"fk",dialCode:"500",priority:0,areaCodes:null,id:"fk",text:"Falkland Islands"},{name:"Faroe Islands",iso2:"fo",dialCode:"298",priority:0,areaCodes:null,id:"fo",text:"Faroe Islands"},{name:"Fiji",iso2:"fj",dialCode:"679",priority:0,areaCodes:null,id:"fj",text:"Fiji"},{name:"Finland",iso2:"fi",dialCode:"358",priority:0,areaCodes:null,id:"fi",text:"Finland"},{name:"France",iso2:"fr",dialCode:"33",priority:0,areaCodes:null,id:"fr",text:"France"},{name:"French Guiana",iso2:"gf",dialCode:"594",priority:0,areaCodes:null,id:"gf",text:"French Guiana"},{name:"French Polynesia",iso2:"pf",dialCode:"689",priority:0,areaCodes:null,id:"pf",text:"French Polynesia"},{name:"Gabon",iso2:"ga",dialCode:"241",priority:0,areaCodes:null,id:"ga",text:"Gabon"},{name:"Gambia",iso2:"gm",dialCode:"220",priority:0,areaCodes:null,id:"gm",text:"Gambia"},{name:"Georgia",iso2:"ge",dialCode:"995",priority:0,areaCodes:null,id:"ge",text:"Georgia"},{name:"Germany",iso2:"de",dialCode:"49",priority:0,areaCodes:null,id:"de",text:"Germany"},{name:"Ghana",iso2:"gh",dialCode:"233",priority:0,areaCodes:null,id:"gh",text:"Ghana"},{name:"Gibraltar",iso2:"gi",dialCode:"350",priority:0,areaCodes:null,id:"gi",text:"Gibraltar"},{name:"Greece",iso2:"gr",dialCode:"30",priority:0,areaCodes:null,id:"gr",text:"Greece"},{name:"Greenland",iso2:"gl",dialCode:"299",priority:0,areaCodes:null,id:"gl",text:"Greenland"},{name:"Grenada",iso2:"gd",dialCode:"1473",priority:0,areaCodes:null,id:"gd",text:"Grenada"},{name:"Guadeloupe",iso2:"gp",dialCode:"590",priority:0,areaCodes:null,id:"gp",text:"Guadeloupe"},{name:"Guam",iso2:"gu",dialCode:"1671",priority:0,areaCodes:null,id:"gu",text:"Guam"},{name:"Guatemala",iso2:"gt",dialCode:"502",priority:0,areaCodes:null,id:"gt",text:"Guatemala"},{name:"Guernsey",iso2:"gg",dialCode:"44",priority:1,areaCodes:null,id:"gg",text:"Guernsey"},{name:"Guinea",iso2:"gn",dialCode:"224",priority:0,areaCodes:null,id:"gn",text:"Guinea"},{name:"Guinea-Bissau",iso2:"gw",dialCode:"245",priority:0,areaCodes:null,id:"gw",text:"Guinea-Bissau"},{name:"Guyana",iso2:"gy",dialCode:"592",priority:0,areaCodes:null,id:"gy",text:"Guyana"},{name:"Haiti",iso2:"ht",dialCode:"509",priority:0,areaCodes:null,id:"ht",text:"Haiti"},{name:"Honduras",iso2:"hn",dialCode:"504",priority:0,areaCodes:null,id:"hn",text:"Honduras"},{name:"Hong Kong",iso2:"hk",dialCode:"852",priority:0,areaCodes:null,id:"hk",text:"Hong Kong"},{name:"Hungary",iso2:"hu",dialCode:"36",priority:0,areaCodes:null,id:"hu",text:"Hungary"},{name:"Iceland",iso2:"is",dialCode:"354",priority:0,areaCodes:null,id:"is",text:"Iceland"},{name:"India",iso2:"in",dialCode:"91",priority:0,areaCodes:null,id:"in",text:"India"},{name:"Indonesia",iso2:"id",dialCode:"62",priority:0,areaCodes:null,id:"id",text:"Indonesia"},{name:"Iran",iso2:"ir",dialCode:"98",priority:0,areaCodes:null,id:"ir",text:"Iran"},{name:"Iraq",iso2:"iq",dialCode:"964",priority:0,areaCodes:null,id:"iq",text:"Iraq"},{name:"Ireland",iso2:"ie",dialCode:"353",priority:0,areaCodes:null,id:"ie",text:"Ireland"},{name:"Isle of Man",iso2:"im",dialCode:"44",priority:2,areaCodes:null,id:"im",text:"Isle of Man"},{name:"Israel",iso2:"il",dialCode:"972",priority:0,areaCodes:null,id:"il",text:"Israel"},{name:"Italy",iso2:"it",dialCode:"39",priority:0,areaCodes:null,id:"it",text:"Italy"},{name:"Jamaica",iso2:"jm",dialCode:"1876",priority:0,areaCodes:null,id:"jm",text:"Jamaica"},{name:"Japan",iso2:"jp",dialCode:"81",priority:0,areaCodes:null,id:"jp",text:"Japan"},{name:"Jersey",iso2:"je",dialCode:"44",priority:3,areaCodes:null,id:"je",text:"Jersey"},{name:"Jordan",iso2:"jo",dialCode:"962",priority:0,areaCodes:null,id:"jo",text:"Jordan"},{name:"Kazakhstan",iso2:"kz",dialCode:"7",priority:1,areaCodes:null,id:"kz",text:"Kazakhstan"},{name:"Kenya",iso2:"ke",dialCode:"254",priority:0,areaCodes:null,id:"ke",text:"Kenya"},{name:"Kiribati",iso2:"ki",dialCode:"686",priority:0,areaCodes:null,id:"ki",text:"Kiribati"},{name:"Kuwait",iso2:"kw",dialCode:"965",priority:0,areaCodes:null,id:"kw",text:"Kuwait"},{name:"Kyrgyzstan",iso2:"kg",dialCode:"996",priority:0,areaCodes:null,id:"kg",text:"Kyrgyzstan"},{name:"Laos",iso2:"la",dialCode:"856",priority:0,areaCodes:null,id:"la",text:"Laos"},{name:"Latvia",iso2:"lv",dialCode:"371",priority:0,areaCodes:null,id:"lv",text:"Latvia"},{name:"Lebanon",iso2:"lb",dialCode:"961",priority:0,areaCodes:null,id:"lb",text:"Lebanon"},{name:"Lesotho",iso2:"ls",dialCode:"266",priority:0,areaCodes:null,id:"ls",text:"Lesotho"},{name:"Liberia",iso2:"lr",dialCode:"231",priority:0,areaCodes:null,id:"lr",text:"Liberia"},{name:"Libya",iso2:"ly",dialCode:"218",priority:0,areaCodes:null,id:"ly",text:"Libya"},{name:"Liechtenstein",iso2:"li",dialCode:"423",priority:0,areaCodes:null,id:"li",text:"Liechtenstein"},{name:"Lithuania",iso2:"lt",dialCode:"370",priority:0,areaCodes:null,id:"lt",text:"Lithuania"},{name:"Luxembourg",iso2:"lu",dialCode:"352",priority:0,areaCodes:null,id:"lu",text:"Luxembourg"},{name:"Macau",iso2:"mo",dialCode:"853",priority:0,areaCodes:null,id:"mo",text:"Macau"},{name:"Macedonia",iso2:"mk",dialCode:"389",priority:0,areaCodes:null,id:"mk",text:"Macedonia"},{name:"Madagascar",iso2:"mg",dialCode:"261",priority:0,areaCodes:null,id:"mg",text:"Madagascar"},{name:"Malawi",iso2:"mw",dialCode:"265",priority:0,areaCodes:null,id:"mw",text:"Malawi"},{name:"Malaysia",iso2:"my",dialCode:"60",priority:0,areaCodes:null,id:"my",text:"Malaysia"},{name:"Maldives",iso2:"mv",dialCode:"960",priority:0,areaCodes:null,id:"mv",text:"Maldives"},{name:"Mali",iso2:"ml",dialCode:"223",priority:0,areaCodes:null,id:"ml",text:"Mali"},{name:"Malta",iso2:"mt",dialCode:"356",priority:0,areaCodes:null,id:"mt",text:"Malta"},{name:"Marshall Islands",iso2:"mh",dialCode:"692",priority:0,areaCodes:null,id:"mh",text:"Marshall Islands"},{name:"Martinique",iso2:"mq",dialCode:"596",priority:0,areaCodes:null,id:"mq",text:"Martinique"},{name:"Mauritania",iso2:"mr",dialCode:"222",priority:0,areaCodes:null,id:"mr",text:"Mauritania"},{name:"Mauritius",iso2:"mu",dialCode:"230",priority:0,areaCodes:null,id:"mu",text:"Mauritius"},{name:"Mayotte",iso2:"yt",dialCode:"262",priority:1,areaCodes:null,id:"yt",text:"Mayotte"},{name:"Mexico",iso2:"mx",dialCode:"52",priority:0,areaCodes:null,id:"mx",text:"Mexico"},{name:"Micronesia",iso2:"fm",dialCode:"691",priority:0,areaCodes:null,id:"fm",text:"Micronesia"},{name:"Moldova",iso2:"md",dialCode:"373",priority:0,areaCodes:null,id:"md",text:"Moldova"},{name:"Monaco",iso2:"mc",dialCode:"377",priority:0,areaCodes:null,id:"mc",text:"Monaco"},{name:"Mongolia",iso2:"mn",dialCode:"976",priority:0,areaCodes:null,id:"mn",text:"Mongolia"},{name:"Montenegro",iso2:"me",dialCode:"382",priority:0,areaCodes:null,id:"me",text:"Montenegro"},{name:"Montserrat",iso2:"ms",dialCode:"1664",priority:0,areaCodes:null,id:"ms",text:"Montserrat"},{name:"Morocco",iso2:"ma",dialCode:"212",priority:0,areaCodes:null,id:"ma",text:"Morocco"},{name:"Mozambique",iso2:"mz",dialCode:"258",priority:0,areaCodes:null,id:"mz",text:"Mozambique"},{name:"Myanmar",iso2:"mm",dialCode:"95",priority:0,areaCodes:null,id:"mm",text:"Myanmar"},{name:"Namibia",iso2:"na",dialCode:"264",priority:0,areaCodes:null,id:"na",text:"Namibia"},{name:"Nauru",iso2:"nr",dialCode:"674",priority:0,areaCodes:null,id:"nr",text:"Nauru"},{name:"Nepal",iso2:"np",dialCode:"977",priority:0,areaCodes:null,id:"np",text:"Nepal"},{name:"Netherlands",iso2:"nl",dialCode:"31",priority:0,areaCodes:null,id:"nl",text:"Netherlands"},{name:"New Caledonia",iso2:"nc",dialCode:"687",priority:0,areaCodes:null,id:"nc",text:"New Caledonia"},{name:"New Zealand",iso2:"nz",dialCode:"64",priority:0,areaCodes:null,id:"nz",text:"New Zealand"},{name:"Nicaragua",iso2:"ni",dialCode:"505",priority:0,areaCodes:null,id:"ni",text:"Nicaragua"},{name:"Niger",iso2:"ne",dialCode:"227",priority:0,areaCodes:null,id:"ne",text:"Niger"},{name:"Nigeria",iso2:"ng",dialCode:"234",priority:0,areaCodes:null,id:"ng",text:"Nigeria"},{name:"Niue",iso2:"nu",dialCode:"683",priority:0,areaCodes:null,id:"nu",text:"Niue"},{name:"Norfolk Island",iso2:"nf",dialCode:"672",priority:0,areaCodes:null,id:"nf",text:"Norfolk Island"},{name:"North Korea",iso2:"kp",dialCode:"850",priority:0,areaCodes:null,id:"kp",text:"North Korea"},{name:"Northern Mariana Islands",iso2:"mp",dialCode:"1670",priority:0,areaCodes:null,id:"mp",text:"Northern Mariana Islands"},{name:"Norway",iso2:"no",dialCode:"47",priority:0,areaCodes:null,id:"no",text:"Norway"},{name:"Oman",iso2:"om",dialCode:"968",priority:0,areaCodes:null,id:"om",text:"Oman"},{name:"Pakistan",iso2:"pk",dialCode:"92",priority:0,areaCodes:null,id:"pk",text:"Pakistan"},{name:"Palau",iso2:"pw",dialCode:"680",priority:0,areaCodes:null,id:"pw",text:"Palau"},{name:"Palestine",iso2:"ps",dialCode:"970",priority:0,areaCodes:null,id:"ps",text:"Palestine"},{name:"Panama",iso2:"pa",dialCode:"507",priority:0,areaCodes:null,id:"pa",text:"Panama"},{name:"Papua New Guinea",iso2:"pg",dialCode:"675",priority:0,areaCodes:null,id:"pg",text:"Papua New Guinea"},{name:"Paraguay",iso2:"py",dialCode:"595",priority:0,areaCodes:null,id:"py",text:"Paraguay"},{name:"Peru",iso2:"pe",dialCode:"51",priority:0,areaCodes:null,id:"pe",text:"Peru"},{name:"Philippines",iso2:"ph",dialCode:"63",priority:0,areaCodes:null,id:"ph",text:"Philippines"},{name:"Poland",iso2:"pl",dialCode:"48",priority:0,areaCodes:null,id:"pl",text:"Poland"},{name:"Portugal",iso2:"pt",dialCode:"351",priority:0,areaCodes:null,id:"pt",text:"Portugal"},{name:"Puerto Rico",iso2:"pr",dialCode:"1",priority:3,areaCodes:["787","939"],id:"pr",text:"Puerto Rico"},{name:"Qatar",iso2:"qa",dialCode:"974",priority:0,areaCodes:null,id:"qa",text:"Qatar"},{name:"R√©union",iso2:"re",dialCode:"262",priority:0,areaCodes:null,id:"re",text:"R√©union"},{name:"Romania",iso2:"ro",dialCode:"40",priority:0,areaCodes:null,id:"ro",text:"Romania"},{name:"Russia",iso2:"ru",dialCode:"7",priority:0,areaCodes:null,id:"ru",text:"Russia"},{name:"Rwanda",iso2:"rw",dialCode:"250",priority:0,areaCodes:null,id:"rw",text:"Rwanda"},{name:"Saint Barth√©lemy",iso2:"bl",dialCode:"590",priority:1,areaCodes:null,id:"bl",text:"Saint Barth√©lemy"},{name:"Saint Helena",iso2:"sh",dialCode:"290",priority:0,areaCodes:null,id:"sh",text:"Saint Helena"},{name:"Saint Kitts and Nevis",iso2:"kn",dialCode:"1869",priority:0,areaCodes:null,id:"kn",text:"Saint Kitts and Nevis"},{name:"Saint Lucia",iso2:"lc",dialCode:"1758",priority:0,areaCodes:null,id:"lc",text:"Saint Lucia"},{name:"Saint Martin",iso2:"mf",dialCode:"590",priority:2,areaCodes:null,id:"mf",text:"Saint Martin"},{name:"Saint Pierre and Miquelon",iso2:"pm",dialCode:"508",priority:0,areaCodes:null,id:"pm",text:"Saint Pierre and Miquelon"},{name:"Saint Vincent and the Grenadines",iso2:"vc",dialCode:"1784",priority:0,areaCodes:null,id:"vc",text:"Saint Vincent and the Grenadines"},{name:"Samoa",iso2:"ws",dialCode:"685",priority:0,areaCodes:null,id:"ws",text:"Samoa"},{name:"San Marino",iso2:"sm",dialCode:"378",priority:0,areaCodes:null,id:"sm",text:"San Marino"},{name:"S√£o Tom√© and Pr√ncipe",iso2:"st",dialCode:"239",priority:0,areaCodes:null,id:"st",text:"S√£o Tom√© and Pr√ncipe"},{name:"Saudi Arabia",iso2:"sa",dialCode:"966",priority:0,areaCodes:null,id:"sa",text:"Saudi Arabia"},{name:"Senegal",iso2:"sn",dialCode:"221",priority:0,areaCodes:null,id:"sn",text:"Senegal"},{name:"Serbia",iso2:"rs",dialCode:"381",priority:0,areaCodes:null,id:"rs",text:"Serbia"},{name:"Seychelles",iso2:"sc",dialCode:"248",priority:0,areaCodes:null,id:"sc",text:"Seychelles"},{name:"Sierra Leone",iso2:"sl",dialCode:"232",priority:0,areaCodes:null,id:"sl",text:"Sierra Leone"},{name:"Singapore",iso2:"sg",dialCode:"65",priority:0,areaCodes:null,id:"sg",text:"Singapore"},{name:"Sint Maarten",iso2:"sx",dialCode:"1721",priority:0,areaCodes:null,id:"sx",text:"Sint Maarten"},{name:"Slovakia",iso2:"sk",dialCode:"421",priority:0,areaCodes:null,id:"sk",text:"Slovakia"},{name:"Slovenia",iso2:"si",dialCode:"386",priority:0,areaCodes:null,id:"si",text:"Slovenia"},{name:"Solomon Islands",iso2:"sb",dialCode:"677",priority:0,areaCodes:null,id:"sb",text:"Solomon Islands"},{name:"Somalia",iso2:"so",dialCode:"252",priority:0,areaCodes:null,id:"so",text:"Somalia"},{name:"South Africa",iso2:"za",dialCode:"27",priority:0,areaCodes:null,id:"za",text:"South Africa"},{name:"South Korea",iso2:"kr",dialCode:"82",priority:0,areaCodes:null,id:"kr",text:"South Korea"},{name:"South Sudan",iso2:"ss",dialCode:"211",priority:0,areaCodes:null,id:"ss",text:"South Sudan"},{name:"Spain",iso2:"es",dialCode:"34",priority:0,areaCodes:null,id:"es",text:"Spain"},{name:"Sri Lanka",iso2:"lk",dialCode:"94",priority:0,areaCodes:null,id:"lk",text:"Sri Lanka"},{name:"Sudan",iso2:"sd",dialCode:"249",priority:0,areaCodes:null,id:"sd",text:"Sudan"},{name:"Suriname",iso2:"sr",dialCode:"597",priority:0,areaCodes:null,id:"sr",text:"Suriname"},{name:"Svalbard and Jan Mayen",iso2:"sj",dialCode:"47",priority:1,areaCodes:null,id:"sj",text:"Svalbard and Jan Mayen"},{name:"Swaziland",iso2:"sz",dialCode:"268",priority:0,areaCodes:null,id:"sz",text:"Swaziland"},{name:"Sweden",iso2:"se",dialCode:"46",priority:0,areaCodes:null,id:"se",text:"Sweden"},{name:"Switzerland",iso2:"ch",dialCode:"41",priority:0,areaCodes:null,id:"ch",text:"Switzerland"},{name:"Syria",iso2:"sy",dialCode:"963",priority:0,areaCodes:null,id:"sy",text:"Syria"},{name:"Taiwan",iso2:"tw",dialCode:"886",priority:0,areaCodes:null,id:"tw",text:"Taiwan"},{name:"Tajikistan",iso2:"tj",dialCode:"992",priority:0,areaCodes:null,id:"tj",text:"Tajikistan"},{name:"Tanzania",iso2:"tz",dialCode:"255",priority:0,areaCodes:null,id:"tz",text:"Tanzania"},{name:"Thailand",iso2:"th",dialCode:"66",priority:0,areaCodes:null,id:"th",text:"Thailand"},{name:"Timor-Leste",iso2:"tl",dialCode:"670",priority:0,areaCodes:null,id:"tl",text:"Timor-Leste"},{name:"Togo",iso2:"tg",dialCode:"228",priority:0,areaCodes:null,id:"tg",text:"Togo"},{name:"Tokelau",iso2:"tk",dialCode:"690",priority:0,areaCodes:null,id:"tk",text:"Tokelau"},{name:"Tonga",iso2:"to",dialCode:"676",priority:0,areaCodes:null,id:"to",text:"Tonga"},{name:"Trinidad and Tobago",iso2:"tt",dialCode:"1868",priority:0,areaCodes:null,id:"tt",text:"Trinidad and Tobago"},{name:"Tunisia",iso2:"tn",dialCode:"216",priority:0,areaCodes:null,id:"tn",text:"Tunisia"},{name:"Turkey",iso2:"tr",dialCode:"90",priority:0,areaCodes:null,id:"tr",text:"Turkey"},{name:"Turkmenistan",iso2:"tm",dialCode:"993",priority:0,areaCodes:null,id:"tm",text:"Turkmenistan"},{name:"Turks and Caicos Islands",iso2:"tc",dialCode:"1649",priority:0,areaCodes:null,id:"tc",text:"Turks and Caicos Islands"},{name:"Tuvalu",iso2:"tv",dialCode:"688",priority:0,areaCodes:null,id:"tv",text:"Tuvalu"},{name:"U.S. Virgin Islands",iso2:"vi",dialCode:"1340",priority:0,areaCodes:null,id:"vi",text:"U.S. Virgin Islands"},{name:"Uganda",iso2:"ug",dialCode:"256",priority:0,areaCodes:null,id:"ug",text:"Uganda"},{name:"Ukraine",iso2:"ua",dialCode:"380",priority:0,areaCodes:null,id:"ua",text:"Ukraine"},{name:"United Arab Emirates",iso2:"ae",dialCode:"971",priority:0,areaCodes:null,id:"ae",text:"United Arab Emirates"},{name:"United Kingdom",iso2:"gb",dialCode:"44",priority:0,areaCodes:null,id:"gb",text:"United Kingdom"},{name:"United States",iso2:"us",dialCode:"1",priority:0,areaCodes:null,id:"us",text:"United States"},{name:"Uruguay",iso2:"uy",dialCode:"598",priority:0,areaCodes:null,id:"uy",text:"Uruguay"},{name:"Uzbekistan",iso2:"uz",dialCode:"998",priority:0,areaCodes:null,id:"uz",text:"Uzbekistan"},{name:"Vanuatu",iso2:"vu",dialCode:"678",priority:0,areaCodes:null,id:"vu",text:"Vanuatu"},{name:"Vatican City",iso2:"va",dialCode:"39",priority:1,areaCodes:null,id:"va",text:"Vatican City"},{name:"Venezuela",iso2:"ve",dialCode:"58",priority:0,areaCodes:null,id:"ve",text:"Venezuela"},{name:"Vietnam",iso2:"vn",dialCode:"84",priority:0,areaCodes:null,id:"vn",text:"Vietnam"},{name:"Wallis and Futuna",iso2:"wf",dialCode:"681",priority:0,areaCodes:null,id:"wf",text:"Wallis and Futuna"},{name:"Western Sahara",iso2:"eh",dialCode:"212",priority:1,areaCodes:null,id:"eh",text:"Western Sahara"},{name:"Yemen",iso2:"ye",dialCode:"967",priority:0,areaCodes:null,id:"ye",text:"Yemen"},{name:"Zambia",iso2:"zm",dialCode:"260",priority:0,areaCodes:null,id:"zm",text:"Zambia"},{name:"Zimbabwe",iso2:"zw",dialCode:"263",priority:0,areaCodes:null,id:"zw",text:"Zimbabwe"},{name:"√Öland Islands",iso2:"ax",dialCode:"358",priority:1,areaCodes:null,id:"ax",text:"√Öland Islands"}];this.COUNTRY_MAP={af:"Afghanistan",al:"Albania",dz:"Algeria",as:"American Samoa",ad:"Andorra",ao:"Angola",ai:"Anguilla",ag:"Antigua and Barbuda",ar:"Argentina",am:"Armenia",aw:"Aruba",au:"Australia",at:"Austria",az:"Azerbaijan",bs:"Bahamas",bh:"Bahrain",bd:"Bangladesh",bb:"Barbados",by:"Belarus",be:"Belgium",bz:"Belize",bj:"Benin",bm:"Bermuda",bt:"Bhutan",bo:"Bolivia",ba:"Bosnia and Herzegovina",bw:"Botswana",br:"Brazil",io:"British Indian Ocean Territory",vg:"British Virgin Islands",bn:"Brunei",bg:"Bulgaria",bf:"Burkina Faso",bi:"Burundi",kh:"Cambodia",cm:"Cameroon",ca:"Canada",cv:"Cape Verde",bq:"Caribbean Netherlands",ky:"Cayman Islands",cf:"Central African Republic",td:"Chad",cl:"Chile",cn:"China",cx:"Christmas Island",cc:"Cocos",co:"Colombia",km:"Comoros",cd:"Democratic Republic of the Congo",cg:"Republic of the Congo",ck:"Cook Islands",cr:"Costa Rica",ci:"Ivory Coast",hr:"Croatia",cu:"Cuba",cw:"Cura√ßao",cy:"Cyprus",cz:"Czech Republic",dk:"Denmark",dj:"Djibouti",dm:"Dominica","do":"Dominican Republic",ec:"Ecuador",eg:"Egypt",sv:"El Salvador",gq:"Equatorial Guinea",er:"Eritrea",ee:"Estonia",et:"Ethiopia",fk:"Falkland Islands",fo:"Faroe Islands",fj:"Fiji",fi:"Finland",fr:"France",gf:"French Guiana",pf:"French Polynesia",ga:"Gabon",gm:"Gambia",ge:"Georgia",de:"Germany",gh:"Ghana",gi:"Gibraltar",gr:"Greece",gl:"Greenland",gd:"Grenada",gp:"Guadeloupe",gu:"Guam",gt:"Guatemala",gg:"Guernsey",gn:"Guinea",gw:"Guinea-Bissau",gy:"Guyana",ht:"Haiti",hn:"Honduras",hk:"Hong Kong",hu:"Hungary",is:"Iceland","in":"India",id:"Indonesia",ir:"Iran",iq:"Iraq",ie:"Ireland",im:"Isle of Man",il:"Israel",it:"Italy",jm:"Jamaica",jp:"Japan",je:"Jersey",jo:"Jordan",kz:"Kazakhstan",ke:"Kenya",ki:"Kiribati",kw:"Kuwait",kg:"Kyrgyzstan",la:"Laos",lv:"Latvia",lb:"Lebanon",ls:"Lesotho",lr:"Liberia",ly:"Libya",li:"Liechtenstein",lt:"Lithuania",lu:"Luxembourg",mo:"Macau",mk:"Macedonia",mg:"Madagascar",mw:"Malawi",my:"Malaysia",mv:"Maldives",ml:"Mali",mt:"Malta",mh:"Marshall Islands",mq:"Martinique",mr:"Mauritania",mu:"Mauritius",yt:"Mayotte",mx:"Mexico",fm:"Micronesia",md:"Moldova",mc:"Monaco",mn:"Mongolia",me:"Montenegro",ms:"Montserrat",ma:"Morocco",mz:"Mozambique",mm:"Myanmar",na:"Namibia",nr:"Nauru",np:"Nepal",nl:"Netherlands",nc:"New Caledonia",nz:"New Zealand",ni:"Nicaragua",ne:"Niger",ng:"Nigeria",nu:"Niue",nf:"Norfolk Island",kp:"North Korea",mp:"Northern Mariana Islands",no:"Norway",om:"Oman",pk:"Pakistan",pw:"Palau",ps:"Palestine",pa:"Panama",pg:"Papua New Guinea",py:"Paraguay",pe:"Peru",ph:"Philippines",pl:"Poland",pt:"Portugal",pr:"Puerto Rico",qa:"Qatar",re:"R√©union",ro:"Romania",ru:"Russia",rw:"Rwanda",bl:"Saint Barth√©lemy",sh:"Saint Helena",kn:"Saint Kitts and Nevis",lc:"Saint Lucia",mf:"Saint Martin",pm:"Saint Pierre and Miquelon",vc:"Saint Vincent and the Grenadines",ws:"Samoa",sm:"San Marino",st:"S√£o Tom√© and Pr√ncipe",sa:"Saudi Arabia",sn:"Senegal",rs:"Serbia",sc:"Seychelles",sl:"Sierra Leone",sg:"Singapore",sx:"Sint Maarten",sk:"Slovakia",si:"Slovenia",sb:"Solomon Islands",so:"Somalia",za:"South Africa",kr:"South Korea",ss:"South Sudan",es:"Spain",lk:"Sri Lanka",sd:"Sudan",sr:"Suriname",sj:"Svalbard and Jan Mayen",sz:"Swaziland",se:"Sweden",ch:"Switzerland",sy:"Syria",tw:"Taiwan",tj:"Tajikistan",tz:"Tanzania",th:"Thailand",tl:"Timor-Leste",tg:"Togo",tk:"Tokelau",to:"Tonga",tt:"Trinidad and Tobago",tn:"Tunisia",tr:"Turkey",tm:"Turkmenistan",tc:"Turks and Caicos Islands",tv:"Tuvalu",vi:"U.S. Virgin Islands",ug:"Uganda",ua:"Ukraine",ae:"United Arab Emirates",gb:"United Kingdom",us:"United States",uy:"Uruguay",uz:"Uzbekistan",vu:"Vanuatu",va:"Vatican City",ve:"Venezuela",vn:"Vietnam",wf:"Wallis and Futuna",eh:"Western Sahara",ye:"Yemen",zm:"Zambia",zw:"Zimbabwe",ax:"√Öland Islands"};this.INVERTED_COUNTRY_MAP={afghanistan:"af",albania:"al",algeria:"dz","american samoa":"as",andorra:"ad",angola:"ao",anguilla:"ai","antigua and barbuda":"ag",argentina:"ar",armenia:"am",aruba:"aw",australia:"au",austria:"at",azerbaijan:"az",bahamas:"bs",bahrain:"bh",bangladesh:"bd",barbados:"bb",belarus:"by",belgium:"be",belize:"bz",benin:"bj",bermuda:"bm",bhutan:"bt",bolivia:"bo","bosnia and herzegovina":"ba",botswana:"bw",brazil:"br","british indian ocean territory":"io","british virgin islands":"vg",brunei:"bn",bulgaria:"bg","burkina faso":"bf",burundi:"bi",cambodia:"kh",cameroon:"cm",canada:"ca","cape verde":"cv","caribbean netherlands":"bq","cayman islands":"ky","central african republic":"cf",chad:"td",chile:"cl",china:"cn","christmas island":"cx",cocos:"cc",colombia:"co",comoros:"km","democratic republic of the congo":"cd","republic of the congo":"cg","cook islands":"ck","costa rica":"cr","ivory coast":"ci",croatia:"hr",cuba:"cu","cura√ßao":"cw",cyprus:"cy","czech republic":"cz",denmark:"dk",djibouti:"dj",dominica:"dm","dominican republic":"do",ecuador:"ec",egypt:"eg","el salvador":"sv","equatorial guinea":"gq",eritrea:"er",estonia:"ee",ethiopia:"et","falkland islands":"fk","faroe islands":"fo",fiji:"fj",finland:"fi",france:"fr","french guiana":"gf","french polynesia":"pf",gabon:"ga",gambia:"gm",georgia:"ge",germany:"de",ghana:"gh",gibraltar:"gi",greece:"gr",greenland:"gl",grenada:"gd",guadeloupe:"gp",guam:"gu",guatemala:"gt",guernsey:"gg",guinea:"gn","guinea-bissau":"gw",guyana:"gy",haiti:"ht",honduras:"hn","hong kong":"hk",hungary:"hu",iceland:"is",india:"in",indonesia:"id",iran:"ir",iraq:"iq",ireland:"ie","isle of man":"im",israel:"il",italy:"it",jamaica:"jm",japan:"jp",jersey:"je",jordan:"jo",kazakhstan:"kz",kenya:"ke",kiribati:"ki",kuwait:"kw",kyrgyzstan:"kg",laos:"la",latvia:"lv",lebanon:"lb",lesotho:"ls",liberia:"lr",libya:"ly",liechtenstein:"li",lithuania:"lt",luxembourg:"lu",macau:"mo",macedonia:"mk",madagascar:"mg",malawi:"mw",malaysia:"my",maldives:"mv",mali:"ml",malta:"mt","marshall islands":"mh",martinique:"mq",mauritania:"mr",mauritius:"mu",mayotte:"yt",mexico:"mx",micronesia:"fm",moldova:"md",monaco:"mc",mongolia:"mn",montenegro:"me",montserrat:"ms",morocco:"ma",mozambique:"mz",myanmar:"mm",namibia:"na",nauru:"nr",nepal:"np",netherlands:"nl","new caledonia":"nc","new zealand":"nz",nicaragua:"ni",niger:"ne",nigeria:"ng",niue:"nu","norfolk island":"nf","north korea":"kp","northern mariana islands":"mp",norway:"no",oman:"om",pakistan:"pk",palau:"pw",palestine:"ps",panama:"pa","papua new guinea":"pg",paraguay:"py",peru:"pe",philippines:"ph",poland:"pl",portugal:"pt","puerto rico":"pr",qatar:"qa","r√©union":"re",romania:"ro",russia:"ru",rwanda:"rw","saint barth√©lemy":"bl","saint helena":"sh","saint kitts and nevis":"kn","saint lucia":"lc","saint martin":"mf","saint pierre and miquelon":"pm","saint vincent and the grenadines":"vc",samoa:"ws","san marino":"sm","s√£o tom√© and pr√ncipe":"st","saudi arabia":"sa",senegal:"sn",serbia:"rs",seychelles:"sc","sierra leone":"sl",singapore:"sg","sint maarten":"sx",slovakia:"sk",slovenia:"si","solomon islands":"sb",somalia:"so","south africa":"za","south korea":"kr","south sudan":"ss",spain:"es","sri lanka":"lk",sudan:"sd",suriname:"sr","svalbard and jan mayen":"sj",swaziland:"sz",sweden:"se",switzerland:"ch",syria:"sy",taiwan:"tw",tajikistan:"tj",tanzania:"tz",thailand:"th","timor-leste":"tl",togo:"tg",tokelau:"tk",tonga:"to","trinidad and tobago":"tt",tunisia:"tn",turkey:"tr",turkmenistan:"tm","turks and caicos islands":"tc",tuvalu:"tv","u.s. virgin islands":"vi",uganda:"ug",ukraine:"ua","united arab emirates":"ae","united kingdom":"gb","united states":"us",uruguay:"uy",uzbekistan:"uz",vanuatu:"vu","vatican city":"va",venezuela:"ve",vietnam:"vn","wallis and futuna":"wf","western sahara":"eh",yemen:"ye",zambia:"zm",zimbabwe:"zw","√•land islands":"ax"};this.COUNTRY_COORDINATES={AD:{country_name:"Andorra",lon:"1.601554",lat:"42.546245"},AE:{country_name:"United Arab Emirates",lon:"53.847818",lat:"23.424076"},AF:{country_name:"Afghanistan",lon:"67.709953",lat:"33.93911"},AG:{country_name:"Antigua and Barbuda",lon:"-61.796428",lat:"17.060816"},AI:{country_name:"Anguilla",lon:"-63.068615",lat:"18.220554"},AL:{country_name:"Albania",lon:"20.168331",lat:"41.153332"},AM:{country_name:"Armenia",lon:"45.038189",lat:"40.069099"},AO:{country_name:"Angola",lon:"17.873887",lat:"-11.202692"},AQ:{country_name:"Antarctica",lon:"-0.071389",lat:"-75.250973"},AR:{country_name:"Argentina",lon:"-63.616672",lat:"-38.416097"},AS:{country_name:"American Samoa",lon:"-170.132217",lat:"-14.270972"},AT:{country_name:"Austria",lon:"14.550072",lat:"47.516231"},AU:{country_name:"Australia",lon:"133.775136",lat:"-25.274398"},AW:{country_name:"Aruba",lon:"-69.968338",lat:"12.52111"},AX:{country_name:"Aland Islands",lon:"19.9156105",lat:"60.1785247"},AZ:{country_name:"Azerbaijan",lon:"47.576927",lat:"40.143105"},BA:{country_name:"Bosnia and Herzegovina",lon:"17.679076",lat:"43.915886"},BB:{country_name:"Barbados",lon:"-59.543198",lat:"13.193887"},BD:{country_name:"Bangladesh",lon:"90.356331",lat:"23.684994"},BE:{country_name:"Belgium",lon:"4.469936",lat:"50.503887"},BF:{country_name:"Burkina Faso",lon:"-1.561593",lat:"12.238333"},BG:{country_name:"Bulgaria",lon:"25.48583",lat:"42.733883"},BH:{country_name:"Bahrain",lon:"50.637772",lat:"25.930414"},BI:{country_name:"Burundi",lon:"29.918886",lat:"-3.373056"},BJ:{country_name:"Benin",lon:"2.315834",lat:"9.30769"},BL:{country_name:"Saint Barthelemy",lon:"-62.832994",lat:"17.903778"},BM:{country_name:"Bermuda",lon:"-64.75737",lat:"32.321384"},BN:{country_name:"Brunei",lon:"114.727669",lat:"4.535277"},BO:{country_name:"Bolivia",lon:"-63.588653",lat:"-16.290154"},BQ:{country_name:"Bonaire",lon:"-68.262382",lat:"12.20189"},BR:{country_name:"Brazil",lon:"-51.92528",lat:"-14.235004"},BS:{country_name:"The Bahamas",lon:"-77.39628",lat:"25.03428"},BT:{country_name:"Bhutan",lon:"90.433601",lat:"27.514162"},BV:{country_name:"Bouvet Island",lon:"3.413194",lat:"-54.423199"},BW:{country_name:"Botswana",lon:"24.684866",lat:"-22.328474"},BY:{country_name:"Belarus",lon:"27.953389",lat:"53.709807"},BZ:{country_name:"Belize",lon:"-88.49765",lat:"17.189877"},CA:{country_name:"Canada",lon:"-106.346771",lat:"56.130366"},CC:{country_name:"Cocos [Keeling] Islands",lon:"96.870956",lat:"-12.164165"},CD:{country_name:"Democratic Republic of the Congo",lon:"21.758664",lat:"-4.038333"},CF:{country_name:"Central African Republic",lon:"20.939444",lat:"6.611111"},CG:{country_name:"Republic of the Congo",lon:"15.827659",lat:"-0.228021"},CH:{country_name:"Switzerland",lon:"8.227512",lat:"46.818188"},CI:{country_name:"Ivory Coast",lon:"-5.54708",lat:"7.539989"},CK:{country_name:"Cook Islands",lon:"-159.777671",lat:"-21.236736"},CL:{country_name:"Chile",lon:"-71.542969",lat:"-35.675147"},CM:{country_name:"Cameroon",lon:"12.354722",lat:"7.369722"},CN:{country_name:"China",lon:"104.195397",lat:"35.86166"},CO:{country_name:"Colombia",lon:"-74.297333",lat:"4.570868"},CR:{country_name:"Costa Rica",lon:"-83.753428",lat:"9.748917"},CU:{country_name:"Cuba",lon:"-77.781167",lat:"21.521757"},CV:{country_name:"Cape Verde",lon:"-24.013197",lat:"16.002082"},CW:{country_name:"Curacao",lon:"-68.988141",lat:"12.188002"},CX:{country_name:"Christmas Island",lon:"105.690449",lat:"-10.447525"},CY:{country_name:"Cyprus",lon:"33.429859",lat:"35.126413"},CZ:{country_name:"Czech Republic",lon:"15.472962",lat:"49.817492"},DE:{country_name:"Germany",lon:"10.451526",lat:"51.165691"},DJ:{country_name:"Djibouti",lon:"42.590275",lat:"11.825138"},DK:{country_name:"Denmark",lon:"9.501785",lat:"56.26392"},DM:{country_name:"Dominica",lon:"-61.370976",lat:"15.414999"},DO:{country_name:"Dominican Republic",lon:"-70.162651",lat:"18.735693"},DZ:{country_name:"Algeria",lon:"1.659626",lat:"28.033886"},EC:{country_name:"Ecuador",lon:"-78.183406",lat:"-1.831239"},EE:{country_name:"Estonia",lon:"25.013607",lat:"58.595272"},EG:{country_name:"Egypt",lon:"30.802498",lat:"26.820553"},EH:{country_name:"Sahrawi Arab Democratic Republic",lon:"-12.885834",lat:"24.215527"},ER:{country_name:"Eritrea",lon:"39.782334",lat:"15.179384"},ES:{country_name:"Spain",lon:"-3.74922",lat:"40.463667"},ET:{country_name:"Ethiopia",lon:"40.489673",lat:"9.145"},FI:{country_name:"Finland",lon:"25.748151",lat:"61.92411"},FJ:{country_name:"Fiji",lon:"179.414413",lat:"-16.578193"},FK:{country_name:"Falkland Islands",lon:"-59.523613",lat:"-51.796253"},FM:{country_name:"Federated States of Micronesia",lon:"150.550812",lat:"7.425554"},FO:{country_name:"Faroe Islands",lon:"-6.911806",lat:"61.892635"},FR:{country_name:"France",lon:"2.213749",lat:"46.227638"},GA:{country_name:"Gabon",lon:"11.609444",lat:"-0.803689"},GB:{country_name:"United Kingdom",lon:"-3.435973",lat:"55.378051"},GD:{country_name:"Grenada",lon:"-61.604171",lat:"12.262776"},GE:{country_name:"Georgia",lon:"43.356892",lat:"42.315407"},GF:{country_name:"French Guiana",lon:"-53.125782",lat:"3.933889"},GG:{country_name:"Guernsey",lon:"-2.585278",lat:"49.465691"},GH:{country_name:"Ghana",lon:"-1.023194",lat:"7.946527"},GI:{country_name:"Gibraltar",lon:"-5.345374",lat:"36.137741"},GL:{country_name:"Greenland",lon:"-42.604303",lat:"71.706936"},GM:{country_name:"Gambia",lon:"-15.310139",lat:"13.443182"},GN:{country_name:"Guinea",lon:"-9.696645",lat:"9.945587"},GP:{country_name:"Guadeloupe",lon:"-62.067641",lat:"16.995971"},GQ:{country_name:"Equatorial Guinea",lon:"10.267895",lat:"1.650801"},GR:{country_name:"Greece",lon:"21.824312",lat:"39.074208"},GS:{country_name:"South Georgia and the South Sandwich Islands",lon:"-36.587909",lat:"-54.429579"},GT:{country_name:"Guatemala",lon:"-90.230759",lat:"15.783471"},GU:{country_name:"Guam",lon:"144.793731",lat:"13.444304"},GW:{country_name:"Guinea-Bissau",lon:"-15.180413",lat:"11.803749"},GY:{country_name:"Guyana",lon:"-58.93018",lat:"4.860416"},HK:{country_name:"Hong Kong",lon:"114.109497",lat:"22.396428"},HM:{country_name:"Heard Island and McDonald Islands",lon:"73.504158",lat:"-53.08181"},HN:{country_name:"Honduras",lon:"-86.241905",lat:"15.199999"},HR:{country_name:"Croatia",lon:"15.2",lat:"45.1"},HT:{country_name:"Haiti",lon:"-72.285215",lat:"18.971187"},HU:{country_name:"Hungary",lon:"19.503304",lat:"47.162494"},ID:{country_name:"Indonesia",lon:"113.921327",lat:"-0.789275"},IE:{country_name:"Ireland",lon:"-8.24389",lat:"53.41291"},IL:{country_name:"Israel",lon:"34.851612",lat:"31.046051"},IM:{country_name:"Isle of Man",lon:"-4.548056",lat:"54.236107"},IN:{country_name:"India",lon:"78.96288",lat:"20.593684"},IO:{country_name:"British Indian Ocean Territory",lon:"71.876519",lat:"-6.343194"},IQ:{country_name:"Iraq",lon:"43.679291",lat:"33.223191"},IR:{country_name:"Iran",lon:"53.688046",lat:"32.427908"},IS:{country_name:"Iceland",lon:"-19.020835",lat:"64.963051"},IT:{country_name:"Italy",lon:"12.56738",lat:"41.87194"},JE:{country_name:"Jersey",lon:"-2.13125",lat:"49.214439"},JM:{country_name:"Jamaica",lon:"-77.297508",lat:"18.109581"},JO:{country_name:"Jordan",lon:"36.238414",lat:"30.585164"},JP:{country_name:"Japan",lon:"138.252924",lat:"36.204824"},KE:{country_name:"Kenya",lon:"37.906193",lat:"-0.023559"},KG:{country_name:"Kyrgyzstan",lon:"74.766098",lat:"41.20438"},KH:{country_name:"Cambodia",lon:"104.990963",lat:"12.565679"},KI:{country_name:"Kiribati",lon:"-168.734039",lat:"-3.370417"},KM:{country_name:"Comoros",lon:"43.872219",lat:"-11.875001"},KN:{country_name:"Saint Kitts and Nevis",lon:"-62.782998",lat:"17.357822"},KP:{country_name:"North Korea",lon:"127.510093",lat:"40.339852"},KR:{country_name:"South Korea",lon:"127.766922",lat:"35.907757"},KW:{country_name:"Kuwait",lon:"47.481766",lat:"29.31166"},KY:{country_name:"Cayman Islands",lon:"-80.566956",lat:"19.513469"},KZ:{country_name:"Kazakhstan",lon:"66.923684",lat:"48.019573"},LA:{country_name:"Laos",lon:"102.495496",lat:"19.85627"},LB:{country_name:"Lebanon",lon:"35.862285",lat:"33.854721"},LC:{country_name:"Saint Lucia",lon:"-60.978893",lat:"13.909444"},LI:{country_name:"Liechtenstein",lon:"9.555373",lat:"47.166"},LK:{country_name:"Sri Lanka",lon:"80.771797",lat:"7.873054"},LR:{country_name:"Liberia",lon:"-9.429499",lat:"6.428055"},LS:{country_name:"Lesotho",lon:"28.233608",lat:"-29.609988"},LT:{country_name:"Lithuania",lon:"23.881275",lat:"55.169438"},LU:{country_name:"Luxembourg",lon:"6.129583",lat:"49.815273"},LV:{country_name:"Latvia",lon:"24.603189",lat:"56.879635"},LY:{country_name:"Libya",lon:"17.228331",lat:"26.3351"},MA:{country_name:"Morocco",lon:"-7.09262",lat:"31.791702"},MC:{country_name:"Monaco",lon:"7.412841",lat:"43.750298"},MD:{country_name:"Moldova",lon:"28.369885",lat:"47.411631"},ME:{country_name:"Montenegro",lon:"19.37439",lat:"42.708678"},MF:{country_name:"Saint Martin",lon:"-63.050402",lat:"18.07538"},MG:{country_name:"Madagascar",lon:"46.869107",lat:"-18.766947"},MH:{country_name:"Marshall Islands",lon:"171.184478",lat:"7.131474"},MK:{country_name:"Macedonia",lon:"21.745275",lat:"41.608635"},ML:{country_name:"Mali",lon:"-3.996166",lat:"17.570692"},MM:{country_name:"Myanmar",lon:"95.956223",lat:"21.913965"},MN:{country_name:"Mongolia",lon:"103.846656",lat:"46.862496"},MO:{country_name:"Macau",lon:"113.543873",lat:"22.198745"},MP:{country_name:"Northern Mariana Islands",lon:"145.38469",lat:"17.33083"},MQ:{country_name:"Martinique",lon:"-61.024174",lat:"14.641528"},MR:{country_name:"Mauritania",lon:"-10.940835",lat:"21.00789"},MS:{country_name:"Montserrat",lon:"-62.187366",lat:"16.742498"},MT:{country_name:"Malta",lon:"14.375416",lat:"35.937496"},MU:{country_name:"Mauritius",lon:"57.552152",lat:"-20.348404"},MV:{country_name:"Maldives",lon:"73.22068",lat:"3.202778"},MW:{country_name:"Malawi",lon:"34.301525",lat:"-13.254308"},MX:{country_name:"Mexico",lon:"-102.552784",lat:"23.634501"},MY:{country_name:"Malaysia",lon:"101.975766",lat:"4.210484"},MZ:{country_name:"Mozambique",lon:"35.529562",lat:"-18.665695"},NA:{country_name:"Namibia",lon:"18.49041",lat:"-22.95764"},NC:{country_name:"New Caledonia",lon:"165.618042",lat:"-20.904305"},NE:{country_name:"Niger",lon:"8.081666",lat:"17.607789"},NF:{country_name:"Norfolk Island",lon:"167.954712",lat:"-29.040835"},NG:{country_name:"Nigeria",lon:"8.675277",lat:"9.081999"},NI:{country_name:"Nicaragua",lon:"-85.207229",lat:"12.865416"},NL:{country_name:"The Netherlands",lon:"5.291266",lat:"52.132633"},NO:{country_name:"Norway",lon:"8.468946",lat:"60.472024"},NP:{country_name:"Nepal",lon:"84.124008",lat:"28.394857"},NR:{country_name:"Nauru",lon:"166.931503",lat:"-0.522778"},NU:{country_name:"Niue",lon:"-169.867233",lat:"-19.054445"},NZ:{country_name:"New Zealand",lon:"174.885971",lat:"-40.900557"},OM:{country_name:"Oman",lon:"55.923255",lat:"21.512583"},PA:{country_name:"Panama",lon:"-80.782127",lat:"8.537981"},PE:{country_name:"Peru",lon:"-75.015152",lat:"-9.189967"},PF:{country_name:"French Polynesia",lon:"-149.406843",lat:"-17.679742"},PG:{country_name:"Papua New Guinea",lon:"143.95555",lat:"-6.314993"},PH:{country_name:"Philippines",lon:"121.774017",lat:"12.879721"},PK:{country_name:"Pakistan",lon:"69.345116",lat:"30.375321"},PL:{country_name:"Poland",lon:"19.145136",lat:"51.919438"},PM:{country_name:"Saint Pierre and Miquelon",lon:"-56.27111",lat:"46.941936"},PN:{country_name:"Pitcairn Islands",lon:"-127.439308",lat:"-24.703615"},PR:{country_name:"Puerto Rico",lon:"-66.590149",lat:"18.220833"},PS:{country_name:"Palestine",lon:"35.233154",lat:"31.952162"},PT:{country_name:"Portugal",lon:"-8.224454",lat:"39.399872"},PW:{country_name:"Palau",lon:"134.58252",lat:"7.51498"},PY:{country_name:"Paraguay",lon:"-58.443832",lat:"-23.442503"},QA:{country_name:"Qatar",lon:"51.183884",lat:"25.354826"},RE:{country_name:"Reunion",lon:"55.536384",lat:"-21.115141"},RO:{country_name:"Romania",lon:"24.96676",lat:"45.943161"},RS:{country_name:"Serbia",lon:"21.005859",lat:"44.016521"},RU:{country_name:"Russian Federation",lon:"105.318756",lat:"61.52401"},RW:{country_name:"Rwanda",lon:"29.873888",lat:"-1.940278"},SA:{country_name:"Saudi Arabia",lon:"45.079162",lat:"23.885942"},SB:{country_name:"Solomon Islands",lon:"160.156194",lat:"-9.64571"},SC:{country_name:"Seychelles",lon:"55.491977",lat:"-4.679574"},SD:{country_name:"Sudan",lon:"30.217636",lat:"12.862807"},SE:{country_name:"Sweden",lon:"18.643501",lat:"60.128161"},SG:{country_name:"Singapore",lon:"103.819836",lat:"1.352083"},SH:{country_name:"Saint Helena Ascension and Tristan da Cunha",lon:"-10.030696",lat:"-24.143474"},SI:{country_name:"Slovenia",lon:"14.995463",lat:"46.151241"},SJ:{country_name:"Svalbard and Jan Mayen",lon:"23.670272",lat:"77.553604"},SK:{country_name:"Slovakia",lon:"19.699024",lat:"48.669026"},SL:{country_name:"Sierra Leone",lon:"-11.779889",lat:"8.460555"},SM:{country_name:"San Marino",lon:"12.457777",lat:"43.94236"},SN:{country_name:"Senegal",lon:"-14.452362",lat:"14.497401"},SO:{country_name:"Somalia",lon:"46.199616",lat:"5.152149"},SR:{country_name:"Suriname",lon:"-56.027783",lat:"3.919305"},SS:{country_name:"South Sudan",lon:"31.307",lat:"6.877"},ST:{country_name:"S√£o Tom√© and Pr√ncipe",lon:"6.613081",lat:"0.18636"},SV:{country_name:"El Salvador",lon:"-88.89653",lat:"13.794185"},SX:{country_name:"Sint Maarten",lon:"-63.054828",lat:"18.042625"},SY:{country_name:"Syria",lon:"38.996815",lat:"34.802075"},SZ:{country_name:"Swaziland",lon:"31.465866",lat:"-26.522503"},TC:{country_name:"Turks and Caicos Islands",lon:"-71.797928",lat:"21.694025"},TD:{country_name:"Chad",lon:"18.732207",lat:"15.454166"},TF:{country_name:"French Southern Territories",lon:"69.348557",lat:"-49.280366"},TG:{country_name:"Togo",lon:"0.824782",lat:"8.619543"},TH:{country_name:"Thailand",lon:"100.992541",lat:"15.870032"},TJ:{country_name:"Tajikistan",lon:"71.276093",lat:"38.861034"},TK:{country_name:"Tokelau",lon:"-171.855881",lat:"-8.967363"},TL:{country_name:"East Timor",lon:"125.727539",lat:"-8.874217"},TM:{country_name:"Turkmenistan",lon:"59.556278",lat:"38.969719"},TN:{country_name:"Tunisia",lon:"9.537499",lat:"33.886917"},TO:{country_name:"Tonga",lon:"-175.198242",lat:"-21.178986"},TR:{country_name:"Turkey",lon:"35.243322",lat:"38.963745"},TT:{country_name:"Trinidad and Tobago",lon:"-61.222503",lat:"10.691803"},TV:{country_name:"Tuvalu",lon:"177.64933",lat:"-7.109535"},TW:{country_name:"Taiwan",lon:"120.960515",lat:"23.69781"},TZ:{country_name:"Tanzania",lon:"34.888822",lat:"-6.369028"},UA:{country_name:"Ukraine",lon:"31.16558",lat:"48.379433"},UG:{country_name:"Uganda",lon:"32.290275",lat:"1.373333"},UM:{country_name:"United States Minor Outlying Islands",lon:"166.647",lat:"19.2823"},US:{country_name:"United States of America",lon:"-95.712891",lat:"37.09024"},UY:{country_name:"Uruguay",lon:"-55.765835",lat:"-32.522779"},UZ:{country_name:"Uzbekistan",lon:"64.585262",lat:"41.377491"},VA:{country_name:"Vatican City",lon:"12.453389",lat:"41.902916"},VC:{country_name:"Saint Vincent and the Grenadines",lon:"-61.287228",lat:"12.984305"},VE:{country_name:"Venezuela",lon:"-66.58973",lat:"6.42375"},VG:{country_name:"British Virgin Islands",lon:"-64.639968",lat:"18.420695"},VI:{country_name:"United States Virgin Islands",lon:"-64.896335",lat:"18.335765"},VN:{country_name:"Vietnam",lon:"108.277199",lat:"14.058324"},VU:{country_name:"Vanuatu",lon:"166.959158",lat:"-15.376706"},WF:{country_name:"Wallis and Futuna",lon:"-177.156097",lat:"-13.768752"},WS:{country_name:"Samoa",lon:"-172.104629",lat:"-13.759029"},YE:{country_name:"Yemen",lon:"48.516388",lat:"15.552727"},YT:{country_name:"Mayotte",lon:"45.166244",lat:"-12.8275"},ZA:{country_name:"South Africa",lon:"22.937506",lat:"-30.559482"},ZM:{country_name:"Zambia",lon:"27.849332",lat:"-13.133897"},ZW:{country_name:"Zimbabwe",lon:"29.154857",lat:"-19.015438"}};this.PHONE_NUMBER_REGEX={mw:"(0?98)\\d{7}",mu:"(5?5)\\d{6}",ph:"(89|9[0-9])\\d{8}",ug:"(0?76)\\d{7}",pa:"(618[0-9])\\d{4}",bj:"(52|53)\\d{6}"};this.PHONE_NUMBER_SEPARATORS=/[ \-\.]*/g;this.ADDRESS_LINE_1_KEYS=["address30","address29","house_number","house_name","flats","conscription_number","street_number","street","place","industrial","retail","commercial","airport","station","place_of_worship","pub","bar","university","museum","arts_centre","zoo","theme_park","attraction","golf_course","castle","hospital","school","theatre","public_building","library","townhall","community_centre","fire_station","police","bank","post_office","park","recreation_ground","hotel","motel","cinema","information","artwork","archaeological_site","doctors","sports_centre","swimming_pool","supermarket","convenience","restaurant","fast_food","cafe","guest_house","pharmacy","fuel","peak","waterfall","wood","water","forest","cemetery","allotments","farmyard","rail","canal","river","stream","bicycle","clothes","hairdresser","doityourself","estate_agent","car","garden_centre","car_repair","newsagent","bakery","furniture","butcher","apparel","electronics","department_store","books","yes","outdoor","mall","florist","charity","hardware","laundry","shoes","beverages","dry_cleaning","carpet","computer","alcohol","optician","chemist","gallery","mobile_phone","sports","jewelry","pet","beauty","stationery","shopping_centre","general","electrical","toys","jeweller","betting","household","travel_agency","hifi","shop","pitch","unsurfaced","ruins","college","monument","subway","memorial","nature_reserve","common","lock_gate","fell","nightclub","path","garden","reservoir","playground","stadium","mine","cliff","caravan_site","bus_station","kindergarten","construction","atm","emergency_phone","lock","riverbank","coastline","viewpoint","hostel","bed_and_breakfast","halt","platform","tram","courthouse","recycling","dentist","beach","moor","grave_yard","derelict_canal","drain","grass","village_green","bay","tram_stop","marina","stile","light_rail","narrow_gauge","land","village_hall","dock","veterinary","brownfield","track","historic_station","prison","quarry","telephone","traffic_signals","heath","house","social_club","military","health_centre","building","clinic","services","ferry_terminal","marsh","hill","raceway","taxi","take_away","car_rental","islet","nursery","nursing_home","toilets","hall","boatyard","mini_roundabout","manor","chalet","bicycle_parking","weir","wetland","cave_entrance","crematorium","picnic_site","basin","tree","slipway","meadow","piste","care_home","club","medical_centre","roman_road","fort","subway_entrance","gate","fishing","car_wash","level_crossing","bird_hide","headland","apartments","shopping","scrub","fen","mountain_pass","parking","bus_stop","post_box","houses","preserved","dead_pub","disused_station","abandoned","disused","farm","conscription_number","road"];this.ADDRESS_LINE_2_KEYS=["pedestrian","footway","bridleway","cycleway","residential","neighbourhood","hamlet","locality","administrative","suburb","region","address28","address27","address26","address25"];this.CITY_KEYS=["city_district","village","island","town","city","county","district","state_district","address24","address23","address22","address21","address20","address19","address18","address17","address16","address15","address14","address13","address12","address11","address10","address9"];this.STATE_KEYS=["state","address8"];this.POSTAL_CODE_KEYS=["postcode","address7","address6","address5"];this.COUNTRY_KEYS=["country","address4"];this.ZMAPS_DOMAIN="https://maps.zoho.com";this.ZMAPS_DOMAIN_EU="https://maps.zoho.eu";this.IMG_STATIC_SERVER="https://img.zohostatic.com";this.IMG_STATIC_SERVER_EU="https://img.zohostatic.eu";this.JS_STATIC_SERVER="https://js.zohostatic.com";this.CSS_STATIC_SERVER="https://css.zohostatic.com";this.CSS_STATIC_SERVER_EU="https://css.zohostatic.eu";this.ZOHO_MAPS="ZOHO_MAPS";this.IMAGE_STATIC_SERVER="IMAGE_STATIC_SERVER";this.STYLE_STATIC_SERVER="CSS_STATIC_SERVER";this.MAP_SEARCH_API="712378756-24e33d4bb49975bc8945b569568f5894";this.MAINTENANCE_MODE_ERROR_STATUS_CODE=455;this.IP_INFO_URL=(typeof bootConfig!="undefined")&&bootConfig.isPrviewAction&&!(window.location.host===zcNewLivePublicDomain)?ZCGlobal.appbuilderserverprefix+"/appbuilder/"+ZCGlobal.scopeName+ZCGlobal.envUrlFragment+"/"+ZCGlobal.appLinkName+"/getIpInfo":ZCGlobal.appurl+"getIpInfo";this.MAP_URL=(typeof bootConfig!="undefined")&&bootConfig.isPrviewAction&&!(window.location.host===zcNewLivePublicDomain)?ZCGlobal.appbuilderserverprefix+"/appbuilder/"+ZCGlobal.scopeName+ZCGlobal.envUrlFragment+"/"+ZCGlobal.appLinkName+"/getZMapResponse":ZCGlobal.appurl+"getZMapResponse";this.SORT_OPTS={"8":{Number:"",Country:"country"},"33":{FirstName:"",LastName:"last_name"},"34":{Address:"","City/District":"district_city",State:"state_province",Country:"country"}};this.GRP_OPTS={"8":{Country:"country"},"33":{FirstName:"",LastName:"last_name"},"34":{Address:"","City/District":"district_city",State:"state_province",Country:"country",Pincode:"postal_Code"}};this.LINK=1;this.LOCAL=2;this.LINKANDLOCAL=3;this.CAMERA=4;this.LINKANDCAMERA=5;this.CAMERAANDLOCAL=6;this.IMAGEALLOPTION=7;this.AUDIO=137;this.VIDEO=138;this.ALLOWTOACCESSMEDIA=i18n.allowtoaccessmedia;this.NOMEDIASUPPORT=i18n.nomediasupport;this.NOSUPPORTAUDIO=i18n.nosupportaudio;this.NOSUPPORTVIDEO=i18n.nosupportvideo;this.UPLOADAUDIO=i18n.uploadaudio;this.UPLOADVIDEO=i18n.uploadvideo;this.SHORTERAUDIO=i18n.shorteraudio;this.SHORTERVIDEO=i18n.shortervideo;this.UPLOADINGVIDEO=i18n.uploadingvideo;this.UPLOADINGAUDIO=i18n.uploadingaudio;this.FILESIZE=i18n.filesize;this.FILEERROR=i18n.filecorrupted;this.BLOCKPERMISSIONLINE1=i18n.blockpermissionline1;this.BLOCKPERMISSIONLINE2=i18n.blockpermissionline2;this.VIDEOPERMISSIONLINE1=i18n.videopermissionline1;this.AUDIOPERMISSIONLINE1=i18n.audiopermissionline1;this.IMAGEPERMISSIONLINE1=i18n.imagepermissionline1;this.IMAGEPERMISSIONLINE2=i18n.imagepermissionline2;this.PERMISSIONLINE2=i18n.permissionline2;this.IMGBLOCKPERMISSIONLINE1=i18n.imgblockpermissionline1;this.BROWSERSUPPORTLINE1=i18n.browsersupportline1;this.BROWSERSUPPORTLINE2=i18n.browsersupportline2;this.PRIMARYCAMERA=1;this.SECONDARYCAMERA=2;this.PORTRAIT=1;this.LANDSCAPE=2;this.ORIENTAION1=0;this.ORIENTAION2=90;this.ORIENTAION3=180;this.ORIENTAION4=-90;this.IMAGE_FIELD="Image";this.AUDIO_FIELD="Audio";this.VIDEO_FIELD="Video";this.QUICK_VIEW="quickview";this.DETAIL_VIEW="detailview";this.SINGLE_REC_CUSTOM_ACTION=1;this.MULTI_REC_CUSTOM_ACTION=2;this.CONFIRM_BUTTON=1;this.CANCEL_BUTTON=2;this.SLIDING_PANE="SLIDING_PANE";this.TAB_BAR="TAB_BAR";this.BOTTOM_BAR="BOTTOM_BAR";this.COLUMN_1="1_COLUMN";this.COLUMN_CARD_1="1_COLUMN_CARD";this.VIEW_MAPS=20;this.VIEW_PIVOT_CHART=8;this.VIEW_PIVOT_TABLE=7;this.VIEW_CALENDAR=2;this.VIEW_TIMELINE=15;this.VIEW_KANBAN=16;this.NEW_EXPORT_LIMIT=50000;this.CAPTCHA_MIN_WIDTH=200;this.PLAINTEXT_MIN_WIDTH=230;this.COLUMN_MINWIDTH=250;this.ADDRESS_ERROR_TYPE="errType";this.ADDRESS_ERROR_MESSAGE="errMsg";this.ADDRESS_EMPTY_VALUE_TYPE=1;this.ADDRESS_INVALID_ZIP_TYPE=2;this.LEFT="left";this.RIGHT="right";this.LINKEDVIEW_MAX_LEVEL=5;this.RECORD_COMMENTS=0;this.COMMENT_TEMPLATES={DUMMY_NODE:0,ADD_USER_MENTION:1,USER_MENTION_WRAPPER:2,LOAD_MORE_REPLY:3,REPLY_EDITOR:4,LOAD_MORE_COMMENTS:5};this.SELECT=0;this.EQUAL=18;this.NOT_EQUAL=19;this.LESS_THAN=20;this.BEFORE=20;this.GREATER_THAN=21;this.AFTER=21;this.LESS_EQUAL=22;this.GREATER_EQUAL=23;this.STARTS_WITH=24;this.ENDS_WITH=25;this.CONTAINS=26;this.NOT_CONTAINS=27;this.LIKE=28;this.NOT_EMPTY=30;this.YESTERDAY=31;this.TODAY=32;this.TOMORROW=33;this.LAST_7_DAYS=34;this.LAST_30_DAYS=35;this.LAST_60_DAYS=36;this.LAST_90_DAYS=37;this.LAST_120_DAYS=38;this.NEXT_7_DAYS=39;this.NEXT_30_DAYS=40;this.NEXT_60_DAYS=41;this.NEXT_90_DAYS=42;this.NEXT_120_DAYS=43;this.LAST_MONTH=44;this.THIS_MONTH=45;this.NEXT_MONTH=46;this.CURR_PREV_MONTH=47;this.CURR_NEXT_MONTH=48;this.TRUE=49;this.FALSE=50;this.LAST_YEAR=51;this.CURRENT_YEAR=52;this.NEXT_YEAR=53;this.PREVIOUS_2_YEAR=54;this.NEXT_2_YEAR=55;this.CURRENT_PREVIOUS_YEAR=56;this.CURRENT_NEXT_YEAR=57;this.BETWEEN=58;this.THIS_WEEK=59;this.LAST_WEEK=60;this.NEXT_WEEK=61;this.CURRENT_PREVIOUS_WEEK=62;this.CURRENT_NEXT_WEEK=63;this.LAST_N_DAYS=64;this.NEXT_N_DAYS=65;this.LAST_N_WEEK=66;this.NEXT_N_WEEK=67;this.LAST_N_MONTH=68;this.NEXT_N_MONTH=69;this.LAST_N_YEAR=70;this.NEXT_N_YEAR=71;this.LAST_N_WEEKS=73;this.NEXT_N_WEEKS=74;this.LAST_N_MONTHS=75;this.LAST_N_YEARS=76;this.NEXT_N_MONTHS=77;this.NEXT_N_YEARS=78;this.N_DAYS_AGO=79;this.N_WEEKS_AGO=80;this.N_MONTHS_AGO=81;this.N_YEARS_AGO=82;this.ISADMIN=100;this.ISLOGIN=101;this.ISNULL=102;this.ISNOTNULL=103;this.EMPTY_FIELD="Please select a field";this.EMPTY_OPERATOR="Please select an operator";this.EMPTY_VALUE="Value cannot be empty";this.APP=0;this.FORM=1;this.REPORT=2;this.PAGE=3;this.WORKFLOW=4;this.APPROVALWF=5;this.SETTINGS=6;this.NONE=0;this.SINGLE_LINE=1;this.PASSWORD=2;this.MULTI_LINE=3;this.EMAIL_ADDRESS=4;this.NUMBER=5;this.CURRENCY=6;this.PERCENTAGE=7;this.PHONE_NUMBER=8;this.CHECK_BOX=9;this.DATE=10;this.TIME=11;this.SINGLE_SELECT=12;this.MULTI_SELECT=13;this.PLAIN_TEXT=14;this.SCRIPT=15;this.FILE_UPLOAD=18;this.DECIMAL=19;this.IMAGE=20;this.URL=21;this.DATE_TIME=22;this.RICH_TEXT_AREA=24;this.EXTERNAL_FIELD=25;this.EXTERNAL_LINK_FIELD=26;this.INLINE_SINGLE_SELECT=29;this.SYSTEM_LOOKUP=30;this.AUTO_NUMBER=31;this.LOOKUP=32;this.NAME=33;this.ADDRESS=34;this.SECTION=35;this.SIGNATURE=36;this.INTEGRATION=37;this.ENCRYPTION=38;this.AUDIO=137;this.VIDEO=138;this.PREDICTION=201;this.KEYWORD_EXTRACTOR=202;this.SENTIMENT_ANALYSER=203;this.OCR=204;this.OBJECT_DETECTION=205;this.ZIA_TEXT=210;this.ZIA_MULTILINE=211;this.PREDICTION_TYPE=1;this.SENTIMENT_ANALYSER_TYPE=2;this.KEYWORD_EXTRACTOR_TYPE=3;this.OCR_TYPE=4;this.OBJECT_DETECTION_TYPE=5;this.LIVE_SEARCH_VALUES_LIMIT=6;this.REQUEST_TYPE={FORM_SUBMIT:1,FORMULA:2,WORKFLOW:3};this.PDF_DISPLAY_TYPE={LIST:1,DETAIL:2};this.PDF_SCALING_TYPE={ACTUAL:1,FIT:2,SCALING:3};this.EXPORT_FIELDS_FILTER={QUICK_VIEW:1,DETAIL_VIEW:2,ALL_FIELDS:3,CUSTOM:4};this.PDF_PAPER_SIZE={A0:{WIDTH:33.1,HEIGHT:46.8},A1:{WIDTH:23.4,HEIGHT:33.1},A2:{WIDTH:16.5,HEIGHT:23.4},A3:{WIDTH:11.7,HEIGHT:16.5},A4:{WIDTH:8.3,HEIGHT:11.7},A5:{WIDTH:5.8,HEIGHT:8.3},B4:{WIDTH:9.8,HEIGHT:13.9},B5:{WIDTH:6.9,HEIGHT:9.8},LEGAL:{WIDTH:8.5,HEIGHT:14},LETTER:{WIDTH:8.5,HEIGHT:11},TABLOID:{WIDTH:11,HEIGHT:17}};this.EXPORT_FILENAME_LENGTH=50;this.PRINT_RECORD_LIMIT=500;this.PRINT_BATCH_LIST_LIMIT=200;this.NUMBER_MAX_LENGTH=19;this.NUMBER_MAX_VALUE=9223372036854776000};var LicenseKeys=new function(){this.handsonTableLicenseKey="4de59-e480d-90345-f4c3a-29e47"};var ObjectType=new function(){this.APP=1;this.FORM=2;this.REPORT=3;this.PAGE=4;this.FIELD=5;this.FORMBUTTON=6;this.RECORD=7;this.APPROVAL=8};var AppTheme=(function(){this.isTab=function(C){return(B[C].TYPE==A.TAB)};this.isGrid=function(C){return(B[C].TYPE==A.GRID)};var A={LEFT:1,TAB:2,GRID:3};var B={1:{TYPE:A.LEFT},2:{TYPE:A.TAB},3:{TYPE:A.LEFT},4:{TYPE:A.TAB},5:{TYPE:A.LEFT},6:{TYPE:A.TAB},7:{TYPE:A.GRID},8:{TYPE:A.LEFT},9:{TYPE:A.LEFT}};return this})();var FormAccessType=new function(){this.ADD_RECORD=1;this.VIEW_ADD_RECORD=2;this.VIEW_EDIT_RECORD=3;this.BULK_EDIT=4;this.LOOKUP_ADD=5;this.SEARCH_FORM=6;this.isAddRecord=function(A){if(A==this.ADD_RECORD||A==this.VIEW_ADD_RECORD||A==this.LOOKUP_ADD){return true}return false};this.getURL=function(A){if(A==this.VIEW_EDIT_RECORD){return"edit"}else{if(A==this.BULK_EDIT){return"bulkedit"}}return"add"}};var FormAlign=new function(){this.LEFT=1;this.RIGHT=2;this.TOP=3;this.INPLACE=4;var A={1:"label-left",2:"label-right",3:"label-top",4:"label-inplace"};var B=function(C){return A[C]};this.getAlign=function(C){if(A.hasOwnProperty(C)){return{ALIGN:C,CLASS:B(C)}}return{}}};var ApplicationControllerType=new function(){this.DEFAULT=1;this.PREVIEWAPPLICATION=2};var FormControllerType=new function(){this.DEFAULT=1;this.REPORTFORM=2;this.LOOKUPFORM=3;this.BULKEDITFORM=4;this.REPORTADDFORM=5;this.PREVIEWFORM=6};var FieldType=new function(){this.NONE=0;this.SINGLE_LINE=1;this.PASSWORD=2;this.MULTI_LINE=3;this.EMAIL_ADDRESS=4;this.NUMBER=5;this.CURRENCY=6;this.PERCENTAGE=7;this.PHONE_NUMBER=8;this.DECISIONBOX=9;this.DATE=10;this.TIME=11;this.SINGLE_SELECT=12;this.MULTI_SELECT=13;this.PLAIN_TEXT=14;this.SCRIPT=15;this.FILE_UPLOAD=18;this.DECIMAL=19;this.IMAGE=20;this.URL=21;this.DATE_TIME=22;this.RICH_TEXT_AREA=24;this.EXTERNAL_FIELD=25;this.EXTERNAL_LINK_FIELD=26;this.INLINE_SINGLE_SELECT=29;this.SYSTEM_LOOKUP=30;this.AUTO_NUMBER=31;this.LOOKUP=32;this.NAME=33;this.ADDRESS=34;this.SECTION=35;this.SIGNATURE=36;this.AUDIO=137;this.VIDEO=138;this.RECORD_STATUS=38;this.LINK_FIELD=39;this.DROPDOWN=100;this.RADIO=101;this.LIST=102;this.CHECK_BOXES=103;this.SUB_FORM_GRID=99;this.POPUP_SINGLE=95;this.INLINE_PICK_LIST=1100;this.INLINE_RADIO=1101;this.USER_SINGLE_SELECT=100;this.USER_MULTI_SELECT=101;this.ZIA_TEXT=210;this.ZIA_MULTILINE=211};var ReportType=new function(){this.REPORT_LIST=1;this.REPORT_CALENDAR=2;this.REPORT_SUMMARY=3;this.REPORT_SHEET=4;this.REPORT_CHART=5;this.REPORT_SPREADSHEET=6;this.REPORT_TIMELINE=15;this.REPORT_CUSTOM=9;this.PREVIEW_REPORT=10;this.REPORT_KANBAN=16;this.REPORT_MAP=20};var CalendarDisplayType=new function(){this.MONTH=1;this.WEEK=2;this.DAY=3;this.TIMELINEMONTH=4;this.TIMELINEWEEK=5;this.TIMELINEDAY=6};var CalendarDisplay=new function(){this.MONTH="month";this.BASICWEEK="basicWeek";this.AGENDAWEEK="agendaWeek";this.BASICDAY="basicDay";this.AGENDADAY="agendaDay";this.TIMELINEMONTH="timelineMonth";this.TIMELINEWEEK="timelineWeek";this.TIMELINEDAY="timelineDay";this.CALENDAR="calendar";this.TIMELINE="timeline";this.BASIC="basic";this.AGENDA="agenda";this.CAPMONTH="Month"};var CalendarDefaultType=new function(){this.LAST_YEAR=1;this.CURRENT_YEAR=2;this.NEXT_YEAR=3;this.CUSTOM_YEAR=4;this.LAST_MONTH=5;this.THIS_MONTH=6;this.NEXT_MONTH=7,this.CUSTOM_MONTH=8;this.YESTERDAY=9;this.TODAY=10;this.TOMORROW=11;this.CUSTOM_DAY=12};var PageType=new function(){this.DEFAULT=1;this.OLD_PAGE=2;this.NEW_PAGE=3;this.PREVIEW_PAGE=4};var RecordLimit=new function(){this.DEFAULT_SIZE_FOR_LIST=50;this.DEFAULT_SIZE_FOR_SUMMARY=200};var ZCSearchConstants=new function(){this.BETWEEN=58;this.CURRENT_NEXT_WEEK=63;this.LAST_N_DAYS=64;this.NEXT_N_YEARS=71;this.EQUALS=18;this.NOT_EQUALS=19;this.LESS_THAN=20;this.GREATER_THAN=21;this.LESS_EQUAL=22;this.GREATER_EQUAL=23;this.STARTS_WITH=24;this.ENDS_WITH=25;this.EMPTY=29;this.NOT_EMPTY=30;this.YESTERDAY=31;this.CONTAINS=26;this.NOT_CONTAINS=27;this.TRUE=49;this.FALSE=50;this.UNLOCKED=79;this.ADMIN_ONLY=80;this.SUPERIOR_ONLY=81;this.IN=72;this.LIKE=28;this.BEFORE="Before";this.AFTER="After";this.getSearchText=function(A){var B="contains";switch(A){case this.EQUALS:B="is";break;case this.NOT_EQUALS:B="is not";break;case this.EMPTY:B="is empty";break;case this.NOT_EMPTY:B="is not empty";break;case this.STARTS_WITH:B="starts with";break;case this.ENDS_WITH:B="end with";break;case this.LIKE:B="like";break;case this.CONTAINS:B="contains";break;case this.NOT_CONTAINS:B="does not contain";break;case this.LESS_THAN:B="is less than";break;case this.GREATER_THAN:B="is greater than";break;case this.LESS_EQUAL:B="is less than or equal to";break;case this.GREATER_EQUAL:B=" is greater than or equal to";break}return B};this.getLockValue=function(A){if(A==ZCSearchConstants.UNLOCKED){return"0"}if(A==ZCSearchConstants.ADMIN_ONLY){return"1"}if(A==ZCSearchConstants.SUPERIOR_ONLY){return"2"}}};var HandsOnTableContainers=new function(){this.HT_MASTER="ht_master";this.HT_CLONE_TOP="ht_clone_top";this.HT_CLONE_BOTTOM="ht_clone_bottom";this.HT_CLONE_LEFT="ht_clone_left";this.HT_CLONE_TOP_LEFT_CORNER="ht_clone_top_left_corner"};var ZCKeyConstants=new function(){this.BACKSPACE=8;this.ENTER=13;this.SPACE=32;this.LEFT=37;this.UP=38;this.PAGEUP=33;this.PAGEDOWN=34;this.RIGHT=39;this.DOWN=40;this.DELETE=46;this.ESCAPE=27;this.TAB=9};var FilterConstants=new function(){this.FILTER_COMMA_CONSTANT="@#zoho-comma#@";this.FILTER_COLON_CONSTANT="@#zohocolon#@";this.FILTER_SEMICOLON_CONSTANT="@#zohosemicolon#@";this.FILTER_QUOTS_CONSTANT="@#zohoquots#@";this.FILTER_SLASH_CONSTANT="zohooslash"};var NLPCharts=new function(){this.SUMMARY="SUMMARY";this.PIVOT="PIVOT";this.PIE="CHART__PIE";this.RING="CHART__RING";this.SEMI_RING="CHART__SEMI_RING";this.PYRAMID="CHART__PYRAMID";this.LINE="CHART__LINE";this.LINE_WITH_POINTS="CHART__LINE_WITH_POINTS";this.SMOOTH_LINE="CHART__SMOOTH_LINE";this.SMOOTH_LINE_WITH_POINTS="CHART__SMOOTH_LINE_WITH_POINTS";this.STEP="CHART__STEP";this.BAR="CHART__BAR";this.STACKED_BAR="CHART__STACKED_BAR";this.COMBO="CHART__COMBO";this.COMBO_STACKED_BAR="CHART__COMBO_STACKED_BAR";this.COMBO_BAR_WITH_SMOOTH_LINE="CHART__COMBO_BAR_WITH_SMOOTH_LINE";this.COMBO_STACKED_BAR_WITH_SMOOTH_LINE="CHART__COMBO_STACKED_BAR_WITH_SMOOTH_LINE";this.SCATTER="CHART__SCATTER";this.BUBBLE="CHART__BUBBLE";this.PACKED_BUBBLE="CHART__PACKED_BUBBLE";this.AREA="CHART__AREA";this.AREA_WITH_POINTS="CHART__AREA_WITH_POINTS";this.SMOOTH_AREA="CHART__SMOOTH_AREA";this.SMOOTH_AREA_WITH_POINTS="CHART__SMOOTH_AREA_WITH_POINTS";this.STACKED_AREA="CHART__STACKED_AREA";this.STACKED_AREA_WITH_POINTS="CHART__STACKED_AREA_WITH_POINTS";this.STACKED_SMOOTH_AREA="CHART__STACKED_SMOOTH_AREA";this.STACKED_SMOOTH_AREA_WITH_POINTS="CHART__STACKED_SMOOTH_AREA_WITH_POINTS";this.MAP_SCATTER="CHART__MAP_SCATTER";this.MAP_BUBBLE="CHART__MAP_BUBBLE";this.MAP_FILLED="CHART__MAP_FILLED";this.FUNNEL="CHART__FUNNEL";this.WEB="CHART__WEB";this.WEB_WITHOUT_FILL="CHART__WEB_WITHOUT_FILL";this.SUNBURST="CHART__SUNBURST";this.TABLE="CHART__TABLE";this.DEFAULT="UNKNOWN"};var NLPChartColors=["#438ce9","#FF465B","#16AF91","#04C36B","#FDC33A","#D65587","#FC7C63","#51A5A9","#BFBFBF","#91CD6A","#BE9B89","#7D8DB0","#B68E2E","#C6D5B0","#D1ACCE","#E0AE60","#5CD29F","#716398","#AD8686","#FF99A8","#A0C0C0","#2D7094","#553D4E","#B2449D","#FED577","#D3D159","#AAAAAA","#7ED9D9","#F7A26D","#8ABFA2","#767676","#E36068","#A3AFC7"];function replaceParams(B,A){if((B.indexOf("[")>-1)||(B.indexOf("&#x5b;")>-1)){B=B.replace("&#x5b;","[");B=B.replace("&#x5d;","]");if(typeof A!="undefined"&&A.length>0){for(i=0;i<A.length;i++){B=replace(B,"["+i+"]",A[i])}}}else{B=B.replace("&#x7b;","{");B=B.replace("&#x7d;","}");if(typeof A!="undefined"&&A.length>0){for(i=0;i<A.length;i++){B=replace(B,"{"+i+"}",A[i])}}}return B}function replace(A,G,E){var C=A.length,F=G.length;if((C==0)||(F==0)){return A}var B=A.indexOf(G);if((!B)&&(G!=A.substring(0,F))){return A}if(B==-1){return A}var D=A.substring(0,B)+E;if(B+F<C){D+=replace(A.substring(B+F,C),G,E)}return D}function stopPropogation(A){if($.browser.msie){window.event.cancelBubble=true}else{if(A!=undefined){A.stopPropagation()}}}function isNull(A){return A==null||A==undefined||A==""||A=="null"}function isFunction(A){return !!(A&&A.constructor&&A.call&&A.apply)}function isNumber(A){return !isNaN(parseFloat(A))&&isFinite(A)}function closeDialog(){if($zcmodal.hasInstance()){$zcmodal.getTopPopup().close()}}function convertToIndianTimeZone(){offset=+5.5;userDate=new Date();utc=userDate.getTime()+(userDate.getTimezoneOffset()*60000);ISTDate=new Date(utc+(3600000*offset));return ISTDate}function getAppDate(B){var C=new Date();if(B===-1){return C}else{var D=C.getTime()+(C.getTimezoneOffset()*60000);var A=new Date(D+(60000*B*-1));return A}}function getCurrentDate(){var A=getAppDate(ZCGlobal.appTimeZone);return A.toDateString()}function getCurrentTime(){var A=getAppDate(ZCGlobal.appTimeZone);return A.getHours()+":"+A.getMinutes()+":"+A.getSeconds()}function loadChat(){$("#zc_helpPanel-close").trigger("click");ZCLiveChat.load()}function C5PaymentCallBack(A){var B=this;B.wfRespArray=A.wfRespArray;B.redirectURl=A.redirectUrl;this.process=function(){var E=window.location.toString();if(E.indexOf("/paymentCallBack?")>0){var D=false;var C=B.wfRespArray;if(C!=undefined){$.each(C,function(F,G){if(G.FUNCTION_NAME=="openUrl"){if(!(G.windowType=="new"||G.windowType=="new window"||G.windowType=="popup window")){D=true}if((G.hasOwnProperty("redirectType")&&G.redirectType!="url")||!G.urlString.startsWith("http")){G.urlString="/"+GlobalUrls.getAppUrlFragment()+"/"+G.urlString}openWindowTask(G.urlString,G.windowType)}})}if(!D){window.location=B.redirectURl}}}}function PaymentCallback(A){this.timeTaken=0;this.pollTime;this.isReturn=function(){return(A.returnType=="return")};this.getPollURL=function(){return A.pollURL};this.getActionURL=function(){return A.actionURL};this.getRecLinkId=function(){return A.recLinkId};this.getTransactionId=function(){return A.transactionId};this.getCallbackJSON=function(){return JSON.parse(A.callbackJSON)};this.isStatusSuccess=function(){return(this.getCallbackJSON().status=="success")};this.getReturnFormData=function(){if(A.isExternal){return{isPaymentCallback:true,recLinkId:A.recLinkId,pmt_transactionId:A.transactionId,pmt_returnType:A.returnType,zc_SuccMsg:A.zc_SuccMsg,zc_NextUrl:A.zc_NextUrl,zc_OpenUrlIn:A.zc_OpenUrlIn}}else{return{componentName:A.formLinkName,componentType:"form",paymentCallback:true,recLinkId:A.recLinkId,transactionId:A.transactionId,returnType:A.returnType,zc_SuccMsg:A.zc_SuccMsg,zc_NextUrl:A.zc_NextUrl,zc_OpenUrlIn:A.zc_OpenUrlIn}}}}PaymentCallback.prototype.process=function(){if(this.isReturn()&&!this.isStatusSuccess()){this.poll()}else{this.submitReturn()}};PaymentCallback.prototype.submitReturn=function(){var A=this,B=document.createElement("form");B.setAttribute("method","post");B.setAttribute("action",A.getActionURL());$.each(A.getReturnFormData(),function(D,C){if(C!=undefined&&C!=null&&C!=""){var E=document.createElement("input");E.setAttribute("type","hidden");E.setAttribute("name",D);E.setAttribute("value",C);B.appendChild(E)}});$(B).appendTo("body").submit()};PaymentCallback.prototype.poll=function(){var A=this;var C=function(){A.poll()};var B={recLinkId:A.getRecLinkId(),transactionId:A.getTransactionId()};$.ajax({url:A.getPollURL(),method:"GET",data:B,success:function(D){if(D.status=="norow"&&(A.timeTaken<600000)){A.polltim=setTimeout(C,3000);A.timeTaken+=3000}else{clearTimeout(A.polltim);A.submitReturn()}}})};function parseAttr(V,G){var W={};var R=G.replace(/'/g,'"');var T=R.toLowerCase();if(V==FieldType.IMAGE){if(T.indexOf("<a")==0){if(T.indexOf("href")!=-1){var Y=T.indexOf("href",0);var P=R.substring(Y+1);var O=P.indexOf('"',0);var K=P.indexOf('"',O+1);var C=P.substring(O+1,K);W.zcfieldlink=C;W.target=2}if(T.indexOf("title")!=-1){var Y=T.indexOf("title",0);var P=R.substring(Y+1);var I=P.indexOf('"',0);var H=P.indexOf('"',I+1);var X=P.substring(I+1,H);W.zctitle=X}if(T.indexOf("target")!=-1){var Y=T.indexOf("target",0);var P=R.substring(Y+1);var S=P.indexOf('"',0);var Q=P.indexOf('"',S+1);var N=P.substring(S+1,Q);W.target=(N.toLowerCase().indexOf("blank")!=-1)?1:2}if(T.indexOf("src")!=-1){var Y=T.indexOf("src",0);var P=R.substring(Y+1);var d=P.indexOf('"',0);var b=P.indexOf('"',d+1);var B=P.substring(d+1,b);W.zcsource=B}if(T.indexOf("alt")!=-1){var Y=T.indexOf("alt",0);var P=R.substring(Y+1);var d=P.indexOf('"',0);var b=P.indexOf('"',d+1);var U=P.substring(d+1,b);W.zcalttext=U}}else{if(T.indexOf("<img")==0){if(T.indexOf("src")!=-1){var Y=T.indexOf("src",0);var P=R.substring(Y+1);var d=P.indexOf('"',0);var b=P.indexOf('"',d+1);var B=P.substring(d+1,b);W.zcsource=B}if(T.indexOf("alt")!=-1){var Y=T.indexOf("alt",0);var P=R.substring(Y+1);var d=P.indexOf('"',0);var b=P.indexOf('"',d+1);var U=P.substring(d+1,b);W.zcalttext=U}}}}else{if(T.indexOf("href")!=-1){var Y=T.indexOf("href",0);var P=R.substring(Y+1);var F=P.indexOf('"',0);var D=P.indexOf('"',F+1);var M=P.substring(F+1,D);W.zcurl=M;W.target=2}if(T.indexOf("title")!=-1){var Y=T.indexOf("title",0);var P=R.substring(Y+1);var c=P.indexOf('"',0);var I=P.indexOf('"',c+1);var E=P.substring(c+1,I);W.zctitle=E}if(T.indexOf("target")!=-1){var Y=T.indexOf("target",0);var P=R.substring(Y+1);var S=P.indexOf('"',0);var Q=P.indexOf('"',S+1);var A=P.substring(S+1,Q);W.target=(A.toLowerCase().indexOf("blank")!=-1)?1:2}var a=R.indexOf(">",0);var Z=R.indexOf("<",a);var J=G.substring(a+1,Z);W.zclnkname=J}return W}function getWindowHeight(){var A=0;if(typeof (window.innerWidth)=="number"){A=window.innerHeight}else{if(document.documentElement&&(document.documentElement.clientHeight)){A=document.documentElement.clientHeight}else{if(document.body&&(document.body.clientHeight)){A=document.body.clientHeight}}}return A}function getWindowWidth(){var A=0;if(typeof (window.innerWidth)=="number"){A=window.innerWidth}else{if(document.documentElement&&(document.documentElement.clientWidth)){A=document.documentElement.clientWidth}else{if(document.body&&(document.body.clientWidth)){A=document.body.clientWidth}}}return A}function showLiveDeskPane(){$("#chatContainer").slideDown(500);$("#liveChatFloat").fadeOut();var B=$("#liveChatFloat").attr("appLinkName");var A=$("#liveChatFloat").attr("dispname");$._setCookie("zc_"+B+"_"+A+"_ChatFrameVisible","true")}function showLoader(){var A=$.zcmodal({zcmodalId:"loaderPopup",type:ZCModalConstants.JIT_MODAL,showPreloader:true,showClose:false,closeOnEsc:false,closeOnAnyClick:false,hideFooter:true,bodyClass:"show-import-dialog",wrapperClass:"zc-import-dialog",buildDOM:function(){return getModalProgress()}})}function hideLiveDeskPane(){$("#chatContainer").slideUp(500);$("#liveChatFloat").fadeIn();var B=$("#chatContainer").attr("appLinkName");var A=$("#chatContainer").attr("dispname");$._setCookie("zc_"+B+"_"+A+"_ChatFrameVisible","")}function getParamsAsMap(E,A,D){E=$.trim(E);if(E==""){return{}}A=isNull(A)?"&":A;D=isNull(D)?"=":D;var B=E.split(A);var C={};for(var G=0;G<B.length;G++){var H=B[G];var I=$.trim(H.substring(0,H.indexOf(D)));var F=$.trim(H.substring((H.indexOf(D)+1),H.length));C[I]=F}return C}function getURLParamsJSON(F){var J=window.location.search;var D=window.location.hash;if(F!=undefined){D=F.substring(F.indexOf("?"))}var A=(J.indexOf("?")!=-1)?J.substring(J.indexOf("?")+1)+"&":"";var C=(D.indexOf("?")!=-1)?D.substring(D.indexOf("?")+1):"";A=A+C;var I="{";if(A!=undefined&&A!=""){var B=A.split("&");for(var E=0;E<B.length;E++){if(isNull(B[E])){continue}var G=(B[E]).split("=");var H=G[0];if(I!="{"){I=I+","}I=I+'"'+G[0]+'":"'+G[1]+'"'}}I=I+"}";return I}(function(A){A.QueryString=function(C){if(C==""){return{}}var B={};for(var D=0;D<C.length;++D){var E=C[D].split("=");if(E.length!=2){continue}B[E[0]]=decodeURIComponent(E[1].replace(/\+/g," "))}return B}})(jQuery);(function(A){A.IsLoadInDialog=function(E){if(!LIB._isNull(E)&&E.indexOf("?")>-1){try{var H=E.substr(E.indexOf("?")).substr(1);var B=decodeURIComponent(H).split("&");var G;if(B==""){return false}for(var C=0;C<B.length;++C){var F=B[C].split("=");if(F[0]=="zc_LoadIn"){G=decodeURIComponent(F[1].replace(/\+/g," "));break}}return G=="dialog"}catch(D){Console.log(D)}}return false}})(jQuery);window.Console=window.console;(function(A){A._setCookie=function(I,H,D,F,G){var E=new Date();if(D){E.setTime(E.getTime()+(D*24*3600*1000))}else{E.setTime(E.getTime()+(365*24*3600*1000))}var C=(G==undefined)?"/":G;var B=I+"="+escape(H)+";expires="+E.toGMTString()+";path="+C+";";if(F){B=B+"domain="+escape(F)}document.cookie=B}})(jQuery);(function(A){A._deleteCookie=function(B){A._setCookie(B,"")}})(jQuery);(function(A){A._getCookie=function(F){if(LIB._isNull(document.cookie)||document.cookie.length==0){return""}var C=F+"=";var B=document.cookie.split(";");for(var D=0;D<B.length;D++){var E=B[D].trim();if(E.indexOf(C)===0){return E.substring(C.length,E.length)}}return undefined}})(jQuery);(function(A){A._appendToQueryString=function(E,C,D){var B=E;if(B==undefined||B==null||B==""){}else{B+="&"}B+=C+"="+D;return B}})(jQuery);$.fn.showImportData=function(A,D,B,F,G){if(F!=undefined&&F==true){if($zcmodal.getTopPopup()!=undefined){$zcmodal.getTopPopup().close()}}var E=null;if(ZCGlobal.environmentName!==""){E=ZCGlobal.serverPrefix+"/"+ZCGlobal.scopeName+"/environment/"+ZCGlobal.environmentName+"/"+A+"/import/"+D+"/showImportDialog"}else{E=ZCGlobal.serverPrefix+"/"+ZCGlobal.scopeName+"/"+A+"/import/"+D+"/showImportDialog"}if(B!=undefined&&B!=""){E=E+"?reportLinkName="+B}if((typeof (reportMeta)!=="undefined")){if(!LIB._isNull(reportMeta.PRIVATELINK)){E=E+"&privatelink="+reportMeta.PRIVATELINK}}var C={type:ZCModalConstants.JIT_MODAL,showPreloader:true,bodyClass:"show-import-dialog",wrapperClass:"zc-import-dialog",beforeShow:function(){},beforeClose:function(){},buildDOM:function(){return getModalProgress()}};var I=$.zcmodal(C);var H=I.getBody();$.ajax({beforeSend:function(){},url:E,type:"GET",success:function(K,J,M){$(H).html(K);if(ZCGlobal.useSheet2App&&ZCGlobal.isPortal!=="true"){ZCImport.reportLinkName=B;ZCImport.isPermaOrEmbed=G;ZCImport.bindSheetToAppEvents(B)}else{ZCImport.bindEvents()}}})};var ZCImport=new function(){var A=this;var C=null;this.reportLinkName=null;this.isPermaOrEmbed=false;this.isSheet2AppEnabled=ZCGlobal.useSheet2App;this.sheet2AppDomain=ZCGlobal.sheet2AppDomain;this.bindSheetToAppEvents=function(E){C=$("#ZC_IMPORTDATA_DIV");$(C).find("input[name=xfile]").change(function(F){F.preventDefault();stopEventBubbling(F);A.postToSheet()});$(window).off("message.sheetApp").on("message.sheetApp",function(F){F=F.originalEvent;if(F.data.service=="sheetapp"){if(F.data.status=="success"){A.refreshView()}else{if(F.data.status=="upload"){if(F.data.action=="freeze"){A.loadingFreeze()}else{if(F.data.action=="unfreeze"){A.hideLoadingFreeze()}else{if(F.data.action=="loading"){A.loading()}else{if(F.data.action=="removeloading"){A.stopLoading()}else{if(F.data.action=="top-freeze"){$("#ZC_IMPORTDATA_DIV").find(".zc-dialogdiv").addClass("zc-sheetapp-header-freeze");$("#ZC_IMPORTDATA_DIV").parentsUntil(".popupbox-wrapper").find(".popupClose").addClass("zc-sheetapp-header-freeze")}else{if(F.data.action=="top-unfreeze"){$("#ZC_IMPORTDATA_DIV").find(".zc-dialogdiv").removeClass("zc-sheetapp-header-freeze");$("#ZC_IMPORTDATA_DIV").parentsUntil(".popupbox-wrapper").find(".popupClose").removeClass("zc-sheetapp-header-freeze")}}}}}}}else{if(F.data.status=="preview"){if(F.data.action=="closeHeader"){$("#ZC_IMPORTDATA_DIV").attr("style","display:none;");$("#ZC_IMPORTDATA_DIV").parentsUntil(".popupbox-wrapper").find(".popupClose").attr("style","display:none;")}}}}}});$(C).find(".zc-dem-import-list .cloud-file").parent().click(function(){A.initlizeGadgetFrame()});$(C).find(".zc-dem-import-list .pasted-data").parent().click(function(){$(C).find("input[name='isPastedData']").val("true");A.switchImportDialog(true)});$(C).find(".zc-secondary-dialog button.zc-live-primary-btn").click(function(F){F.preventDefault();stopEventBubbling(F);$(C).find("input[name='isPastedData']").val("true");A.postToSheet()});$(C).find(".zc-secondary-dialog button.zc-live-secondary-btn").click(function(F){F.preventDefault();stopEventBubbling(F);A.switchImportDialog(false)});A.initializeGadget()};this.switchImportDialog=function(E){var F=$(C).find(".zc-dem-dialogue-content");if(E){$(F[1]).show();$(F[0]).hide()}else{$(F[1]).hide();$(F[0]).show()}};this.initIFrame=function(G){var F=$("<div>").css({"z-index":"1001",position:"fixed",top:"0px",width:"100%",height:"100%"});var E=$("<iframe>").css({border:"medium none",height:"100%",margin:"0px",padding:"0px",width:"100%"});F.attr("id",G.divID);F.addClass(G.divClass);E.attr("id",G.frameID);E.addClass(G.frameClass);if(!LIB._isNull(G.frameSrc)){E.attr("src",G.frameSrc)}if(!LIB._isNull(G.frameName)){E.attr("name",G.frameName)}F.append(E);$("body").append(F)};this.initlizeGadgetFrame=function(){var E={};E.divID="zc-gadgets_cloudpicker_div";E.divClass="gadgets_cloudpicker_div";E.frameID="zc-file_attach_iframe";E.frameClass="gadgets_cloudpicker_iframe";E.frameSrc=ZCGlobal.clouddocurl;E.configType="cloudPicker";A.initIFrame(E)};this.initlizeSheetFrame=function(){var E={};E.divID="zc-sheettoapp-iframe-container";E.divClass="gadgets_cloudpicker_div";E.frameID="zc-sheettoapp-iframe";E.frameClass="gadgets_cloudpicker_iframe";E.frameName="sheetToAppIFrames";E.configType="sheetToApp";A.initIFrame(E);return E};this.postToSheet=function(){var E=A.initlizeSheetFrame();$(C).find("form[name='sheet2AppForm']").submit()};this.loading=function(){A.showLoading()};this.stopLoading=function(){A.hideLoading()};this.loadingFreeze=function(){A.hideLoadingFreeze();var E='<div id="zc-dem-freeze-pane" class="zc-dem-loading-freeze"></div>';$("body").append(E)};this.hideLoadingFreeze=function(){$("#zc-dem-freeze-pane").remove()};var D;this.showLoading=function(){A.hideLoading();var E='<div class="zc-dem-loading-freeze"></div>';$(document.body).append(E);D=setTimeout(function(){var F=A.getLoadingHtml();$(document.body).append(F);$(F).show()},100)};this.hideLoading=function(){if(D!=undefined){clearTimeout(D)}$(".zc-dem-loading-freeze").remove();$("#loadingEl").remove()};this.getLoadingHtml=function(){var E='<div id="loadingEl" class="zc-dem-loader-container"><div class= "ball-pulse-container"><div></div><div></div><div></div><div></div></div></div>';return $(E)};this.refreshView=function(){location.reload()};this.bindEvents=function(G){C=$("#ZC_IMPORTDATA_DIV");$(C).find("input[name=DATA_LOCATION]").click(function(){A.toggleDataLoc(this)});$(C).find("input[name=DATA_LOCATION]").change(function(){A.toggleDataLoc(this)});$(C).find("input[name=IMPORT_MODE]").change(function(){A.setImportMode(this)});$(C).find("div[name=toggleScriptDiv]").change(function(){A.toggleScriptDiv(this)});A.initializeGadget();$(C).find("#cloudPickerEl").click(function(){A.openCloudPickerForImport()});$(C).find("#gDocsEl").click(function(){A.openImportGDocDialog()});$(C).find("input[name=HASFIELDNAMES]").click(function(){A.toggleFirstRow(this)});$(C).find("#toggleCSVSettings").click(function(){A.toggleCSVSettings()});var E=$(C).find("#showCSVSettings");var F=$(C).find("#hideCSVSettings");$(E).click(function(){$(E).toggleClass("hide");$(F).toggleClass("hide");A.toggleCSVSettings()});$(F).click(function(){$(E).toggleClass("hide");$(F).toggleClass("hide");A.toggleCSVSettings()});$(F).addClass("hide");$(C).find("input[name=DATA_FILE]").change(function(){var J=$(this).val();if(J){var K=(J.indexOf("\\")>=0?J.lastIndexOf("\\"):J.lastIndexOf("/"));var I=J.substring(K);if(I.indexOf("\\")===0||I.indexOf("/")===0){I=I.substring(1)}var H="<li><p></p></li>";$(".zc-import-filename").html(H);$(".zc-import-filename").find("p").text(I)}});$(C).find("input[name=zc-closebutton]").click(function(H){if($zcmodal.getTopPopup()!=undefined){$zcmodal.getTopPopup().close()}if($(this).attr("step")){location.reload()}if(window.event){window.event.cancelBubble=true;return false}})};this.setImportMode=function(F){var E=$("#ZC_IMPORTDATA_DIV").find("div[elName=UPDATE_ADD_DIV]");if($(F).val()=="UPDATE_ADD"){E.show()}else{E.hide();E.find(":input[type=checkbox]").prop("checked",false)}};this.toggleDataLoc=function(G){var F=$(G).val();var E=$("#ZC_IMPORTDATA_DIV");if(F=="PASTED_DATA"){E.find("div[elName=WEBCLIENT_DIV]").show();E.find("div[elName=PASTED_DATA_DIV]").show();E.find("div[elName=LOCAL_DRIVE_DIV]").hide();E.find("div[elName=MIGRATION_DIV]").hide();E.find("div[elName=CLOUD_PICKER_DIV]").hide();E.find("div[elName=GOOGLE_DOCS_DIV]").hide()}else{if(F=="CLOUD_PICKER"){E.find("div[elName=WEBCLIENT_DIV]").show();E.find("div[elName=PASTED_DATA_DIV]").hide();E.find("div[elName=LOCAL_DRIVE_DIV]").hide();E.find("div[elName=CLOUD_PICKER_DIV]").show();E.find("div[elName=GOOGLE_DOCS_DIV]").hide();E.find("div[elName=MIGRATION_DIV]").hide()}else{if(F=="GOOGLE_DOCS"){E.find("div[elName=WEBCLIENT_DIV]").show();E.find("div[elName=PASTED_DATA_DIV]").hide();E.find("div[elName=LOCAL_DRIVE_DIV]").hide();E.find("div[elName=CLOUD_PICKER_DIV]").hide();E.find("div[elName=GOOGLE_DOCS_DIV]").show();E.find("div[elName=MIGRATION_DIV]").hide()}else{if(F=="LOCAL_DRIVE"){E.find("div[elName=WEBCLIENT_DIV]").show();E.find("div[elName=PASTED_DATA_DIV]").hide();E.find("div[elName=LOCAL_DRIVE_DIV]").show();E.find("div[elName=MIGRATION_DIV]").hide();E.find("div[elName=CLOUD_PICKER_DIV]").hide();E.find("div[elName=GOOGLE_DOCS_DIV]").hide()}else{if(F=="MIGRATION"){E.find("div[elName=PASTED_DATA_DIV]").hide();E.find("div[elName=LOCAL_DRIVE_DIV]").hide();E.find("div[elName=WEBCLIENT_DIV]").hide();E.find("div[elName=MIGRATION_DIV]").show();E.find("div[elName=CLOUD_PICKER_DIV]").hide();E.find("div[elName=GOOGLE_DOCS_DIV]").hide()}}}}}};this.openCloudPickerForImport=function(G){this.isImport=true;var F=$("<div>").attr("id","zc-gadgets_cloudpicker_div").addClass("gadgets_cloudpicker_div").css({"z-index":"1001",position:"fixed",top:"0px",width:"100%",height:"100%"});var E=$("<iframe>").attr("id","zc-file_attach_iframe").attr("src",ZCGlobal.clouddocurl).addClass("gadgets_cloudpicker_iframe").css({border:"medium none",height:"100%",margin:"0px",padding:"0px",width:"100%"});F.append(E);E.one("load",function(){E.one("load",function(){var J=E[0],U=J.contentWindow?J.contentWindow.document:(J.contentDocument?J.contentDocument:J.document),S=U.documentElement?U.documentElement:U.body,R;R=S?S.innerHTML:null;var M=U.getElementsByTagName("pre")[0],T=U.getElementsByTagName("body")[0];if(M){R=M.textContent?M.textContent:M.innerText}else{if(T){R=T.textContent?T.textContent:T.innerText}}$(F).remove();R=JSON.parse(R);$("#cloudPickVal").val(JSON.stringify(R));for(var O in R){var I=R[O];for(var P=0,K=I.length;P<K;P++){var Q=I[P];var H=Q.docName;if(!LIB._isNull(H)){var N=$("#cloudFileName");$(N).html(Q.docName)}}}})});$("body").append(F)};this.initializeGadget=function(){$(window).off("message.gadgetsCloudPicker").on("message.gadgetsCloudPicker",function(G){G=G.originalEvent;if(G.data!=undefined&&G.data.type=="CloudPicker"){fileListObject=G.data.doc;if(fileListObject!=undefined){var J;var F;var I=[];var H=3;zohodocs=fileListObject.zohodocs;gdrive=fileListObject.gdrive;dropbox=fileListObject.dropbox;skydrive=fileListObject.skydrive;box=fileListObject.box;workdrive=fileListObject.workdrive;if(workdrive!=undefined&&workdrive.length>0){H=2;F="workdrive";I.push(workdrive[0])}else{if(gdrive!=undefined&&gdrive.length>0){H=3;F="gdrive";I.push(gdrive[0])}else{if(dropbox!=undefined&&dropbox.length>0){H=4;F="dropbox";I.push(dropbox[0])}else{if(skydrive!=undefined&&skydrive.length>0){H=5;F="skydrive";I.push(skydrive[0])}else{if(box!=undefined&&box.length>0){H=6;F="box";I.push(box[0])}else{if(zohodocs!=undefined&&zohodocs.length>0){H=7;F="docs";I.push(zohodocs[0])}}}}}}if(I!=undefined){fileDetail=I[0];docId=fileDetail.docId;docType=fileDetail.docType;docName=fileDetail.docName;J=fileDetail.accountId;originalFileName=docName;if(docName.indexOf(".")<0){switch(docType){case"document":docName=docName+".doc";break;case"presentation":docName=docName+".ppt";break;case"spreadsheet":docName=docName+".xlsx";break;case"zohosheet":docName=docName+".xlsx";break;case"pdf":docName=docName+".pdf";break}}docName=decodeURIComponent(docName);docType=unescape(docType);docId=unescape(docId);originalFileName=unescape(originalFileName);J=unescape(J);if(A.isSheet2AppEnabled&&ZCGlobal.isPortal!=="true"){$(C).find("input[name='docId']").val(docId);$(C).find("input[name='docType']").val(docType);$(C).find("input[name='docName']").val(docName);$(C).find("input[name='service']").val(F);if(F=="dropbox"){$(C).find("input[name='filePath']").val(filePath)}}else{docDetails=H+","+docId+","+docType+","+docName+","+originalFileName;if(H==4){docDetails+=","+J}var E={};E[H]=I;$("#cloudPickVal").val(JSON.stringify(E));$("#cloudFileName").text(docName)}$("#zc-gadgets_cloudpicker_div").remove();$(window).off("message.gadgetsCloudPicker");if(A.isSheet2AppEnabled&&ZCGlobal.isPortal!=="true"){$(C).find("input[name='cloud']").val("true");A.postToSheet()}}}}else{if(G.data!=undefined&&G.data=="closePicker"){$("#zc-gadgets_cloudpicker_div").remove()}}})};this.openImportGDocDialog=function(){};var B=function(){var E=$.zcmodal({type:ZCModalConstants.JIT_MODAL,showPreloader:true,showClose:false,closeOnEsc:false,closeOnAnyClick:false,hideFooter:true,bodyClass:"show-import-dialog",wrapperClass:"zc-import-dialog",buildDOM:function(){return getModalProgress()}})};this.toggleScriptDiv=function(){var E=$("#ZC_IMPORTDATA_DIV").find("div[elName=SKIP_SCRIPT_DIV]");if($(E).css("display")=="none"){$(E).show()}else{$(E).hide()}};this.continueImport=function(F){var E=A.checkInputs(F);return E};this.importData=function(E){if(!A.checkInputs(E)){return false}if(ZCImport.isSheet2AppEnabled&&ZCGlobal.isPortal!=="true"){$(E).attr("onsubmit","");$(E).submit()}else{var G=$(E).attr("actionurl");var F=new FormData($(E)[0]);$.ajax({beforeSend:function(){B()},url:G,type:"POST",processData:false,contentType:false,data:F,success:function(I,H,J){closeFirstPopup();$(".show-import-dialog").find(".popupConentContainer").html(I);ZCImport.bindEvents()},error:function(N){closeFirstPopup();var H=$("<div>").append(N.responseText).find("input[name=errorMeta]");var I;try{var K=JSON.parse($(H).val());I=K.errorDescription}catch(J){Console.log(J)}var M={};if(LIB._isNull(I)){M.msg=i18n.unsupportedfile}else{M.msg=I;M.desc=i18n.unsupportedfile}$.alert(M)}})}};this.checkInputs=function(F){if($(F).find(":input[name=IMPORT_MODE]").val()=="UPDATE_ADD"){var E=true;$.each($(F).find("div[elName=UPDATE_ADD_DIV]").find(":input[name=UPDATE_ADD_COLS]"),function(G,H){if($(H).is(":checked")){E=false}});if(E&&E.toString()=="true"){$.alert({msg:i18n.nofldtomatch});return false}}if($(F).find(":input[elName=PASTED_DATA_RADIO]").is(":checked")){if($(F).find(":input[name=PASTED_DATA]").val()==""){$.alert({msg:i18n.plzpastedata});return false}}if($(F).find(":input[elName=GOOGLE_DOCS_RADIO]").is(":checked")){if($(F).find(":input[name=GDOC_ID]").val()==""){$.alert({msg:i18n.nofiletoimport});return false}}if($(F).find(":input[elName=LOCAL_DRIVE_RADIO]").is(":checked")){if($(F).find(":input[name=DATA_FILE]").val()==""){$.alert({msg:i18n.nofiletoimport});return false}}return true};this.toggleFirstRow=function(I){var H=$("#ZC_IMPORTDATA_DIV").find("div[elName=ZCIMPORT_PREVIEW_DIV]");var E=$(H).find("tr[elName=ZCIMPORT_HDRDATA_TR]");var F=$(H).find("tr[elName=ZCIMPORT_HASHDR_TR]");var G=$(H).find("tr[elName=ZCIMPORT_NOHDR_TR]");if($(I).val()&&$(I).val().toString()=="true"){$(E).hide();$(G).hide();$(F).show()}else{$(E).show();$(F).hide();$(G).show()}};this.toggleCSVSettings=function(){var G=$("#ZC_IMPORTDATA_DIV");var E=$(G).find("div[elName=ZCIMPORT_CSVSETTINGS_DIV]");var F=$(G).find("div[elName=ZCIMPORT_PREVIEW_REFRESH_DIV]");if($(E).is(":hidden")){$(E).show()}else{$(E).hide()}};this.refreshPreview=function(G,M,H){var N=$("#ZC_IMPORTDATA_DIV");var K=$(N).find("#sheet_"+M).val();var O=$(N).find("div[elName=ZCIMPORT_CSVSETTINGS_DIV]");var I="ZCACTION=PARSEFILE&formLinkName="+M+"&FILENAME="+K;I+="&sharedBy="+ZCGlobal.scopeName;I+="&"+ZCGlobal.csrfTokenName+"="+ZCGlobal.csrfToken;I+="&DELIMETER="+$(O).find(":input[name=DELIMETER]").val();I+="&HASFIELDNAMES="+$(N).find(":input[elName=HASFIELDNAMES_RADIO]").is(":checked");I+="&TEXT_QUALIFIER="+$(O).find(":input[name=TEXT_QUALIFIER]").val();var J=$(O).find(":input[name=SKIP_TOP_ROWS]").val();if(!isNull(J)){I+="&SKIP_TOP_ROWS="+J}var E=$(O).find(":input[name=COMMENT_CHAR]").val();if(!isNull(E)){I+="&COMMENT_CHAR="+E}var F=GlobalUrls.getAppUrlPrefix(G)+"/import/"+M+"/importFormData";if(H!=undefined&&H!=""){F+="?reportLinkName="+H}$.ajax({beforeSend:function(){},url:F,type:"POST",data:I,success:function(R,Q,S){var P=$(N).find("div[elName=ZCIMPORT_PREVIEW_DIV]");$(P).html(R);ZCImport.bindEvents();$(N).find("#hideCSVSettings").toggleClass("hide")}})};this.isTrue=function(E){return(E&&E.toString()=="true")};this.checkColumn=function(E){if(!A.isTrue($(E).is(":checked"))){$("#ZC_IMPORTDATA_DIV").find("div[elName=ZCIMPORT_PREVIEW_DIV]").find("select:eq("+$(E).attr("colIndex")+")").val(-1)}};this.fieldOnChange=function(J){var I=$("#ZC_IMPORTDATA_DIV").find("div[elName=ZCIMPORT_PREVIEW_DIV]");var F=$(J).attr("colIndex");var E=$(J).val();var G=$(I).find("tr[elName=ZCIMPORT_NOHDR_TR]");var H=$(I).find("tr[elName=ZCIMPORT_HASHDR_TR]");if(E==-1){$(H).find(":checkbox:eq("+F+")").prop("checked",false);$(G).find(":checkbox:eq("+F+")").prop("checked",false)}else{$.each($(I).find("select"),function(K,N){if(E==$(N).val()){var M=(K==F);if(!A.isTrue(M)){$(N).val(-1)}$(H).find(":checkbox:eq("+K+")").prop("checked",M);$(G).find(":checkbox:eq("+K+")").prop("checked",M)}})}};this.importFormData=function(K,J,Z,G){var U=$("#ZC_IMPORTDATA_DIV");var T=$(U).find("div[elName=ZCIMPORT_PREVIEW_DIV]");var a=$(T).find("tr[elName=ZCIMPORT_LABEL_TR]");var Y=$(U).find(":input[elName=HASFIELDNAMES_RADIO]").is(":checked");var W=Y?$(T).find("tr[elName=ZCIMPORT_HASHDR_TR]"):$(T).find("tr[elName=ZCIMPORT_NOHDR_TR]");var O="ZCACTION=IMPORT";O+="&formLinkName="+J;O+="&HASFIELDNAMES="+Y;O+="&DELIMETER="+$(U).find(":input[name=DELIMETER]").val();O+="&TEXT_QUALIFIER="+$(U).find(":input[name=TEXT_QUALIFIER]").val();O+="&SKIP_TOP_ROWS="+$(U).find(":input[name=SKIP_TOP_ROWS]").val();O+="&ONIMPORTERROR="+$(U).find(":input[name=ONIMPORTERROR]").val();O+="&sharedBy="+ZCGlobal.scopeName;O+="&environmentName="+ZCGlobal.environmentName;O+="&appLinkName="+K;O+="&zccpn="+$(U).find(":input[name=zccpn]").val();var R=$(U).find(":input[name=DATE_FORMAT]").val();if(!isNull(R)){O+="&DATE_FORMAT="+R}var F=$(U).find(":input[name=COMMENT_CHAR]").val();if(!isNull(F)){O+="&DATE_FORMAT="+F}var V=JSON.parse(G);if(!isNull(V.FILENAME)){var M=V.FILENAME;var S=$(U).find("select[name=SHEET_NAME]").val();if(S!=undefined){M=S}O+="&FILENAME="+encodeURIComponent(M);var P=[];var H=$(U).find("select[name='SHEET_NAME']").find("option");for(i=0;i<H.length;i++){P.push($(H[i]).val())}O+="&FILELIST="+JSON.stringify(P)}var X=$(U).find("select[name=DATE_TYPE]").val();if(!isNull(X)){O+="&DATE_TYPE="+X}if(!isNull(V.IMPORT_MODE)){O+="&IMPORT_MODE="+V.IMPORT_MODE}if(!isNull(V.SKIP_ONUPDATE)){O+="&SKIP_ONUPDATE="+V.SKIP_ONUPDATE}if(!isNull(V.SKIP_ONSUBMIT)){O+="&SKIP_ONSUBMIT="+V.SKIP_ONSUBMIT}if(!isNull(V.SKIP_ONCOMMIT)){O+="&SKIP_ONCOMMIT="+V.SKIP_ONCOMMIT}if(!isNull(V.IMPORTSUBFORMDATA)){O+="&IMPORTSUBFORMDATA="+V.IMPORTSUBFORMDATA}if(!isNull(V.MATCHING_COLUMNS)){var I=JSON.parse(V.MATCHING_COLUMNS);for(var Q=0;Q<I.length;Q++){O+="&MATCHING_COLUMNS="+I[Q]}}var N=false;O+="&IMPORTCOLUMNS=<COLUMNS>";$.each($(W).find(":input[type=checkbox]"),function(b,c){var d=$(a).find(":input:eq("+b+")").val();var e=(A.isTrue($(c).is(":checked"))&&(d!=-1));if(A.isTrue(e)){N=true}O+='<COLUMN INDEX="'+(b+1)+'" DELUGENAME="'+d+'" IMPORT="'+e+'" />'});O+="</COLUMNS>";if(Geolocation.locationError==undefined&&Geolocation.locationData!=undefined){O+="&GEOLOCATION="+Geolocation.locationData}if(!isNull(V.ISGEOLOCATION)&&V.ISGEOLOCATION&&Geolocation.locationData==undefined){Geolocation.locationError=(Geolocation.locationError==undefined)?i18n.formgeolocationerror:Geolocation.locationError;$.alert({msg:Geolocation.locationError,desc:(Geolocation.locationError==i18n.formgeolocationerror)?i18n.formgeolocationdesc:i18n.geolocbrowsererror,handleFocus:false});return false}if(N){var E=GlobalUrls.getAppUrlPrefix(K)+"/import/"+J+"/importFormData";if(Z!=undefined&&Z!=""){E=E+"?reportLinkName="+Z}$.ajax({beforeSend:function(){B()},url:E,type:"POST",data:O,success:function(c,b,d){closeFirstPopup();$(".show-import-dialog").find(".popupConentContainer").html(c);ZCImport.bindEvents()},error:function(b){closeFirstPopup();$.alert({msg:"An error occurred.."});Console.log(b)}})}else{$.alert({msg:i18n.selectatleastacolumntoimport})}};this.showHideImportError=function(J){var G=$(J).closest("table.zc-import-table");var I=$(G).find("tr[elName=ZCERRORDETAILS]");var E=A.isTrue($(J).attr("showError"));var H=$(G).find("a[errorEle='true']");var F=$(J).closest("tbody").find("tr[elName=ZCERRORDETAILS]");$(I).hide();$(H).attr("showError",true);$(H).html(i18n.showimperrors);if(E){$(F).show();$(J).attr("showError",false);$(J).html(i18n.hideimperrors)}else{$(F).hide();$(J).attr("showError",true);$(J).html(i18n.showimperrors)}}}();function evaluateJs(A,C){var B=document.createElement("script");B.text=A;document.getElementsByTagName("body")[0].appendChild(B);doaction(C);if(window.openURLBreak){window.openURLBreak=false;return true}return false}function openWindowTask(E,C,B){var D=false;if($zcmodal.hasInstance()){isUrlContainsDialog=$.IsLoadInDialog(E);$zcmodal.getTopPopup().close();D=true}E=E.trim();var A=E.toLowerCase();if(!ZCSecurity.isURLXSSVulnerable(E)){window.openURLBreak=LIB._openURL(E,C,B,D)}}function createInputElement(B,C){var A=document.createElement("input");A.type="hidden";A.setAttribute("name",B);A.setAttribute("value",C);return A}function createFormElement(D,A,C){var B=document.createElement("form");if(!isNull(D)){B.setAttribute("method",D)}if(!isNull(A)){B.setAttribute("action",A)}if(!isNull(C)){B.setAttribute("target",C)}return B}function isInsideFence(C,B){var A=C.RAD,E=C.UNIT;var H=G(D(C.LAT),D(B.latitude),D(C.LON-B.longitude));if(E==="K"){H=H*1.852}else{if(E==="M"){H=H*1.15078}}return(H<=A);function G(K,J,M){var I=Math.sin(K)*Math.sin(J)+Math.cos(K)*Math.cos(J)*Math.cos(M);var N=Math.acos(I);return F(N)*60}function D(I){return(I*Math.PI)/180}function F(I){return(I*180)/Math.PI}}$.ajaxSetup({error:function(B,A,C){liveErrorHandler.handleError(B,A,C)}});$.zcAjax=(function(D){D.zcAjax=true;var A=D.success,B=D.error,C={};$.ajaxSetup(C,D);if(!C.async){throw new Error("options.async false not supported")}C.success=function(G,E,F){interceptAJAXResponse(C,G,E).then(function(){if(A){A(G,E,F)}})};C.error=function(G,E,H){if(G.status==Constants.MAINTENANCE_MODE_ERROR_STATUS_CODE){if(typeof (LIB)!="undefined"&&typeof (LIB._stopLoading)=="function"){LIB._stopLoading()}if(ZCGlobal.isAdmin){var I=new AppURL();var F=I.getEnvironmentsPageUrl();$.notify({msg:"<p>"+i18n["zc.c6.publish.error.currentlypublished"].replace("{0}",F)+"</p>"})}else{$.notify({msg:"<p>"+i18n["zc.c6.publish.error.maintenancemode"]+"</p>"})}}else{if(B){B(G,E,H)}else{liveErrorHandler.handleError(G,E,H)}}};interceptAJAXRequest(C).then(function(){$.ajax(C)})});$.ajaxPrefilter(function(D,A,F){if(A.zcAjax){return }var B=D.error;D.error=function(J,H,K){if(J.status==Constants.MAINTENANCE_MODE_ERROR_STATUS_CODE){if(ZCGlobal.isAdmin){var M=new AppURL();var I=M.getEnvironmentsPageUrl();$.notify({msg:"<p>"+i18n["zc.c6.publish.error.currentlypublished"].replace("{0}",I)+"</p>"})}else{$.notify({msg:"<p>"+i18n["zc.c6.publish.error.maintenancemode"]+"</p>"})}}B(J,H,K)};var E=D.type;if(E.toUpperCase()=="POST"&&window.location.host===zcNewLivePublicDomain){var G=D.url;var C=G.indexOf("?");if(C>=0){D.url=G.substring(0,C)+"/zc_public"+G.substring(C)}else{if(G.endsWith("/")){D.url=G+"zc_public"}else{D.url=G+"/zc_public"}}}});function getSpecificDomain(A){switch(A){case Constants.ZOHO_MAPS:return typeof (ZCGlobal)!=="undefined"&&ZCGlobal.buildSetup=="eu"?Constants.ZMAPS_DOMAIN_EU:Constants.ZMAPS_DOMAIN;case Constants.IMAGE_STATIC_SERVER:return typeof (ZCGlobal)!=="undefined"&&ZCGlobal.buildSetup=="eu"?Constants.IMG_STATIC_SERVER_EU:Constants.IMG_STATIC_SERVER;case Constants.STYLE_STATIC_SERVER:return typeof (ZCGlobal)!=="undefined"&&ZCGlobal.buildSetup=="eu"?Constants.IMG_STATIC_SERVER_EU:Constants.CSS_STATIC_SERVER}}formAccessURLRegex=new RegExp("/([A-Za-z0-9_.-]+)/([A-Za-z0-9_-]+)/(form|form-perma|form-embed)/([A-Za-z0-9_-]+)$");previewURLRegex=new RegExp("/preview/([A-Za-z0-9_.-]+)/([A-Za-z0-9_-]+)/(form|report|page)/([A-Za-z0-9_-]+)$");function isFormAccessURL(C){var E=document.createElement("a");E.href=ZCGlobal.serverPrefix;var A=C.indexOf(E.host);var B=C.indexOf("?");var F=(B===-1)?C.substring(A+(E.host).length):C.substring(A+(E.host).length,B);var D=F.search(formAccessURLRegex);return D===0||D!==-1&&previewURLRegex.test(C)}function decode(D,C){if(D==undefined){D=document.createElement("textarea")}if(C!=undefined&&typeof (C)=="string"&&C.toLowerCase().indexOf("</textarea>")!=-1){var B=C.toLowerCase().indexOf("</textarea>");var A=C.substring(B,B+11);C=C.replace(A,"ZCtextareaZC");D.innerHTML=C;C=D.value.replace("ZCtextareaZC",A)}else{D.innerHTML=C;C=D.value}return C}var FormatConstants=new function(){this.DEFAULTFORMAT=0;this.COMMADOTENGLISH=1;this.COMMADOTINDIA=2;this.SPACECOMMA=3;this.DOTCOMMA=4;this.QUOTEDOT=5};var FormatSeparators={0:["","."],1:[",","."],2:[",","."],3:[" ",","],4:[".",","],5:["'","."]};var EditorFonts={Serif:{htm:"Serif",ff:"serif"},Arimo:{htm:"Arimo",ff:"Arimo,sans-serif"},Ptmono:{htm:"Ptmono",ff:"'Ptmono',courier,monospace"},Heuristica:{htm:"Heuristica",ff:"Heuristica,Tinos,times,serif"},EBGaramond:{htm:"EBGaramond",ff:"EBGaramond,serif"},RobotoCondensed:{htm:"RobotoCondensed",ff:"RobotoCondensed,sans-serif"},OpenSans:{htm:"OpenSans",ff:"OpenSans,Arimo,sans-serif"},Tinos:{htm:"Tinos",ff:"'Tinos',times,serif"},Lato:{htm:"Lato",ff:"'Lato',Arimo,sans-serif"},DejaVuSans:{htm:"DejaVuSans",ff:"DejaVuSans"},ArchivoBlack:{htm:"ArchivoBlack",ff:"'ArchivoBlack',sans-serif"},ComicNeue:{htm:"ComicNeue",ff:"'ComicNeue'"},Carlito:{htm:"Carlito",ff:"Carlito, DejaVuSans, Arimo, sans-serif"}};var EditorFontsHtml=function(D){var B=new Array(),A,C,E;for(C in D){if(D.hasOwnProperty(C)){A=D[C];for(E in A){if(A.hasOwnProperty(E)){B.push(EditorFonts[A[E]])}}}}return B};var ScriptConstants=new function(){this.NO_CLOSE_SCRIPT=0;this.CLOSE_SCRIPT=1;this.CLOSE_ALL_SCRIPT=2};var GMAPKEY=new function(){this.ADDRESS_LINE_1="route";this.ADDRESS_LINE_2="locality";this.DISTRICT_CITY="administrative_area_level_2";this.STATE_PROVINCE="administrative_area_level_1";this.POSTAL_CODE="postal_code";this.COUNTRY="country"};var escapeHTMLAttribute=function(B){var A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return B.replace(/[&<>"']/g,function(C){return A[C]})};var escapeDoubleQuotes=function(A){return A.replace(/"/g,'\\"')};function zcDebounce(B,A){A||(A=250);var C;return function(){var D=this,E=arguments;clearTimeout(C);C=setTimeout(function(){C=null;B.apply(D,E)},A)}}function zcThrottle(C,A){A||(A=250);var B=0;return function(){var D=this,F=arguments,E=+new Date();if(E>=B+A){B=E;C.apply(D,F)}}}function ZCWebStorage(){}ZCWebStorage.localStore={};ZCWebStorage.fallback=false;ZCWebStorage.setItem=function(B,A){if(typeof (Storage)!=="undefined"){try{localStorage.setItem(B,A)}catch(C){ZCWebStorage.fallback=true}}else{ZCWebStorage.fallback=true}if(ZCWebStorage.fallback){ZCWebStorage.localStore[B]=A}};ZCWebStorage.getItem=function(B){var A=false;if(!ZCWebStorage.fallback&&typeof (Storage)!=="undefined"){try{var C=localStorage.getItem(B);return C}catch(D){A=true}}else{A=true}if(A){return ZCWebStorage.localStore[B]}};ZCWebStorage.hasItem=function(B,A){var C=ZCWebStorage.getItem(B);return((C!=undefined&&A==undefined)||(C!=undefined&&A!=undefined&&C==A))};ZCWebStorage.remove=function(B){var A=false;if(!ZCWebStorage.fallback&&typeof (Storage)!=="undefined"){try{localStorage.removeItem(B)}catch(C){A=true}}else{A=true}if(A){delete ZCWebStorage.localStore[B]}};var IP_LOCATE={};function iplocate(A,B,C){if(ZCGlobal.buildSetup=="dev"||ZCGlobal.buildSetup=="local"){IP_LOCATE={OLSON_TIME_ZONE:"ASIA/KOLKATA",CITY:"CHENNAI",ZIPCODE:"600009",LONGITUDE:"80.278470",ISP_NAME:"TATA COMMUNICATIONS LIMITED",COUNTRY_NAME:"INDIA",TIMEZONE:"+05:30",NETSPEED:"DSL",DOMAIN_NAME:"TATACOMMUNICATIONS.COM",LATITUDE:"13.087840",REGION:"TAMIL NADU",COUNTRY_CODE:"IN"};A(IP_LOCATE)}else{if(Object.keys(IP_LOCATE).length==0){var E=Constants.IP_INFO_URL;var D={};if(!isNull(C)){D.privatelink=C}D[ZCGlobal.csrfTokenName]=ZCGlobal.csrfToken;$.post(E,D).done(function(F){IP_LOCATE=F;A(F)}).fail(B)}else{A(IP_LOCATE)}}}function setKeyParam(){var A=arguments[0];var B=arguments[1];return A.replace(/\{(\d+)\}/g,function(){return B[arguments[1]]})}function insertContent(G,C){var F=$(G).val();var E;var B=$(G).prop("selectionStart");if(document.selection){$(G).trigger("focus");var D=document.selection.createRange();D.text=$(this).val();$(G).trigger("focus")}else{if(B||B=="0"){var A=$(G).prop("selectionEnd");var E=F.substring(0,B)+C+F.substring(A,F.length);$(G).val(E);$(G).trigger("focus");$(G).prop("selectionStart",B+C.length);$(G).prop("selectionEnd",B+C.length)}else{E=F+C;$(G).trigger("focus");$(G).val(E)}}}$.fn.dtPicker=function(D){var B=$(this);var C=function(J){var G=D.initParent?$(J).parent():J;if($(G).data("dtpicker")!=undefined){return $(G).data("dtpicker")}var P=function(m){delete $.fn.datetimepicker.defaults.keyBinds.t;var c=m.value?m.value:$(J).val();var a=/^(?:\$\{zoho\.(currenttime|currentdate)\}+$)/;var S="zc-dem-date-picker-icon "+(m.iconClass==undefined?"zc-em zc-common-calendar":m.iconClass);var h=true;var e=[0,1,2,3,4,5,6];var f=m.format==undefined?"DD-MMM-YYYY":m.format;var b=m.onShowCallback==undefined?function(){}:m.onShowCallback;var W=m.onChangeCallback==undefined?function(){}:m.onChangeCallback;var g=m.onHideCallback==undefined?function(){}:m.onHideCallback;var T=f.indexOf(":")!=-1?false:true;var Y=T?true:(m.defaultConfig==undefined?false:m.defaultConfig);var U=f.indexOf("A")!=-1?false:true;var d=m.parseInputDate==undefined?function(){}:m.parseInputDate;var k;if(m.showClearValue){var Z=$(J).parent();var X=(c!="")?"":"hide";if(m.clearIconCallbk!=undefined){m.clearIconCallbk(X);Z=$(J)}else{var l="<span class='zc-dem-date-picker-clear-icon "+X+"'><i class='zc-db-em zc-dbemcommon-close'></i></span>";if(!$(Z).find(".zc-dem-date-picker-clear-icon").length){$(Z).css("position","relative");$(Z).append(l)}}k=$(Z).find(".zc-dem-date-picker-clear-icon");$(k).off("click").on("click",function(n){I(m.clearCallback)})}if(m.showIcon){if(!$(J).siblings("#zc-dtpicker-icon").length){$("<i></i>").attr("id","zc-dtpicker-icon").addClass(S).insertAfter($(J))}$(J).siblings("#zc-dtpicker-icon").off("click").on("click",function(){$(J).trigger("focus")})}if(isNull(c)){h=false;c=moment()}if(!$("body").find("#active-DatePicker-Cont").length){$("body").append('<div id="active-DatePicker"><div style="position:relative" id="active-DatePicker-Cont" class="zc-dem-datepicker"></div></div><div id="" class="zc-scroll-mask" style="display: none;"></div>')}var V={locale:"en-US",useCurrent:m.useCurrent==undefined?false:m.useCurrent,keepInvalid:m.keepInvalid==undefined?false:m.keepInvalid,format:f,defaultDate:m.defaultDate==undefined?c:m.defaultDate,debug:false,allowInputToggle:true,minDate:m.minDate==undefined?false:m.minDate,maxDate:m.maxDate==undefined?false:m.maxDate,sideBySide:m.sideBySide==undefined?true:m.sideBySide,showTodayButton:m.showTodayButton==undefined?false:m.showTodayButton,showClear:m.showClear==undefined?false:m.showClear,showClose:m.showClose==undefined?false:m.showClose,useStrict:true,daysOfWeekDisabled:m.allowedDays==undefined?false:K(e,m.allowedDays.split(",")),enabledHours:m.allowedHours==undefined?false:m.allowedHours,disabledHours:m.notallowedHours==undefined?false:m.notallowedHours,widgetPositioning:m.widgetPointer==undefined?{horizontal:"auto",vertical:"auto"}:m.widgetPointer,widgetParent:$("#active-DatePicker-Cont"),parseInputDate:m.parseInputDate==undefined?function(n){if(m.isSysVar==true&&a.test(n)){n="";n=moment(n)}else{moment.locale("en-US",{weekdaysMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]});if(moment.isMoment(n)||n instanceof Date){n=moment(n)}else{n=moment(n,f);n=O(n,f)}if(!n.isValid()){n=moment()}}return n}:m.parseInputDate,ignoreReadonly:m.ignoreReadonly==undefined?false:m.ignoreReadonly,focusOnShow:m.focusOnShow==undefined?true:m.focusOnShow,keepOpen:m.keepOpen==undefined?false:m.keepOpen,stepping:m.timeInterval==undefined?1:m.timeInterval};if(m.icons!=undefined){V.icons=m.icons}if(m.zcLocale!=undefined){V.zcLocale=m.zcLocale}if(m.toolbarPlacement!=undefined){V.toolbarPlacement=m.toolbarPlacement}if(m.customInput){delete V.parseInputDate}$(G).datetimepicker(V);if(!h){if(m.defaultValueCallbk!=undefined){m.defaultValueCallbk()}else{if(m.initParent){$(G).children(":input").val("")}else{$(G).val("")}}}$(G).on("dp.show",function(p){$(G).addClass("zc-date-picker-enabled");var n=ifreeze({container:"body",type:ZCFreezeConstants.MASK_ONLY_TYPE});$(n).after($("body").find("#active-DatePicker"));H(p,m);if((m.format.match(/Y/g)||[]).length==2){var o=new Date().getFullYear()-79;var q=new Date().getFullYear()+20;$(G).data("dtpicker").minDate(moment("01 01 "+o,"MM DD YYYY"));$(G).data("dtpicker").maxDate(moment("12 31 "+q,"MM DD YYYY"))}if(!Y){showTimePickerCustomConfig(U)}b()});$(G).on("dp.hide",function(n){$(G).removeClass("zc-date-picker-enabled");$(".zc-scroll-mask").hide();unfreeze({container:"body",type:ZCFreezeConstants.MASK_ONLY_TYPE});if($(J).val()!=""&&m.showClearValue){$(k).removeClass("hide")}g();$(J).trigger("blur")});$(G).off("dp.change").on("dp.change",function(n){W(n);if(m.showClearValue){$(k).removeClass("hide")}if(!Y&&!U){changeTimeMeridiem()}})};function K(U,S){var T=[],X=[];for(var W=0;W<U.length;W++){T[U[W]]=true}for(var W=0;W<S.length;W++){if(T[S[W]]){delete T[S[W]]}else{T[S[W]]=true}}for(var V in T){X.push(V)}return X}function O(T,V){if((V.match(/Y/g)||[]).length==2){var X=Math.floor(T.year()%100);var S=new Date();var W=Math.floor(S.getFullYear()/100);var U=(S.getFullYear()-80)%100;if(Math.abs(X>U)){W-=1}X=(W*100)+X;T.set("year",X)}return T}function H(S,T){var e=T.dtPickerLocateElem!=undefined?T.dtPickerLocateElem:$(S.target);var b=20;var U=51;var W=$(e).offset();var d=W.top+$(e).height()+(($(e).outerHeight(true)-$(e).height())/2);var V=W.left+(($(e).outerWidth(true)-$(e).width())/2);var X=V+$(".bootstrap-datetimepicker-widget").outerWidth(true);var a=d+$(".bootstrap-datetimepicker-widget").outerHeight(true);if((X-U)>$(window).width()){V-=($(".bootstrap-datetimepicker-widget").outerWidth(true)-$(e).width())}var Z="top";var c=$(window).height()-d;var Y=W.top-$(".bootstrap-datetimepicker-widget").outerHeight(true);if($(window).scrollTop()==0){if(W.top>$(".bootstrap-datetimepicker-widget").height()){if(c<$(".bootstrap-datetimepicker-widget").outerHeight(true)){d=Y}else{Z="bottom"}}else{if(c<W.top){d=Y}else{if(c>d){Z="bottom"}}}}if($(window).scrollTop()!=0){d=d-$(window).scrollTop();if(d+$(".bootstrap-datetimepicker-widget").outerWidth(true)>$(window).height()){d=d-($(".bootstrap-datetimepicker-widget").outerHeight(true)+$(S.target).height());Z="bottom"}}if(Z=="top"){$(".bootstrap-datetimepicker-widget").removeClass("bottom").addClass("top")}else{$(".bootstrap-datetimepicker-widget").removeClass("top").addClass("bottom")}$(".bootstrap-datetimepicker-widget").css({top:d+"px",left:V+"px",bottom:"auto",right:"auto",position:"fixed"});$(".bootstrap-datetimepicker-widget").css("z-index","9991")}try{if(getConfig().useCompression&&Modules.DATETIMEPICKER!=undefined){var E=new Requires(Modules.DATETIMEPICKER);require(E.get(),E.getPromise(function(){P(D);if($(G).data("DateTimePicker")){var S=$(J).attr("initialValue");if(S!=""){var T=/^(?:\$\{zoho\.(currenttime|currentdate)\}+$)/;if(D.isSysVar==true&&T.test(S)){$(J).val(S);if($(G).find(".zc-dem-date-picker-clear-icon").hasClass("hide")){$(G).find(".zc-dem-date-picker-clear-icon").removeClass("hide")}}}$(J).parent("#systemValueClose").show()}}))}else{P(D);if($(G).data("DateTimePicker")){var Q=$(J).attr("initialValue");if(Q!=""){var R=/^(?:\$\{zoho\.(currenttime|currentdate)\}+$)/;if(D.isSysVar==true&&R.test(Q)){$(J).val(Q);if($(G).find(".zc-dem-date-picker-clear-icon").hasClass("hide")){$(G).find(".zc-dem-date-picker-clear-icon").removeClass("hide")}}}$(J).parent("#systemValueClose").show()}}}catch(M){var N=window.console;N.log(M)}var F={destroy:function(){$(J).parent().find(".zc-dem-date-picker-clear-icon").remove();$(J).siblings("#zc-dtpicker-icon").remove();$(G).removeData("dtpicker");return $(G).data("DateTimePicker").destroy()},clear:function(S){I(S)},disable:function(){var S;if(D.initParent){S=$(G).find(".zc-dem-date-picker-clear-icon");$(G).find("input[type=text]").attr("disabled",true)}else{S=$(G).parent().find(".zc-dem-date-picker-clear-icon");$(G).attr("disabled",true)}if($(S).length){$(S).removeClass("hide").addClass("hide")}return $(G)},enable:function(){var S;if(D.initParent){S=$(G).find(".zc-dem-date-picker-clear-icon");$(G).find("input[type=text]").prop("disabled",false)}else{S=$(G).parent().find(".zc-dem-date-picker-clear-icon");$(G).prop("disabled",false)}if($(S).length){$(S).removeClass("hide")}return $(G)},date:function(){return $(G).data("DateTimePicker").date()},format:function(S){return $(G).data("DateTimePicker").format(S)},minDate:function(S){return $(G).data("DateTimePicker").minDate(S)},maxDate:function(S){return $(G).data("DateTimePicker").maxDate(S)},show:function(){return $(G).data("DateTimePicker").show()}};var I=function(T){var S=G;if(D.initParent){clearIcon=$(G).find(".zc-dem-date-picker-clear-icon");S=$(G).find("input[type=text]")}else{clearIcon=$(G).parent().find(".zc-dem-date-picker-clear-icon")}$(clearIcon).removeClass("hide").addClass("hide");$(S).val("");if(T){T();$(clearIcon).removeClass("hide").addClass("hide")}};$(G).data("dtpicker",F);return F};if($(B).length>1){var A=[];$(B).each(function(E){A.push(C(this))});return A}else{return C(B)}};function getTimeFormat(B,A){if(A==undefined){A=variable.is24HrFormat}if(A){return B?"HH:mm:ss":"HH:mm"}else{return B?"hh:mm:ss A":"hh:mm A"}}function showTimePickerCustomConfig(A){var C=$("#active-DatePicker-Cont .timepicker");var D=$(C).find(".timepicker-picker");if(!$(C).find(".time-meridiem").length){if(!A){$(D).addClass("show-meridiem");var E=$(C).find("tr td .btn-primary").text();$(D).append("<div class='time-meridiem'><button class='meridiem' id='ante-meridiem' onclick='changeMeridiem(this)'>AM</button><button class='meridiem' id='post-meridiem' onclick='changeMeridiem(this)'>PM</button></div>");if(E=="AM"){$(D).find("#ante-meridiem").addClass("active")}else{$(D).find("#post-meridiem").addClass("active")}}else{$(D).removeClass("show-meridiem")}}if(!$(C).find(".zc-timepicker-backbutton").length){var B=$(C).find("> div:not(:first-child)");$(B).prepend("<a class = 'zc-timepicker-backbutton' id ='pickerBack' onclick='backToPickerHome(this)'><i class='zc-li-outline arrows-1-minimal-left'></i> <span>"+i18n["zc.common.back"]+"</span></a>")}}function changeMeridiem(B){var A=$("#active-DatePicker-Cont .timepicker").find("tr td .btn-primary");var C=B.textContent;var D=$(A).text();if(C!=D){$(A).click()}}function backToPickerHome(A){$(A).parent().css("display","none");$("#active-DatePicker-Cont .timepicker .timepicker-picker").css("display","block")}function changeTimeMeridiem(){var B=$("#active-DatePicker-Cont .timepicker");var C=$(B).find(".timepicker-picker");var D=$(B).find("tr td .btn-primary").text();var E=$(C).find("#ante-meridiem");var A=$(C).find("#post-meridiem");if(D=="AM"&&$(A).hasClass("active")){$(E).addClass("active");$(A).removeClass("active")}else{if(D=="PM"&&$(E).hasClass("active")){$(A).addClass("active");$(E).removeClass("active")}}}var ZCModalConstants={MODAL_SUBMIT:1,MODAL_CANCEL:2,MODAL_BUTTON:3,AJAX_MODAL:1,JIT_MODAL:2,CUSTOM_MODEL:3};$zcmodal={_modalStack:[],_theme:"default",getTopPopup:function(){if(this._modalStack[this._modalStack.length-1]!=undefined){return this._modalStack[this._modalStack.length-1].value}},hasInstance:function(){return this._modalStack.length>0},getModal:function(D){var A;for(var B in this._modalStack){var C=this._modalStack[B];if(C.key==D){A=C.value}}return A}};function ZCModal(B,D){var C=this;this.target=B;var A=$.extend({},this.defaults,D);this._data=A;this.getOptions=function(){return A};this.isCloseOnEsc=function(){return A.closeOnEsc};this.getBeforeClose=function(){return A.beforeClose};this.getAfterClose=function(){return A.afterClose};this.open()}ZCModal.prototype.defaults={zcmodalId:"",title:null,bodyClass:null,wrapperClass:"",showClose:true,closeOnEsc:true,closeOnAnyClick:false,hideHeader:false,hideFooter:false,showInFullScreen:false,showInSlideScreen:false,skipFreeze:false,type:ZCModalConstants.JIT_MODAL,modalBody:null,ajaxuri:null,showPreloader:false,buildDOM:function(){return""},buttons:[],overrideActions:false,beforeShow:function(A){},beforeClose:function(A){return true},afterClose:function(){},afterOpen:function(A){}};ZCModal.prototype.setModalBody=function(){var B=this.getOptions();var A=this;var C=B.containerClass;switch(B.type){case ZCModalConstants.AJAX_MODAL:A.$modalBody="";$.ajax({beforeSend:function(){if(B.showPreloader){LIB._startLoading();this.async=true}},url:B.ajaxuri,type:"GET",async:false,success:function(E,D,F){A.$modalBody=E;if(B.showPreloader){A.setBody(E);LIB._stopLoading()}}});break;case ZCModalConstants.JIT_MODAL:case ZCModalConstants.CUSTOM_MODEL:A.$modalBody=B.buildDOM();break}};ZCModal.prototype.setBody=function(A){var B=this;B.$overlay.find(B.getOptions().containerClass).fadeIn("slow",function(){$(this).html(A)})};ZCModal.prototype.getBody=function(){return this.$overlay.find(this.getOptions().containerClass)};ZCModal.prototype.addShortcut=function(){var A=this;var B=A.getOptions();var C=Shortcut.pushContext(B.shortcutContext);if(!isNull(B.shortcutContext)){if(!isNull(B.submitOnEnterKey)&&B.submitOnEnterKey==true){C.assign(Keys.ENTER.code,function(){A.$container.find("[name='ok']").click()})}if(B.shortcutContext==KeyContexts.POPUP.ALERT){C.assign(Keys.ESCAPE.code,function(){A.$container.find("[name='ok']").click()})}else{C.assign(Keys.ESCAPE.code,function(){A.$container.find("[name='cancel']").click()})}}B.showClose&&C.assign(Keys.ESCAPE.code,function(){A.close()})};ZCModal.prototype.open=function(){var A=this;options=A.getOptions();this._optionCache={};A.buildDOM();A.buildModal();options.zcmodalId=isNull(options.zcmodalId)?A.$container.prop("id"):options.zcmodalId;if(!options.overrideActions){A.addEventListeners()}else{(options.bindActions)(A)}if(ZCGlobal.isMobileLayout){$(".zc-mobile-back-button").hide()}A._optionCache.type=options.type;A.$overlay.show().data(A);if(isNull(options.zcmodalId)){A.$key=$zcmodal._modalStack.length}else{A.$key=options.zcmodalId}if(ZCGlobal.isMobileLayout&&!isNull(options.wrapperClass)&&options.wrapperClass==="zc-mob-fullscreen"){A.$body.find(".zc-mobile-layout").addClass("zc-container-hide");$.each($zcmodal._modalStack.slice(0,A.index),function(){$(this.$overlay).addClass("zc-container-hide")})}setTimeout(function(){A.$body.addClass("zcmodal_active")},($zcmodal.hasInstance()?0:50));if(!isNull(options.shortcutContext)){A.addShortcut()}(options.beforeShow)(A.getBody());A.index=$zcmodal._modalStack.push({key:A.$key,value:A})-1;A.$overlay.show();(options.afterOpen)(A.getBody());if(options.select2Focus){setTimeout(function(){select2FocusField(A.$overlay.find(".zc-dem-field-group:first"))},100)}};ZCModal.prototype.close=function(){var B=this;var C=B.getOptions();var A=(B.getBeforeClose())(B.$container);if(A!=false){if(B.index!=undefined){$zcmodal._modalStack.splice($zcmodal._modalStack.length-1,1)}if(!C.skipFreeze){unfreeze()}if(!isNull(C.popupType)){Shortcut.popContext()}else{if(!$zcmodal.hasInstance()){$(document.body).removeClass("zcmodal_active")}}if(ZCGlobal.isMobileLayout&&!$zcmodal.hasInstance()){$(".zc-mobile-back-button").show()}if(ZCGlobal.isMobileLayout&&!isNull(C.wrapperClass)&&C.wrapperClass==="zc-mob-fullscreen"){var D=$zcmodal._modalStack.length;if(D){$($zcmodal._modalStack[$zcmodal._modalStack.length-1].$overlay).removeClass("zc-container-hide")}else{B.$body.find(".zc-mobile-layout").removeClass("zc-container-hide")}}if(!C.skipFreeze){B.$container.removeClass("zc-dem-freeze-content")}B.$overlay.hide();if(C.popupType=="iSlide"&&C.showInSlideScreen){B.$container.deActive(function(){B.$container.removeClass("zc-dem-slider");$("body").removeClass("zc-dem-slider-loaded")})}else{B.$overlay.remove()}(B.getAfterClose())()}};function validateModal(){var I=this.getOptions();var B="\n Button Usage: \n{ \n\t name : //Name and value of button (STRING),\n\t type : //Type of button <Choices :ZCModalConstants.MODAL_SUBMIT, ZCModalConstants.MODAL_BUTTON, ZCModalConstants.MODAL_CANCEL> (INTEGER),\n\t action : //action execute on click of this button (FUNCTION)\n}";var H=I.buttons;for(var D=0,F=H.length;D<F;D++){var E=H[D];if(isNull(E.name)||isNull(E.type)||isNull(E.action)){throw new MissingProperty("for button "+E+B)}else{if(isNaN(E.type)){throw new InvalidProperty("Button.type for button : "+E+B)}else{if($.isFunction(E.action)){throw new InvalidProperty("Button.action for button : "+E+B)}}}}var G=["width","height","offsetTop","type"];for(var D=0,F=G.length;D<F;D++){if(isNaN(I[G[D]])){throw new InvalidProperty(G[D])}}var A=["showClose","closeOnEsc","closeOnAnyClick","draggable","hideHeader","hideFooter","showOnfocus"];for(var D=0,F=A.length;D<F;D++){if(I[A[D]].constructor!=Boolean){throw new InvalidProperty(A[D])}}var C=["beforeShow","beforeClose","afterClose"];for(var D=0,F=C.length;D<F;D++){if($.isFunction(I[C[D]])){throw new InvalidProperty(C[D])}}}function getScrollbarWidth(){if($(document.body).height()<=$(window).height()){return 0}var D=document.createElement("div"),B=document.createElement("div"),A,C;D.style.visibility="hidden";D.style.width="100px";document.body.appendChild(D);A=D.offsetWidth;D.style.overflow="scroll";B.style.width="100%";D.appendChild(B);C=B.offsetWidth;D.parentNode.removeChild(D);return A-C}$.fn.zcmodal=function(B){var A=new ZCModal(this,B);$(this).data("zcmodal",A.index);return A};$.zcmodal=function(B){var A=new ZCModal(undefined,B);return A};function MissingProperty(A){this.message+="Cannot find property "+(A||"")}MissingProperty.prototype=new Error();function InvalidProperty(A){this.message+="Invalid property "+(A||"")}InvalidProperty.prototype=new Error();var freezeStack=[];var ZCFreezeConstants={DEFAULT_TYPE:1,MASK_ONLY_TYPE:2,FREEZER_FOR_MOBILE:3};function ZCFreeze(C){this.defaults={container:$("#zc-dem-container"),clickCallBack:function(){return""},type:ZCFreezeConstants.DEFAULT_TYPE};$.extend(defaults,C);var A=function(){return freezeStack.length};var F=function(){return A()-1};var B=function(){return freezeStack[F()]};var D=function(H,G){if(defaults.type==ZCFreezeConstants.FREEZER_FOR_MOBILE&&!ZCGlobal.isMobileLayout){return $(H).hide()}if(!G){typeHandling(defaults.type,H)}$(H).off("click").on("click",function(){defaults.clickCallBack()});if(defaults.animation&&defaults.animation=="fade"){return $(H).fadeIn()}return $(H).show()};var E=function(G){if(defaults.animation&&defaults.animation=="fade"){return $(G).fadeOut()}return $(G).hide()};return{show:function(){if(A()==1&&!$(B()).is(":visible")){return D(B())}if(!(defaults.type==ZCFreezeConstants.MASK_ONLY_TYPE&&!ZCGlobal.isMobileLayout)){A()&&E(B())}var G=getFreezeHtml();$(defaults.container).append(G);freezeStack.push(G);return D(G)},hide:function(){E(B());A()&&$(freezeStack.pop()).remove();if(A()){return D(B(),true)}else{$("body").removeClass("zc-freeze-scroll-mask")}}}}function ifreeze(A){return ZCFreeze(A).show()}function unfreeze(A){return ZCFreeze(A).hide()}function getFreezeHtml(){return $('<div class="zc-freezer"></div>')}function typeHandling(B,A){var C="zc-freezer-layer";var D="zc-freeze-scroll-mask";switch(B){case ZCFreezeConstants.DEFAULT_TYPE:$("body").addClass(D);$(A).addClass(C);break;case ZCFreezeConstants.FREEZER_FOR_MOBILE:if(ZCGlobal.isMobileLayout){$("body").addClass(D);$(A).addClass(C)}break;case ZCFreezeConstants.MASK_ONLY_TYPE:$("body").addClass(D);if(ZCGlobal.isMobileLayout){$(A).addClass(C)}else{$(A).removeClass(C)}break}}$ZCPopover={_popoverStack:[]};var ZCPopoverType={ZC_ACTION_SHEET:1,ZC_CALLOUT:2,ZC_ACCORDION:3};$.fn.zcPopover=function(B){var D={content:this,isFreeze:true,isSlider:false,popoverType:ZCPopoverType.ZC_ACTION_SHEET,containerClass:"",hideCallBack:function(){return""}};$.extend(D,B);var A=$(D.content).data("zcpo");if(A!=undefined){return A}else{var C=ZCPopover(D);$(D.content).data("zcpo",C);return C}};function ZCPopover(B){var F;var E=function(G){G.popOverContent=$(G.content).clone(true);if(G.popOverContent!=undefined){F=$("<div elemname='zc-popover-container' class='zc-popover-container'></div>");F.append(G.popOverContent);$(G.popOverContent).css("display","block");F.addClass(G.containerClass);var H="";switch(G.popoverType){case ZCPopoverType.ZC_ACTION_SHEET:H="zc-action-sheet-popover";break;case ZCPopoverType.ZC_CALLOUT:H="zc-callout-popover";break;case ZCPopoverType.ZC_ACCORDION:H="zc-accordion-popover";break}if(ZCGlobal.isMobileLayout){$("body").append(F);$(G.popOverContent).addClass(H)}else{if(G.elemTarget!=undefined){$(G.elemTarget).append(F)}else{$(G.content).after(F)}}}G.popOverContainer=$(F)};var D=function(H){$(H.content).removeData("zcpo");var G=$(H.popOverContainer)[0];$(G).remove()};var A=function(G){if(G.scrollElm!=undefined){var I=$(G.popOverContainer).find(G.scrollElm);var H=(typeof (ZCGlobal.appDirectionMeta)!="undefined"&&ZCGlobal.appDirectionMeta.isRTL)?ZCGlobal.appDirectionMeta.scrollerPosition:"right";$(I).data("zcsp")!=undefined?$(I).data("zcsp").scrollToPosition(0,false,0):$(I).zcScrollPane({VerticalBarWidth:4,scrollPosition:H})}if(ZCGlobal.isMobileLayout){$(G.popOverContainer).css({"z-index":"998"})}};var C=function(H){if(ZCGlobal.isMobileLayout&&H.isFreeze&&H.toShow){var G=ifreeze({container:"body",clickCallBack:function(){$(H.content).data("zcpo").hide()}});$(G).after(H.popOverContainer)}if(ZCGlobal.isMobileLayout&&H.isFreeze&&!H.toShow){unfreeze({container:"body"})}};E(B);return{getPopoverContainer:function(){return $(B.popOverContainer)},isSlider:function(){return B.isSlider},show:function(){var G=$ZCPopover._popoverStack[0];if(G!=undefined){G.hide()}B.toShow=true;C(B);B.isSlider?$(B.popOverContainer).slideDown(function(){A(B)}):$(B.popOverContainer).show();!B.isSlider&&A(B);$ZCPopover._popoverStack.push(this)},hide:function(){B.toShow=false;C(B);B.isSlider?$(B.popOverContainer).slideUp(function(){D(B)}):$(B.popOverContainer).hide();!B.isSlider&&D(B);$ZCPopover._popoverStack.pop();B.hideCallBack()},toggle:function(){var G=$(B.popOverContainer).is(":visible");B.toShow=G?false:true;if(!G){var H=$ZCPopover._popoverStack[0];if(H!=undefined){H.hide()}if(!B.isSlider){$(B.popOverContainer).show();A(B)}else{$(B.popOverContainer).slideToggle(function(){A(B)})}B.toShow=true;C(B);$ZCPopover._popoverStack.push(this)}else{if(!B.isSlider){$(B.popOverContainer).hide();D(B)}else{$(B.popOverContainer).slideToggle(function(){D(B)})}$ZCPopover._popoverStack.pop();B.toShow=false;C(B)}}}}function hidePopover(){var A=$ZCPopover._popoverStack[0];if(A!=undefined){A.hide()}}function replaceParams(B,A){if((B.indexOf("[")>-1)||(B.indexOf("&#x5b;")>-1)){B=B.replace("&#x5b;","[");B=B.replace("&#x5d;","]");if(typeof A!="undefined"&&A.length>0){for(i=0;i<A.length;i++){B=replace(B,"["+i+"]",A[i])}}}else{B=B.replace("&#x7b;","{");B=B.replace("&#x7d;","}");if(typeof A!="undefined"&&A.length>0){for(i=0;i<A.length;i++){B=replace(B,"{"+i+"}",A[i])}}}return B}function replace(A,G,E){var C=A.length,F=G.length;if((C==0)||(F==0)){return A}var B=A.indexOf(G);if((!B)&&(G!=A.substring(0,F))){return A}if(B==-1){return A}var D=A.substring(0,B)+E;if(B+F<C){D+=replace(A.substring(B+F,C),G,E)}return D}var i18=function(){var A=arguments;var C=A.length;if(C===0){return }if(C===1){if(i18n[A[0]]){return i18n[A[0]]}else{return A[0]}}var B=i18n[A[0]];return B.replace(/\{[0-9]*\}/g,function(D){D=D.replace(/[\{\}]/g,"");return A[parseInt(D)+1]})};function oldDashboardTracking(A){url="/userhome/"+A+"/oldDashboardTacking";$.ajax({url:url,success:function(C,B,D){}})}function getLicenseTemplate(){var B=ZCGlobal.licenseTemplate;var A="";if(typeof B.licenseMessage!="undefined"){if(typeof B.expiryDaysLeft!="undefined"){A=replaceParams(i18n[B.licenseMessage],[B.expiryDaysLeft])}else{A=i18n[B.licenseMessage]}}var C=A+"<a class = ' "+B.licButtonStyle+"'id= 'licenseInfo'>"+i18n[B.licenseButtonKey]+"</a>";return C}function getLicenseContent(){var A="/userhome/"+sharedBy+"/getLicense";var B={};B[ZCGlobal.csrfTokenName]=ZCGlobal.csrfToken;$.ajax({url:A,type:"POST",data:B,success:function(C){if($("#licenseContent").length>0){$("#licenseContent").remove()}$(C).iSlide({closeOnEsc:true,afterOpen:function(){if(useCompression){licenceJS.init()}else{setTimeout(function(){licenceJS.init()},5000)}},afterClose:function(D){$(D.slider).remove()},focusFirstField:true})}})}function isZiaShortcutEnabled(){if(typeof (zossearch)=="undefined"){initZiaShortcut()}return !(zossearch.getGSShortCutKey())}function ziaEnableShortcut(){if(typeof (zossearch)=="undefined"){initZiaShortcut()}zossearch.toggleZSShortcutKey(false)}function ziaDisableShortcut(){if(typeof (zossearch)=="undefined"){initZiaShortcut()}zossearch.toggleZSShortcutKey(true)}function initZiaShortcut(){$(window).on("keydown",function(B){if(B.keyCode==Constants.KEYPAD_FORWARDSLASH&&(B.ctrlKey||B.metaKey)){if(isZiaShortcutEnabled()){$("#select2-drop-mask").click()}}});var A=(function(B){B=window.zossearch||{};B.shortCutKey=B.shortCutKey||false;B.toggleZSShortcutKey=function(C){B.shortCutKey=C};B.getGSShortCutKey=function(){return B.shortCutKey};return B})(A);window.zossearch=A}$.fn.smoothShow=function(B,A,C){C=(C==undefined)?"up":C;B=(B==undefined)?0:B;this.css({opacity:"0"});this.show("blind",{direction:C},B,function(){$(this).addClass("zc-shown");$(this).animate({opacity:1},B,function(){if(A!=undefined){A()}})});return this};$.fn.smoothHide=function(B,A){B=(B==undefined)?0:B;this.animate({opacity:0},B,function(){$(this).hide("blind",B,function(){if(A!=undefined){A()}})});return this};$.fn.smoothRemove=function(B,A,C){C=(C==undefined)?"up":C;B=(B==undefined)?0:B;this.animate({opacity:0},B,function(){$(this).hide("blind",{direction:C},B,function(){$(this).remove();if(A!=undefined){A()}})})};$.fn.zcTooltip=function(A){var D=this;var C={displayType:"callout",position:"auto"};var B={show:function(){return $(D).data("ztooltip").show()},hide:function(){return $(D).data("ztooltip").hide()}};$.extend(C,A);$(D).ztooltip(C);$(D).data("zctt",B);return B};$.fn.customRadio=function(){var A=$(this).parent().find("label[for="+this.attr("id")+"]");if(A.length==0){A=$("<label for="+this.attr("id")+"></label>")}$(A).prepend("<span class='custom_radiobtn'></span>").css("float","static");$(this).wrap('<div class="custom_radio"></div>');$(this).parent().append(A)};$.fn.zcDropDown=function(B){var C=this;if(C!=undefined&&C.length){var D=function(U){if($(U).data("zcdd")!=undefined){return $(U).data("zcdd")}var O,K=$(U).attr("multiple")!=undefined;var P={containerCssClass:"zc-dem-custom-selectbox ",dropdownCssClass:"zc-dem-custom-selectbox-menu ",dropdownAutoWidth:false,allowClear:false,expandMenu:false,showTitle:false};if(U.nodeName=="SELECT"){$(U).attr("tabindex","1")}var F=($(U).attr("placeholder")!=undefined)||(B!=undefined&&B.placeholder!=undefined);var J=(U.nodeName=="SELECT");if(J){P.showTitle=P.showTitle||($(U).attr("showTitle")!=undefined);O=$(U).find("option[selected]").length;if(F){$(U).prepend($('<option class="zc-dd-dummy-opt"/>'))}}var R=function(){if(U.nodeName=="INPUT"&&B.data==undefined){$.error("config.data is mandatory for initiating zcDropdown with `input` element\nUsage::config.data=[{id:'key',text:'value'}]")}};var W=function(){if(B!=undefined){if(B.showSearch!=undefined){return B.showSearch}if(B.data!=undefined){var c=0;$.each(B.data,function(){if(this.children){c+=this.children.length}else{c++}});return(c>7)}}if(U.nodeName=="SELECT"){return $(U).find("option:not(.zc-dd-dummy-opt)").length>7}};var b=function(c){$(U).off("change.zcddCallback").on("change.zcddCallback",function(d){c(d)})};var S=function(c){$(U).off("select2-loaded").on("select2-loaded",function(d){c(d)})};var H=function(c){$(U).off("select2-opening.zcddBeforeOpen").on("select2-opening.zcddBeforeOpen",function(d){c(d)})};var Y=function(c){$(U).off("select2-open").on("select2-open",function(d){c(d)})};var G=function(c){$(U).off("select2-close").on("select2-close",function(d){c(d)})};var Z=function(c){$(U).off("select2-selecting").on("select2-selecting",function(d){c(d)})};var V=function(d,c){if(c!=undefined){$(U).off("select2-focus."+c).on("select2-focus."+c,function(f){d&&d(f)})}else{$(U).off("select2-focus").on("select2-focus",function(f){d&&d(f)})}};var a=function(c){$(U).off("select2-blur").on("select2-blur",function(d){c(d)})};var Q=function(d,c){if(c!=undefined){$(U).off("select2-highlight."+c).on("select2-highlight."+c,function(f){d(f)})}else{$(U).off("select2-highlight").on("select2-highlight",function(f){d(f)})}};if(B!=undefined){if(B.ajax==undefined){R()}K=K||B.multiple;if(B.containerCssClass!=undefined){B.containerCssClass=P.containerCssClass+B.containerCssClass}B.callout&&(P.dropdownCssClass+="zc-custom-callout-menu ");if(B.dropdownCssClass!=undefined){B.dropdownCssClass=P.dropdownCssClass+B.dropdownCssClass}if(B.dropdownListAfterOpen!=undefined){Y(B.dropdownListAfterOpen)}if(B.dropdownListAfterClose!=undefined){G(B.dropdownListAfterClose)}if(B.onChange!=undefined){b(B.onChange)}if(B.onLoad!=undefined){S(B.onLoad)}if(B.onSelection!=undefined){Z(B.onSelection)}if(B.onFocus!=undefined){V(B.onFocus)}if(B.onBlur!=undefined){a(B.onBlur)}if(B.onHighlight!=undefined){Q(B.onHighlight)}$.extend(P,B)}$(U).select2(P);if(K&&F){var N;if(B!=undefined&&B.placeholder!=undefined){N=B.placeholder}else{N=$(U).attr("placeholder")}var I=$(U).data("select2").search;if(!$(U).select2("val").length){$(I).attr("placeholder",N)}$(U).off("change.zcddPlaceholder").on("change.zcddPlaceholder",function(c){if($(U).select2("val").length){$(I).attr("placeholder","")}else{$(I).attr("placeholder",N)}})}if(P.expandMenu){$(U).off("select2-opening.expandMenu").on("select2-opening.expandMenu",function(d){var c=$(window).height()-$(U).data("zcdd").getContainer()[0].getBoundingClientRect().top-150;$(U).data("select2").dropdown.find(".select2-results").css("max-height",c+"px")})}if(!K&&F&&!O&&"SELECT"==U.nodeName){$(U).select2("val","")}var E=$($(U).data("select2").dropdown).find(".select2-search");var X=function(){if(W()){$(E).removeClass("select2-search-hidden select2-offscreen")}else{$(E).removeClass("select2-search-hidden select2-offscreen").addClass("select2-search-hidden select2-offscreen")}};$(U).off("select2-opening.zcddInitialConfig").on("select2-opening.zcddInitialConfig",function(c){if(B!=undefined&&B.dropdownListBeforeOpen!=undefined){B.dropdownListBeforeOpen()}X()});if(P.showTitle){function M(d){var f=J?$(d.choice.element[0]).attr("title"):d.choice.title;if(f!=""&&f!=undefined){var c=$(U).data("zcdd").getDropdownMenu().find(".select2-highlighted");if(c.hasClass("select2-result-with-children")){c=$(c).find(".select2-result-label:first")}$(c).attr("title")||$(c).attr("title",f)}}Q(M,"customtitle")}var T={hasPlaceholderOnSelect:F,open:function(){return $(U).select2("open")},close:function(){return $(U).select2("close")},destroy:function(){if(U.nodeName=="SELECT"&&$(U).data("zcdd").hasPlaceholderOnSelect){$(U).find(".zc-dd-dummy-opt").remove()}$(U).removeData("zcdd");$(U).off("select2-opening.zcddInitialConfig select2-opening.expandMenu change.zcddPlaceholder select2-highlight.customtitle");return $(U).select2("destroy")},setValue:function(c){return $(U).select2("val",c)},getValue:function(){return $(U).select2("val")},getData:function(){return $(U).select2("data")},setData:function(c){return $(U).select2("data",c)},enable:function(){return $(U).select2("enable",true)},disable:function(){return $(U).select2("enable",false)},getContainer:function(){return $(U).select2("container")},getElement:function(){return $(U).select2("data").element},getDropdownMenu:function(){return $(U).data("select2").dropdown},getId:function(){return $(U).select2("data").id},focus:function(){return $(U).select2("focus")},clear:function(){return $(U).select2("data","")},change:function(c){b(c)},onLoad:function(c){S(c)},onSelect:function(c){Z(c)},onFocus:function(d,c){V(d,c)},onBlur:function(c){a(c)},onHighlight:function(d,c){Q(d,c)},beforeOpen:function(c){H(c)},afterOpen:function(c){Y(c)},afterClose:function(c){G(c)},reset:function(){if(U.nodeName=="SELECT"){$(U).empty();if($(U).data("zcdd").hasPlaceholderOnSelect){$(U).prepend($('<option class="zc-dd-dummy-opt"/>'))}}else{if(U.nodeName=="INPUT"){$(U).select2("data","")}}return $(U)}};$(U).data("zcdd",T);return T};if($(C).length>1){var A=[];$(C).each(function(E){A.push(D(this))});return A}else{return D(C[0])}}};var Fields=new function(){this.NONE=0;this.SINGLE_LINE=1;this.MULTI_LINE=3;this.EMAIL_ADDRESS=4;this.NUMBER=5;this.CURRENCY=6;this.PERCENTAGE=7;this.PHONE_NUMBER=8;this.CHECK_BOX=9;this.DATE=10;this.TIME=11;this.SINGLE_SELECT=12;this.MULTI_SELECT=13;this.PLAIN_TEXT=14;this.SCRIPT=15;this.FILE_UPLOAD=18;this.DECIMAL=19;this.IMAGE=20;this.URL=21;this.DATE_TIME=22;this.RICH_TEXT_AREA=24;this.EXTERNAL_FIELD=25;this.EXTERNAL_LINK_FIELD=26;this.INLINE_SINGLE_SELECT=29;this.SYSTEM_LOOKUP=30;this.AUTO_NUMBER=31;this.LOOKUP=32;this.NAME=33;this.ADDRESS=34;this.SECTION=35;this.SIGNATURE=36;this.INTEGRATION=37;this.ENCRYPTION=38;this.AUDIO=137;this.VIDEO=138;this.RELATED_FORM=4;this.INLINE_PICK_LIST=1100;this.INLINE_RADIO=1101;this.PICK_LIST=100;this.RADIO=101;this.LIST=102;this.CHECK_BOXES=103;this.RECORD_STATUS=38};$.fn.showError=function(B){var A=this;var C=function(H){var F=$(H).data("zcdd");if(F!=undefined){H=F.getContainer()}if(!$(H).hasClass("zc-dem-error-field")){var G;var D=document.createElement("div");$(D).addClass("zc-dem-error-container");var E=getErrorHtml(B);if($(H).prev().length>0){G=$(H).prev();$(G).after(D)}else{if($(H).next().length>0){G=$(H).next();$(G).before(D)}else{G=$(H).parent();$(G).append(D)}}$(H).addClass("zc-dem-error-field");$(H).detach();$(D).append(H);if(F!=undefined){$(H).append(E)}else{$(H).after(E)}if(F!=undefined){F.onFocus(function(){errorClearCallback(D)},"clearError")}else{if(H.nodeName=="INPUT"||H.nodeName=="TEXTAREA"){$(H).one("change.clearError",function(){errorClearCallback(D)})}else{$(H).one("click.clearError",function(){errorClearCallback(D)})}}}};if($(A).length>0){$(A).each(function(){C(this)})}};function getErrorHtml(B){var A=B?"<span class='zc-dem-error-msg'>"+B+"</span>":"";return $(A)}function errorClearCallback(A){if($(A).find(".zc-dem-error-field").length){var C=$(A).find(".zc-dem-error-field");$(C).removeClass("zc-dem-error-field");var B=$(A).find(".zc-dem-error-msg");$(B).remove();$(C).detach();if($(A).prev().length>0){$(A).prev().after(C)}else{if($(A).next().length>0){$(A).next().before(C)}else{$(A).parent().append(C)}}$(A).remove()}}function validateEmailAddress(B){var A=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,15})+$/;return A.test(B)}function validateHostname(B){var A=/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$/;return A.test(B)}function validateAppNameRegex(A,C){var B=new XRegExp("^[\\p{L}\\p{M}\\p{N}\\-\\_\r\t\f\\s\\ \\*\\@\\/\\\\!\\:\\|\\~\\&]+$","i");if(A==null){A=$("#scrAppName").val()}if(A!=""&&!XRegExp.test(A,B)){if(C){$(".zc-create-app-popup").addClass("zc-invalid-appName");$("#errorCont").text(i18n["zc.settings.builder.name.regexfailure"]);$("#proceedBtn").prop("disabled",true)}return false}else{if(C){$(".zc-create-app-popup").removeClass("zc-invalid-appName");$("#errorCont").empty();$("#proceedBtn").prop("disabled",false)}return true}}function validateIPAddress(B){var A=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;return A.test(B)}function isURLValid(A){var B=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/;return B.test(A)}Math.trunc=Math.trunc||function(A){if(isNaN(A)){return NaN}return A<0?Math.ceil(A):Math.floor(A)};function getUniqueValues(A){return $.grep(A,function(C,B){return A.indexOf(C)===B})}function select2FocusField(A){setTimeout(function(){$(A).parent().attr("tabindex","0").find("input[type=text]:first").trigger("focus")},300)}function urlRedirection(E){if(typeof CrmPlusLib!="undefined"&&typeof CrmPlusLib.getFrameOriginForURL()!="undefined"){var B=E.getAttribute("href");var A=E.getAttribute("ownername");if(A!=null&&ZCGlobal.scopeName!=A){window.open(B,"_blank");return false}else{if(window.location.hash=="#myworkspaces"){CrmPlusImpl.trigger("setupView.onclose")}}var D=CrmPlusLib.getFrameOriginForURL();var C=B.split("#")[1];if(typeof (C)!="undefined"){B=B.substring(0,B.indexOf("#"));D+="#"+C}B+="?frameorigin="+D;E.setAttribute("href",B)}}function validateForm(){if(typeof CrmPlusLib!="undefined"&&typeof CrmPlusLib.getFrameOriginForURL()!="undefined"){var A=$('<input type="hidden" name="frameOriginUrlZohoOne" value="'+CrmPlusLib.getFrameOriginForURL()+'">');$("#sheetappform").append(A)}}function setLiveAppAccessURL(A,B){if(ZCGlobal.isProductionApp){$("#zc-dem-access-link").attr("href",B?"javascript:;":A.getLiveURL())}else{$("#zc-dem-access-link").attr("href",B?"javascript:;":A.getLiveURL("development"));$("#zc-stage-access-link").attr("href",B?"javascript:;":A.getLiveURL("stage"));$("#zc-production-access-link").attr("href",B?"javascript:;":A.getLiveURL("production"))}}var OpenSansMapReportJson={version:8,name:"Klokantech Basic",metadata:{"mapbox:autocomposite":false,"mapbox:type":"template","maputnik:renderer":"mbgljs","openmaptiles:version":"3.x","openmaptiles:mapbox:owner":"openmaptiles","openmaptiles:mapbox:source:url":"mapbox://openmaptiles.4qljc88t"},center:[8.54806714892635,47.37180823552663],zoom:12.241790506353492,bearing:0,pitch:0,sources:{openmaptiles:{type:"vector",url:getSpecificDomain(Constants.ZOHO_MAPS)+"/vector/data/v3.json"},country_boundary:{type:"geojson",data:getSpecificDomain(Constants.STYLE_STATIC_SERVER)+"/maps/v8_5_0/resource/country_boundary.geojson"},telangana_inner_boundary:{type:"geojson",data:getSpecificDomain(Constants.STYLE_STATIC_SERVER)+"/maps/v8_5_0/resource/telangana_inner_boundary.geojson"}},glyphs:getSpecificDomain(Constants.STYLE_STATIC_SERVER)+"/maps/fonts/fonts/{fontstack}/{range}.pbf",layers:[{id:"background",type:"background",paint:{"background-color":"hsl(47, 26%, 88%)"}},{id:"landuse-residential",type:"fill",source:"openmaptiles","source-layer":"landuse",filter:["all",["==","$type","Polygon"],["==","class","residential"]],layout:{visibility:"visible"},paint:{"fill-color":"hsl(47, 13%, 86%)","fill-opacity":0.7}},{id:"landcover_grass",type:"fill",source:"openmaptiles","source-layer":"landcover",filter:["==","class","grass"],paint:{"fill-color":"hsl(82, 46%, 72%)","fill-opacity":0.45}},{id:"park",type:"fill",source:"openmaptiles","source-layer":"park",paint:{"fill-color":"rgba(192, 216, 151, 0.53)","fill-opacity":1}},{id:"landcover_wood",type:"fill",source:"openmaptiles","source-layer":"landcover",filter:["==","class","wood"],paint:{"fill-color":"hsl(82, 46%, 72%)","fill-opacity":{base:1,stops:[[8,0.6],[22,1]]}}},{id:"water",type:"fill",source:"openmaptiles","source-layer":"water",filter:["==","$type","Polygon"],paint:{"fill-color":"hsl(205, 56%, 73%)"}},{id:"landcover-ice-shelf",type:"fill",source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","ice_shelf"],layout:{visibility:"visible"},paint:{"fill-color":"hsl(47, 26%, 88%)","fill-opacity":0.8}},{id:"landcover-glacier",type:"fill",source:"openmaptiles","source-layer":"landcover",filter:["==","subclass","glacier"],layout:{visibility:"visible"},paint:{"fill-color":"hsl(47, 22%, 94%)","fill-opacity":{base:1,stops:[[0,1],[8,0.5]]}}},{id:"landuse",type:"fill",source:"openmaptiles","source-layer":"landuse",filter:["==","class","agriculture"],layout:{visibility:"visible"},paint:{"fill-color":"#eae0d0"}},{id:"landuse_overlay_national_park",type:"fill",source:"openmaptiles","source-layer":"landcover",filter:["==","class","national_park"],paint:{"fill-color":"#E1EBB0","fill-opacity":{base:1,stops:[[5,0],[9,0.75]]}}},{id:"park_outline",type:"line",source:"openmaptiles","source-layer":"park",layout:{},paint:{"line-color":"rgba(159, 183, 118, 0.69)","line-dasharray":[0.5,1]}},{id:"waterway",type:"line",source:"openmaptiles","source-layer":"waterway",filter:["==","$type","LineString"],paint:{"line-color":"hsl(205, 56%, 73%)","line-width":{base:1.4,stops:[[8,1],[20,8]]},"line-opacity":1}},{id:"building",type:"fill",source:"openmaptiles","source-layer":"building",paint:{"fill-color":"hsl(39, 41%, 86%)","fill-outline-color":"hsl(36, 45%, 80%)","fill-opacity":{base:1,stops:[[13,0.6],[14,1]]}}},{id:"housenumber",type:"symbol",source:"openmaptiles","source-layer":"housenumber",minzoom:17,filter:["==","$type","Point"],layout:{"text-field":"{housenumber}","text-size":10,"text-font":["Klokantech Noto Sans Regular"]},paint:{"text-color":"hsla(0, 14%, 57%, 0.51)","text-halo-color":"hsl(39, 41%, 86%)","text-halo-width":0.5}},{id:"road_path",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["in","class","path","track"]],layout:{"line-cap":"square","line-join":"bevel"},paint:{"line-color":"hsl(0, 0%, 97%)","line-dasharray":[1,1],"line-width":{base:1.55,stops:[[4,0.25],[20,10]]}}},{id:"road_minor",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["in","class","minor","service"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"hsl(0, 0%, 97%)","line-width":{base:1.55,stops:[[4,0.25],[20,30]]}}},{id:"tunnel_minor",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-cap":"butt","line-join":"miter"},paint:{"line-color":"#efefef","line-width":{base:1.55,stops:[[4,0.25],[20,30]]},"line-dasharray":[0.36,0.18]}},{id:"tunnel_major",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","tunnel"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"butt","line-join":"miter"},paint:{"line-color":"#fff","line-width":{base:1.4,stops:[[6,0.5],[20,30]]},"line-dasharray":[0.28,0.14]}},{id:"road_trunk_primary",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["in","class","trunk","primary"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fff","line-width":{base:1.4,stops:[[6,0.5],[20,30]]}}},{id:"road_secondary_tertiary",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fff","line-width":{base:1.4,stops:[[6,0.5],[20,20]]}}},{id:"road_major_motorway",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","class","motorway"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"hsl(0, 0%, 100%)","line-width":{base:1.4,stops:[[8,1],[16,10]]},"line-offset":0}},{id:"railway",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["==","class","rail"],layout:{visibility:"visible"},paint:{"line-color":"hsl(34, 12%, 66%)","line-opacity":{base:1,stops:[[11,0],[16,1]]}}},{id:"bridge_minor case",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["==","class","minor_road"]],layout:{"line-cap":"butt","line-join":"miter"},paint:{"line-color":"#dedede","line-width":{base:1.6,stops:[[12,0.5],[20,10]]},"line-gap-width":{base:1.55,stops:[[4,0.25],[20,30]]}}},{id:"bridge_major case",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"butt","line-join":"miter"},paint:{"line-color":"#dedede","line-width":{base:1.6,stops:[[12,0.5],[20,10]]},"line-gap-width":{base:1.55,stops:[[4,0.25],[20,30]]}}},{id:"bridge_minor",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["==","class","minor_road"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#efefef","line-width":{base:1.55,stops:[[4,0.25],[20,30]]}}},{id:"bridge_major",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fff","line-width":{base:1.4,stops:[[6,0.5],[20,30]]}}},{id:"admin_sub",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["in","admin_level",4,6,8],layout:{visibility:"visible"},paint:{"line-color":"hsl(0, 0%, 76%)","line-dasharray":[2,1]}},{id:"admin_country",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["<=","admin_level",2],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"none"},paint:{"line-color":"hsla(0, 8%, 22%, 0.51)","line-width":{base:1.3,stops:[[3,0.5],[22,15]]}}},{id:"country_boundary",type:"line",source:"country_boundary",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"hsl(248, 7%, 66%)","line-width":{base:1,stops:[[0,0.6],[4,1.4],[5,2],[12,8]]}}},{id:"telangana_inner_boundary",type:"line",source:"telangana_inner_boundary",minzoom:4,maxzoom:6,paint:{"line-color":"hsl(0, 0%, 76%)","line-dasharray":[2,1]}},{id:"poi_label",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:5,filter:["all",["==","$type","Point"],["==","rank",1]],layout:{"text-size":11,"text-font":["Klokantech Noto Sans Regular"],visibility:"visible","text-offset":[0,0.5],"icon-size":1,"text-anchor":"top","text-field":"{name}","text-max-width":8},paint:{"text-color":"#666","text-halo-width":1,"text-halo-color":"rgba(255,255,255,0.75)","text-halo-blur":1}},{id:"road_major_label",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",filter:["==","$type","LineString"],layout:{"symbol-placement":"line","text-field":"{name}","text-font":["Klokantech Noto Sans Regular"],"text-transform":"uppercase","text-letter-spacing":0.1,"text-size":{base:1.4,stops:[[10,8],[20,14]]},"text-rotation-alignment":"map"},paint:{"text-color":"#000","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":2}},{id:"place_label_other",type:"symbol",source:"openmaptiles","source-layer":"place",minzoom:8,filter:["all",["==","$type","Point"],["!=","class","city"],["!=","name_en","Turkish Republic Of Northern Cyprus"]],layout:{"text-field":"{name_en}","text-font":["Klokantech Noto Sans Regular"],"text-max-width":6,"text-size":{stops:[[6,10],[12,14]]},visibility:"visible","text-anchor":"center"},paint:{"text-color":"hsl(0, 10%, 25%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-blur":0,"text-halo-width":2}},{id:"place_label_city",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:16,filter:["all",["==","$type","Point"],["==","class","city"]],layout:{"text-field":"{name_en}","text-font":["Klokantech Noto Sans Regular"],"text-max-width":10,"text-size":{stops:[[3,12],[8,16]]}},paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsla(0, 0%, 100%, 0.75)","text-halo-blur":0,"text-halo-width":2}},{id:"country_label",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:12,filter:["all",["==","$type","Point"],["==","class","country"],["!=","name_en","Turkish Republic Of Northern Cyprus"]],layout:{"text-field":"{name_en}","text-font":["Klokantech Noto Sans Bold"],"text-max-width":10,"text-size":{stops:[[3,12],[8,22]]}},paint:{"text-color":"hsl(0, 0%, 13%)","text-halo-color":"rgba(255,255,255,0.75)","text-halo-width":2,"text-halo-blur":0}}]};var streetStyleJson={version:8,name:"KlokanTech Streets",metadata:{"mapbox:type":"template","openmaptiles:version":"3.x"},sources:{openmaptiles:{type:"vector",url:getSpecificDomain(Constants.ZOHO_MAPS)+"/vector/data/v3.json"},landcover:{type:"vector",url:getSpecificDomain(Constants.ZOHO_MAPS)+"/vector/data/landcover.json"},country_boundary:{type:"geojson",data:getSpecificDomain(Constants.STYLE_STATIC_SERVER)+"/maps/v8_5_0/resource/country_boundary.geojson"},telangana_inner_boundary:{type:"geojson",data:getSpecificDomain(Constants.STYLE_STATIC_SERVER)+"/maps/v8_5_0/resource/telangana_inner_boundary.geojson"}},sprite:getSpecificDomain(Constants.STYLE_STATIC_SERVER)+"/maps/v8_5_0/resource/streets/sprite",glyphs:getSpecificDomain(Constants.STYLE_STATIC_SERVER)+"/maps/fonts/fonts/{fontstack}/{range}.pbf",layers:[{id:"background",type:"background",layout:{visibility:"visible"},paint:{"background-color":{stops:[[6,"rgba(252, 247, 229, 1)"],[10,"rgba(252, 247, 229, 1)"],[14,"rgba(246, 241, 229, 1)"],[15,"rgba(246, 241, 229, 1)"]]}}},{id:"landcover_cropland",type:"fill",source:"landcover","source-layer":"globallandcover",filter:["all",["==","class","crop"]],layout:{visibility:"visible"},paint:{"fill-color":"rgba(243, 235, 195, 1)","fill-opacity":{base:1,stops:[[4,1],[8,0]]}}},{id:"landcover_grassland",type:"fill",source:"landcover","source-layer":"globallandcover",filter:["all",["==","class","grass"]],paint:{"fill-color":"rgba(226, 236, 197, 1)","fill-opacity":{base:1,stops:[[4,1],[8,0]]}}},{id:"landcover_scrubland",type:"fill",source:"landcover","source-layer":"globallandcover",filter:["all",["==","class","scrub"]],paint:{"fill-color":"rgba(199, 230, 179, 1)","fill-opacity":{base:1,stops:[[4,1],[8,0]]}}},{id:"landcover_treeland",type:"fill",source:"landcover","source-layer":"globallandcover",filter:["all",["==","class","tree"]],paint:{"fill-color":"rgba(190, 222, 173, 1)","fill-opacity":{base:1,stops:[[4,1],[8,0]]}}},{id:"landcover_forestland",type:"fill",source:"landcover","source-layer":"globallandcover",filter:["all",["==","class","forest"]],paint:{"fill-color":"rgba(171, 217, 170, 1)","fill-opacity":{base:1,stops:[[4,1],[8,0]]}}},{id:"landcover_snowland",type:"fill",source:"landcover","source-layer":"globallandcover",filter:["all",["==","class","snow"]],paint:{"fill-color":"hsl(0, 0%, 100%)","fill-opacity":{base:1,stops:[[4,1],[8,0]]}}},{id:"park",type:"fill",source:"openmaptiles","source-layer":"park",filter:["all"],paint:{"fill-color":"#d8e8c8","fill-opacity":0.7,"fill-outline-color":"rgba(95, 208, 100, 1)"}},{id:"park_outline",type:"line",source:"openmaptiles","source-layer":"park",filter:["all"],layout:{},paint:{"line-dasharray":[1,1.5],"line-color":"rgba(228, 241, 215, 1)","line-opacity":1}},{id:"landuse_residential",type:"fill",metadata:{},source:"openmaptiles","source-layer":"landuse",maxzoom:8,filter:["==","class","residential"],layout:{visibility:"visible"},paint:{"fill-color":{base:1,stops:[[9,"rgba(233, 227, 210, 0.80)"],[12,"rgba(233, 227, 210, 0.80)"]]}}},{id:"landcover_wood",type:"fill",metadata:{},source:"openmaptiles","source-layer":"landcover",filter:["all",["==","class","wood"]],paint:{"fill-antialias":false,"fill-color":"hsla(98, 61%, 72%, 0.7)","fill-opacity":0.4}},{id:"landcover_grass",type:"fill",metadata:{},source:"openmaptiles","source-layer":"landcover",filter:["all",["==","class","grass"]],paint:{"fill-antialias":false,"fill-color":"rgba(176, 213, 154, 1)","fill-opacity":0.3}},{id:"landcover_sand",type:"fill",metadata:{},source:"openmaptiles","source-layer":"landcover",filter:["all",["in","class","sand"]],paint:{"fill-antialias":false,"fill-color":"rgba(232, 214, 38, 1)","fill-opacity":0.3}},{id:"landuse_cemetery",type:"fill",metadata:{},source:"openmaptiles","source-layer":"landuse",filter:["==","class","cemetery"],layout:{visibility:"visible"},paint:{"fill-color":"hsl(75, 37%, 81%)"}},{id:"landuse_hospital",type:"fill",metadata:{},source:"openmaptiles","source-layer":"landuse",filter:["==","class","hospital"],paint:{"fill-color":"rgba(249, 225, 220, 1)"}},{id:"landuse_school",type:"fill",metadata:{},source:"openmaptiles","source-layer":"landuse",filter:["==","class","school"],paint:{"fill-color":"rgb(236,238,204)"}},{id:"waterway_tunnel",type:"line",source:"openmaptiles","source-layer":"waterway",minzoom:14,filter:["all",["==","brunnel","tunnel"]],layout:{"line-cap":"round"},paint:{"line-color":"#a0c8f0","line-width":{base:1.3,stops:[[13,0.5],[20,6]]},"line-dasharray":[2,4]}},{id:"waterway_river",type:"line",metadata:{},source:"openmaptiles","source-layer":"waterway",filter:["all",["==","class","river"],["!=","brunnel","tunnel"]],layout:{"line-cap":"round"},paint:{"line-color":"#a0c8f0","line-width":{base:1.2,stops:[[11,0.5],[20,6]]}}},{id:"waterway_other",type:"line",metadata:{},source:"openmaptiles","source-layer":"waterway",filter:["all",["!=","class","river"],["!=","brunnel","tunnel"]],layout:{"line-cap":"round"},paint:{"line-color":"#a0c8f0","line-width":{base:1.3,stops:[[13,0.5],[20,6]]}}},{id:"water",type:"fill",metadata:{},source:"openmaptiles","source-layer":"water",layout:{visibility:"visible"},paint:{"fill-color":"rgba(134, 204, 250, 1)"}},{id:"aeroway_fill",type:"fill",metadata:{},source:"openmaptiles","source-layer":"aeroway",minzoom:11,filter:["==","$type","Polygon"],paint:{"fill-color":"rgba(229, 228, 224, 1)","fill-opacity":0.7}},{id:"aeroway_runway",type:"line",metadata:{},source:"openmaptiles","source-layer":"aeroway",minzoom:11,filter:["all",["==","$type","LineString"],["==","class","runway"]],paint:{"line-color":"#f0ede9","line-width":{base:1.2,stops:[[11,3],[20,16]]}}},{id:"aeroway_taxiway",type:"line",metadata:{},source:"openmaptiles","source-layer":"aeroway",minzoom:11,filter:["all",["==","$type","LineString"],["==","class","taxiway"]],paint:{"line-color":"#f0ede9","line-width":{base:1.2,stops:[[11,0.5],[20,6]]}}},{id:"ferry",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["in","class","ferry"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(108, 159, 182, 1)","line-width":1.1,"line-dasharray":[2,2]}},{id:"tunnel_motorway_link_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway"],["==","ramp",1],["==","brunnel","tunnel"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#e9ac77","line-dasharray":[0.5,0.25],"line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"tunnel_service_track_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#cfcdca","line-dasharray":[0.5,0.25],"line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"tunnel_link_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","ramp","1"],["==","brunnel","tunnel"]],layout:{"line-join":"round"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"tunnel_street_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","street","street_limited"]],layout:{"line-join":"round"},paint:{"line-color":"#cfcdca","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,0.5],[13,1],[14,4],[20,15]]}}},{id:"tunnel_secondary_tertiary_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"rgba(195, 189, 187, 1)","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]},"line-dasharray":[0.5,0.25]}},{id:"tunnel_trunk_primary_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#e9ac77","line-width":{base:1.2,stops:[[5,0.4],[6,0.7],[7,1.75],[20,22]]},"line-dasharray":[0.5,0.25]}},{id:"tunnel_motorway_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway"],["==","brunnel","tunnel"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#e9ac77","line-dasharray":[0.5,0.25],"line-width":{base:1.2,stops:[[5,0.4],[6,0.7],[7,1.75],[20,22]]}}},{id:"tunnel_path_pedestrian",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","tunnel"],["in","class","path","pedestrian"]],layout:{visibility:"visible"},paint:{"line-color":"rgba(204, 196, 176, 0.45)","line-dasharray":[1,0.75],"line-width":{base:1.2,stops:[[14,0.5],[20,6]]}}},{id:"tunnel_motorway_link",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway_link"],["==","ramp",1],["==","brunnel","tunnel"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#fc8","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"tunnel_service_track",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#fff","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"tunnel_link",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","ramp","1"],["==","brunnel","tunnel"]],layout:{"line-join":"round"},paint:{"line-color":"#fff4c6","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"tunnel_minor",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#fff","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,11.5]]}}},{id:"tunnel_secondary_tertiary",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"rgba(245, 245, 243, 1)","line-width":{base:1.2,stops:[[6.5,0],[8,0.5],[20,13]]}}},{id:"tunnel_trunk_primary",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#fff4c6","line-width":{base:1.2,stops:[[5,0],[7,1],[20,18]]}}},{id:"tunnel_motorway",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway"],["==","brunnel","tunnel"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#ffdaa6","line-width":{base:1.2,stops:[[5,0],[7,1],[20,18]]}}},{id:"tunnel_major_rail",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["in","class","rail"]],paint:{"line-color":"#bbb","line-width":{base:1.4,stops:[[14,0.4],[15,0.75],[20,2]]}}},{id:"tunnel_major_rail_hatching",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","tunnel"],["==","class","rail"]],paint:{"line-color":"#bbb","line-dasharray":[0.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"road_area_bridge",type:"fill",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","Polygon"],["==","brunnel","bridge"]],layout:{visibility:"visible"},paint:{"fill-color":"rgba(246, 241, 229, 0.6)","fill-antialias":true}},{id:"road_area_pattern",type:"fill",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","Polygon"],["!has","brunnel"]],layout:{visibility:"visible"},paint:{"fill-pattern":"pedestrian_polygon"}},{id:"road_service_track_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","service","track"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#cfcdca","line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"road_link_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["!in","class","motorway","trunk","primary","pedestrian","path","track","service"],["==","ramp",1]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"road_trunk_primary_link_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["==","ramp",1],["in","class","primary","trunk"]],layout:{"line-cap":"butt","line-join":"round",visibility:"visible"},paint:{"line-color":"#e9ac77","line-width":{base:1.2,stops:[[5,0],[7,0.7],[20,14]]}}},{id:"road_motorway_link_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"],["==","ramp",1]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"road_minor_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["!in","brunnel","bridge","tunnel"],["in","class","minor"],["!=","ramp","1"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#cfcdca","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,0.5],[13,1],[14,4],[20,20]]}}},{id:"road_secondary_tertiary_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"],["!=","ramp",1]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(195, 189, 187, 1)","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"road_trunk_primary_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["!=","ramp",1],["in","class","primary","trunk"],["!=","ramp",1]],layout:{"line-cap":"butt","line-join":"round",visibility:"visible"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[5,0.4],[6,0.7],[7,1.75],[20,22]]}}},{id:"road_motorway_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"],["!=","ramp",1]],layout:{"line-cap":"butt","line-join":"round",visibility:"visible"},paint:{"line-color":"#e9ac77","line-width":{base:1.2,stops:[[5,0.4],[6,0.7],[7,1.75],[20,22]]}}},{id:"road_path_pedestrian",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",minzoom:14,filter:["all",["==","$type","LineString"],["!in","brunnel","bridge","tunnel"],["in","class","path","pedestrian"]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(204, 196, 176, 0.45)","line-dasharray":[1,1],"line-width":{base:1.2,stops:[[14,1],[20,6]]}}},{id:"road_link",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["all",["!in","brunnel","bridge","tunnel"],["==","ramp",1],["!in","class","motorway","trunk","primary","pedestrian","path","track","service"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fea","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"road_trunk_primary_link",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["==","ramp",1],["in","class","primary","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fea","line-width":{base:1.2,stops:[[5,0],[7,0.5],[20,10]]}}},{id:"road_motorway_link",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",minzoom:12,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"],["==","ramp",1]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fc8","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"road_service_track",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","service","track"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fff","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"road_minor",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["in","class","minor"]]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fff","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,18]]}}},{id:"road_secondary_tertiary",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["in","class","secondary","tertiary"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"rgba(245, 245, 243, 1)","line-width":{base:1.2,stops:[[6.5,0],[8,0.5],[20,13]]}}},{id:"road_trunk_primary",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["!=","ramp",1],["in","class","primary","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":"#fea","line-width":{base:1.2,stops:[[5,0],[7,1],[20,18]]}}},{id:"road_motorway",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",minzoom:5,filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"],["!=","ramp",1]],layout:{"line-cap":"round","line-join":"round",visibility:"visible"},paint:{"line-color":{base:1,stops:[[5,"hsl(26, 87%, 62%)"],[6,"#fc8"]]},"line-width":{base:1.2,stops:[[5,0],[7,1],[20,18]]}}},{id:"road_major_rail",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","rail"]],paint:{"line-color":"#bbb","line-width":{base:1.4,stops:[[14,0.4],[15,0.75],[20,2]]}}},{id:"road_major_rail_hatching",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["!in","brunnel","bridge","tunnel"],["==","class","rail"]],paint:{"line-color":"#bbb","line-dasharray":[0.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"building",type:"fill",metadata:{},source:"openmaptiles","source-layer":"building",minzoom:13,maxzoom:14,layout:{visibility:"visible"},paint:{"fill-color":"rgba(189, 185, 181, 0.3)","fill-outline-color":{base:1,stops:[[13,"hsla(35, 6%, 79%, 0.32)"],[14,"hsl(35, 6%, 79%)"]]}}},{id:"building-3d",type:"fill-extrusion",metadata:{},source:"openmaptiles","source-layer":"building",minzoom:14,layout:{visibility:"visible"},paint:{"fill-extrusion-color":"rgba(189, 185, 181, 1)","fill-extrusion-height":{property:"render_height",type:"identity"},"fill-extrusion-base":{property:"render_min_height",type:"identity"},"fill-extrusion-opacity":0.3}},{id:"waterway-bridge-case",type:"line",source:"openmaptiles","source-layer":"waterway",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"]],layout:{"line-cap":"butt","line-join":"miter"},paint:{"line-color":"#bbbbbb","line-width":{base:1.6,stops:[[12,0.5],[20,5]]},"line-gap-width":{base:1.3,stops:[[13,0.5],[20,6]]}}},{id:"waterway-bridge",type:"line",source:"openmaptiles","source-layer":"waterway",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(134, 204, 250, 1)","line-width":{base:1.3,stops:[[13,0.5],[20,6]]}}},{id:"bridge_motorway_link_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway"],["==","ramp",1],["==","brunnel","bridge"]],layout:{"line-join":"round"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge_service_track_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#cfcdca","line-width":{base:1.2,stops:[[15,1],[16,4],[20,11]]}}},{id:"bridge_link_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","link"],["==","brunnel","bridge"]],layout:{"line-join":"round"},paint:{"line-color":"#e9ac77","line-opacity":1,"line-width":{base:1.2,stops:[[12,1],[13,3],[14,4],[20,15]]}}},{id:"bridge_street_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","street","street_limited"]],layout:{"line-join":"round"},paint:{"line-color":"hsl(36, 6%, 74%)","line-opacity":{stops:[[12,0],[12.5,1]]},"line-width":{base:1.2,stops:[[12,0.5],[13,1],[14,4],[20,25]]}}},{id:"bridge_path_pedestrian_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["in","class","path","pedestrian"]],layout:{"line-join":"miter",visibility:"visible"},paint:{"line-color":"hsl(35, 6%, 80%)","line-dasharray":[1,0],"line-width":{base:1.2,stops:[[14,1.5],[20,18]]}}},{id:"bridge_secondary_tertiary_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"rgba(195, 189, 187, 1)","line-opacity":1,"line-width":{base:1.2,stops:[[8,1.5],[20,17]]}}},{id:"bridge_trunk_primary_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#e9ac77","line-width":{base:1.2,stops:[[5,0.4],[6,0.7],[7,1.75],[20,22]]}}},{id:"bridge_motorway_casing",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway"],["==","brunnel","bridge"],["!=","ramp",1]],layout:{"line-join":"round"},paint:{"line-color":"#e9ac77","line-width":{base:1.2,stops:[[5,0.4],[6,0.7],[7,1.75],[20,22]]}}},{id:"bridge_path_pedestrian",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["in","class","path","pedestrian"]],paint:{"line-color":"hsl(0, 0%, 100%)","line-dasharray":[1,0.3],"line-width":{base:1.2,stops:[[14,0.5],[20,10]]}}},{id:"bridge_motorway_link",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway"],["==","ramp",1],["==","brunnel","bridge"]],layout:{"line-join":"round"},paint:{"line-color":"#fc8","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge_service_track",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","service","track"]],layout:{"line-join":"round"},paint:{"line-color":"#fff","line-width":{base:1.2,stops:[[15.5,0],[16,2],[20,7.5]]}}},{id:"bridge_link",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","link"],["==","brunnel","bridge"]],layout:{"line-join":"round"},paint:{"line-color":"#fea","line-width":{base:1.2,stops:[[12.5,0],[13,1.5],[14,2.5],[20,11.5]]}}},{id:"bridge_street",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","minor"]],layout:{"line-join":"round"},paint:{"line-color":"#fff","line-opacity":1,"line-width":{base:1.2,stops:[[13.5,0],[14,2.5],[20,18]]}}},{id:"bridge_secondary_tertiary",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","secondary","tertiary"]],layout:{"line-join":"round"},paint:{"line-color":"rgba(245, 245, 243, 1)","line-width":{base:1.2,stops:[[6.5,0],[8,0.5],[20,13]]}}},{id:"bridge_trunk_primary",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","brunnel","bridge"],["in","class","primary","trunk"]],layout:{"line-join":"round"},paint:{"line-color":"#fea","line-width":{base:1.2,stops:[[5,0],[7,1],[20,18]]}}},{id:"bridge_motorway",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","motorway"],["==","brunnel","bridge"],["!=","ramp",1]],layout:{"line-join":"round"},paint:{"line-color":"#fc8","line-width":{base:1.2,stops:[[5,0],[7,1],[20,18]]}}},{id:"bridge_major_rail",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","rail"],["==","brunnel","bridge"]],paint:{"line-color":"#bbb","line-width":{base:1.4,stops:[[14,0.4],[15,0.75],[20,2]]}}},{id:"bridge_major_rail_hatching",type:"line",metadata:{},source:"openmaptiles","source-layer":"transportation",filter:["all",["==","class","rail"],["==","brunnel","bridge"]],paint:{"line-color":"#bbb","line-dasharray":[0.2,8],"line-width":{base:1.4,stops:[[14.5,0],[15,3],[20,8]]}}},{id:"cablecar",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["==","class","cable_car"],layout:{visibility:"visible","line-cap":"round"},paint:{"line-color":"hsl(0, 0%, 70%)","line-width":{base:1,stops:[[11,1],[19,2.5]]}}},{id:"cablecar-dash",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:13,filter:["==","class","cable_car"],layout:{visibility:"visible","line-cap":"round"},paint:{"line-color":"hsl(0, 0%, 70%)","line-width":{base:1,stops:[[11,3],[19,5.5]]},"line-dasharray":[2,3]}},{id:"boundary_3",type:"line",metadata:{},source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",3,4],["==","maritime",0],["==","disputed",0]],layout:{"line-join":"round",visibility:"visible"},paint:{"line-color":"#9e9cab","line-dasharray":[5,3],"line-width":{base:1,stops:[[4,0.4],[5,1],[12,1.8]]}}},{id:"boundary_2",type:"line",metadata:{},source:"openmaptiles","source-layer":"boundary",filter:["all",["==","admin_level",2],["==","maritime",0],["==","disputed",0]],layout:{"line-cap":"round","line-join":"round",visibility:"none"},paint:{"line-color":"hsl(248, 1%, 41%)","line-opacity":{base:1,stops:[[0,0.4],[4,0.8]]},"line-width":{base:1,stops:[[3,1],[5,1.2],[12,3]]}}},{id:"country_boundary",type:"line",source:"country_boundary",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(0, 0, 0, 0.51)","line-width":{base:1.3,stops:[[3,0.5],[22,15]]},"line-offset":1}},{id:"telangana_inner_boundary",type:"line",source:"telangana_inner_boundary",minzoom:4,maxzoom:6,layout:{"line-join":"round"},paint:{"line-color":"rgba(194, 194, 194, 0.5)","line-dasharray":[2,1]}},{id:"water_name_line",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"water_name",minzoom:0,filter:["all",["==","$type","LineString"]],layout:{"text-field":"{name:latin}\n{name:nonlatin}","text-font":["Roboto Regular"],"text-max-width":5,"text-size":12,"symbol-placement":"line"},paint:{"text-color":"#5d60be","text-halo-color":"rgba(255,255,255,0.7)","text-halo-width":1}},{id:"water_name_point",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"water_name",minzoom:2,filter:["all",["==","$type","Point"],["!=","class","ocean"]],layout:{"text-field":"{name:latin}\n{name:nonlatin}","text-font":["Roboto Regular"],"text-max-width":5,"text-size":12},paint:{"text-color":"rgba(76, 125, 173, 1)","text-halo-color":"rgba(255,255,255,0)","text-halo-width":1},maxzoom:24},{id:"water_ocean_name_point",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"water_name",minzoom:0,filter:["all",["==","$type","Point"],["==","class","ocean"]],layout:{"text-field":"{name:latin}\n{name:nonlatin}","text-font":["Roboto Regular"],"text-max-width":5,"text-size":12},paint:{"text-color":"rgba(76, 125, 173, 1)","text-halo-color":"rgba(255,255,255,0)","text-halo-width":1}},{id:"poi_z16",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"poi",minzoom:16,filter:["all",["==","$type","Point"],[">=","rank",20]],layout:{"icon-image":"{class}_11","text-anchor":"top","text-field":"{name:latin}\n{name:nonlatin}","text-font":["Roboto Condensed-Italic"],"text-max-width":9,"text-offset":[0,0.6],"text-padding":2,"text-size":12},paint:{"text-color":"#666","text-halo-blur":0.5,"text-halo-color":"#ffffff","text-halo-width":1}},{id:"poi_z15",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"poi",minzoom:15,filter:["all",["==","$type","Point"],[">=","rank",7],["<","rank",20]],layout:{"icon-image":"{class}_11","text-anchor":"top","text-field":"{name:latin}\n{name:nonlatin}","text-font":["Roboto Condensed-Italic"],"text-max-width":9,"text-offset":[0,0.6],"text-padding":2,"text-size":12},paint:{"text-color":"#666","text-halo-blur":0.5,"text-halo-color":"#ffffff","text-halo-width":1}},{id:"poi_z14",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"poi",minzoom:14,filter:["all",["==","$type","Point"],["any",["<","rank",7],["==","class","entrance"]]],layout:{"icon-image":"{class}_11","text-anchor":"top","text-field":"{name:latin}\n{name:nonlatin}","text-font":["Roboto Condensed-Italic"],"text-max-width":9,"text-offset":[0,0.6],"text-padding":2,"text-size":12},paint:{"text-color":"#666","text-halo-blur":0.5,"text-halo-color":"#ffffff","text-halo-width":1}},{id:"poi_transit",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"poi",filter:["all",["in","class","bus","railway","airport"]],layout:{"icon-image":"{class}_11","text-anchor":"left","text-field":"{name:latin}\n{name:nonlatin}","text-font":["Roboto Condensed-Italic"],"text-max-width":9,"text-offset":[0.9,0],"text-padding":2,"text-size":12,visibility:"visible"},paint:{"text-color":"rgba(99, 148, 224, 1)","text-halo-blur":0.5,"text-halo-color":"#ffffff","text-halo-width":1}},{id:"poi_railway",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"poi",minzoom:13,filter:["all",["==","$type","Point"],["has","name"],["==","class","railway"],["==","subclass","station"]],layout:{"icon-image":"{class}_11","text-anchor":"left","text-field":"{name:latin}\n{name:nonlatin}","text-font":["Roboto Condensed-Italic"],"text-max-width":9,"text-offset":[0.9,0],"text-optional":true,"text-padding":2,"text-size":12,visibility:"visible"},paint:{"text-color":"rgba(99, 148, 224, 1)","text-halo-blur":0.5,"text-halo-color":"#ffffff","text-halo-width":1}},{id:"road_oneway",type:"symbol",source:"openmaptiles","source-layer":"transportation",minzoom:15,filter:["all",["==","oneway",1],["in","class","motorway","trunk","primary","secondary","tertiary","minor","service"]],layout:{"symbol-placement":"line","icon-image":"oneway","symbol-spacing":75,"icon-padding":2,"icon-rotation-alignment":"map","icon-rotate":90,"icon-size":{stops:[[15,0.5],[19,1]]}},paint:{"icon-opacity":0.5}},{id:"road_oneway_opposite",type:"symbol",source:"openmaptiles","source-layer":"transportation",minzoom:15,filter:["all",["==","oneway",-1],["in","class","motorway","trunk","primary","secondary","tertiary","minor","service"]],layout:{"symbol-placement":"line","icon-image":"oneway","symbol-spacing":75,"icon-padding":2,"icon-rotation-alignment":"map","icon-rotate":-90,"icon-size":{stops:[[15,0.5],[19,1]]}},paint:{"icon-opacity":0.5}},{id:"road_label",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"transportation_name",filter:["all"],layout:{"symbol-placement":"line","text-anchor":"center","text-field":"{name:latin} {name:nonlatin}","text-font":["Roboto Regular"],"text-offset":[0,0.15],"text-size":{base:1,stops:[[13,12],[14,13]]}},paint:{"text-color":"#765","text-halo-blur":0.5,"text-halo-width":1}},{id:"highway-shield",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:8,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["!in","network","us-interstate","us-highway","us-state"]],layout:{"text-size":10,"icon-image":"road_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Klokantech Noto Sans Regular"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}","symbol-avoid-edges":true},paint:{"text-color":"rgba(37, 36, 36, 1)"}},{id:"highway-shield-us-interstate",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:7,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-interstate"]],layout:{"text-size":9,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Klokantech Noto Sans Regular"],"symbol-placement":{base:1,stops:[[7,"point"],[7,"line"],[8,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}","symbol-avoid-edges":true},paint:{"text-color":"rgba(255, 255, 255, 1)"}},{id:"highway-shield-us-other",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",minzoom:9,filter:["all",["<=","ref_length",6],["==","$type","LineString"],["in","network","us-highway","us-state"]],layout:{"text-size":9,"icon-image":"{network}_{ref_length}","icon-rotation-alignment":"viewport","symbol-spacing":200,"text-font":["Klokantech Noto Sans Regular"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-rotation-alignment":"viewport","icon-size":1,"text-field":"{ref}","symbol-avoid-edges":true},paint:{"text-color":"rgba(37, 36, 36, 1)"}},{id:"airport-label-major",type:"symbol",source:"openmaptiles","source-layer":"aerodrome_label",minzoom:10,filter:["all",["has","iata"]],layout:{"text-padding":2,"text-font":["Klokantech Noto Sans Regular"],"text-anchor":"top","icon-image":"airport_11","text-field":"{name:latin}\n{name:nonlatin}","text-offset":[0,0.6],"text-size":12,"text-max-width":9,visibility:"visible","icon-size":1,"text-optional":true},paint:{"text-halo-blur":0.5,"text-color":"#666","text-halo-width":1,"text-halo-color":"#ffffff"}},{id:"place_other",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",filter:["all",["in","class","hamlet","island","islet","neighbourhood","suburb"]],layout:{"text-field":"{name:latin}\n{name:nonlatin}","text-font":["Roboto Condensed-Italic"],"text-letter-spacing":0.1,"text-max-width":9,"text-size":{base:1.2,stops:[[12,10],[15,14]]},"text-transform":"uppercase",visibility:"visible"},paint:{"text-color":"rgba(66, 62, 62, 1)","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1.2}},{id:"place_village",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","village"]],layout:{"text-field":"{name:latin}\n{name:nonlatin}","text-font":["Roboto Regular"],"text-max-width":8,"text-size":{base:1.2,stops:[[10,12],[15,22]]}},paint:{"text-color":"#333","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1.2}},{id:"place_town",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","town"]],layout:{"icon-image":{base:1,stops:[[0,"circle-stroked_16"],[10,""]]},"text-anchor":"bottom","text-field":"{name:latin}\n{name:nonlatin}","text-font":["Roboto Regular"],"text-max-width":8,"text-offset":[0,0],"text-size":{base:1.2,stops:[[7,12],[11,16]]}},paint:{"text-color":"#333","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1.2}},{id:"place_city",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",minzoom:5,filter:["all",["==","class","city"]],layout:{"icon-image":{base:1,stops:[[0,"circle-stroked_16"],[10,""]]},"text-anchor":"bottom","text-field":"{name:latin}\n{name:nonlatin}","text-font":["Roboto Medium"],"text-max-width":8,"text-offset":[0,0],"text-size":{base:1.2,stops:[[7,14],[11,24]]},"icon-allow-overlap":true,"icon-optional":false},paint:{"text-color":"#333","text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":1.2}},{id:"state",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",maxzoom:6,filter:["all",["==","class","state"]],layout:{"text-field":"{name:latin}\n{name:nonlatin}","text-font":["Roboto Medium"],"text-size":{stops:[[4,11],[6,15]]},"text-transform":"uppercase","text-padding":2,"text-letter-spacing":0.1},paint:{"text-color":"rgba(74, 72, 66, 1)","text-halo-color":"rgba(255,255,255,0.7)","text-halo-width":0.8}},{id:"country_other",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",filter:["all",["==","class","country"],["!has","iso_a2"]],layout:{"text-field":"{name:latin}","text-font":["Roboto Condensed-Italic"],"text-max-width":6.25,"text-size":{stops:[[3,9],[7,15]]},"text-transform":"none"},paint:{"text-color":"#334","text-halo-blur":1,"text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":0.8}},{id:"country_3",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",filter:["all",[">=","rank",3],["==","class","country"],["has","iso_a2"]],layout:{"text-field":"{name:latin}","text-font":["Roboto Condensed-Italic"],"text-max-width":6.25,"text-size":{stops:[[3,11],[7,17]]},"text-transform":"none"},paint:{"text-color":"#334","text-halo-blur":1,"text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":0.8}},{id:"country_2",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",filter:["all",["==","rank",2],["==","class","country"],["has","iso_a2"]],layout:{"text-field":"{name:latin}","text-font":["Roboto Condensed-Italic"],"text-max-width":6.25,"text-size":{stops:[[2,11],[5,17]]},"text-transform":"none"},paint:{"text-color":"#334","text-halo-blur":1,"text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":0.8}},{id:"country_1",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",filter:["all",["==","rank",1],["==","class","country"],["has","iso_a2"]],layout:{"text-field":"{name:latin}","text-font":["Roboto Condensed-Italic"],"text-max-width":6.25,"text-size":{stops:[[1,11],[4,17]]},"text-transform":"none"},paint:{"text-color":"#334","text-halo-blur":1,"text-halo-color":"rgba(255,255,255,0.8)","text-halo-width":0.8}},{id:"continent",type:"symbol",metadata:{},source:"openmaptiles","source-layer":"place",maxzoom:1,filter:["all",["==","class","continent"]],layout:{"text-field":"{name:latin}","text-font":["Roboto Condensed-Italic"],"text-size":13,"text-transform":"uppercase","text-justify":"center"},paint:{"text-color":"#633","text-halo-color":"rgba(255,255,255,0.7)","text-halo-width":1}}]};var satelliteStyleJson={version:8,name:"KlokanTech Satellite Hybrid",metadata:{"mapbox:autocomposite":false,"mapbox:type":"template","maputnik:renderer":"mbgljs","openmaptiles:version":"3.x"},sources:{openmaptiles:{type:"vector",url:getSpecificDomain(Constants.ZOHO_MAPS)+"/vector/data/v3.json"},satellite:{type:"raster",url:getSpecificDomain(Constants.ZOHO_MAPS)+"/vector/data/satellite.json",tileSize:256},country_boundary:{type:"geojson",data:getSpecificDomain(Constants.STYLE_STATIC_SERVER)+"/maps/v8_5_0/resource/country_boundary.geojson"},telangana_inner_boundary:{type:"geojson",data:getSpecificDomain(Constants.STYLE_STATIC_SERVER)+"/maps/v8_5_0/resource/telangana_inner_boundary.geojson"}},glyphs:getSpecificDomain(Constants.STYLE_STATIC_SERVER)+"/maps/fonts/fonts/{fontstack}/{range}.pbf",layers:[{id:"background",type:"background",layout:{visibility:"none"},paint:{"background-color":"#0C1C2B"}},{id:"satellite",type:"raster",source:"satellite",minzoom:0,filter:["all"],layout:{visibility:"visible"},paint:{"raster-opacity":1}},{id:"satellite-mediumres",type:"raster",source:"satellite",minzoom:5,layout:{},paint:{"raster-opacity":{stops:[[5,0],[6,1]]}}},{id:"water",type:"fill",source:"openmaptiles","source-layer":"water",filter:["==","$type","Polygon"],layout:{visibility:"none"},paint:{"fill-color":"hsl(205, 56%, 73%)"}},{id:"landuse",type:"fill",source:"openmaptiles","source-layer":"landuse",filter:["==","class","agriculture"],layout:{visibility:"visible"},paint:{"fill-color":"#eae0d0"}},{id:"landuse_overlay_national_park",type:"fill",source:"openmaptiles","source-layer":"landcover",filter:["==","class","national_park"],paint:{"fill-color":"#E1EBB0","fill-opacity":{base:1,stops:[[5,0],[9,0.75]]}}},{id:"park_outline",type:"line",source:"openmaptiles","source-layer":"park",layout:{visibility:"none"},paint:{"line-color":"rgba(159, 183, 118, 0.69)","line-dasharray":[0.5,1]}},{id:"road_path",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["in","class","path","track"]],layout:{"line-cap":"square","line-join":"bevel"},paint:{"line-color":"rgba(247, 247, 247, 0.33)","line-dasharray":[1,1],"line-width":{base:1.55,stops:[[7,0.25],[20,4]]}}},{id:"road_minor",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["in","class","minor","service"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgba(247, 247, 247, 0.12)","line-width":{base:1.55,stops:[[4,0.25],[20,10]]}}},{id:"tunnel_minor",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","tunnel"],["==","class","minor_road"]],layout:{"line-cap":"butt","line-join":"miter"},paint:{"line-color":"rgba(239, 239, 239, 0.2)","line-width":{base:1.55,stops:[[4,0.25],[20,30]]},"line-dasharray":[0.36,0.18]}},{id:"tunnel_major",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","tunnel"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"butt","line-join":"miter"},paint:{"line-color":"rgba(255, 255, 255, 0.2)","line-width":{base:1.4,stops:[[6,0.5],[20,30]]},"line-dasharray":[0.28,0.14]}},{id:"road_trunk_primary",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:8,filter:["all",["==","$type","LineString"],["in","class","trunk","primary"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(255, 255, 255, 0.3)","line-width":{base:1.4,stops:[[8,0.5],[20,10]]}}},{id:"road_secondary_tertiary",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:9,filter:["all",["==","$type","LineString"],["in","class","secondary","tertiary"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgba(255, 255, 255, 0.3)","line-width":{base:1.4,stops:[[6,0.5],[20,6]]}}},{id:"road_major_motorway",type:"line",source:"openmaptiles","source-layer":"transportation",minzoom:6,filter:["all",["==","$type","LineString"],["==","class","motorway"]],layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":"rgba(255, 255, 255, 0.2)","line-width":{base:1.4,stops:[[10,1],[16,6]]},"line-offset":0}},{id:"railway",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["==","class","rail"],layout:{visibility:"visible"},paint:{"line-color":"rgba(179, 170, 158, 0.2)","line-opacity":{base:1,stops:[[11,0],[16,1]]}}},{id:"bridge_minor case",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["==","class","minor_road"]],layout:{"line-cap":"butt","line-join":"miter",visibility:"none"},paint:{"line-color":"rgba(222, 222, 222, 0.2)","line-width":{base:1.6,stops:[[12,0.5],[20,10]]},"line-gap-width":{base:1.55,stops:[[4,0.25],[20,30]]}}},{id:"bridge_major case",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"butt","line-join":"miter",visibility:"none"},paint:{"line-color":"rgba(222, 222, 222, 0.2)","line-width":{base:1.6,stops:[[12,0.5],[20,10]]},"line-gap-width":{base:1.55,stops:[[4,0.25],[20,30]]}}},{id:"bridge_minor",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["==","class","minor_road"]],layout:{"line-cap":"round","line-join":"round",visibility:"none"},paint:{"line-color":"rgba(239, 239, 239, 0.2)","line-width":{base:1.55,stops:[[4,0.25],[20,30]]}}},{id:"bridge_major",type:"line",source:"openmaptiles","source-layer":"transportation",filter:["all",["==","$type","LineString"],["==","brunnel","bridge"],["in","class","primary","secondary","tertiary","trunk"]],layout:{"line-cap":"round","line-join":"round",visibility:"none"},paint:{"line-color":"rgba(255, 255, 255, 0.2)","line-width":{base:1.4,stops:[[6,0.5],[20,30]]}}},{id:"admin_sub",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["in","admin_level",4,6,8],["==","maritime",0],["==","disputed",0]],layout:{visibility:"visible"},paint:{"line-color":"rgba(194, 194, 194, 0.5)","line-dasharray":[2,1]}},{id:"admin_country-dark",type:"line",source:"openmaptiles","source-layer":"boundary",minzoom:0,filter:["all",["<=","admin_level",2],["==","maritime",0],["==","disputed",0],["==","$type","LineString"]],layout:{"line-cap":"butt","line-join":"round",visibility:"none"},paint:{"line-color":"rgba(0, 0, 0, 0.51)","line-width":{base:1.3,stops:[[3,0.5],[22,15]]},"line-offset":1}},{id:"admin_country",type:"line",source:"openmaptiles","source-layer":"boundary",filter:["all",["<=","admin_level",2],["==","maritime",0],["==","disputed",0],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round",visibility:"none"},paint:{"line-color":"rgba(226, 226, 226, 1)","line-width":{base:1.3,stops:[[3,0.5],[22,15]]}}},{id:"country_boundary",type:"line",source:"country_boundary",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"rgba(0, 0, 0, 0.51)","line-width":{base:1.3,stops:[[3,0.5],[22,15]]},"line-offset":1}},{id:"telangana_inner_boundary",type:"line",source:"telangana_inner_boundary",minzoom:4,maxzoom:6,layout:{"line-join":"round"},paint:{"line-color":"rgba(194, 194, 194, 0.5)","line-dasharray":[2,1]}},{id:"poi_label",type:"symbol",source:"openmaptiles","source-layer":"poi",minzoom:5,filter:["all",["==","$type","Point"],["==","rank",1]],layout:{"text-size":11,"text-font":["Klokantech Noto Sans Italic"],visibility:"visible","text-offset":[0,0.5],"icon-size":1,"text-anchor":"top","text-field":"{name:latin}\n{name:nonlatin}","text-max-width":8},paint:{"text-color":"rgba(255, 255, 255, 1)","text-halo-width":1,"text-halo-color":"rgba(0, 0, 0, 0.75)","text-halo-blur":1}},{id:"airport-label",type:"symbol",source:"openmaptiles","source-layer":"aerodrome_label",minzoom:10,filter:["all",["has","iata"]],layout:{"text-size":11,"text-font":["Klokantech Noto Sans Italic"],visibility:"visible","text-offset":[0,0.5],"icon-size":1,"text-anchor":"top","text-field":"{name:latin}\n{name:nonlatin}","text-max-width":8},paint:{"text-color":"rgba(255, 255, 255, 1)","text-halo-width":1,"text-halo-color":"rgba(0, 0, 0, 0.75)","text-halo-blur":1}},{id:"road_major_label",type:"symbol",source:"openmaptiles","source-layer":"transportation_name",filter:["==","$type","LineString"],layout:{"symbol-placement":"line","text-field":"{name:latin} {name:nonlatin}","text-font":["Klokantech Noto Sans Regular"],"text-transform":"none","text-letter-spacing":0.1,"text-size":{base:1.4,stops:[[10,8],[20,14]]},"text-rotation-alignment":"map"},paint:{"text-color":"rgba(255, 255, 255, 1)","text-halo-color":"rgba(43, 43, 43, 1)","text-halo-width":1}},{id:"place_label_other",type:"symbol",source:"openmaptiles","source-layer":"place",minzoom:8,filter:["all",["==","$type","Point"],["!=","class","city"]],layout:{"text-field":"{name:latin}\n{name:nonlatin}","text-font":["Klokantech Noto Sans Regular"],"text-max-width":6,"text-size":{stops:[[6,10],[12,14]]},visibility:"visible","text-anchor":"center"},paint:{"text-color":"rgba(255, 255, 255, 1)","text-halo-color":"rgba(43, 43, 43, 1)","text-halo-blur":0.5,"text-halo-width":1}},{id:"place_label_city",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:16,filter:["all",["==","$type","Point"],["==","class","city"]],layout:{"text-field":"{name:latin}\n{name:nonlatin}","text-font":["Klokantech Noto Sans Regular"],"text-max-width":10,"text-size":{stops:[[3,12],[8,16],[10,20]]}},paint:{"text-color":"rgba(255, 255, 255, 1)","text-halo-color":"rgba(0, 0, 0, 0.75)","text-halo-blur":0.5,"text-halo-width":1}},{id:"country_other_label",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:12,filter:["all",["==","$type","Point"],["!has","iso_a2"],["==","class","country"]],layout:{"text-field":"{name:latin}","text-font":["Klokantech Noto Sans Regular"],"text-max-width":10,"text-size":{stops:[[3,11],[8,20]]}},paint:{"text-color":"rgba(255, 255, 255, 1)","text-halo-color":"rgba(0, 0, 0, 1)","text-halo-width":1,"text-halo-blur":1}},{id:"country_label",type:"symbol",source:"openmaptiles","source-layer":"place",maxzoom:12,filter:["all",["==","$type","Point"],["==","class","country"],["has","iso_a2"]],layout:{"text-field":"{name:latin}","text-font":["Klokantech Noto Sans Bold"],"text-max-width":10,"text-size":{stops:[[3,12],[8,22]]}},paint:{"text-color":"rgba(255, 255, 255, 1)","text-halo-color":"rgba(0, 0, 0, 1)","text-halo-width":1,"text-halo-blur":1}}]};function triggerNextRecord(E){var D=($(document).find(".zc-page-content-wrapper").length>0)?true:false;var B=D?$(".zc-selected-card"):$(E).find(".zc-selected-card");if($(B).length==1){var A;if($(B).attr("elname")=="recSummaryOutterEl"){if($(B).next().length==0){var C=$(B).parent();if($(C).next().length==0){A=$(C).closest("[elname=summary-wrapper-el]").next().find("[elname=recSummaryOutterEl]").first()}else{A=$(C).next().find("[elname=recSummaryOutterEl]").first()}}else{A=$(B).next()}}else{if($(B)[0].className.indexOf("zc-qv-custom-layout")>-1){var F=$(B).closest(".column-container");if(F.next().length>0){A=F.next().find("div.zc-qv-custom-layout[elname='zc-record']")}}else{A=$(B).next()}}if(D&&A!=undefined&&A.length>0){closeDialog()}$(A).trigger("click")}else{B=D?$(".selected-row"):$(E).find(".selected-row");var A=$(B).next();if(D&&A!=undefined&&A.length>0){closeDialog()}if($(A).attr("elname")=="zc-reportRowEl"){$(A).trigger("click")}else{if($(A).attr("elname")=="zc-grouprow"){$(A).next().trigger("click")}}}}function triggerPrevRecord(D){var C=($(document).find(".zc-page-content-wrapper").length>0)?true:false;var A=C?$(".zc-selected-card"):$(D).find(".zc-selected-card");if($(A).length==1){var F;if($(A).attr("elname")=="recSummaryOutterEl"){var B=$(A).parent();F=$(B).prev().find("[elname=recSummaryOutterEl]").last()}else{if($(A)[0].className.indexOf("zc-qv-custom-layout")>-1){var E=$(A).closest(".column-container");if(E.prev().length>0){F=E.prev().find("div.zc-qv-custom-layout[elname='zc-record']")}}else{F=$(A).prev();if($(F).attr("elname")=="zc-group-record-title"){F=$(A).parent().prev().find("[elname='zc-record']").last()}}}if(C&&F!=undefined&&F.length>0){closeDialog()}$(F).trigger("click")}else{A=C?$(".selected-row"):$(D).find(".selected-row");var F=$(A).prev();if(C&&F!=undefined&&F.length>0){closeDialog()}if($(F).attr("elname")=="zc-reportRowEl"){$(F).trigger("click")}else{if($(F).attr("elname")=="zc-grouprow"){$(F).prev().trigger("click")}}}}(function(D){var I={};D(window).on("keydown",function(N){var J=N.keyCode;if(J==27){if(D(".zc-show-imagepreview").is(":visible")){N.stopPropagation();return true}var M=$zcmodal.getTopPopup();if(M&&M.isCloseOnEsc()){D(".zc-single-card").removeClass("zc-single-card");D(".zc-single-summary").removeClass("zc-single-summary");if(D(M.$overlay).hasClass("slidescreen")){D(M.$overlay).closest('div[elname="zc-view-component"]').removeClass("zc-kanban-accordion")}D("div[elname=recordDetailViewFreeze]").hide();D("div[elname=recordDetailViewFreeze]").remove();D(".show-view-record").closest('[elname="zc-component"]').css("position","");D("#zc-component").css("overflow","");D("#zc-print-frame").remove();M.close()}}else{if(J==37||J==38||J==39||J==40){var O=D("div[elname=zc-view-component][isquickview=true]");if(O.length>1){var P=N.target;var K=D(P).closest("div[elname=zc-view-component]");if(K.length==0){D.each(O,function(S,Q){var R=D(Q).find(".zc-selected-card, .selected-row");if(R.length>0){O=D(Q);return false}})}else{O=K}}if(O.length==1){if(J==37||J==38){triggerPrevRecord(O)}else{if(J==39||J==40){triggerNextRecord(O)}}}}}stopEventBubbling(N)});var B={containerClass:".popupConentContainer",width:null,height:null,offsetTop:150,showOnfocus:false,draggable:false,slideWidth:null,tableValue:{}};var H=ZCModal.prototype.defaults;ZCModal.prototype.defaults=D.extend(H,B);ZCModal.prototype.buildDOM=function(){var V=this;options=V.getOptions();var J,T,K,S;var M=" compact";if(options.showInFullScreen){M=" fullscreen"}else{if(options.showInSlideScreen){M=" slidescreen"}}var O="";if(!isNull(options.width)){O+="width:";O+=isNaN(options.width)?options.width:options.width+"px"}if(!isNull(options.height)){O+=";height:";O+=isNaN(options.height)?options.height:options.height+"px"}var P="";if(!isNull(options.slideWidth)){P+="width:";P+=isNaN(options.slideWidth)?options.slideWidth:options.slideWidth+"px"}if(!isNull(options.isPage)&&options.isPage==true&&options.isNewPage!=true){if(!isNull(options.slideHeight)){P+=";height:";P+=isNaN(options.slideHeight)?options.slideHeight:options.slideHeight+"px"}if(!isNull(options.slideTop)){P+=";top:";P+=isNaN(options.slideTop)?options.slideTop:options.slideTop+"px"}}var W="";if(!isNull(options.showSettings)&&options.showSettings){W='<span elname="popupsettingsicon" class="popupSetting"><i class="zc-em zc-common-settings" aria-hidden="true"></i></span>'}var U='<div style="'+P+'" class="zcpopup '+$zcmodal._theme+(M)+((ZCGlobal.isMobileLayout&&!options.showInSlideScreen)?" "+options.wrapperClass:"")+'"><div class="popupbox-wrapper" ><div  style="'+O+'" class="popupbox'+(!isNull(options.popupboxClass)?"  "+options.popupboxClass:"")+'">'+W+(options.showClose?'<span class="popupClose"><i class="fa fa-close"></i></span>':"")+'<div class="popupboxOuter'+(!isNull(options.bodyClass)?" "+options.bodyClass:"")+'">';if(!isNull(options.title)){U+='<div class="popupHeader"><span>'+options.title+"</span></div>"}U+='<div class="popupConentContainer"></div>';if(options.buttons.length>0){U+='<div class="popupFooter">';for(var N=0,R=options.buttons.length;N<R;N++){var Q=options.buttons[N];U+='<a id="'+Q.id+'" class="'+((Q.type==ZCModalConstants.MODAL_SUBMIT)?"zc-live-primary-btn":"zc-live-secondary-btn")+'" href="#">'+Q.name+"</a>"}U+="</div>"}U+="</div></div></div></div>";V.$overlay=D(U)};ZCModal.prototype.buildModal=function(){var M=this;options=M.getOptions();M.$body=D(document.body);M._optionCache.bodySource=M.target;M.$container=M.$overlay.find(".popupbox-wrapper");M.setModalBody();var P=(M.$container[0]).style;P.visibility="visible";if(options.type==ZCModalConstants.CUSTOM_MODEL){M.$body.addClass(options.bodyClass);M.$body.prepend(M.$modalBody)}else{M.$overlay.find(".popupConentContainer")[0].innerHTML=M.$modalBody;if(options.showInFullScreen){var K=options.container!=undefined?options.container:D("#zc-component");D(K).append(M.$overlay)}else{if(options.showInSlideScreen){var N=options.slideContainer!=undefined?options.slideContainer:D(".record-container");D(N).after(M.$overlay);if(!options.skipFreeze){var J=ifreeze({container:"body",});D(J).after(M.$overlay)}}else{if(!options.skipFreeze){var J=ifreeze({container:"body",});D(J).after(M.$overlay)}else{M.$body.append(M.$overlay)}}}}var O=options.tableValue;if(O.length>0){D.each(O,function(Q,S){var R=D(M.$body).find(".zc-del-rec-info").find("div[elName=zc-recsdiv-"+S.status+"]");if(R.length>0){var T=S.colHeaders;D(R).handsontable({licenseKey:LicenseKeys.handsonTableLicenseKey,data:S.data,columns:S.columns,colHeaders:S.colHeaders,viewportColumnRenderingOffset:T.length,stretchH:"all",readOnly:true,renderAllRows:true,disableVisualSelection:true})}})}};ZCModal.prototype.addButtonEvent=function(K){var J=this;options=J.getOptions();var M=document.createElement("textarea");M.innerHTML=K.name;K.name=M.value;if(K.name=="Yes"){J.$container.find("a[id='"+K.name+"']").focus()}J.$container.find("a[id='"+K.id+"']").on("click",function(N){N.preventDefault();if(K.action){if(!(K.action)(J.getBody())){J.close()}}else{J.close()}if(K.type==ZCModalConstants.MODAL_SUBMIT){J.$container.trigger("confirm")}else{J.$container.trigger("cancel")}})};ZCModal.prototype.addEventListeners=function(){var K=this;options=K.getOptions();D((K.$container[0]).getElementsByClassName("popupClose")).on("click",function(Q){D(".zc-single-card").removeClass("zc-single-card");D(".zc-single-summary").removeClass("zc-single-summary");D(".zc-selected-card").removeClass("zc-selected-card");if(D(K.$container[0]).parent().hasClass("slidescreen")){D(K.$container[0]).closest('div[elname="zc-view-component"]').removeClass("zc-kanban-accordion")}D("div[elname=recordDetailViewFreeze]").hide();D("div[elname=recordDetailViewFreeze]").remove();D(".show-view-record").closest('[elname="zc-component"]').css({position:""});D("#zc-component").css({overflow:""});if(ZCGlobal.isMobileLayout&&!$zcmodal.hasInstance()){D(".zc-mobile-back-button").show()}document.body.classList.remove("zc-subform-header-fixed");var R=(K.$overlay).find(".zcpopup:last").length>0?(K.$overlay).find(".zcpopup:last"):(K.$overlay);var P=R.find(".popupConentContainer");R[0].classList.remove("zc-form-popup-container");R[0].classList.remove("zc-form-add-record-container");var O=(K.$overlay).parents(".zcpopup:last").length>0?(K.$overlay).parents(".zcpopup:last"):(K.$overlay);O[0].classList.remove("zc-form-popup-container");O[0].classList.remove("zc-form-add-record-container");P.parent().removeClass("zc-form-container");D("#zc-print-frame").remove();if(D(K.$container[0]).find('iframe[name="sheet2AppIFRAME"]')!=null){D(".popupbox").removeClass("zc-live-sheet2app");D(".popupbox").removeClass("zc-fullpage-popup")}Q.preventDefault();K.close()});K.$overlay.off("popupEditSubformClass").on("popupEditSubformClass",function(P){var Q=(K.$overlay).find(".zcpopup:last").length>0?(K.$overlay).find(".zcpopup:last"):(K.$overlay);Q[0].classList.add("zc-form-edit-popup-container");var O=(K.$overlay).parents(".zcpopup:last").length>0?(K.$overlay).parents(".zcpopup:last"):(K.$overlay);O[0].classList.add("zc-form-edit-popup-container")});K.$overlay.off("formPopupCloseBtn").on("formPopupCloseBtn",function(P){document.body.classList.remove("zc-subform-header-fixed");var R=(K.$overlay).find(".zcpopup:last").length>0?(K.$overlay).find(".zcpopup:last"):(K.$overlay);var Q=R.find(".popupConentContainer");R[0].classList.remove("zc-form-popup-container");R[0].classList.remove("zc-form-add-record-container");R[0].classList.remove("zc-form-edit-popup-container");var O=(K.$overlay).parents(".zcpopup:last").length>0?(K.$overlay).parents(".zcpopup:last"):(K.$overlay);O[0].classList.remove("zc-form-popup-container");O[0].classList.remove("zc-form-add-record-container");O[0].classList.remove("zc-form-edit-popup-container");Q.parent().removeClass("zc-form-container");P.preventDefault();P.stopPropagation();K.close()});K.$overlay.off("popupSubformClass").on("popupSubformClass",function(P,O){var R=(K.$overlay).find(".zcpopup:last").length>0?(K.$overlay).find(".zcpopup:last"):(K.$overlay);var Q=R.find(".popupConentContainer");R[0].classList.add("zc-form-popup-container");K.$overlay[0].classList.add("zc-form-popup-container");Q.parent().addClass("zc-form-container")});K.$overlay.off("popupAddRecordClass").on("popupAddRecordClass",function(P,O){var Q=(K.$overlay).find(".zcpopup:last").length>0?(K.$overlay).find(".zcpopup:last"):(K.$overlay);Q[0].classList.add("zc-form-add-record-container");K.$overlay[0].classList.add("zc-form-add-record-container")});K.$overlay.off("subformFixedHeader").on("subformFixedHeader",function(P,O){var R=(K.$overlay).find(".zcpopup:last").length>0?(K.$overlay).find(".zcpopup:last"):(K.$overlay);var T=R.find(".popupConentContainer");R[0].classList.add("zc-form-popup-container");K.$overlay[0].classList.add("zc-form-popup-container");T.parent().addClass("zc-form-container");if(options.height){var X=parseInt(options.height,10);if(options.height.match(/\d+%/)){var Q=(X/100)*window.innerHeight;T.height(Q)}else{var W=document.body.offsetHeight*0.9;if(X>=W){T.height(W)}}}else{if(O.type==="h"){if(O.percentValue){var Q=(O.percentValue/100)*window.innerHeight;T.height(Q)}else{if(O.value){T.height(O.value)}else{T.height("")}}}}if(options.width){var U=parseInt(options.width,10);if(options.width.match(/\d+%/)){var S=(U/100)*window.innerWidth;T.width(S)}else{var V=document.body.offsetWidth*0.9;if(U>=V){T.width(V)}}}else{if(O.type==="w"){if(O.percentValue){var S=(O.percentValue/100)*window.innerWidth;T.width(S)}else{if(O.value){T.width(O.value)}else{T.width("")}}}}});D(K.$container).on("click",function(O){O.stopPropagation()});if(options.closeOnAnyClick){(K.$overlay).find(".popupbox-wrapper").on("click",function(O){O.preventDefault();K.close()})}(K.$overlay).find(".popupboxOuter").on("click",function(O){D(this).find("div[elname=userMentionsList]").remove();O.stopPropagation()});if(options.draggable&&!options.showInFullScreen){K.$container.draggable({handle:".popupboxOuter",containment:"document",cursor:"move"})}var N=options.buttons;for(var M=0,J=N.length;M<J;M++){K.addButtonEvent(N[M])}};D.widget("custom.smartcomplete",D.ui.autocomplete,{_renderMenu:function(M,K){D(M).off("scroll");var J=this;J._scrollMenu(M,K)},_scrollMenu:function(O,M){var K=this;var P=50;var N=[];var J=Math.ceil(M.length/P);window.pageIndex=0;N=M.slice(0,P);if(J>1){D(O).scroll(function(){if(C(D(O))){++window.pageIndex;if(window.pageIndex>=J){return }N=M.slice(window.pageIndex*P,window.pageIndex*P+P);if(N.length==0){fetchFromServer(range)}D.each(N,function(Q,R){K._renderItem(O,R).data("ui-autocomplete-item",R)});K.menu.refresh();O.show();K._resizeMenu();O.position(D.extend({of:K.element},K.options.position));if(K.options.autoFocus){K.menu.next(new D.Event("mouseover"))}}})}D.each(N,function(Q,R){K._renderItem(O,R).data("ui-autocomplete-item",R)})}});function C(K){var J=K.outerHeight();var M=K[0].scrollHeight;var N=K.scrollTop();if(N>=M-J){return true}return false}D.fn.validateOnBlur=function(){var J=this;D(this).on("blur",function(){try{D(this).data("zcfield").validate()}catch(K){K.handle()}})};function F(K){this.marker;var J=K;this.getMarker=function(){return marker};this.getTarget=function(){return J};var M="";D(J).closest(".form-field").find(".compositeWrapper > span").each(function(){var N=D(this).find(":input").val()});this.open()}F.prototype.open=function(){var O,Q;var J;var P=new google.maps.InfoWindow({size:new google.maps.Size(150,50)});var U=this;O=new google.maps.Geocoder();var K=new google.maps.LatLng(-34.397,150.644);var N={zoom:8,center:K,mapTypeId:google.maps.MapTypeId.ROADMAP};D("#map_canvas").zcmodal({title:"Pick your address",width:700,closeOnAnyClick:false,beforeShow:function(W){J=new google.maps.Map(D(W).find("#mapDiv")[0],N);google.maps.event.addListener(J,"click",function(){P.close()});var V=D(W).find("input[type=text]");var X="";D(U.getTarget()).closest(".compositeWrapper").find("span").each(function(){var Z=D(this).find(":input[type=text]").val();X=(Z!=""&&Z!=undefined)?X+Z+", ":X});google.maps.event.addListener(J,"rightclick",function(Z){U.marker.setPosition(Z.latLng);M(Z.latLng)});if(isNull(X)){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(Z){var a=new google.maps.LatLng(Z.coords.latitude,Z.coords.longitude);S(a)})}}else{O.geocode({address:X},function(a,Z){if(Z==google.maps.GeocoderStatus.OK){J.setCenter(a[0].geometry.location);if(U.marker==undefined){U.marker=new google.maps.Marker({map:J,draggable:true,position:a[0].geometry.location});T()}U.marker.address_components=a[0].address_components;U.marker.formatted_address=a[0].formatted_address;google.maps.event.trigger(U.marker,"click")}else{alert("Geocode was not successful for the following reason: "+Z)}})}D(W).find(":input[type=button]").click(function(){if(U.marker==undefined){U.marker=new google.maps.Marker({map:J,draggable:true,position:J.getCenter()});T()}else{U.marker.setPosition(J.getCenter())}O.geocode({latLng:J.getCenter()},function(a,Z){if(Z==google.maps.GeocoderStatus.OK){if(a[0]){U.marker.address_components=a[0].address_components;U.marker.formatted_address=a[0].formatted_address;google.maps.event.trigger(U.marker,"click")}}})});var Y=new google.maps.places.SearchBox((V[0]));google.maps.event.addListener(Y,"places_changed",function(){var b=Y.getPlaces();if(b.length==0){return }var c=new google.maps.LatLngBounds();var a=b[0];var Z=a.address_components;J.setCenter(a.geometry.location);if(U.marker==undefined){U.marker=new google.maps.Marker({map:J,draggable:true,position:a.geometry.location});T()}else{U.marker.setPosition(a.geometry.location)}U.marker.formatted_address=D(V).val();U.marker.address_components=a.address_components;google.maps.event.trigger(U.marker,"click");c.extend(a.geometry.location);J.fitBounds(c)});google.maps.event.addListener(J,"bounds_changed",function(){var Z=J.getBounds();Y.setBounds(Z)})},buttons:[{name:"Ok",type:ZCModalConstants.MODAL_SUBMIT,action:function(){var W=$gmap.getTopMap().marker;var V=W.address_components;U.getTarget().val(W.formatted_address);U.getTarget().trigger("picked",[V])}},{name:"Cancel",type:ZCModalConstants.MODAL_CANCEL,action:function(){}}]});function R(X){if(X==null||typeof (X)!="object"){return X}var V=new X.constructor();for(var W in X){V[W]=R(X[W])}return V}function T(){google.maps.event.addListener(U.marker,"dragend",function(){M(U.marker.getPosition())});google.maps.event.addListener(U.marker,"click",function(){if(U.marker.formatted_address){P.setContent(U.marker.formatted_address)}else{P.setContent(address)}P.open(J,U.marker)})}function S(V){U.marker=new google.maps.Marker({map:J,draggable:true,position:V});T();J.setCenter(V);M(V)}function M(V){O.geocode({latLng:V},function(W){if(W&&W.length>0){U.marker.formatted_address=W[0].formatted_address;U.marker.address_components=W[0].address_components}else{U.marker.formatted_address="Cannot determine address at this location."}P.setContent(U.marker.formatted_address);P.open(J,U.marker)})}};$gmap={mapStack:[],getTopMap:function(){return this.mapStack[this.mapStack.length-1]}};D.fn.gMap=function(){var J=new F(D(this));$gmap.mapStack.push(J);return J};D.notify=function(J){J.handleFocus=(J.handleFocus!=undefined)?J.handleFocus:true;var K=D(document.activeElement);D.zcmodal({type:ZCModalConstants.CUSTOM_MODEL,showClose:false,closeOnAnyClick:false,closeOnEsc:false,containerClass:"",bodyClass:"zc-announcement-banner-enabled",buildDOM:function(){return'<div class="zc-dem-notify zc-dem-notify-error zc-dem-info-withlink">\n    <i class="zc-li-outline ui-3-alert" value="ui-3-alert" html="ui-3-alert"></i>\n'+J.msg+"</div>"}});D(document.body).prepend('<div class="zc-announcement-banner-freezer"></div>')};D.alert=function(J){J.handleFocus=(J.handleFocus!=undefined)?J.handleFocus:true;var K=D(document.activeElement);D.zcmodal({type:ZCModalConstants.JIT_MODAL,bodyClass:"alert-popup",showClose:false,closeOnAnyClick:false,closeOnEsc:false,beforeShow:function(M){D(M).next().find("a.zc-live-primary-btn").focus()},buildDOM:function(){return'<div class="alertMsg"><i class="fa fa-exclamation-circle"></i><p>'+J.msg+"</p>"+((J.desc!=undefined)?"<span>"+J.desc+"</span>":"")+"</div>"},buttons:[{id:"Ok",name:i18n.ok,type:ZCModalConstants.MODAL_SUBMIT,action:function(){if(J.handleFocus){K.focus()}if(J.callback!=undefined){J.callback()}}}]})};D.confirm=function(J){D.zcmodal({type:ZCModalConstants.JIT_MODAL,bodyClass:(J.bodyClass!=undefined)?"confirm-popup "+J.bodyClass:"confirm-popup",showClose:false,closeOnAnyClick:false,closeOnEsc:false,buildDOM:function(){return'<div class="confirmMsg"><i class="fa fa-question-circle"></i><p>'+J.message+"</p>"+((J.description!=undefined)?"<span>"+J.description+"</span>":"")+"</div>"},buttons:[{id:"Yes",name:((J.buttonConfirm!=undefined)?J.buttonConfirm:i18n.yes),type:ZCModalConstants.MODAL_SUBMIT,action:function(){if(J.success!=undefined){(J.success)()}}},{id:"No",name:((J.buttonCancel!=undefined)?J.buttonCancel:i18n.no),type:ZCModalConstants.MODAL_CANCEL,action:function(){if(J.failure!=undefined){(J.failure)()}}}]})};D.info=function(J){D.zcmodal({type:ZCModalConstants.JIT_MODAL,bodyClass:"info-popup",buildDOM:function(){return'<div class="infoMsg"><i class="fa fa-info-circle"></i><p>'+J+"</p></div>"},buttons:[{id:"Ok",name:i18n.ok,type:ZCModalConstants.MODAL_SUBMIT,action:function(){}}]})};D.showInfo=function(J){D.zcmodal({type:ZCModalConstants.JIT_MODAL,bodyClass:"show-info-popup",buildDOM:function(){return'<div class="showInfoMsg"><i class="fa fa-info-circle"></i><p>'+J+"</p></div>"},buttons:[{id:"Ok",name:i18n.ok,type:ZCModalConstants.MODAL_SUBMIT,action:function(){}}]})};D.deleteInfo=function(K,M,J){bClass=M?"info-popup "+M:"info-popup";D.zcmodal({type:ZCModalConstants.JIT_MODAL,bodyClass:bClass,tableValue:J,buildDOM:function(){return'<div class="infoMsg"><i class="fa fa-info-circle"></i><p>'+K+"</p></div>"},buttons:[{id:"Ok",name:i18n.ok,type:ZCModalConstants.MODAL_SUBMIT,action:function(){}}]})};D.successMsg=function(N,M,K){var J=D('<div class="form-success-msg"><i class="fa fa-check"></i><p></p></div>');if(K){J.find("p").html(N)}else{J.find("p").text(N)}D("body").append(J).fadeIn();D("html, body").animate({scrollTop:0},600);setTimeout(function(){J.fadeOut(function(){D("body").find(".form-success-msg").remove()})},M)};D.showCogLoader=function(M,J){var K=D(M).closest(".form-field");if(J){K=K.closest(".form-group")}if(K.find(".cogLoader").length==0){K.append('<i class="cogLoader fa fa-spinner fa-spin"></i>')}};D.hideCogLoader=function(M,J){var K=D(M).closest(".form-field");if(J){K=K.closest(".form-group")}K.find(".cogLoader").remove()};D.customWarning=function(K){var J=D('<span class="zc-waning-icon zc-report-warning-icon"><i class="'+K.iconClass+'"></i><span class="zc-warning-tooltip-cont"></span></span>');if(K.loadInHtml){J.find(".zc-warning-tooltip-cont").html(K.message)}else{J.find(".zc-warning-tooltip-cont").text(K.message)}D(K.parentEle).append(J)};D.ajaxPrefilter(function(M,J,K){if(M.iframe){M.originalURL=M.url;return"iframe"}});D.ajaxTransport("iframe",function(T,Q,S){var M=null,P=null,O=null,J=null,K="fileupload_target",N=D(T.file);function R(){var U=D(N);U.data("clone").replaceWith(U);M.remove();P.remove()}T.data=Q.data;M=D("<form action='"+T.originalURL+"' enctype='multipart/form-data' method='post' target='"+K+"' style='display:none'></form>");D.each(T.data||{},function(U,V){D("<input type='hidden' />").attr({name:U,value:V}).appendTo(M)});O=N.after(function(){var V=D(this),U=V.clone().prop("disabled",true);V.data("clone",U);return U}).next();N.appendTo(M);return{send:function(V,U){P=D("<iframe src='javascript:false;' name='"+K+"' id='"+K+"' style='display:none'></iframe>");P.one("load",function(){P.one("load",function(){R()});M[0].submit()});function W(X){var g=X.contentWindow?X.contentWindow.document:(X.contentDocument?X.contentDocument:X.document),f=g.documentElement?g.documentElement:g.body;var a,Y,c,d;if(f){a=Number(f.getAttribute("status"))||200;Y=f.getAttribute("statusText")||"OK"}d=f?f.innerHTML:null;var Z=g.getElementsByTagName("pre")[0];var e=g.getElementsByTagName("body")[0];if(Z){d=Z.textContent?Z.textContent:Z.innerText}else{if(e){d=e.textContent?e.textContent:e.innerText}}c={text:d};R();U(a,Y,c)}D("body").append(M,P)},abort:function(){if(P!==null){R()}}}});function A(c,X){this.getElement=function(){return c};if(X.services==undefined){if(X.fieldType){c[0].addEventListener("change",R,false)}else{if(X.dimension>1){c[0].addEventListener("change",K,false)}else{c[0].addEventListener("change",N,false)}}}else{if(X.services==""||(X.services.indexOf("mycomputer")!=-1)){X.services=X.services.replace("mycomputer,","");c[0].addEventListener("change",N,false)}else{if(!X.isPickerRestricted()){c[0].addEventListener("click",Y,false)}}if(X.services!=""&&!X.isPickerRestricted()){D(c.parent().parent().parent()[0].querySelector(".arrows-1-cloud-upload-96")).parent().on("click",function(f){Y(f)})}}if(!c.attr("multiple")){X.multiple=false}else{X.multiple=true}var V={},J=c,P,a,d;var W=D(J).parent().siblings("ul");if(X.defaultVal!=undefined&&X.defaultVal!=""){a=X.defaultVal,d=(a!=undefined&&a!="")?a.substring(a.indexOf("_")+1):"";if(X.fieldType==Constants.AUDIO||X.fieldType==Constants.VIDEO){d=d.substring(d.indexOf("_")+1)}M(d,a,false)}var U=D("<input type='file'/>").get(0).files!==undefined,T=window.FormData!==undefined,e=(U&&T);if(X.multiple){P="<p>Click or Drop here to add files</p>"}else{P='<span class="calcIcon"><i class="fa fa-upload"></i></span>'}var O;O=D("<i class='zc-li-outline arrows-4-undo-29 file-restore' title='Restore'></i>");if(X.defaultVal!=undefined&&X.defaultVal!=""){O.hide();D(J).parent().after(O);O.click(function(){M(d,a,false);(X.onrestore)(a)})}function K(g){var f=Object.create(MediaPopup);if(g.target.files[0]!=undefined){f.cropImage(g,f,X,this)}}function R(k){var f;var h=D(k.target).attr("duration");file=document.createElement("INPUT");file.setAttribute("type","file");D(file).prop("files",k.target.files);if(k.target.files[0]==undefined){D(D(J).parent(".filedrag").parent().parent().parent().find(".cogLoader")).remove();return }f=new FileReader();f.readAsDataURL(k.target.files[0]);f.onload=function(){var l,m;if(X.fieldType==Constants.AUDIO){l=document.createElement("audio")}else{if(X.fieldType==Constants.VIDEO){l=document.createElement("video");D(l).attr("preload","metadata")}}l.src=this.result;l.addEventListener("error",function(){X.error(Constants.FILEERROR);return });l.addEventListener("loadedmetadata",g)};function g(){var l=this;var o=false;var n=l.duration;function p(t){n=t;if(n>h){o=true;var s=~~(h/60)==0?"00":~~(h/60);var q=(h%60)==0?"00":(h%60);var u="";if(s=="00"){u=q+" secs"}else{if(q=="00"){u=(s=="1")?s+" min":s+" mins"}else{u=s+":"+q}}var r="";if(X.fieldType==Constants.AUDIO){r=Constants.UPLOADAUDIO+" "+u+" "+Constants.SHORTERAUDIO}else{if(X.fieldType==Constants.VIDEO){r=Constants.UPLOADVIDEO+" "+u+" "+Constants.SHORTERVIDEO}}o=true;X.error(r)}else{o=false;N(k)}}if(((k.target.files[0].size/1024)/1024).toFixed()>=50){errorMsg=Constants.FILESIZE+"";X.error(errorMsg);o=true}else{if(n==Infinity||isNaN(n)){o=true;function m(q,s){if(n===Infinity||isNaN(n)){function r(){this.ontimeupdate=function(){return };n=q.duration;if(n!=Infinity&&!isNaN(n)){s(n);q.removeEventListener("timeupdate",r,true)}q.currentTime=0}q.addEventListener("timeupdate",r,true);q.currentTime=1e+101}else{s(n)}}m(l,function(q){p(l.duration)})}else{if(n>h){p(l.duration)}else{if(!o){N(k)}}}}}}function N(n){var v=D.extend(true,{},D.ajaxSettings,X,{url:X.url,contentType:false,processData:false,cache:false,type:"POST"});if(e){var u=new FormData();var g=n.target.files||n.dataTransfer.files;if(g.length==0){return }function r(s){s=s.replace(new RegExp("[$~ *&%+)(#@^!><?:;}{\\]\\[\"'\\\\/]","g"),"_");return s}function h(y,s){var w=(170-(new Date().getTime().toString().length)-3);if((X.fieldType==Constants.AUDIO||X.fieldType==Constants.VIDEO)&&s!=undefined){w=w-s.toString().length-1}if(y.length>w){var x=y.substring(y.lastIndexOf(".")+1,y.length);y=y.substring(0,(w-x.length-1))+"."+x}return r(y)}if(g.length){if(g.length>1&&!X.multiple){D.alert("Multiple upload not supported");return false}for(j=0;j<g.length;j++){var t=h(g[j].name,g[j].size);u.append(X.name,g[j],t);l(t)}}else{return }D.each(X.data||{},function(s,w){if(w!=undefined){u.append(s,w)}});v.data=u}else{v.iframe=true;v.file=J;if(isNull(v.data)){v.data={}}v.data.frameorigin=ZCGlobal.serverPrefix;if(J.val()==""){return }D(window).off("message.iframeUpload").on("message.iframeUpload",function(){var w=window.event;if(w.origin==ZCGlobal.serverPrefix){var x=w.data;x=JSON.parse(x);var s=x.content[0];o(s);v.success(x.content,x.status,x.statusText);D(window).off("message.iframeUpload")}});var k=J.val(),q=(k.indexOf("\\")>=0?k.lastIndexOf("\\"):k.lastIndexOf("/")),f=k.substring(q);if(f.indexOf("\\")===0||f.indexOf("/")===0){f=f.substring(1)}l(f)}function m(){if(!X.multiple){D(Q(V).HTML).find("i").trigger("click")}}function l(s){if(!X.multiple){V={}}V[s]={HTML:D("<li><i></i></li>").append(D("<p>").text(s)),PATH:""}}if(V.length==0){return }v.xhr=function(){var s=D.ajaxSettings.xhr();if(s.upload){s.upload.addEventListener("progress",function(z){D(D(W).parent().parent()[0].querySelector(".zc-image-hover-msg")).html("");var y=0;var w=z.loaded||z.position;var x=z.total;if(z.lengthComputable){y=Math.ceil(w/x*100)}if(X.uploadProgress){X.uploadProgress(y)}},false)}return s};var p=v.beforeSend;v.beforeSend=function(w,s){S();if(p){p.call(this,w,s)}};v.complete=(function(s){if(s.responseJSON!=undefined){s=s.responseJSON[0];o(s)}});D.ajax(v);function o(x){for(var s=0;s<x.length;s++){var z=V[r(x[s].docName)],w=D(z.HTML).find("i")[0],y=x[s].docId;if(x[s].status=="error"){D(z.HTML).remove();delete V[x[s].docName];return false}z.PATH=y;w.className="zc-li-outline ui-1-simple-remove";w.data={path:y,filename:r(x[s].docName)};b(w)}}}function Y(k){k.preventDefault();var g=D('<div id="zc-gadgets_cloudpicker_div" class="gadgets_cloudpicker_div" style="z-index: 1001; position: fixed; top: 0px; width:100%; height:100%;"></div>');var l="sources="+X.services+"&zservice=zcreator&zsoid="+ZCGlobal.scopeId;var f=ZCGlobal.fileCloudUrl.replace("ZC_PARAMS=",l);if(k.target.baseURI.search("form-perma")!=-1){f=ZCGlobal.fileCloudUrlFormperma.replace("ZC_PARAMS=",l)}var h=D("<iframe class='gadgets_cloudpicker_iframe' style='border: medium none; height:100%; margin:0px; padding:0px; width:100%;' id='zc-file_attach_iframe' src='"+f+"'>");g.append(h);h.one("load",function(){h.one("load",function(){var t=h[0],s=t.contentWindow?t.contentWindow.document:(t.contentDocument?t.contentDocument:t.document),n=s.documentElement?s.documentElement:s.body,r;r=n.getElementsByTagName("script")[0].innerHTML;r=r.replace("parent.gadgetresponse =","");r=r.substr(0,r.length-1);r=JSON.parse(r);D(g).remove();for(var o in r){var q=r[o];for(var p=0,m=q.length;p<m;p++){q[p].docName=decodeURIComponent(q[p].docName);M(q[p].docName,q[p].docId,true)}r[o]=q}(X.success)(r,200);r={}})});D("body").append(g)}function M(l,k,f){if(!X.multiple){V={}}var g;g=D('<li><i class="zc-li-outline ui-1-simple-remove"></i></li>').append(D("<p>").text(l));V[k]={HTML:g,PATH:k};var h=D(g).find("i")[0];h.data={path:k,filename:l};b(h,f);S()}function S(){if(O!=undefined){O.hide()}if(X.showOpts!=undefined){(X.showOpts)()}D(D(W).parent().parent()[0].querySelector(".zc-image-icons")).hide();D(D(W).parent().parent()[0].querySelector(".zc-image-hover-msg")).html("");if(!X.multiple){D(W).html(Q(V).HTML)}else{for(j in V){D(W).append(V[j].HTML)}}}function Q(g){for(var f in g){return g[f]}}function b(g,f){g.addEventListener("click",function(h){Z(h.target,f)})}function Z(f,g){var h=D(f).closest("div.form-group").find('input[name="uploadFile"]');D(h).val("");D(f).parent("li").remove();delete V[f.data.filename];if(X.ondelete!=undefined){(X.ondelete)()}}}A.prototype.destroy=function(){D(this.getElement()).closest(".uploadFile").before(this.getElement().clone()).remove()};D.fn.upload=function(J){if(J=="destroy"){if(this.data("upload")!=undefined){this.data("upload").destroy()}else{return }}var K=new A(this,J);this.data("upload",K);return K};function G(s,m){var n=m.position;var d=m.tooltip;var h=D(s).height();var o=D(s).width();var M=D('<div id="zc-calculateMsgHeight" class="zc-tooltipDesc" style="display:none;white-space:pre-line;max-width:270px"></div>');M.text(d);D("body").append(M);var N=D("#zc-calculateMsgHeight").height();var p=D("#zc-calculateMsgHeight").width();D("#zc-calculateMsgHeight").remove();var b=D(s).offset().left;var P=D(s).offset().top;var u=window.innerWidth;var w=window.innerHeight;var V=0,v=0;var t=["RIGHT","BOTTOM","TOP","LEFT"];var c=new Array(0);if(n=="auto"||n==undefined){c=t}else{if(n=="top"||n=="left"||n=="right"||n=="bottom"){c.push(n.toUpperCase())}jQuery.each(t,function(x,y){if(D.inArray(y,c)==-1){c.push(y)}})}var f=false;var R="right";for(var Y=0;Y<c.length;Y++){switch(c[Y]){case"BOTTOM":var g=b+(o/2)-(p/2)-15;var a=h+P+11;if(((w-(a+10))>=N&&(u-(g+3))>=p)){v=a;V=g;R="bottom";f=true}break;case"RIGHT":var W=o+b+26;var K=h;if(m.containsSubfield&&m.extraHeight!=undefined){K=K-m.extraHeight}var S=P+(K/2)-(N/2)-8;if(((w-(S+10))>=N&&(u-(W+10))>=p)){v=S;V=W;R="right";f=true}break;case"TOP":var q=b+(o/2)-(p/2)-15;var l=P-26;if(((l+20)>=N&&(u-(q+3))>=p)){v=l-N;V=q;R="top";f=true}break;case"LEFT":var U=b-35;if(m.isDecisionBox&&m.checkBoxWidth!=undefined){U=U-m.checkBoxWidth-2}var e=h;if(m.containsSubfield&&m.extraHeight!=undefined){e=e-m.extraHeight}var Q=P+(e/2)-(N/2)-8;if(((w-Q)>=N&&(U-20)>=p)){v=Q;V=U-p;R="left";f=true}break}if(v<0||V<0||v>w||V>u){f=false;v=V=0}if(f){break}}if(V==0&&v==0){var k=b-p-10;var r=P-N-10;var Z=(w-P-h-N-30);var O=(u-b-o-p-30);var J=Math.max(k,O);var X=Math.max(Z.topSpace);var T=((w/X)>(u/J)?true:false);if(T){if(Z==X){v=h+P+11;V=b+(o/2)-(p/2)-15;R="bottom"}else{v=P-N-26;V=b+(o/2)-(p/2)-15;R="top"}}else{if(O==J){v=P+(h/2)-(N/2)-8;V=o+b+26;R="right"}else{v=P+(h/2)-(N/2)-8;V=b-p-35;R="bottom"}}}return{left:V,top:v,position:R}}D.fn.tooltipPositionCalc=function(K){var M;if(K.tooltip!=""&&K.tooltip!=undefined){if(K.tooltipelem!=undefined){M=K.tooltipelem}else{M=D(this)}if(K.position==undefined){K.position="auto"}if(K.showTooltip!=undefined){N();D(this).on("focus",function(){N()})}else{D(this).mouseenter(function(O){O.stopPropagation();N()})}if(K.removeOnFocusOut==undefined){D(this).mouseleave(function(O){O.stopPropagation();J()});D(this).on("click keydown focus",function(O){J()})}else{D(this).focusout(function(){J()})}}function N(){var O=G(D(M),K);D("#zc-fieldTooltipMsg").remove();var P=D('<div id="zc-fieldTooltipMsg" class="zc-tooltipDesc zc-tooltip-'+O.position+'" style="display:none;pointer-events:none;max-width:270px;white-space:pre-line;position:fixed;top:'+O.top+"px;left:"+O.left+'px;"></div>');P.css("z-index",K.zindex==undefined?999:K.zindex);P.text(K.tooltip);D("body").append(P);D("#zc-fieldTooltipMsg").fadeIn(500)}function J(){D("#zc-fieldTooltipMsg").remove()}};var E=(function(N,M){var K="",J="";this.create=function(){var O=this.generateTab();D(M).append(O)};this.generateTab=function(){var P=D("<ul class='tabcontainer'></ul>"),S=D("<div class='subtabcontainer'></div>"),Q=(N.defaultIndex!=undefined)?N.defaultIndex:0,O=this;D.each(N.tabs,function(V){var Y="tab"+V,X=false,U=this.onSelect;if(Q==V){X=true}var T=D("<li>",{elname:"tab"+V,"class":((X)?"selected":""),text:this.parent});D(P).append(T);var W=D("<div>",{elname:"subtab"+V,style:"display:"+((X)?"block":"none")});D(W).append(this.child);D(S).append(W);if(X){K=D(T);J=D(W)}D(T).click(function(){O._idle();K=D(this);J=D(W);D(this).addClass("selected");D(W).show();if(U!=undefined){(U)()}})});var R=D("<div class='zc-tab-pane'>");R.append(P);R.append(S);return R};this._idle=function(){D(K).removeClass("selected");D(J).hide()}});D.fn.tabpane=function(J){var K=new E(J,this).create();this.data("tabpane",K)}})(window.jQuery);(function(A){$.fn.cloneWithData=function(){var C=A.apply(this,arguments),E=this.find("select").add(this.filter("select")),F=C.find("select").add(C.filter("select")),B=this.find("textarea").add(this.filter("textarea")),I=C.find("textarea").add(C.filter("textarea")),H=C.find('div[elename="signature"]').add(C.filter('div[elename="signature"]'));for(var G=0,D=E.length;G<D;++G){F[G].selectedIndex=E[G].selectedIndex}for(var G=0,D=B.length;G<D;++G){$(I[G]).val($(B[G]).val())}for(var G=0,D=H.length;G<D;++G){H.children("div").not(".signature-line-div").remove();H.children("canvas").remove()}return C}})($.fn.clone);function stopEventBubbling(A){if($.browser.msie){if(A==null){return }A.cancelBubble=true;if(A.stopPropagation){A.stopPropagation()}}else{A.stopPropagation()}}function closeAllPopup(){while(1){var A=$zcmodal.getTopPopup();if(A==undefined){break}A.close()}}function closeFirstPopup(){var A=$zcmodal.getTopPopup();if(A!=undefined){A.close()}}function getParentWindow(){var A=window.opener;if(A==null){A=window.parent}return A}var Geolocation={};Geolocation.locationData=undefined;Geolocation.locationError=undefined;Geolocation.locationDataArr=[];Geolocation.isAccessGranted=undefined;Geolocation.test=function(){Geolocation.locationData="12.9382766,80.1459366";Geolocation.locationDataArr=[12.9382766,80.1459366];Geolocation.locationError=undefined;Geolocation.isAccessGranted=true};Geolocation.getLocationDataObj=function(){if(Geolocation.locationData!==undefined){var A=Geolocation.locationData.split(",");return{latitude:A[0],longitude:A[1]}}return{}};Geolocation.init=function(R){var P=R.overlay;var E=$(P).find("#geoheader");var B=$(P).find("#geodesc");var M=$(P).find("#allowlocation");var K=$(P).find("#geodenied");var Q=$(P).find("#popupimg");var W=$(Q).find("span");var U={OPR:"opera",Firefox:"mozilla",Safari:"safari",MSIE:"msie",Chrome:"chrome",Edge:"edge",Default:"default"};for(var V in U){if(V=="Safari"){if(navigator.userAgent.search(V)>=0&&navigator.userAgent.search("Chrome")<=0){$(W).addClass("zc-geo-location-alert-"+U[V]);break}}else{if(V=="Default"){$(W).addClass("zc-geo-location-alert-"+U[V]);break}else{if(navigator.userAgent.search(V)>=0){$(W).addClass("zc-geo-location-alert-"+U[V]);break}}}}function G(){LIB._stopLoading();$(P).hide();$(P).next().show();if(typeof R.success!="undefined"){R.success()}}function N(){LIB._stopLoading();$(P).show();$(P).next().hide();$(Q).show();$(E).text(R.headerMsg);$(B).text(i18n.geodesc);$(M).off("click").on("click",function(){LIB._startLoading();T()})}function I(){LIB._stopLoading();$(P).show();$(P).next().hide();$(K).show();$(K).parent().parent().addClass("zc-geoblock");$(P).find("#arrow").remove();$(E).text(i18n.geoheaderfailure);$(B).text(i18n.geodescfailure);$(Q).hide();$(M).remove()}function J(X){ZCWebStorage.setItem("isGeoAccessGranted","1");if(X.coords.latitude!=undefined&&X.coords.longitude!=undefined){Geolocation.locationData=X.coords.latitude+","+X.coords.longitude;Geolocation.locationDataArr=[];Geolocation.locationDataArr.push(X.coords.latitude);Geolocation.locationDataArr.push(X.coords.longitude);Geolocation.locationError=undefined}G()}function O(){ZCWebStorage.remove("isGeoAccessGranted");I();Geolocation.locationError=i18n.formgeolocationerror}function F(X){if(X.coords.latitude!=undefined&&X.coords.longitude!=undefined){Geolocation.locationData=X.coords.latitude+","+X.coords.longitude;Geolocation.locationDataArr=[];Geolocation.locationDataArr.push(X.coords.latitude);Geolocation.locationDataArr.push(X.coords.longitude);Geolocation.locationError=undefined}}function H(){ZCWebStorage.remove("isGeoAccessGranted");Geolocation.locationError=i18n.formgeolocationerror}function T(){if(typeof (navigator.geolocation)!="undefined"){C()}else{I();Geolocation.locationError=i18n.nogeolocation}}function C(){navigator.geolocation.watchPosition(F,H);navigator.geolocation.getCurrentPosition(J,O)}var D="";if(navigator.permissions!=undefined){navigator.permissions&&navigator.permissions.query({name:"geolocation"}).then(function(X){D=X.state;S(D)})}else{A()}function S(X){if(X=="granted"){if(Geolocation.locationData===undefined){LIB._startLoading();C()}else{G()}}else{if(X=="denied"){O()}else{N()}}}function A(){if(!ZCWebStorage.hasItem("isGeoAccessGranted","1")){N()}else{if(Geolocation.locationData===undefined){LIB._startLoading();C()}else{G()}}}};function getModalProgress(){return'<div><div class="zc_SplashContainer"><div id="splash-screen"><div class="splash-screen-text">'+i18n.loading+'</div><div class="splash-screen-circle-outer"></div><div class="splash-screen-circle-inner"></div></div></div></div>'}jQuery.uaMatch=function(B){B=B.toLowerCase();var A=/(chrome)[ \/]([\w.]+)/.exec(B)||/(webkit)[ \/]([\w.]+)/.exec(B)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(B)||/(msie) ([\w.]+)/.exec(B)||B.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(B)||[];return{browser:A[1]||"",version:A[2]||"0"}};matched=jQuery.uaMatch(navigator.userAgent);browser={chrome:false,webkit:false,safari:false,msie:false,mozilla:false,opera:false};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome){browser.webkit=true}else{if(browser.webkit){browser.safari=true}}jQuery.browser=browser;$.fn.smoothShow=function(B,A,C){C=(C==undefined)?"up":C;B=(B==undefined)?0:B;this.css({opacity:"0"});this.show("blind",{direction:C},B,function(){$(this).animate({opacity:1},B,function(){if(A!=undefined){A()}})});return this};$.fn.smoothHide=function(B,A){B=(B==undefined)?0:B;this.animate({opacity:0},B,function(){$(this).hide("blind",B,function(){if(A!=undefined){A()}})});return this};$.fn.smoothToggle=function(A){if(this.is(":visible")){this.smoothHide(A)}else{this.smoothShow(A)}};$.cachedScript=function(A,C,B){if(B==undefined){B="script"}return jQuery.ajax({type:"GET",dataType:B,cache:true,success:C,url:A})};function openZMapsDisp(D,E,A,C,B){if(getConfig().useCompression){require(["mapbox"],function(F){window.mapboxgl=F;mapDisplay(D,E,A)})}else{mapDisplay(D,E,A)}event.stopPropagation()}function mapDisplay(C,D,A){var B=getSpecificDomain(Constants.IMAGE_STATIC_SERVER)+"/maps/v8_1_7/images/maps-blue-marker.svg";$.zcmodal({title:A,type:ZCModalConstants.JIT_MODAL,width:700,closeOnAnyClick:true,beforeShow:function(F){var E="location_map";var H=new mapboxgl.Map({container:E,style:OpenSansMapReportJson,hash:false,zoom:10,maxZoom:20,center:[D,C]});var G=document.createElement("div");$(G).css({height:"35px",width:"22px","background-repeat":"no-repeat"});G.className="zc-marker-div";G.style.backgroundImage="url("+B+")";customMarker=new mapboxgl.Marker(G,{offset:[0,-17.5]});customMarker.setLngLat([D,C]);customMarker.addTo(H);window.zohomap=H},buildDOM:function(){var E="<div id='zMap'>";E+="<div id='location_map' style='height:400px;'></div>";E+="</div>";return E}})}function mapInlineStaticDisplay(C,D,B){staticMap=L.map(B);L.tileLayer(Constants.ZMAPS_DOMAIN+"/tiles/{z}/{x}/{y}.png",{}).addTo(staticMap);staticMap.setView([C,D],12);$(".leaflet-control-attribution").css("visibility","hidden");$(".leaflet-control-zoom").css("visibility","hidden");$(".maps_locate-icon").css("display","none");staticMap.dragging.disable();staticMap.touchZoom.disable();staticMap.doubleClickZoom.disable();staticMap.scrollWheelZoom.disable();staticMap.keyboard.disable();var A=L.icon({iconUrl:Constants.IMG_STATIC_SERVER+"/maps/v8_1_5/images/maps-red-marker.svg",iconSize:[21,36]});L.marker([C,D],{icon:A}).addTo(staticMap)}function parseAddress(B){var A={};var D={};function C(G,F,E){if(F.length>0){F.sort(function(I,H){return(Constants[E].indexOf(I)-Constants[E].indexOf(H))});A[G]=F.map(function(H){return B.address[H]}).join(", ")}}$.each(B.address,function(E,F){if(Constants.ADDRESS_LINE_1_KEYS.indexOf(E)!==-1){if(isNull(D.route)){D.route=[]}D.route.push(E)}if(Constants.ADDRESS_LINE_2_KEYS.indexOf(E)!==-1){if(isNull(D.locality)){D.locality=[]}D.locality.push(E)}if(Constants.CITY_KEYS.indexOf(E)!==-1){if(isNull(D.administrative_area_level_2)){D.administrative_area_level_2=[]}D.administrative_area_level_2.push(E)}if(Constants.STATE_KEYS.indexOf(E)!==-1){A.administrative_area_level_1=B.address[E]}if(Constants.COUNTRY_KEYS.indexOf(E)!==-1){A.country=B.address[E]}if(Constants.POSTAL_CODE_KEYS.indexOf(E)!==-1){A.postal_code=B.address[E]}});$.each(D,function(G,F){var E;switch(G){case"route":E="ADDRESS_LINE_1_KEYS";break;case"locality":E="ADDRESS_LINE_2_KEYS";break;case"administrative_area_level_2":E="CITY_KEYS";break;case"administrative_area_level_1":E="STATE_KEYS";break;case"country":E="COUNTRY_KEYS";break;case"postal_code":E="POSTAL_CODE_KEYS";break}C(G,F,E)});if(isNull(A.route)&&!isNull(A.locality)){A.route=A.locality;A.locality=""}A.latitude=B.lat;A.longitude=B.lon;A.countryCode=B.address.country_code.toLowerCase();return A}var MediaPopup={_this:this,_opts:{},_localstream:{},eleType:"",$el:null,chunks:[],width:585,height:438,_input:{},_script:null,_source:null,_image:{},mediaRecorder:{},_recorder:{},_mp3File:{},_isRecording:false,_isPlayback:false,_isplayCompleted:false,_cropped:false,_beforeCrop:"",_clock:{},error:false,selectedType:2,errorMsg:"",footerEle:$(".media-popup .popupFooter"),popup:$(".media-popup"),cropperdiv:undefined,cameraLocalTabContent:'<div id="cameraTabContent" class="zc-localtabContent-center"><div id="cropperDiv"  style="margin:8px"><video playsinline class="hide" style="padding: 0px 0 0px 0px;width: 585px;height : 438px;" ></video><canvas class="" style="display:none;"></canvas></div></div>',cameraTabContent:'<div id="cameraTabContent" class="flLeft zc-local-tabContent"><div id="permissionMsg" class="hide zc-permissionMsg"><span id="firstMsg" class="zc-permission-txt1"></span><div id="permission" class="zc-permission-image"></div><span id="lastMsg" class="zc-permission-txt2"></span></div><div id="cropperDiv" class="cropperDiv"><div id="cameraTimerDiv" class="zc-camera-timer"></div><video class="hide" style="padding: 0px 0 0px 0px;" playsinline></video><canvas class="" style="display:none;"></canvas></div></div>',localTabContent:'<div id="localTabContent" class=" flLeft zc-local-tabContent" ><input id="dummyFile" style="position: absolute;top: 0;right: 0;bottom: 0;left: 0;height: 100%;width: 100%;opacity: 0;cursor: pointer;z-index: 5;" type="file"/><div id="errorMsgComp" class="hide zc-media-errormsgcomp"><i class="fa fa-exclamation-triangle" style="color: rgb(219, 76, 74)" aria-hidden="true"></i><div id="errorMsg" class="zc-media-errormsg"></div></div><div class="zc-import-image"><div id="dragdrop"><i class="fa fa-cloud-upload" aria-hidden="true"></i><span id="dragtext" class="zc-drag-drop-msg"><span class="zc-media-dragtext">Drag and Drop your file here</span> <span class="zc-media-or">or</span> <span class="zc-media-clicktext">Click to Browse.</span></span></div></div></div>',linkTabContent:'<div id="linkTabContent" class="hide flLeft zc-local-tabContent" ><div class="zc-insert-link"><div class="zc-dem-form-control zc-dem-label-right">    <div class="form-group"><label class="form-label zc-Image_crop-label  zc_image_label">Image URL </label><div class="form-group"><input id="linkUrl" placeholder="https://" class="form-control textfield image-source" type="text"></div></div>   </div></div></div></div>',mobileCropContent:'<div id = "mobileCrop" class="zc-video-popup-container"><div class="zc-video-popup-image-container"><img id="imageFile" class="zc-video-popup-image" accept="image/*" src=""> <a class="zc-video-popup-footer-cancel" href="">Cancel</a> <a class="zc-video-popup-footer-done" href="" >Done</a> <a class="zc-video-popup-footer-icon" href="">Icon</a> </div></div>',audio:document.querySelector("audio"),video:document.querySelector("video"),image_fieldDOM:{},formController:{},backCam:Constants.SECONDARYCAMERA,mobileBrowser:{swapIcon:'<div id="swap" class="zc-media-swapicon"><i class="media-video-icon"></i></div>',backIcon:'<span id="backIcon" ><i class="arrows-1-curved-previous zc-li-outline"></i></span>',mobileOrientation:Constants.PORTRAIT,screenWidth:window.screen.availWidth,screenHeigth:window.screen.availHeigth,cameraList:[],cameraLabelList:[],currentCameraID:null,toggleToCameraID:null,frontCameraID:null,camProp:null,previewtimer:!1,},_imageField:{_dummyField:'<input id="dummyFile" title="Click here" style="position: absolute;top: 0;right: 0;bottom: 0;left: 0;height: 100%;width: 100%;opacity: 0;cursor: pointer;z-index: 5;" type="file" accept="image/*">',_videoField:'<video class="hide" style="padding: 0px 0 0px 0px" >',_canvas:'<canvas class="" style="display:none;"></canvas>',_imageWidth:0,_imageHeight:0,isInBuildCamera:false,fieldDOM:undefined},_audio:{_isRecording:false,_isPlaying:false,_isPaused:false,_audioContext:{},_scriptProcessor:{},_analyzer:{},_bar:[],_playBars:[],_canvas:$("#audioTabContent canvas")[0],_dummyField:'<input id="dummyFile" title="Click here" style="position: absolute;top: 0;right: 0;bottom: 0;left: 0;height: 100%;width: 100%;opacity: 0;cursor: pointer;z-index: 5;" type="file"/>',_dragText:'<span id="dragtext" class="zc-drag-drop-msg"><span class="zc-media-dragtext">Drag and Drop your file here</span> <span class="zc-media-or">or</span> <span class="zc-media-clicktext">Click to Browse.</span></span>'},setOpts:function(A){this._opts=A},getOpts:function(){return this._opts},setErrorMsg:function(A){this.errorMsg=A},getErrorMsg:function(){return this.errorMsg},bindLocalCrop:function(E,F){F.$el=$ele;var A=F.popup.find("#imageFile")[0];var D=F.$el.attr("dimension");var C=F.getAspectRatio();F._beforeCrop=A.src;var B=new Cropper(A,{aspectRatio:C,viewMode:1,zoomable:false,zoomOnWheel:false,zoomOnTouch:false,crop:function(H){var G=B.getCroppedCanvas().toDataURL(F.$el[0].files[0].type);F._image=G;A.src=G;F._cropped=true;F.popup.find("#dummyFile").remove();F.popup.find("#dummyFile").off("change");if(F.popup.find("#localTabContent").css("display")!="none"){F.cssMediaPopupChanges("602px","595px")}}})},bindCrop:function(){_this.popup.find("#imageFile");var A=_this.popup.find("#imageFile")[0];var D=_this.$el.attr("dimension");var C=_this.getAspectRatio();var B=new Cropper(A,{aspectRatio:C,viewMode:1,zoomable:false,zoomOnWheel:false,zoomOnTouch:false,crop:function(F){_this._beforeCrop=A.src;var E=B.getCroppedCanvas().toDataURL();_this._image=E;A.src=E;_this._cropped=true;_this.popup.find("#dummyFile").remove();_this.popup.find("#dummyFile").off("change");if(_this.popup.find("#localTabContent").css("display")!="none"){}}})},swapCamera:function(){_this.mobileBrowser.currentCameraID=_this.mobileBrowser.toggleToCameraID;if(_this.mobileBrowser.cameraList[0]==_this.mobileBrowser.currentCameraID){_this.mobileBrowser.toggleToCameraID=_this.mobileBrowser.cameraList[1]}else{_this.mobileBrowser.toggleToCameraID=_this.mobileBrowser.cameraList[0]}if((_this.mobileBrowser.frontCameraID!=undefined)&&(_this.mobileBrowser.frontCameraID==_this.mobileBrowser.currentCameraID)){_this.popup.find("#cropperDiv video").addClass("zc-mirror-image")}else{if(_this.popup.find("#cropperDiv video").hasClass("zc-mirror-image")){_this.popup.find("#cropperDiv video").removeClass("zc-mirror-image")}}if(MediaPopup.eleType==Constants.IMAGE_FIELD){if(_this.mobileBrowser.camProp.DEFAULTCAMERA==Constants.SECONDARYCAMERA){if(_this.backCam==Constants.SECONDARYCAMERA){_this.video.classList.remove("image-invert-preview");_this.popup.find("#cropperDiv video").removeClass("zc-mirror-image")}}else{if(_this.backCam==Constants.PRIMARYCAMERA){_this.video.classList.add("zc-mirror-image")}}}_this.changeStream()},resetPreviewtimer:function(){clearInterval(_this.mobileBrowser.previewtimer);_this.mobileBrowser.previewtimer=0;_this.popup.find("#previewMsg").slideUp()},bindCameraEvent:function(A,E,G,H){_this.footerEle.find("#swap").off("click");_this.footerEle.find("#swap").on("click",function(){var I=_this.mobileBrowser.camProp;if(isMobileBrowser()&&I.ALLOWSWITCHCAMERA){_this.swapCamera()}});if(A){_this.popup.find("[id='done']").on("click",function(){_this.popupCaptured=true;if(_this.isCropEnabled()){_this.uploadVideoRec()}else{if(_this.popup.find("#cameraTab li.active i").hasClass("fa-upload")){$(_this.$el).prop("files",H.target.files);$(_this.$el).trigger("change");_this.closePopup()}else{_this.uploadVideoRec()}}});if(isMobileBrowser()&&_this.mobileBrowser.camProp.PREVIEWTIME==-1&&!_this.isCropEnabled()){_this.popup.find("[id='done']").click()}if(_this._cropped){if(_this.isCropEnabled()){if(isMobileBrowser()&&_this.mobileBrowser.camProp.PREVIEWTIME>-1){var D=_this.mobileBrowser.camProp.PREVIEWTIME;var C=_this.popup.find(".popupHeader span").text();_this.popup.find(".popupHeader span").text(C+" "+D);var B=setInterval(F,1000);function F(){D=D-1;_this.popup.find(".popupHeader span").text(C+" "+D)}setTimeout(function(){_this.popup.find(".popupHeader span").text(C+" Smile");_this.bindCrop()},_this.mobileBrowser.camProp.PREVIEWTIME*1000)}else{_this.bindCrop()}}if(_this.mobileBrowser.camProp.PREVIEWTIME==-1&&_this._cropped){_this.popup.find("[id='done']").click()}}if(_this.popup.find("#localTabContent").find(".cropper-container").length!=0){_this.changeIcon("done",false)}if(_this.popup.find("#cameraTabContent").length!=0){if(_this.popup.find("#cameraTabContent").css("display")!="none"){if(isMobileBrowser()){_this.popup.find("#backIcon").on("click",function(){if(_this.mobileBrowser.previewtimer){_this.resetPreviewtimer()}_this._cropped=false;_this.popup.find(".popupConentContainer").empty();var I=_this.cameraPopupcontent();_this.popup.find(".popupConentContainer").append(""+I);navigator.mediaDevices.enumerateDevices().then(_this.gotDevices);_this.toggleElement(E);_this.changeIcon("snap",true);_this.bindCameraEvent(false,E,G);_this.popup.find("li .fa-camera").parent("li").trigger("click")})}_this.popup.find("#Retake").on("click",function(){_this._cropped=false;_this.popup.find(".popupConentContainer").empty();var I=_this.cameraPopupcontent();_this.popup.find(".popupConentContainer").append(""+I);if(isMobileBrowser()){navigator.mediaDevices.enumerateDevices().then(_this.gotDevices)}_this.toggleElement(E);_this.changeIcon("snap",true);_this.bindCameraEvent(false,E,G);_this.popup.find("li .fa-camera").parent("li").trigger("click")})}}}else{_this.popup.find("[id='round']").off("click");_this.popup.find("[id='round']").on("click",function(O){this.style.pointerEvents="none";function N(){if(_this.popup.find("#linkUrl")!=undefined){if(_this.popup.find("#linkUrl").val()!=""){_this.popup.find("#linkUrl").val("")}}_this.video=_this.popup.find("video")[0];_this._imageField._imageWidth=_this.popup.find("#cropperDiv video").width();_this._imageField._imageHeight=_this.popup.find("#cropperDiv video").height();_this.setImgCanvas();var U={};var R='<img id="imageFile" src ="'+_this._image+'"/ >';$(R).insertBefore(_this.video);$(_this.video).remove();_this._imageField._canvas.getContext("2d").clearRect(0,0,_this.width,_this.height);_this.popup.find("canvas").remove();if(isMobileBrowser()&&_this.mobileBrowser.camProp.PREVIEWTIME>-1&&_this.mobileBrowser.camProp.PREVIEWTIME!=0){function W(X){return new Promise(function(Y){setTimeout(Y,X)})}var T=_this.mobileBrowser.camProp.PREVIEWTIME;var S=_this.popup.find(".popupHeader span").text();_this.popup.find("#previewMsg").text("Captured will be submitted in "+T+" seconds");_this.popup.find("#previewMsg").slideDown();_this.mobileBrowser.previewtimer=setInterval(V,1000);var Q=false;function V(){T=T-1;_this.popup.find("#previewMsg").text("Captured will be submitted in "+T+" seconds");if(T==0){Q=true;_this.resetPreviewtimer()}}Promise.all([W((_this.mobileBrowser.camProp.PREVIEWTIME+1)*1000).then(function(){if(_this.isCropEnabled()){_this.bindCrop()}}),]).then(function(){if(Q){_this.popup.find("[id='done']").click();_this.resetPreviewtimer()}})}if(_this.isCropEnabled()){_this.bindCrop()}_this.changeIcon("done",false);_this.bindCameraEvent(true,E);_this.stopStream()}if(isMobileBrowser()&&_this.mobileBrowser.camProp.CAMTIMER){var K=1;var J=_this.popup.find(".popupHeader span").text();_this.popup.find("#cameraTimerDiv").text(K);function P(Q){return new Promise(function(R){setTimeout(R,Q)})}var I=setInterval(M,1000);function M(){K=K+1;if(K==4){_this.popup.find("#cameraTimerDiv").text("");clearInterval(I)}else{_this.popup.find("#cameraTimerDiv").text(K)}}Promise.all([P(3000).then(function(){N()}),])}else{N()}})}},setImgCanvas:function(){if(_this.video!=null){_this._imageField._canvas=_this.popup.find("#cameraTabContent canvas")[0];canvas=_this._imageField._canvas;_this.video.style.display="none";canvas.style.display="block";canvas.width=_this._imageField._imageWidth;canvas.height=_this._imageField._imageHeight;cxt=canvas.getContext("2d");if(_this._imageField.isInBuildCamera){cxt.translate(canvas.width,0);cxt.scale(-1,1)}cxt.drawImage(_this.video,0,0,canvas.width,canvas.height);var A=canvas.toDataURL("image/png");_this._image=A}},bindVideoEvent:function(A){_this.popup.find("[id='round']").on("click",function(){if(isMobileBrowser){_this.footerEle.find("#swap").addClass("zc-no-click");_this.popup.find(".clock").show()}_this.popup.find(".clock").addClass("active");_this.startRecording()});_this.footerEle.find("#swap").off("click").on("click",function(){var B=_this.mobileBrowser.camProp;if(isMobileBrowser()){_this.swapCamera()}})},footerdiv:function(C,B){var A="";var E='<div class="clock" >00:00</div>';switch(C){case"camera":_this.footerEle.html("");A="";var D=_this.mobileBrowser.camProp;if(isMobileBrowser()&&D.ALLOWSWITCHCAMERA){A=_this.mobileBrowser.swapIcon}A=A+'<div id="round" class="zc-action-icon"><i class="fa fa-camera fa-2x" aria-hidden="true"></i></div>';_this.footerEle.append(A);_this.bindCameraEvent(false,B);_this.setSelectedType(2);break;case"audio":A='<div id="round" class="zc-action-icon"><i class="fa fa-microphone fa-2x" aria-hidden="true"></i></div>';_this.checkRemoveDiv(_this.footerEle.find("#round"));_this.footerEle.append(A);_this.footerEle.find("#round").append(E);_this.footerEle.find("#Okay").hide();_this.bindAudioEvent(false,B);_this.setSelectedType(2);break;case"video":_this.checkRemoveDiv(_this.footerEle.find("#recordStop"));if(isMobileBrowser()){A=_this.mobileBrowser.swapIcon}A=A+'<div id="round" class="zc-action-icon zc-video-icon"><i  class="fa fa-video-camera fa-2x" aria-hidden="true"></i></div>';_this.checkRemoveDiv(_this.footerEle.find("#round"));_this.footerEle.append(A);if(!isMobileBrowser()){_this.footerEle.find("#round").append(E)}_this.footerEle.find("#Okay").hide();_this.setSelectedType(2);break;case"link":_this.footerEle.html("");A='<a id="round" class="zc-live-primary-btn" style="display: inline-block;">Done</a>';_this.footerEle.append(A);_this.footerEle.find("a").show();_this.footerEle.find("#round").on("click",function(){_this.closePopup()});_this.setSelectedType(1);break;case"local":_this.footerEle.html("");A='<a id="Okay" class="zc-live-primary-btn" style="display: inline-block;">Done</a>';_this.footerEle.append(A);_this.footerEle.find("a").show();_this.footerEle.find("#Okay").on("click",function(){if(_this.error){_this.$el.parent().siblings("ul").find("i").trigger("click")}_this.closePopup()});_this.setSelectedType(2);break}},isCropEnabled:function(){if(_this.$el!=null){return(_this.$el.attr("dimension")>1?true:false)}},getAspectRatio:function(){var A=0;if(isMobileBrowser()){_this.setOrientation()}else{_this.mobileBrowser.mobileOrientation=Constants.LANDSCAPE}if(_this.isCropEnabled){var B=_this.$el.attr("dimension");switch(B){case"2":A=1/1;break;case"3":A=3/2;break;case"4":A=5/3;break;case"5":A=4/3;break;case"6":A=5/4;break;case"7":A=7/5;break;case"8":A=16/9;break;case"9":A=2/3;break;case"10":A=3/5;break;case"11":A=3/4;break;case"12":A=4/5;break;case"13":A=5/7;break;case"14":A=9/16;break}}return A},getSelectedType:function(){_this=this;return _this.selectedType},setSelectedType:function(A){_this.selectedType=A},toggleElement:function(A,B){if(MediaPopup.eleType=="Image"){if(B){_this.imageLocalNewpopup(A)}else{_this.imageNewpopup(A)}}else{if(MediaPopup.eleType=="Audio"){_this.audioNewpopup(_this.popup.find("#audioTab li"))}else{_this.videoNewpopup(_this.popup.find("#videoCameraTab li"))}}},audioNewpopup:function(A){if(_this._localStream==null||_this._localStream==undefined){_this.popup.find("#audioTabContent").show();_this._audio._canvas=_this.popup.find("#audioTabContent canvas")[0];if(_this._audio._canvas!=null){canvas=_this._audio._canvas;canvasContext=canvas.getContext("2d");canvasContext.clearRect(0,0,canvas.width,canvas.height);$(audio).hide()}if(_this.popup.find("#Retake").css("display")=="block"){_this.popup.find("#Retake").click()}else{_this.footerdiv("audio",A)}if(_this.popup.find("#Retake")==undefined){_this.footerdiv("audio",A)}}},videoNewpopup:function(B){_this.popup.find("#videoTabContent").show();_this.popup.find("video").show();if(!isMobileBrowser()){_this.popup.find("#videoTabContent video").css("width","585px");_this.popup.find(".clock").show()}if(isMobileBrowser()){navigator.getMedia=(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);if(navigator.getMedia==undefined||navigator.mediaDevices==undefined){var A=_this.popup.parents(".zcpopup");A.addClass("zc-mobile-media-popup");if(!_this.popup.hasClass("zc-mediaPermission-popup")){_this.popup.addClass("zc-mediaPermission-popup")}_this.popup.find("#videoTimerDiv").hide();_this.popup.siblings().show();_this.popup.prepend(_this.popup.siblings());_this.permissionTextChange(false,false,false);return }}_this.cssMediaPopupChanges("592px","585px");clearTimeout(_this._clock);_this.stopStream();if(isMobileBrowser()){navigator.mediaDevices.enumerateDevices().then(_this.gotDevices)}_this.setStream(true);_this.footerdiv("video",B);_this.bindVideoEvent(_this.$el)},imageNewpopup:function(A){if(!isMobileBrowser()){_this.cssMediaPopupChanges("642px","622px")}_this.$el=_this.image_fieldDOM.getFileInputEl();_this.popup.find("#cameraTabContent").show();_this.popup.find("#cameraTabContent").find("video").show();if(_this.popup.find("#cameraTabContent").find("canvas").length==0){_this.clearPreviousImage();_this.checkRemoveDiv(_this.popup.find("#cameraTabContent").find("video"));_this.popup.find("#cameraTabContent").append(_this._imageField._videoField);_this.popup.find("#cameraTabContent").find("video").show();_this.checkRemoveDiv(_this.popup.find("#cameraTabContent").find("canvas"));_this.popup.find("#cameraTabContent").append(_this._imageField._canvas)}_this.footerdiv("camera",A);_this.setStream(true);$(A).find(".zc-link-switch .fa-upload").parent("a").trigger("click")},imageLocalNewpopup:function(A){_this.cssMediaPopupChanges("602px","595px");_this.popup.find("#cameraTabContent").show();_this.popup.find("#cameraTabContent").find("video").show();if(_this.popup.find("#cameraTabContent").find("canvas").length==0){_this.clearPreviousImage();_this.checkRemoveDiv(_this.popup.find("#cameraTabContent").find("video"));_this.popup.find("#cameraTabContent").append(_this._imageField._videoField);_this.popup.find("#cameraTabContent").find("video").show();_this.checkRemoveDiv(_this.popup.find("#cameraTabContent").find("canvas"));_this.popup.find("#cameraTabContent").append(_this._imageField._canvas)}_this.footerdiv("local",A);_this.setStream(true);$(A).find(".zc-link-switch .fa-upload").parent("a").trigger("click")},clearPreviousImage:function(){_this.checkRemoveDiv(_this.popup.find(".cropper-container.cropper-bg"));_this.checkRemoveDiv(_this.popup.find("#imageFile"));if(_this.popup.find("#localTabContent").length!=0){if((_this.popup.find("#localTabContent").css("display")!="none")){_this.popup.find("#localTabContent .zc-import-image").show()}}},clearPreviousFile:function(){_this.checkRemoveDiv(_this.popup.find("#localTabContent").find("#dummyFile"));_this.popup.find("#localTabContent").append(_this._audio._dummyField);_this.checkRemoveDiv(_this.popup.find("#localTabContent").find("#dragtext"));_this.popup.find("#localTabContent #dragdrop").append(_this._audio._dragText)},toggleOptions:function(A,B){$(A).on("click",function(){$(this).addClass("active");$(this).siblings().removeClass("active");if(MediaPopup.eleType=="Audio"){if($(this).find("i").hasClass("fa-microphone")){if(_this._localStream==null||_this._localStream==undefined){_this.popup.find("#audioTabContent").show();_this._audio._canvas=_this.popup.find("#audioTabContent canvas")[0];if(_this._audio._canvas!=null){canvas=_this._audio._canvas;canvasContext=canvas.getContext("2d");canvasContext.clearRect(0,0,canvas.width,canvas.height);$(audio).hide()}if(_this.popup.find("#Retake").css("display")=="block"){_this.popup.find("#Retake").click()}else{_this.footerdiv("audio",B)}if(_this.popup.find("#Retake")==undefined){_this.footerdiv("audio",B)}_this.popup.find("#localTabContent").hide()}}else{if($(this).find("i").hasClass("fa-upload")){_this.clearError();if(_this.mediaRecorder.state=="recording"){_this.mediaRecorder.stop()}if(_this._audio._audioContext!=undefined&&(_this._audio._audioContext.state=="suspended"||_this._audio._audioContext.state=="running")){_this._audio._audioContext.close();clearTimeout(_this._clock);if(_this._audio._canvas!=null){canvas=_this._audio._canvas;canvasContext=canvas.getContext("2d");canvasContext.clearRect(0,0,canvas.width,canvas.height);$(audio).hide()}_this.popup.find("#audioTabContent canvas").addClass("zc-sound-waves-bg");_this._isRecording=true;_this._isPlayback=false;_this._audio._bar=[];_this._audio._playBars=[];_this._localStream=null}if(_this.popup.find("#dummyFile")[0].files.length!=0){_this.clearPreviousFile()}_this.footerdiv("local",B);_this.popup.find("#audioTabContent").hide();_this.popup.find("#localTabContent").show();_this.stopStream();if(_this.popup.find("#Retake")!=undefined){_this.popup.find("#Retake").click()}_this.popup.find("#dummyFile").on("dragover",function(){_this.popup.find("#localTabContent").css("background","#eccfb3");_this.popup.find("#dragdrop").hide()});_this.popup.find("#dummyFile").on("dragleave",function(){_this.popup.find("#localTabContent").css("background","#ffffff");_this.popup.find("#dragdrop").show()});_this.popup.find("#dummyFile").on("drop",function(C){_this.popup.find(".fa-arrows").hide();_this.popup.find("#dragdrop").show();_this.popup.find("#localTabContent").css("background","#ffffff")});_this.popup.find("#dummyFile").on("change",function(C){C.dataTransfer=C.originalEvent.dataTransfer;_this.checkDuration(C)});_this.footerEle.find("div").hide()}}}else{if(MediaPopup.eleType=="Image"){_this.$el=_this.image_fieldDOM.getFileInputEl();_this.popup.find("#cameraTabContent").show();_this.popup.find("#cameraTabContent").find("video").show();if(_this.popup.find("#cameraTabContent").find("canvas").length==0){_this.clearPreviousImage();_this.checkRemoveDiv(_this.popup.find("#cameraTabContent").find("video"));_this.popup.find("#cameraTabContent").append(_this._imageField._videoField);_this.popup.find("#cameraTabContent").find("video").show();_this.checkRemoveDiv(_this.popup.find("#cameraTabContent").find("canvas"));_this.popup.find("#cameraTabContent").append(_this._imageField._canvas)}_this.footerdiv("camera",B);_this.setStream(true);$(B).find(".zc-link-switch .fa-upload").parent("a").trigger("click")}else{_this.popup.find("#videoTabContent").show();_this.popup.find("video").show();if(!isMobileBrowser()){_this.popup.find("#videoTabContent video").css("width","585px")}_this.popup.find(".clock").show();_this.cssMediaPopupChanges("713px","595px");_this.popup.find("#localTabContent").hide();clearTimeout(_this._clock);_this.stopStream();_this.setStream(true);_this.footerdiv("video",B);_this.bindVideoEvent(_this.$el)}}})},checkDuration:function(D){var B=_this.popup.find("#dragtext");var A;var C=_this.$el.attr("duration");file=document.createElement("INPUT");file.setAttribute("type","file");$(file).prop("files",D.target.files);A=new FileReader();A.readAsDataURL(file.files[0]);A.onload=function(){var E,F;if(MediaPopup.eleType=="Video"){E=document.createElement("video")}else{if(MediaPopup.eleType=="Audio"){E=document.createElement("audio")}}E.src=URL.createObjectURL(file.files[0]);E.addEventListener("loadedmetadata",function(){var G=E.duration;if(MediaPopup.eleType=="Audio"&&file.files[0].type.split("/")[0]!="audio"){I="<br><p>"+file.files[0].name+" "+Constants.NOSUPPORTAUDIO+"</p>";_this.showError(I)}else{if(MediaPopup.eleType=="Video"&&file.files[0].type.split("/")[0]!="video"){I="<br><p>"+file.files[0].name+" "+Constants.NOSUPPORTAUDIO+"</p>";_this.showError(I)}else{if(((D.target.files[0].size/1024)/1024).toFixed()>=50){I="<br><p> Your file size exceeds 50MB</p>";_this.showError(I)}else{if(G>C){var J=~~(C/60)==0?"00":(C/60);var H=(C%60)==0?"00":(C%60);var K="";if(J=="00"){K=H+" secs"}else{if(H=="00"){K=(J=="1")?J+" min":J+" mins"}else{K=J+":"+H}}var I="";if(MediaPopup.eleType=="Audio"){I="<br><p>"+Constants.UPLOADAUDIO+" "+K+" "+Constants.SHORTERAUDIO+"</p>"}else{if(MediaPopup.eleType=="Video"){I="<br><p>"+Constants.UPLOADVIDEO+" "+K+" "+Constants.SHORTERVIDEO+"</p>"}}_this.showError(I)}else{_this.clearError();B.text("Added File: "+D.target.files[0].name);_this.footerEle.find("#Okay").show();_this.footerEle.find("#Okay").removeClass("zc-live-secondary-btn");_this.footerEle.find("#Okay").addClass("zc-live-primary-btn");_this.footerEle.find("#Okay").on("click",function(M){if(_this.error){_this.$el.parent().siblings("ul").find("i").trigger("click")}if(!_this.error){D.dataTransfer=D.originalEvent.dataTransfer;files=D.target.files;$(_this.$el).prop("files",files);$(_this.$el).change()}_this.closePopup()})}}}}})}},showError:function(B){if(typeof _this!="undefined"){_this.setError();_this.popup.find("#errorMsgComp").show();var A="<span>"+B+"</span>";_this.popup.find("#errorMsg").html(A);_this.popup.find("#errorMsg").css("color","#db4c4a");if($(_this.$el).parent().siblings()!=undefined){$(_this.$el).parent().siblings().remove("li")}}},clearError:function(){if(typeof _this!="undefined"){_this.popup.find("#errorMsgComp").hide();_this.error=false}},setError:function(){if(typeof _this!="undefined"){_this.error=true}},showAddedFile:function(){if(typeof _this!="undefined"){var B=$(_this.$el).val().replace(/C:\\fakepath\\/i,"");var A=_this.popup.find("#dragtext");A.siblings("i").removeClass("fa fa-exclamation-triangle");if(!A.siblings("i").hasClass("fa fa-cloud-upload")){A.siblings("i").addClass("fa fa-cloud-upload")}_this.popup.find("#dragtext").text("Added File : "+B);_this.popup.find("#dragtext").removeAttr("style")}},bindAudioEvent:function(B,C){_this.footerEle.find("#round").on("click",function(){_this._isRecording=true;_this._isPlayback=false;_this.setAudioStream();_this.popup.find("#audioTabContent canvas").removeClass("zc-sound-waves-bg");var D=document.getElementById("popupAudioEle");_this.changeIcon("stop",false);_this.popup.find("#recordStop").on("click",function(){var O=document.getElementById("popupAudioEle");$(O).css("display","block");_this._isRecording=false;clearTimeout(_this._clock);if(_this.mediaRecorder.state!="inactive"){_this.mediaRecorder.stop()}var F=new Blob(_this.chunks,{type:"audio/webm"});var M=window.URL.createObjectURL(F);O.src=M;_this._audio._audioContext.suspend();_this.adjustTimer(duration);var T=[];var S=[];var R=false;_this._audio._canvas=_this.popup.find("#audioTabContent canvas")[0];var H=_this._audio._canvas;var P=H.getContext("2d");var G=H.offsetWidth;var U=H.offsetHeight;var Q=U/2;var V=0.3;var K=0.1;var I="";var N=function N(Y){var X=Y.length;var W=0;for(i=0;i<X;i++){W+=Y[i]}return W/X};var J=function J(X,W){W=_this.popup.find("#round").css("background-color");if(!R){R=true;animation=window.requestAnimationFrame(function(){P.clearRect(0,0,G,U);X.forEach(function(Z,Y){P.fillStyle=W;P.fillRect(Y*(V+K),Q,V,Q*(Z/100));P.fillRect(Y*(V+K),Q-Q*(Z/100),V,Q*(Z/100))});R=false})}};if(_this.chunks){if(_this._audio._bar.length<=Math.floor(G/(V+K))){J(_this._audio._bar,"#060606")}else{J(_this._audio._bar.slice(_this._audio._bar.length-Math.floor(G/(V+K))),"#060606")}}$(O).on("play",function(){_this._isPlayback=true;if(_this._audio._audioContext.state=="suspended"){_this._audio._audioContext.resume()}_this._audio._isPaused=false;_this.audioVisual(O,"#47a8e4")});$(O).on("pause",function(){_this._isPlayback=false;_this._audio._isPaused=true;_this._audio._audioContext.suspend()});O.controls=true;_this._localStream.getTracks()[0].stop();_this.changeIcon("done",false);_this.footerEle.find("#Retake").show();var E=function(){_this._isPlayback=false;_this._isRecording=false;_this._audio._audioContext.suspend();_this._audio._playBars=[]};O.addEventListener("ended",E);_this.popup.find("#round").on("click",function(){H=_this._audio._canvas;P=H.getContext("2d");var W=new Blob(_this.chunks);_this._recorder&&_this._recorder.exportWAV(A,("audio/mp3"))});_this.popup.find("#Retake").on("click",function(){_this.audioRetake(C)})})});function A(D){_this._mp3File=D;_this.uploadFile();_this.closePopup();_this._localStream=null;_this._recorder.clear()}},audioRetake:function(B){_this.popup.find("#audioTabContent canvas").addClass("zc-sound-waves-bg");_this._isRecording=true;_this._isPlayback=false;_this._audio._bar=[];canvas=_this._audio._canvas;canvasContext=canvas.getContext("2d");canvasContext.clearRect(0,0,canvas.width,canvas.height);_this._audio._isPaused=false;_this.changeIcon("record",true);_this.popup.find("#audioTabContent audio").remove();var A=document.createElement("AUDIO");A.setAttribute("id","popupAudioEle");A.setAttribute("controls","controls");A.style.width="100%";$(A).insertAfter(_this.popup.find("#audioTabContent canvas"));A.controls=false;_this.bindAudioEvent(false,B);clearTimeout(_this._clock);if(_this._audio._audioContext.state!="closed"){_this._audio._audioContext.close()}_this._audio._audioContext={};_this._audio=Object.create(_this._audio)},cameraPopupcontent:function(C){var D=parseInt(_this.$el.attr("imageType"));var A='<li><i class="fa fa-camera" aria-hidden="true"></i><span>Take Photo</span></li>';var B='<div id="previewMsg" class="hide zc-image-preview-message"></div><div id="cameraTab" class="zc-dem-clearfix zc-live-image-popup-left-list"> ';if(C){B='<div id="cameraTab" class= "zc-dem-clearfix zc-live-localimage-popup"> '+_this.cameraLocalTabContent}else{B=B+_this.cameraTabContent}return B},stopStream:function(B){function A(D){for(var C in D){if(D.hasOwnProperty(C)){return false}}return true}if(B==undefined){if(_this._localStream!=undefined&&_this._localStream.getTracks().length>0){for(i=0;i<_this._localStream.getTracks().length;i++){if(_this._localStream.getTracks()[i].readyState=="live"){if(_this._localStream.getTracks()[i].kind=="video"){_this.video.pause();_this.video.src="";_this.video.srcObject=null}_this._localStream.getTracks()[i].stop()}}}}else{if(!A(B)){if(B.getTracks().length>0){for(i=0;i<B.getTracks().length;i++){if(B.getTracks()[i].readyState=="live"){B.getTracks()[i].stop()}}}}}},cropImage:function(E,D,A,C){_this=D;_this._opts=A;$ele=$($(C).find("input")[1]);_this.$el=$ele;liveEle=this;MediaPopup.eleType="Image";fieldName=A.name;var B=_this.cameraPopupcontent(true);$.zcmodal({type:ZCModalConstants.JIT_MODAL,closeOnAnyClick:false,bodyClass:"image-popup media-popup",title:fieldName,buildDOM:function(){return B},beforeShow:function(H){_this.popup=$(H).parent(".media-popup");var N=_this.popup.parent(".popupbox");N.addClass("zc-live-media-popup");var J=_this.popup.parents(".zcpopup");J.addClass("zc-mobile-media-popup");_this.footerEle=$(H).siblings(".popupFooter");_this.popup.find(".popupHeader").append(_this.popup.siblings());$(liveEle).parent().addClass("zc-focus");_this.popup.find("#localTabContent").find("input").attr("accept","image/*");if(isMobileBrowser()){_this.popup.find("#cameraTab").find("#cropperDiv").css("margin","")}_this.video=_this.popup.find("video")[0];_this.setImgCanvas();var M={};var I="";if(!isMobileBrowser()){I='<img id="imageFile" src ="" width="585px !important" heigth = "430px !important"/>'}else{var G=window.innerHeight;var K=window.innerWidth;I='<img id="imageFile" src ="" width="'+K+'" heigth = "'+G+'" />'}$(I).insertBefore(_this.video);$(_this.video).remove();_this._imageField._canvas.getContext("2d").clearRect(0,0,_this.width,_this.height);_this.popup.find("canvas").remove();_this.changeIcon("done",false);if(_this.$el[0].files&&_this.$el[0].files[0]){var F=new FileReader();F.onload=function(O){_this.popup=$(H).parent(".media-popup");_this.popup.find("#imageFile").attr("src",O.target.result);_this._image=O.target.result;_this.bindLocalCrop(E,_this)};F.readAsDataURL(E.target.files[0])}_this.bindCameraEvent(true,liveEle);_this.footerEle.find("div").hide();_this.stopStream()},afterClose:function(){_this.stopStream();if(_this.popup.find("#linkUrl").val()!=""){$(liveEle).find(".zc-link-switch .fa-link").parent("a").trigger("click")}},buttons:[{id:"round",name:"Done",type:"Button",action:function(){}}]})},setMobileImgCanvas:function(){var A=document.getElementsByTagName("canvas");$("#mobileCrop").append(_this._imageField._canvas);_this._imageField._canvas=A[0];A=_this._imageField._canvas;A.style.display="block";A.width=$("#mobileCrop").width();A.height=$("#mobileCrop").height()},mobileCropImage:function(G,F,C,E){_this=F;_this._opts=C;$ele=$($(E).find("input")[1]);_this.$el=$ele;liveEle=this;MediaPopup.eleType="Image";fieldName=C.name;var B=ifreeze({container:"body",addDivClass:"zc-video-popup-freezer"});$(document.body).append(_this.mobileCropContent);_this.setMobileImgCanvas();var D={};_this._imageField._canvas.getContext("2d").clearRect(0,0,_this.width,_this.height);if(_this.$el[0].files&&_this.$el[0].files[0]){var A=new FileReader();A.onload=function(H){$("#mobileCrop").find("#imageFile").attr("src",H.target.result);_this._image=H.target.result;_this.bindLocalCrop(G,_this)};A.readAsDataURL(G.target.files[0])}},openCamera:function(D,C){function B(){}function F(G){return new Promise(function(H){setTimeout(H,G)})}if(isMobileBrowser()){$(window).on("resize",function(){Promise.all([F(200).then(_this.setOrientation()),]).then(B())});$(window).off("orientationchange");$(window).on("orientationchange",function(G){$(window).on("resize",function(){Promise.all([F(200).then(_this.setOrientation()),]).then(B())})})}_this=this;_this.image_fieldDOM=D;_this.mobileBrowser.camProp=_this.image_fieldDOM.getModel().getCameraProperties();if(C=="source"){$ele=$(D.getSourceComp())}else{$ele=$(D.getFileInputEl())}liveEle=$(D.getField());_this=this;_this.$el=$ele;MediaPopup.eleType="Image";var A=_this.cameraPopupcontent();var E=D.getModel().getDisplayName();$.zcmodal({type:ZCModalConstants.JIT_MODAL,closeOnAnyClick:false,bodyClass:"image-popup media-popup",title:E,buildDOM:function(){return A},beforeShow:function(G){_this.popup=$(G).parent(".media-popup");var I=_this.popup.parent(".popupbox");I.addClass("zc-live-media-popup");_this.footerEle=$(G).siblings(".popupFooter");_this.popup.siblings().hide();$(liveEle).parent().addClass("zc-focus");if(isMobileBrowser()){navigator.getMedia=(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);if(navigator.getMedia==undefined||navigator.mediaDevices==undefined){var H=_this.popup.parents(".zcpopup");H.addClass("zc-mobile-media-popup");if(!I.hasClass("zc-mediaPermission-popup")){I.addClass("zc-mediaPermission-popup")}_this.popup.siblings().show();_this.popup.prepend(_this.popup.siblings());_this.permissionTextChange(false,false,false);return }navigator.mediaDevices.enumerateDevices().then(_this.gotDevices)}_this.toggleElement(liveEle,false);_this.bindCameraEvent(false,liveEle,C);_this.popup.find("#localTabContent").find("input").attr("accept","image/*");_this.footerdiv("upload",liveEle);if(C=="source"){_this.popup.find("#cameraTab .fa-link").parent("li").click()}else{_this.popup.find("#cameraTab").find("li").first().click()}},afterClose:function(){if(isMobileBrowser()){if(_this.formController.triggerImagePopup!=undefined){if(!_this.popupCaptured){_this.formController.triggerImagePopup()}}else{if(_this.formController.getSubFormImgController().length>0){if(!_this.popupCaptured){_this.formController.triggerSubformImagePopup(_this.formController.getSubFormImgController()[0])}}}}_this.stopStream();if(_this.popup.find("#linkUrl").val()!=""){$(liveEle).find(".zc-link-switch .fa-link").parent("a").trigger("click")}},buttons:[{id:"round",name:"Done",type:"Button",action:function(){}}]})},getTime:function(D){var E="",C=0,F=0,B="",A="";F=Math.round(D/1000);if(F>=60){C=Math.round(F/60);F%=60}B=(F<10)?"0"+F:F+"";A=(C<10)?"0"+C:C+"";return A+":"+B},adjustTimer:function(E){_this.popup.find(".clock").addClass("active");var D=1000,B=0,C=new Date().getTime();function A(){var K=B*D,I=new Date().getTime()-C;B++;var N=I-K;var P=_this.getTime(I).split(":");var F=P[1];var O=P[0];var G=O+":"+F;_this.popup.find(".clock").html(G);var H=_this.getTime(E*1000).split(":");var M=parseInt(H[1]);var J=H[0];if(J==O&&M==F){_this.popup.find("#recordStop").trigger("click")}_this._clock=setTimeout(function(){A()},D-N)}_this._clock=setTimeout(function(){A()},D)},startRecording:function(){_this=this;var A={audioBitsPerSecond:128000,videoBitsPerSecond:2500000,mimeType:"video/webm;codecs=vp8,opus"};duration=_this.$el.attr("duration");_this.adjustTimer(duration);_this.mediaRecorder=new MediaRecorder(_this._localStream,A);_this.chunks=[];_this.mediaRecorder.ondataavailable=function(B){if(B.data&&B.data.size>0){_this.chunks.push(B.data)}};_this.mediaRecorder.start(100);_this.changeIcon("stop",false);_this.popup.find("#videoTabContent").remove("video");_this.popup.find("[id='recordStop']").on("click",function(){_this.stopVideoRecording()})},stopVideoRecording:function(){_this=this;_this.footerEle.find("#swap").remove();clearTimeout(_this._clock);_this.video=$("<video />",{controls:true});_this.popup.find("#videoTabContent").find("video").remove();_this.video.appendTo(_this.popup.find("#videoTabContent")).hide().fadeIn(500);if(!isMobileBrowser()){_this.popup.find("#videoTabContent").find("video").css("width","590px")}video=_this.popup.find("#videoTabContent").find("video")[0];$(_this.video).attr("controls","controls");$(_this.video).attr("controlslist","nodownload");$(_this.video).attr("disablepictureinpicture","true");_this.popup.find("a[id='Stop']").off("click");_this.mediaRecorder.stop();setTimeout(function(){var A=new Blob(_this.chunks,{type:"video/webm"});video.setAttribute("preload","auto");video.setAttribute("src",URL.createObjectURL(A));video.load()},100);for(i=0;i<_this._localStream.getTracks().length;i++){_this._localStream.getTracks()[i].stop()}_this.changeIcon("done",false);if(isMobileBrowser()){_this.popup.find("#videoTimerDiv").hide();_this.popup.find("#videoTimerDiv").text("00:00");_this.popup.find("span[id='backIcon']").click(function(){_this.setStream(true);_this.popup.find(".clock").removeClass("active");_this.video.removeAttribute("controls");_this.popup.find("#videoTimerDiv").show();_this.changeIcon("record",true);$(this).hide()})}else{_this.popup.find("div[id='Retake']").click(function(){_this.setStream(true);_this.popup.find(".clock").removeClass("active");_this.video.removeAttribute("controls");_this.changeIcon("record",true)})}_this.popup.find("[id='round']").off("click");_this.popup.find("[id='round']").on("click",function(){_this.uploadVideoRec()})},uploadVideoRec:function(){_this=this;if(_this._localStream!=undefined){_this._localStream.getVideoTracks()[0].stop()}_this.uploadFile();_this.closePopup()},cssCameraChanges:function(){_this.popup.find("video").css("width","590px");if(isMobileBrowser()){_this.popup.find("#videoTabContent video").css("width","585px")}_this.footerEle.find("#Retake").css({"margin-top":"10px","margin-left":"500px",position:"absolute",color:"#3590e1","border-color":"#3590e1"})},cssMediaPopupChanges:function(B,A){var C={};if(_this.popup.parent(".popupbox.zc-live-media-popup")!=undefined){C=_this.popup.parent(".popupbox.zc-live-media-popup")}else{C=_this.popup.parent(".popupbox")}C.css("width","");C.css("height","");C.css("width",B+"px");C.css("height",A+"px");if(isMobileBrowser()){C.css("overflow","hidden")}},cssImageChanges:function(A){if(A){_this.cssMediaPopupChanges("713px","595px")}_this.footerEle.find("#Retake").css({"margin-top":"10px","margin-left":"500px",position:"absolute"})},cssAudioChanges:function(){_this.cssMediaPopupChanges("620px","420px");_this.getAudioIcons();_this.footerEle.find("#Retake").css("border-color","#3590e1");_this.footerEle.find("#Retake").css("position","absolute");_this.footerEle.find("#Retake").css("margin-left","320px")},getAudioIcons:function(){roundDiv='<div id="round" class="zc-action-icon" style="" ></div>';roundRecordDiv='<div id="roundRecord" style="margin-left: 210px;float: left;color: #f3f3f3;border-radius: 50%;width: 50px;height: 50px;background: #fb2b4e;" ></div>';timerDiv='<div class="clock" >00:00</div>';recordStopDiv='<div id="recordStop" class="zc-record-stop" ></div>';recordIcon='<i id="startrec" class="fa fa-microphone fa-2x" aria-hidden="true"></i>';stopIcon='<i id="stoprec" class="fa fa-stop fa-2x" aria-hidden="true"></i>';doneIcon='<i id="donerec" class="fa fa-check fa-2x zc-donerec" aria-hidden="true"></i>';playIcon='<i id="playRecord" class="fa fa-play fa-2x" style="margin-top: 12px;" aria-hidden="true"></i>';pauseIcon='<i id="pauseRecord" class="fa fa-pause fa-2x" style="margin-top: 12px;" aria-hidden="true"></i>';retakeDiv='<div id="Retake" class="zc-live-secondary-btn zc-retake">'+i18n.retake+"</div>"},getCameraIcons:function(){roundDiv='<div id="round" class="zc-action-icon" ></div>';recordStopDiv='<div id="recordStop" class="zc-record-stop zc-video-stop-icon" ></div>';timerDiv='<div class="clock">00:00</div>';recordIcon='<i id="startrec" class="fa fa-video-camera fa-2x" aria-hidden="true"></i>';cameraIcon='<i id="startcap" class="fa fa-camera fa-2x" aria-hidden="true"></i>';stopIcon='<i id="stoprec" class="fa fa-stop fa-2x" aria-hidden="true"></i>';doneIcon='<i id="donerec" class="fa fa-check fa-2x zc-donerec"  aria-hidden="true"></i>';retakeDiv='<div id="Retake" class="zc-live-secondary-btn zc-retake">'+i18n.retake+"</div>"},closePopup:function(){if(_this.error){$.when(_this.popup.parent().fadeOut("slow")).done(function(){$(this).find(".popupClose").trigger("click")});_this.$el.parent().siblings("ul").find("i").trigger("click")}else{_this.popup.find(".popupClose").trigger("click")}},checkRemoveDiv:function(A){if(A.length>=1){A.remove()}},addOrRemoveClass:function(A,C,B){if(A=="add"){if(!B.hasClass(C)){B.addClass(C)}}else{if(A=="remove"){if(B.hasClass(C)){B.removeClass(C)}}}},permissionTextChange:function(G,C,B){var M=MediaPopup.eleType,J="",E="",N=_this.popup.find("#firstMsg"),H=_this.popup.find("#lastMsg"),A=_this.popup.find("#permission"),F=_this.popup.find(".permissionMsgDiv"),I=_this.popup.find(".popupFooter"),D=_this.popup.find(".popupHeader");if(G&&B){if(C){J=Constants.BLOCKPERMISSIONLINE1;E=Constants.BLOCKPERMISSIONLINE2;if(M=="Image"){J=Constants.IMGBLOCKPERMISSIONLINE1}N.html(J);H.html(E);A.attr("class","");D.hide();I.hide();F.show();_this.popup.find("video").css("display","none")}else{var K;M=MediaPopup.eleType;E=Constants.PERMISSIONLINE2;if(browser.chrome){K="zc-media-"+M+"permission-chrome"}else{if(browser.mozilla){K="zc-media-"+M+"permission-firefox"}}if(M=="Image"){J=Constants.IMAGEPERMISSIONLINE1;E=Constants.IMAGEPERMISSIONLINE2;_this.popup.find("video").css("display","none")}else{if(M=="Video"){J=Constants.VIDEOPERMISSIONLINE1}else{J=Constants.AUDIOPERMISSIONLINE1}}N.html(J);H.html(E);D.hide();I.hide();F.show();A.addClass(K)}}else{if(!G&&B){D.show();I.show();A.attr("class","");F.css("display","none");_this.popup.find("video").css("display","inline")}else{if(!isMobileBrowser()){_this.popup.find(".zc-permissionMsg").css("top","55%")}_this.cssMediaPopupChanges("620px","420px");J=Constants.BROWSERSUPPORTLINE1;E=Constants.BROWSERSUPPORTLINE2;N.html(J);H.html(E);A.attr("class","");D.hide();I.hide();F.show();_this.popup.find(".zc-mediaPermission-popup video").css("display","none")}}},closestInteger:function(B,A){return Math.round(B-(B%A))},calcDimension:function(D,A,C){var E=0;var B=0;if(C==Constants.PORTRAIT){E=(3/4)*A;B=D/(3/4)}else{E=(4/3)*A;B=D/(4/3)}if(E>D){return D+":"+B}else{return E+":"+A}},getBuildInDevices:function(A){navigator.mediaDevices.enumerateDevices().then(function(B){B.forEach(function(C){if(C.deviceId==A&&(C.label.indexOf("Built-in")!=-1||C.label==undefined)){_this._imageField.isInBuildCamera=true;$(_this.video).addClass("zc-mirror-image")}})})},gotDevices:function(C){var A=0;for(var B=0;B!=C.length;++B){var D=C[B];if(D.kind=="videoinput"){_this.mobileBrowser.cameraList[A]=D.deviceId;if(isMobileBrowser()){if((D.label.toLowerCase().indexOf("front")!=-1)){_this.mobileBrowser.frontCameraID=D.deviceId}if(MediaPopup.eleType==Constants.IMAGE_FIELD){if((_this.mobileBrowser.camProp.DEFAULTCAMERA==Constants.SECONDARYCAMERA)&&A==1){_this.mobileBrowser.currentCameraID=D.deviceId;if(D.label.toLowerCase().includes("back")){_this.backCam=Constants.SECONDARYCAMERA}}else{if((_this.mobileBrowser.camProp.DEFAULTCAMERA==Constants.PRIMARYCAMERA)&&A==0){_this.mobileBrowser.currentCameraID=D.deviceId;if(D.label.toLowerCase().includes("back")){_this.backCam=Constants.PRIMARYCAMERA}}else{_this.mobileBrowser.toggleToCameraID=D.deviceId}}}}A++}}if(MediaPopup.eleType==Constants.VIDEO_FIELD){if(_this.mobileBrowser.cameraList[0]!=undefined){_this.mobileBrowser.currentCameraID=_this.mobileBrowser.cameraList[0]}if(_this.mobileBrowser.cameraList[1]!=undefined){_this.mobileBrowser.toggleToCameraID=_this.mobileBrowser.cameraList[1]}}if(_this.mobileBrowser.frontCameraID==_this.mobileBrowser.currentCameraID){_this.addOrRemoveClass("add","zc-mirror-image",_this.popup.find("#cropperDiv video"))}else{_this.addOrRemoveClass("remove","zc-mirror-image",_this.popup.find("#cropperDiv video"))}},setOrientation:function(B){if(B==undefined){if((window.orientation==90)||(window.orientation==-90)){B=Constants.LANDSCAPE}else{B=Constants.PORTRAIT}}else{B=(B=="portrait"?Constants.PORTRAIT:Constants.LANDSCAPE)}var A=_this.calcDimension(window.innerWidth,(window.innerHeight-_this.popup.find(".popupHeader").innerHeight()),B);var C=A.split(":")[0];var D=A.split(":")[1];if(B!=Constants.PORTRAIT){_this.popup.find("#cropperDiv video").width(C);_this.popup.find("#cropperDiv video").height(D)}else{if(_this.popup.find("#cropperDiv video").length>0){_this.popup.find("#cropperDiv video")[0].style.width="";_this.popup.find("#cropperDiv video")[0].style.height=""}}},changeStream:function(){if(_this._localStream!=undefined&&_this._localStream.getTracks().length>0){for(i=0;i<_this._localStream.getTracks().length;i++){_this._localStream.getTracks()[i].stop()}}_this.setStream(true)},setStream:function(H){var C=!1,A=!0,I=800;if(isMobileBrowser()){var F=_this.popup.parents(".zcpopup");F.addClass("zc-mobile-media-popup")}_this.video=_this.popup.find("video")[0];_this.video.muted=true;var G=_this.popup.parent(".popupbox");G.addClass("zc-mediaPermission-popup");navigator.getMedia=(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);var B=navigator.userAgent.toLowerCase();if(B.indexOf("safari")!=-1){if(!(B.indexOf("chrome")>-1)){G.find("#videoTimerDiv").hide();_this.popup.siblings().show();_this.popup.prepend(_this.popup.siblings());_this.permissionTextChange(false,false,false);return }}var E={};if(MediaPopup.eleType==Constants.VIDEO_FIELD){if(isMobileBrowser()){E={audio:true,video:{deviceId:(_this.mobileBrowser.currentCameraID?_this.mobileBrowser.currentCameraID:undefined)}}}else{E={video:true,audio:true}}}else{if(MediaPopup.eleType==Constants.IMAGE_FIELD){if(isMobileBrowser()){E={audio:false,video:{deviceId:(_this.mobileBrowser.currentCameraID?_this.mobileBrowser.currentCameraID:undefined)}}}else{E={audio:false,video:true}}}}successCallback=function(N){var K=N.getTracks();for(var M=0;M<K.length;M++){_this.getBuildInDevices(K[M].getSettings().deviceId)}_this._localStream=N;if(MediaPopup.eleType=="Video"&&_this._localStream.getTracks().length==1){errorCallback();_this.stopStream();return }else{clearTimeout(C);_this.addOrRemoveClass("remove","zc-mediaPermission-popup",G);if(MediaPopup.eleType=="Video"){G.find("#videoTimerDiv").show()}_this.popup.siblings().show();_this.popup.prepend(_this.popup.siblings());_this.permissionTextChange(false,false,true)}_this.video.srcObject=_this._localStream;if(H){_this.video.onloadeddata=function(){_this.video.play()}}}.bind(_this);errorCallback=function(K){clearTimeout(C);_this.error=true;_this.popup.siblings().show();_this.popup.prepend(_this.popup.siblings());_this.permissionTextChange(true,true,true)}.bind(_this);var J=function(){var M=false;if(A===!0){var K=navigator.userAgent.toLowerCase();if(K.indexOf("safari")!=-1){if(!(K.indexOf("chrome")>-1)){M=true}}if(M){navigator.mediaDevices.getUserMedia(E).then(successCallback)}else{if(navigator.getMedia){navigator.getMedia(E,successCallback,errorCallback)}else{_this.error=true;_this.addOrRemoveClass("add","zc-mediaPermission-popup",G);_this.popup.find(".popupHeader").show();_this.popup.find(".popupFooter").show();_this.popup.find("#permission").attr("class","");_this.popup.find("#permissionMsg").css("display","none");_this.permissionTextChange(false,false,false)}}}}.bind(_this);var D=function(){_this.addOrRemoveClass("add","zc-mediaPermission-popup",G);_this.popup.siblings().show();_this.popup.prepend(_this.popup.siblings());_this.permissionTextChange(true,false,true)}.bind(_this);J();C=setTimeout(D,I)},changeIcon:function(B,A){if(MediaPopup.eleType=="Video"){_this.getCameraIcons();switch(B){case"record":if(A){_this.footerEle.find("#round").remove();_this.footerEle.find("#Retake").hide();_this.footerEle.find("#Okay").hide();if(isMobileBrowser()){if(isMobileBrowser()){roundDiv=_this.mobileBrowser.swapIcon+roundDiv}}_this.footerEle.append(roundDiv);_this.footerEle.find("#round").append(recordIcon);if(!isMobileBrowser()){_this.footerEle.find("#round").append(timerDiv)}_this.bindVideoEvent(_this.$el)}else{_this.footerEle.find("#Okay").hide();_this.footerEle.find("#Retake").remove();_this.bindVideoEvent(_this.$el)}break;case"stop":_this.checkRemoveDiv(_this.footerEle.find("#round"));_this.checkRemoveDiv(_this.footerEle.find("#recordStop"));_this.footerEle.find("#round").remove();_this.footerEle.append(recordStopDiv);_this.footerEle.find("#recordStop").append(stopIcon);if(!isMobileBrowser()){_this.footerEle.find("#recordStop").append(timerDiv)}_this.popup.find(".clock").addClass("active");break;case"done":_this.footerEle.find("#recordStop").remove();if(isMobileBrowser()){_this.checkRemoveDiv(_this.footerEle.find("#backIcon"));_this.footerEle.append(_this.mobileBrowser.backIcon)}else{_this.checkRemoveDiv(_this.footerEle.find("#Retake"));_this.footerEle.append(retakeDiv)}_this.checkRemoveDiv(_this.footerEle.find("#round"));if(isMobileBrowser()){_this.footerEle.append('<a id="round" class="zc-live-primary-btn" style="display: inline-block;"><i class="zc-li-outline ui-1-check"></i></a>')}else{_this.footerEle.append('<a id="round" class="zc-live-primary-btn" style="display: inline-block;">'+i18n.done+"<i></i></a>")}break}}else{if(MediaPopup.eleType=="Image"){_this.getCameraIcons();switch(B){case"snap":if(A){_this.footerEle.html("")}_this.checkRemoveDiv(_this.footerEle.find("#round"));var C=_this.mobileBrowser.camProp;if(isMobileBrowser()&&C.ALLOWSWITCHCAMERA){roundDiv=_this.mobileBrowser.swapIcon+roundDiv}_this.footerEle.append(roundDiv);_this.footerEle.find("#round").append(cameraIcon);_this.checkRemoveDiv(_this.footerEle.find("#Capture"));break;case"done":_this.checkRemoveDiv(_this.footerEle.find("#round"));if(isMobileBrowser()){_this.footerEle.append('<a id="done" class="zc-live-primary-btn" style="display: inline-block;"><i class="zc-li-outline ui-1-check"></i></a>')}else{_this.footerEle.append('<a id="done" class="zc-live-primary-btn" style="display: inline-block;">'+i18n.done+"<i></i></a>")}if(isMobileBrowser()){_this.footerEle.append(_this.mobileBrowser.backIcon)}if(!isMobileBrowser()){if(!A){_this.footerEle.append(retakeDiv)}_this.footerEle.find("#Retake").css("margin-top","-37px")}else{_this.footerEle.find("#swap").remove()}break;case"camera":_this.checkRemoveDiv(_this.footerEle.find("#round"));_this.footerEle.append(roundDiv);_this.footerEle.find("#round").append(doneIcon);if(!A){_this.footerEle.append(retakeDiv)}_this.footerEle.find("#Retake").css("margin-top","-37px");break}}else{if(MediaPopup.eleType=="Audio"){_this.getAudioIcons();switch(B){case"record":if(A){_this.footerEle.find("#round").remove();if(_this.footerEle.find("#round").length==0){_this.footerEle.append(roundDiv);_this.footerEle.find("#round").append(recordIcon);_this.footerEle.find("#round").append(timerDiv)}}_this.footerEle.find("#Okay").hide();_this.footerEle.find("#Retake").remove();break;case"stop":if(!A){_this.footerEle.find("#round").remove();_this.checkRemoveDiv(_this.footerEle.find("#recordStop"));_this.footerEle.append(recordStopDiv);_this.footerEle.find("#recordStop").append(stopIcon);_this.footerEle.find("#recordStop").append(timerDiv);_this.popup.find(".clock").show()}break;case"done":_this.footerEle.find("#recordStop").off("click");_this.footerEle.find("#round").off();_this.footerEle.find("#recordStop").remove();_this.checkRemoveDiv(_this.footerEle.find("#Retake"));_this.footerEle.append(retakeDiv);_this.checkRemoveDiv(_this.footerEle.find("#round"));if(!isMobileBrowser()){_this.footerEle.append('<a id="round" class="zc-live-primary-btn" style="display: inline-block;">'+i18n.done+"</a>")}else{_this.footerEle.append('<a id="round" class="zc-live-primary-btn" style="display: inline-block;"><i class="zc-li-outline ui-1-check"></i></a>')}break}}}}},openCamRecorder:function(B){$el=B.getUploadElement();_this=this;_this.$el=$el;MediaPopup.eleType="Video";var C=B.getModel().getDisplayName();var A='<div class="zc-dem-clearfix zc-media-camara-files"><div id="videoTabContent" class="flLeft zc-video-container zc-local-tabContent"><div id="permissionMsg" class="hide zc-permissionMsg"><span id="firstMsg" class="zc-permission-txt1"></span><div id="permission" class="zc-permission-image"></div><span id="lastMsg" class="zc-permission-txt2"></span></div>';if(isMobileBrowser()){A=A+'<div id="videoTimerDiv" class=" zc-video-timer clock hide">00:00</div>'}A=A+'<video playsinline class="hide" style="display: inline;" ></video></div></div></div>';$.zcmodal({type:ZCModalConstants.JIT_MODAL,bodyClass:"video-popup media-popup",title:C,closeOnAnyClick:false,buildDOM:function(){return A},afterClose:function(){clearTimeout(_this._clock);_this.stopStream();if(_this.error){_this.$el.parent().siblings("ul").find("i").trigger("click")}},beforeShow:function(D){_this.popup=$(D).parent(".media-popup");_this.footerEle=$(D).siblings(".popupFooter");var E=_this.popup.parent(".popupbox");E.addClass("zc-live-media-popup");_this.popup.siblings().hide();_this.toggleElement();_this.popup.find("#localTabContent").find("input").attr("accept","video/*");_this.popup.find("#videoCameraTab").find("li").first().click();_this.cssCameraChanges()},buttons:[{id:"round",name:"Done",type:"Button",action:function(){}}]})},getObjectName:function(A){if(A!=null){return A.constructor.name}},createAndConnectMediaObj:function(B){if(_this.getObjectName(B)!="HTMLAudioElement"&&_this._isRecording){if(!$.isEmptyObject(_this._audio._audioContext)){_this._audio._audioContext.close()}_this._audio._audioContext=new AudioContext();_this._input=_this._audio._audioContext.createMediaStreamSource(B);_this._recorder=new Recorder(_this._input,{workerPath:"/zohocreator/static_js/recorderWorker.js"});_this._recorder&&_this._recorder.record();_this._audio._analyzer=_this._audio._audioContext.createAnalyser();_this._audio._scriptProcessor=_this._audio._audioContext.createScriptProcessor()}else{if(_this.getObjectName(B)=="HTMLAudioElement"&&(_this.getObjectName(_this._input)!="MediaElementAudioSourceNode")&&!_this._audio._isPaused){try{_this._audio._scriptProcessor.disconnect();_this._input.disconnect(_this._audio._analyzer);_this.input={}}catch(A){}_this._audio._audioContext=new AudioContext();_this._input=_this._audio._audioContext.createMediaElementSource(B);_this._audio._analyzer=_this._audio._audioContext.createAnalyser();_this._audio._scriptProcessor=_this._audio._audioContext.createScriptProcessor()}}},audioVisual:function(D,E){var M=[];var T=false;var B=_this.popup.find("#audioTabContent canvas")[0];var G=B.getContext("2d");var A=B.getContext("2d");var O=B.offsetWidth;var J=B.offsetHeight;var K=J/2;var I=0.3;var F=0.1;var N="";N=E;var H=_this._input;G.canvas.width=O;G.canvas.height=J;var P=function P(W){var V=W.length;var U=0;for(i=0;i<V;i++){U+=W[i]}return U/V};var C=function C(Y,W,X,U){W=_this.popup.find("#round").css("background-color");var V=_this._audio._bar;if(!T){T=true;animation=window.requestAnimationFrame(function(){if(_this._isRecording){G.clearRect(0,0,O,J);Y.forEach(function(a,Z){G.fillStyle=W;G.fillRect(Z*(I+F),K,I,K*(a/100));G.fillRect(Z*(I+F),K-K*(a/100),I,K*(a/100))})}else{if(_this._isPlayback){A.clearRect(0,0,O,J);if(X=="slice"){V.slice(U-Math.floor(O/(I+F))).forEach(function(a,Z){G.fillStyle="#060606";G.fillRect(Z*(I+F),K,I,K*(a/100));G.fillRect(Z*(I+F),K-K*(a/100),I,K*(a/100))})}else{_this._audio._bar.forEach(function(a,Z){G.fillStyle="#060606";G.fillRect(Z*(I+F),K,I,K*(a/100));G.fillRect(Z*(I+F),K-K*(a/100),I,K*(a/100))})}Y.forEach(function(a,Z){G.fillStyle=W;G.fillRect(Z*(I+F),K,I,K*(a/100));G.fillRect(Z*(I+F),K-K*(a/100),I,K*(a/100))})}}T=false})}};_this.createAndConnectMediaObj(D);var R=_this._audio._analyzer;var Q=_this._audio._scriptProcessor;H=_this._input;H.connect(_this._audio._analyzer);if(_this._isPlayback){H.connect(_this._audio._audioContext.destination)}Q.connect(_this._audio._audioContext.destination);_this._audio._analyzer.connect(Q);var S=function S(V){if(_this._isRecording||_this._isPlayback){if(_this._isPlayback){var U=new Uint8Array(_this._audio._analyzer.frequencyBinCount);_this._audio._analyzer.getByteFrequencyData(U);_this._audio._playBars.push(P(U));if(_this._audio._playBars.length<=Math.floor(O/(I+F))){C(_this._audio._playBars,E)}else{C(_this._audio._bar.slice(_this._audio._playBars.length-Math.floor(O/(I+F))),E,"slice",_this._audio._playBars.length)}}if(_this._isRecording){var W=new Uint8Array(_this._audio._analyzer.frequencyBinCount);_this._audio._analyzer.getByteFrequencyData(W);_this._audio._bar.push(P(W));M.push(P(W));if(M.length<=Math.floor(O/(I+F))){C(M,E)}else{C(M.slice(M.length-Math.floor(O/(I+F))),E)}}}else{M=[];playBars=[]}};Q.connect(_this._audio._audioContext.destination);Q.onaudioprocess=S},checkAudioPermission:function(){var C=!1,A=!0,H=800;var F={};var G=_this.popup.parent(".popupbox");G.addClass("zc-mediaPermission-popup");var B=navigator.userAgent.toLowerCase();if(B.indexOf("safari")!=-1){if(!(B.indexOf("chrome")>-1)){_this.popup.siblings().show();_this.popup.prepend(_this.popup.siblings());_this.permissionTextChange(false,false,false);return }}navigator.getMedia=(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);var E={audio:true,video:false};successCallback=function(J){F=J;_this._localStream=J;clearTimeout(C);if(G.hasClass("zc-mediaPermission-popup")){G.removeClass("zc-mediaPermission-popup");_this.popup.find("#meter").show()}_this.popup.siblings().show();_this.popup.prepend(_this.popup.siblings());_this.permissionTextChange(false,false,true)}.bind(_this);errorCallback=function(J){clearTimeout(C);_this.error=true;_this.popup.siblings().show();_this.popup.prepend(_this.popup.siblings());_this.permissionTextChange(true,true,true)}.bind(_this);var I=function(){if(A===!0){if(navigator.getMedia){navigator.getMedia(E,successCallback,errorCallback)}else{_this.error=true;_this.popup.find(".popupHeader").show();_this.popup.find(".popupFooter").show();_this.popup.find("#permission").attr("class","");_this.popup.find("#permissionMsg").css("display","none")}}}.bind(_this);var D=function(){_this.popup.siblings().show();_this.popup.prepend(_this.popup.siblings());_this.permissionTextChange(true,false,true)}.bind(_this);I();C=setTimeout(D,H);return F},setAudioStream:function(){navigator.getMedia=(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia);if(navigator.getMedia){var B=(MediaRecorder.isTypeSupported("audio/ogg;codecs=opus"))?"audio/ogg":"audio/webm";navigator.mediaDevices.getUserMedia({audio:true,video:false,audioBitsPerSecond:128000,mimeType:B}).then(function(C){_this._localStream=C;_this.mediaRecorder=new MediaRecorder(C);_this.mediaRecorder.start(10);_this.chunks=[];_this.adjustTimer(duration);_this.audioVisual(_this._localStream,"#060606");_this.mediaRecorder.ondataavailable=function(D){_this.chunks.push(D.data)}},function(D){_this.error=true;var C={};C.msg=Constants.ALLOWTOACCESSMEDIA;C.callback=_this.closePopup;$.alert(C,3000);return })}else{_this.error=true;var A={};A.msg=Constants.NOMEDIASUPPORT;A.callback=_this.closePopup;$.alert(A,3000);return }},openAudioRecorder:function(B){$el=B.getUploadElement();_this=this;_this.$el=$el;_start={};_end={};MediaPopup.eleType="Audio";var A={};var C=B.getModel().getDisplayName();$.zcmodal({type:ZCModalConstants.JIT_MODAL,bodyClass:"audio-popup media-popup",title:C,closeOnAnyClick:false,buildDOM:function(){return'<div class="zc-dem-clearfix"><div id="audioTabContent" class="flLeft zc-local-tabContent"><div id="permissionMsg" class="hide zc-permissionMsg"><span id="firstMsg" class="zc-permission-txt1"></span><div id="permission" class="zc-permission-image"></div><span id="lastMsg" class="zc-permission-txt2"></span></div><canvas id="meter" style="height:100px;" class="zc-sound-waves-bg "></canvas></div>'},afterClose:function(){clearTimeout(_this._clock);_this.stopStream();_this._audio._playBars=[];_this._audio._bar=[];_this._isPlayback=false;_this._isRecording=false;if(_this.error){_this.$el.parent().siblings("ul").find("i").trigger("click")}_this._localStream=null},hideHeader:false,beforeShow:function(E){_this.popup=$(E).parent(".media-popup");_this.footerEle=$(E).siblings(".popupFooter");var D=document.createElement("AUDIO");D.setAttribute("controls","controls");D.setAttribute("id","popupAudioEle");D.style.width="100%";$(D).insertAfter(_this.popup.find("#audioTabContent canvas"));audio=_this.popup.find("#audioTabContent audio")[0];audio.removeAttribute("controls");duration=$el.attr("duration");_this.popup.parent(".popupbox").css("width","620px");_this.popup.parent(".popupbox").css("height","420px");_this.cssAudioChanges();_this.changeIcon("record",false);_this.popup.find(".popupHeader").hide();_this.popup.find(".popupFooter").hide();_this.popup.find("canvas").hide();_this.popup.siblings().hide();audioStream=_this.checkAudioPermission();_this.stopStream(audioStream);_this.popup.find("#localTabContent").find("input").attr("accept","audio/*");_this.toggleElement();_this.popup.find("#audioTab").find("li").first().trigger("click")},buttons:[{id:"Retake",name:"Retake",type:"Button",action:function(){}},{id:"Okay",name:"Done",type:"Button",action:function(){}}]})},uploadFile:function(a){var X=this;$ele=X.$el;var S=X.getOpts();video=X.video;audio=X.audio;var T=$.extend(true,{},$.ajaxSettings,S,{url:S.url,contentType:false,processData:false,cache:false,type:"POST"});if(!$ele.attr("multiple")){S.multiple=false}else{S.multiple=true}var Q={},A=$ele,H,W=$ele.width(),V,f;var R;if(MediaPopup.eleType!="Image"){R=$(A).parent().siblings("ul")}else{R=$(A).parent().parent().siblings("ul")}if(S.defaultVal!=undefined&&S.defaultVal!=""){V=S.defaultVal,f=(V!=undefined&&V!="")?V.substring(V.indexOf("_")+1):"";B(f,V,false);if(S.showOpts!=undefined){(S.showOpts)()}}var P=$("<input type='file'/>").get(0).files!==undefined,O=window.FormData!==undefined,g=(P&&O);g=true;if(g){var O=new FormData();var b;if(MediaPopup.eleType=="Image"){var C=X._image;var d=atob(C.split(",")[1]);var K=[];for(var Y=0;Y<d.length;Y++){K.push(d.charCodeAt(Y))}b=new Blob([new Uint8Array(K)],{type:"image/png"});if(X._cropped){if(X.$el[0].files[0]!=undefined){fileType=X.$el[0].files[0].name.split(".")[1];fileMimeType=X.$el[0].files[0].type;b=new Blob([new Uint8Array(K)],{type:fileMimeType});O.append(S.name,b,X.$el[0].files[0].name);N(X.$el[0].files[0].name)}else{O.append(S.name,b,"snapshot.png");N("snapshot.png")}}else{if(X.popup.find("#cameraTab li.active i").hasClass("fa-upload")){b=a.target.files||a.dataTransfer.files;O.append(S.name,b,b.name);N(b.name)}else{O.append(S.name,b,"snapshot.png");N("snapshot.png")}}}else{if(MediaPopup.eleType=="Audio"){b=new Blob(X.chunks);b=X._mp3File;var G=typeof InstallTrigger!=="undefined";O.append(S.name,b,"audio.mp3");N("audio.mp3")}else{b=new Blob(X.chunks,{type:"video/mp4"});O.append(S.name,b,"video.mp4");N("video.mp4")}}$.each(S.data||{},function(e,h){if(h!=undefined){O.append(e,h)}});T.data=O}function E(){if(!S.multiple){$(I(Q).HTML).find("i").trigger("click")}}function N(e){if(!S.multiple){Q={}}Q[e]={HTML:$("<li><i></i></li>").append($("<p>").text(e)),PATH:""}}if(Q.length==0){return }T.xhr=function(){var e=$.ajaxSettings.xhr();if(e.upload){e.upload.addEventListener("progress",function(m){$($(R).parent().parent()[0].querySelector(".zc-image-hover-msg")).html("");var l=0;var h=m.loaded||m.position;var k=m.total;if(m.lengthComputable){l=Math.ceil(h/k*100)}if(S.uploadProgress){S.uploadProgress(l)}},false)}return e};if($(A).parent().next().hasClass("file-restore")){$(A).parent().next().remove()}else{if($(A).parent().parent().next().hasClass("file-restore")){$(A).parent().parent().next().remove()}}var D=$("<i class='zc-li-outline arrows-4-undo-29 file-restore' title='Restore'></i>");if(S.defaultVal!=undefined&&S.defaultVal!=""){D.hide();$(A).parent().after(D);D.click(function(){B(f,V,false);(S.onrestore)(V)})}function M(){if(D!=undefined){D.hide()}if(S.showOpts!=undefined){(S.showOpts)()}$($(R).parent().parent()[0].querySelector(".zc-image-icons")).hide();$($(R).parent().parent()[0].querySelector(".zc-image-hover-msg")).html("");if(!S.multiple){$(R).html(I(Q).HTML)}else{for(j in Q){$(R).append(Q[j].HTML)}}}var F=T.beforeSend;T.beforeSend=function(h,e){M();if(F){F.call(this,h,e)}};var c=undefined;$.ajax(T).done(function(e){c=e}).always(function(e){e=c!=undefined?c[0]:{};J(e,X)});function B(m,l,e){if(!S.multiple){Q={}}var h=$('<li><i class="zc-li-outline ui-1-simple-remove"></i></li>').append($("<p>").text(m));Q[l]={HTML:h,PATH:l};var k=$(h).find("i")[0];k.data={path:l,filename:m};Z(k,e);M()}function M(){if(D!=undefined){D.hide()}if(S.showOpts!=undefined){(S.showOpts)()}$($(R).parent().parent()[0].querySelector(".zc-image-icons")).hide();$($(R).parent().parent()[0].querySelector(".zc-image-hover-msg")).html("");if(!S.multiple){$(R).html(I(Q).HTML)}else{for(j in Q){$(R).append(Q[j].HTML)}}}function Z(h,e){h.addEventListener("click",function(k){U(k.target,e)})}function U(e,h){var k=$(e).closest("div.form-group").find('input[name="uploadFile"]');$(k).val("");$(e).parent("li").remove();delete Q[e.data.filename];if(S.ondelete!=undefined){(S.ondelete)()}}function I(h){for(var e in h){return h[e]}}function J(k,n){for(var e=0;e<k.length;e++){var m=Q[k[e].docName],h=$(m.HTML).find("i")[0],l=k[e].docId;if(k[e].status=="error"){$(m.HTML).remove();delete Q[k[e].docName];return false}m.PATH=l;h.className="zc-li-outline ui-1-simple-remove";h.data={path:l,filename:k[e].docName};Z(h);if(isMobileBrowser()&&n.mobileBrowser.camProp!=undefined){if(n.mobileBrowser.camProp.ISSUBMITAFTERSCAN){n.$el.parents("form").submit();return }if(Object.keys(n.formController).length!=0){if(n.formController.triggerImagePopup!=undefined){if(n.popupCaptured){n.formController.triggerImagePopup(n.image_fieldDOM.getModel().getLabelName())}}else{if(n.formController.getSubFormImgController().length>0){if(n.popupCaptured){n.formController.triggerSubformImagePopup(n.formController.getSubFormImgController()[0],n.image_fieldDOM.getModel().getLabelName())}}}}}}}}};function randomStringCalculator(F,B,H){if(H==1){var I=F.MODEL;var A=I.RANDSTR;var C=I.FORMLINKNAME;var D=C+"_"+A;if(isNull($(B)[0].querySelector("#"+D))&&!isNull(document.getElementById(D))){var G=new Date().getTime();var E=JSON.stringify(F);var J=E.replace(new RegExp(A,"g"),G);F=JSON.parse(J)}}return F}function mapLocationSearch(A){var B=Object.keys(A).map(function(C){return C+"="+A[C]}).join("&");B=B+"&api_key="+Constants.MAP_SEARCH_API;url=getSpecificDomain(Constants.ZOHO_MAPS)+"/api/v2/search?"+encodeURI(B);return $.ajax({url:url,type:"GET"})}var Controller={ApplicationController:{apps:{},create:function(B){var D=(B.type!=undefined)?B.type:ApplicationControllerType.DEFAULT;var A=Model.ApplicationModel.create(B.model);var C;switch(D){case ApplicationControllerType.PREVIEWAPPLICATION:this.appController=new PreviewApplicationController(A);break;default:this.appController=new ApplicationController(A);break}this.apps[A.getAppLinkName()]=this.appController;this.appController.bindEvents();return this.appController},get:function(A){return this.apps[A]}},FormController:{forms:{},cache:{},create:function(B){var D=(B.type!=undefined)?B.type:FormControllerType.DEFAULT;var A=Model.FormModel.create(B.model,B.data,B.dynamicMeta),C;this.cache[A.getFormLinkName()+"_"+A.getRandStr()]={HTML:B.html,CONTAINER:B.container};this.cache[A.getFormLinkName()+"_"+A.getRandStr()].MODEL=JSON.parse(JSON.stringify(B.model));switch(D){case FormControllerType.REPORTFORM:C=new ReportFormController(A,B.reportController);break;case FormControllerType.BULKEDITFORM:C=new BulkEditFormController(A,B.reportController);break;case FormControllerType.LOOKUPFORM:C=new LookupFormController(A,B.childField);break;case FormControllerType.REPORTADDFORM:C=new ReportAddFormController(A,B.reportController);break;case FormControllerType.PREVIEWFORM:C=new PreviewFormController(A,B.reportController);break;default:C=new FormController(A);break}C.isPage=B.isPage;C.isNewPage=B.isNewPage;C.isPageEmbed=B.isPageEmbed;C.isPagePerma=B.isPagePerma;C.isReportEmbed=B.isReportEmbed;C.isReportPerma=B.isReportPerma;if(B.isPage||B.isNewPage){C.container=B.container}this.forms[A.getFormLinkName()]=C;C.data=B.data;C.bindEvents();return C},get:function(A){return this.forms[A]},loadFromCacheOrfetchForm:function(G,B,M,C){var E=this.cache[G+"_"+B];if(E!=undefined&&E!=null){var I=Controller.FormController.get(G);var J=(I instanceof ReportAddFormController)?FormControllerType.REPORTADDFORM:FormControllerType.DEFAULT;var D=I.getURL().getForm();if(I.getModel().isPerma()){D=D+"/resetPerma"}else{if(I.getModel().isEmbed()){D=D+"/resetEmbed"}}D=D+"?"+M;$.zcAjax({url:D,type:"GET",success:function(P,O,Q){P=randomStringCalculator(P,E.CONTAINER,1);$(E.CONTAINER).html(P.HTML);var N=Controller.FormController.create({model:P.MODEL,html:P.HTML,container:E.CONTAINER,type:J,isNewPage:I.isNewPage,data:P.RECORD,dynamicMeta:P.DYNAMIC_META});if(C!=""&&C!=undefined&&Object.keys(C).length>0){Controller.FormController.get(G).infoMsgHandler(C)}},error:function(O,N,R){var Q=Controller.FormController.get(G);if(Q!=undefined){var P=Q.getView().getDOM().getFormContainer();if(P!=null&&P!=undefined){$(P).parent().html(O.responseText)}}}})}else{var K=Controller.ApplicationController.get(ZCGlobal.appLinkName);if(K!=undefined){var F=K.getView();var H="#Form:"+G;var A=Model.ApplicationModel.create({ISPREVIEWACTION:false});F._Events._LoadComponent(H,F.getDOM().getComponentContainer(),true,A)}}}},FormButtonController:{create:function(A){var B=Model.FormButtonModel.create(A.model);return new FormButtonController(B,A.formcontroller).bindEvents()}},ReportController:{previewControllerviews:{},create:function(B){var C=Model.ReportModel.create(B.model);var A;if(B.type==ReportType.PREVIEW_REPORT){A=new PreviewReportController(C,B.childReport,B.isPage,B);this.previewControllerviews[C.getReportLinkName()]=A}else{A=new ReportController(C,B.childReport,B.isPage,B)}A.isPage=B.isPage;A.isPageEmbed=B.isPageEmbed;A.isPagePerma=B.isPagePerma;if(B.isPage){A.container=B.container}A.bindEvents();return A},getPreviewController:function(A){return this.previewControllerviews[A]}},RecordController:{create:function(B){var A=Model.RecordModel.create(B.model,B.reportcontroller.getModel());return new RecordController(A,B.reportcontroller).bindEvents()}},FieldController:{create:function(C){var E=C.model,D=C.formController.getModel(),B=C.data,F;switch(C.model.FIELDCOMPTYPE){case FieldType.PHONE_NUMBER:var A=new PhoneNumberModel(E,D,B);F=new PhoneNumberController(A,C.formController);break;case FieldType.DROPDOWN:case FieldType.INLINE_PICK_LIST:case FieldType.POPUP_SINGLE:case FieldType.SYSTEM_LOOKUP:case FieldType.EXTERNAL_FIELD:var A=new DropdownModel(E,D,B);F=new DropdownController(A,C.formController);break;case FieldType.LINK_FIELD:var A=new DropdownModel(E,D,B);F=new DropdownController(A,C.formController);break;case FieldType.RADIO:case FieldType.INLINE_RADIO:var A=new RadioModel(E,D,B);F=new RadioController(A,C.formController);break;case FieldType.LIST:var A=new MultiSelectModel(E,D,B);F=new MultiSelectController(A,C.formController);break;case FieldType.CHECK_BOXES:var A=new CheckBoxModel(E,D,B);F=new CheckBoxController(A,C.formController);break;case FieldType.IMAGE:var A=new ImageModel(E,D,B);F=new ImageController(A,C.formController);break;case FieldType.AUDIO:var A=new AudioModel(E,D,B);F=new MediaController(A,C.formController);break;case FieldType.VIDEO:var A=new VideoModel(E,D,B);F=new MediaController(A,C.formController);break;case FieldType.FILE_UPLOAD:var A=new FileUploadModel(E,D,B);F=new FileUploadController(A,C.formController);break;case FieldType.RICH_TEXT_AREA:var A=new RichTextModel(E,D,B);F=new RichTextController(A,C.formController);break;case FieldType.NAME:var A=new NameModel(E,D,B);F=new NameController(A,C.formController);break;case FieldType.ADDRESS:var A=new AddressModel(E,D,B);F=new AddressController(A,C.formController);break;case FieldType.SUB_FORM_GRID:var A=new SubformModel(E,D,B);F=new SubformController(A,C.formController);break;case FieldType.DATE:case FieldType.DATE_TIME:var A=new DateTimeModel(E,D,B);F=new DateTimeController(A,C.formController);break;case FieldType.TIME:var A=new TimeModel(E,D,B);F=new TimeController(A,C.formController);break;case FieldType.SIGNATURE:var A=new SignatureModel(E,D,B);F=new SignatureController(A,C.formController);break;case FieldType.URL:var A=new URLModel(E,D,B);F=new URLController(A,C.formController);break;case FieldType.NUMBER:case FieldType.DECIMAL:case FieldType.PERCENTAGE:var A=new FieldModel(E,D,B);F=new FieldController(A,C.formController);break;case FieldType.CURRENCY:var A=new CurrencyModel(E,D,B);F=new CurrencyController(A,C.formController);break;case FieldType.SECTION:var A=new FieldModel(E,D,B);F=new SectionController(A,C.formController);break;case FieldType.SINGLE_SELECT:if(E.ISINTEGRATIONFIELD){var A=new IntegrationModel(E,D,B);F=new IntegrationController(A,C.formController)}break;case FieldType.ZIA_TEXT:var A=new ZiaTextModel(E,D,B);F=new ZiaTextController(A,C.formController);break;case FieldType.ZIA_MULTILINE:var A=new ZiaMultiLineModel(E,D,B);F=new FieldController(A,C.formController);break;default:var A=new FieldModel(E,D,B);F=new FieldController(A,C.formController)}F.init();F.bindEvents();return F}},PageController:{create:function(B){var A=Model.PageModel.create(B.model);var C=B.isPage;if(LIB._isNull(C)){C=false}var D=(B.type!=undefined)?B.type:PageType.DEFAULT;pageController=(D==PageType.PREVIEW_PAGE)?new PreviewPageController(A,C):A.isNewPages()?new NewPageController(A,C):new OldPageController(A,C);pageController.isPageEmbed=B.isPageEmbed;pageController.isPagePerma=B.isPagePerma;pageController.container=B.container;window.PAGE=pageController;return pageController.bindEvents()}},ApprovalController:{create:function(A){var C=Model.ApprovalModel.create(A.model);var B=new ApprovalController(C);return B.bindEvents()}},NlpController:{create:function(B,A){return new NLPController(B,A)}},SharedAnalyticsController:{create:function(A){return new SharedAnalyticsController(A)}},PublishComponentController:{create:function(B,A){return new PublishComponentController(B,A)}}};function ControllerFactory(C,B,A){var E=C,F,D;if(C!=undefined){switch(B){case ObjectType.APP:F=View.ApplicationView.create(E,this);break;case ObjectType.FORM:F=View.FormView.create(E,this);D=new FormURL(E);break;case ObjectType.FIELD:F=View.FieldView.create(E,this,A.getView());D=new FieldURL(E,A.getModel());break;case ObjectType.REPORT:F=View.ReportView.create(E,this);D=new ReportURL(E);break;case ObjectType.PAGE:F=View.PageView.create(E,this);D=new PageURL(E);break;case ObjectType.RECORD:F=View.RecordView.create(E,this,A.getView());break;case ObjectType.APPROVAL:F=View.ApprovalView.create(E,this);D=new ApprovalURL(E);break}}this.bindEvents=function(){F.bindEvents();return this};this.getModel=function(){return E};this.getView=function(){return F};this.getURL=function(){return D}}var ApplicationController=(function(B){ControllerFactory.call(this,B,ObjectType.APP);var A=this.getView();var C=false;this.bindEvents=function(){$(A.getDOM().getOldLiveSwitch()).on("click",A._Events._switchToOldLive);B.fillCompMap();if(!ZCGlobal.isMobileLayout||!isMobileBrowser()){if(B.getAppTheme()=="8"){A._Events._setSectionCompScroll()}else{if(B.getAppTheme()=="9"){A._Events._setSectionCompScroll();A._Events._setDynamicComponentTop()}}}A._Events._preventSection(B);A._Events._NavigateHeader();A._Events._AppSendMail();A._Events._ChangeHash(B);A._Events._bindDemoUserListScroll();A._Events._bindAppDataSearchEvent();var D=(B.hasDefaultComp())?"#"+B.getDefaultCompType()+":"+B.getDefaultComp():location.hash;if(B.isPaymentCallback()){D+="?"+B.getPaymentInfo()}A._Events._LoadComponent(D,A.getDOM().getComponentContainer(),true,B);$(".zc_tab.selected").addClass("selected-init");if(B.isTabPane()){A._Events._AdjustTabPane(B.getAppTheme())}else{if(!B.isGridPane()){if(!ZCGlobal.isMobileLayout){A._Events._BindJscroll(B)}}}A._Events._bindToolTip(B);if(!ZCGlobal.isMobileLayout){$(".zc-mobile-back-button").hide()}if(getConfig().useCompression){$(".zc-admin-action").click(function(){var E=this;$(".zc-admin-action").off("click");$(".zc-admin-action").removeClass("zc-admin-action");if(!C){loadCSS(bootConfig.cssApacheServer+"/creator/"+bootConfig.label+"/app/css/adminpanel.css");C=true}var F=new Requires(Modules.ADMINPANEL);require(F.get(),F.getPromise(function(){ADMINPANEL=new AdminPanel(B);$(E).trigger("click")}))})}else{ADMINPANEL=new AdminPanel(B)}if(ZCGlobal.isConnectionReferenced){loadFiles([ZCPath.appbuilderJs.securityJs,ZCPath.ipaasJs.zcIntegrationCxnJsSdk,ZCPath.ipaasCss.zcIntegrationAuthCss]).then(function(){ConnectionContext.initHandlebars(IntegrationContext.LIVE,function(){if(B.showConnectionInLive()){A._Events._loadConnectionAuthorizePopup()}})})}};this.reload=function(){A._Events._LoadComponent(location.hash,A.getDOM().getComponentContainer(),true,B,true)}});ApplicationController.prototype=Object.create(ControllerFactory.prototype);ApplicationController.prototype.constructor=ApplicationController;var PreviewApplicationController=(function(C){ControllerFactory.call(this,C,ObjectType.APP);var B=this;var A=this.getView();this.isBuildPreview=true;this.initBuilder=location.search.indexOf("isInitBuilder")!=-1;this.isBuilderInitiated=this.initBuilder;this.bindEvents=function(){C.fillCompMap();if(C.getAppTheme()=="8"){A._Events._setSectionCompScroll()}else{if(C.getAppTheme()=="9"){A._Events._setSectionCompScroll();A._Events._setDynamicComponentTop()}}A._Events._preventSection(C);A._Events._ChangeHash(C);var D=(C.hasDefaultComp())?"#"+C.getDefaultCompType()+":"+C.getDefaultComp():location.hash;A._Events._LoadComponent(D,A.getDOM().getComponentContainer(),true,C,(B.isBuilderInitiated&&location.hash!=""));if(C.isTabPane()){A._Events._AdjustTabPane(C.getAppTheme())}else{if(!C.isGridPane()){if(!isMobileBrowser()){A._Events._BindJscroll(C);A._Events._ScrollToSelectedTab()}}}A._Events._bindToolTip(C)};this.reLoad=function(E){var D=E==undefined?location.hash:E;var F=A._Events._LoadComponent(D,A.getDOM().getComponentContainer(),true,C,true)};this.reLoadCSS=function(K,D){var N=$("head"),Q,F,O,P;var M="themeColorOption";var E="layout"+K.key+"."+K.themecolor+".css";var J=D.indexOf("theme")!=-1?D:"theme"+K.key+"."+K.themecolor+".css";var I=$("#"+M);if($("#theme"+K.key+"_css").length>0){Q=$("#theme"+K.key+"_css");F=$(Q).attr("href");if(!F){F=$(Q).attr("value")}if(F.indexOf("theme"+K.key+".")!=-1){if($(I).length>0){O=F.substr(F.indexOf("theme"+K.key+"."));var G=F.replace(O,J);$.get(G).always(function(){$(I).attr("href",G)})}else{P=$(Q).clone();$(P).attr("id",M);O=F.substr(F.indexOf("theme"+K.key+"."));var H=F.replace(O,J);$(P).attr("href",H);$.get(H).always(function(){$(P).attr("href",H)});$(P).insertAfter(Q);$(P)[0].onload=function(){$(Q).attr("value",F).removeAttr("href")}}}}else{if($(I).length>0){var G=$(I).attr("href");if(G.indexOf("layout"+K.key+".")!=-1){O=G.substr(G.indexOf("layout"+K.key+"."));G=G.replace(O,E);$.get(G).done(function(){$(I).attr("href",G)})}}else{$(N).find("link").each(function(){if($(this).name==="customTheme"){return }Q=$(this);F=$(this).attr("href");if(F.indexOf("layout"+K.key+".")!=-1){P=$(Q).clone();$(P).attr("id",M);O=F.substr(F.indexOf("layout"+K.key+"."));var R=F.replace(O,E);$(P).attr("href",R);$.get(R).done(function(){$(P).insertAfter(Q)});return false}})}}};$(window).off("message").on("message",function(E){E=E.originalEvent;if(E.data.action=="reload"){B.reLoad(E.data.hash)}if(E.data.action=="hardReload"){if(B.initBuilder){location.search=location.search.replace("&isInitBuilder=true","")}else{location.reload()}}if(E.data.action=="showPreviewRecSummary"){var D=Controller.ReportController.getPreviewController(E.data.linkname);D.showPreViewRecord()}if(E.data.action=="closeFirstPopup"){closeFirstPopup()}if(E.data.action=="reloadFrameCSS"){B.reLoadCSS(E.data.themeMeta,E.data.cdnthemePath)}})});PreviewApplicationController.prototype=Object.create(ControllerFactory.prototype);PreviewApplicationController.prototype.constructor=PreviewApplicationController;var PublishComponentController=(function(E,B,J){var I=this;var G,M,C,D,H,F,K,A;this.getAppUrl=function(){return I.serverPrefix+"/"+I.scopeName+"/"+I.appLinkName+"/"};this.getPublishStatusUrl=function(){return this.getAppUrl()+I.componentTypeName+"-publish/"+I.componentName};this.getPublishUrl=function(){return this.getAppUrl()+I.componentName+"/publish"};this.setVariables=function(N){I.csrf=N.csrf;I.scopeName=N.scopeName;I.serverPrefix=N.scheme+"://"+N.serverName;I.publicServerPrefix=N.scheme+"://"+N.publicservername;I.appLinkName=N.appLinkName;I.componentName=N.componentName;I.componentTypeName=N.componentTypeName;I.privateKey=N.privateKey};this.initVariables=function(){if(typeof ZCGlobal!="undefined"){I.csrf=ZCGlobal.csrfToken;I.scopeName=ZCGlobal.scopeName;I.serverPrefix=ZCGlobal.serverPrefix;I.appLinkName=ZCGlobal.appLinkName;I.publicServerPrefix="https://"+ZCGlobal.zcPublicServer[0]}};this.initPublish=function(){I.initVariables();if(E.indexOf("#form-publish:")==0){I.componentName=location.hash.substr(14);I.componentTypeName="form"}else{if(E.indexOf("#page-publish:")==0){I.componentName=location.hash.substr(14);I.componentTypeName="page"}else{I.componentName=location.hash.substr(16);I.componentTypeName="report"}}if(I.componentName.indexOf("?")!=-1){I.componentName=I.componentName.substring(0,I.componentName.indexOf("?"))}$.zcAjax({url:I.getPublishStatusUrl(),type:"GET",data:{isAjax:true},success:function(N){var O=JSON.parse(N);B.empty();B.append(O.HTML);if(O.PUBLISH_KEY!=""){I.privateKey=O.PUBLISH_KEY;I.showLinks(I.privateKey)}LIB._stopLoading();I.bindEvents()}})};if(!J){I.initPublish()}this.bindEvents=function(){$("#publishComp").click(function(P){var N=$(this);N.val("Publishing..");P.preventDefault();var O={};$.ajax({url:I.getPublishUrl(),type:"POST",data:{zccpn:I.csrf},success:function(R,Q,T){var S=JSON.parse(R);if(S.PUBLISH_KEY){I.privateKey=S.PUBLISH_KEY;I.showLinks(S.PUBLISH_KEY);$(document.getElementById("publish-comp")).remove()}else{N.val("Publish");$(document.getElementById("error-info")).text(S.ERROR);$(document.getElementById("error-info-wrapper")).show()}}})});$(".zc-live-publishlinkcodecopy").click(function(N){var O=$(this).parents(".zc-live-publishlinkcode").find("textarea");O.select();document.execCommand("copy");$.successMsg("Copied!",3000);window.getSelection().removeAllRanges()})};this.showLinks=function(N){if(I.privateKey!="null"&&I.privateKey!=""&&I.privateKey!=undefined){var O=I.publicServerPrefix+"/"+I.scopeName+"/"+I.appLinkName+"/"+I.componentTypeName+"-embed/"+I.componentName+"/"+I.privateKey;O="<iframe height='500px' width='100%' frameborder='0' allowTransparency='true' scrolling='auto' src='"+O+"'></iframe>";var P=I.publicServerPrefix+"/"+I.scopeName+"/"+I.appLinkName+"/"+I.componentTypeName+"-perma/"+I.componentName+"/"+I.privateKey;$(document.getElementById("perma-link-wrapper")).find("textarea").text(P);$(document.getElementById("embed-link-wrapper")).find("textarea").text(O);$(document.getElementById("published-links")).show()}}});var latLngRegx=/^-?([0-8]?[0-9]|90)\.[0-9]{1,7},-?((1?[0-7]?|[0-9]?)[0-9]|180)\.[0-9]{1,7}$/;function createCreatorMarker(E,J,V){var D=V.getView();var U=D.getReportDom().getReportContainer();$(U).find(".zc-marker-div").remove();for(var R=0;R<E.length;R++){var M=E[R],I=M.lat,F=M.lon,P=M.recordLinkId,S=M.mapIcon,Q=M.pinColor,B=M.mapIconColor;var A=document.createElement("div");var C=(S!==undefined);if(C){A.className="zc-marker-div zc-map-marker-container";var N=document.createElement("i");var K=document.createElement("i");N.style.color=Q;K.style.color=B;N.className="zc-li-solid pin";K.className="zc-li-solid zc-map-inner-icon "+S;A.appendChild(N);A.appendChild(K)}else{A.className="zc-marker-div";var G=getSpecificDomain(Constants.IMAGE_STATIC_SERVER)+"/maps/v8_1_7/images/maps-blue-marker.svg";A.style.backgroundImage="url("+G+")"}var T=M.layout;var H=T;$(A).attr("layout",H);$(A).attr("lat",I);$(A).attr("lon",F);$(A).attr("recordLinkId",P);cutomMarker=new mapboxgl.Marker(A,{offset:[-0,-17.5]});cutomMarker.setLngLat([M.lon,M.lat]);cutomMarker.addTo(J);var O=cutomMarker._element;regCardEvent(O,V)}}function createMarker(J,E,C){var I=[];for(var H=0;H<J.length;H++){var G=J[H];var K=G.lat;var B=G.lon;var D=document.createElement("div");D.className="zc-marker-div";var A=getSpecificDomain(Constants.IMAGE_STATIC_SERVER)+"/maps/v8_1_7/images/maps-blue-marker.svg";D.style.backgroundImage="url("+A+")";$(D).attr("lat",K);$(D).attr("lon",B);var F=new mapboxgl.Marker(D,{offset:[-0,-17.5]});F.setLngLat([B,K]);F.addTo(E);if(C){I.push(F)}}if(C){return I}}function regCardEvent(D,A){var F=A.getView();var E=F.getReportDom().getReportContainer();var C=A.reportModel;var B="mouseover";if(ZCGlobal.isMobileLayout){B="touchend"}$(D).on(B,function(I,G,H){timer=setTimeout(function(){var S=I.currentTarget;var c=$(S).closest(".map-view");var Q=$(S).attr("lat"),N=$(S).attr("lon");var J=$("div[lat='"+Q+"'][lon='"+N+"']");if($(J).attr("layout")===undefined){fillLayoutInfo(J,F)}var W="<div id='zc-multimap-card' class='zc-multimap-card";if(J.length>1){W=W+" zc-more-map-cards "}W=W+"'><div id='zc-card-innercont'>";if(J.length>1){$(J).each(function(g){W=W+$(this).attr("layout")})}else{W=W+$(S).attr("layout")}W=W+"</div></div>";var Y=$(E).find("#zc-card-cont");$(Y).html(W);$(Y).fadeIn(300);$(Y).css({position:"fixed"});var a=$(c).offset().left;var U=$(c).offset().top;var R=$(S).width(),Z=$(E).find("#zc-multimap-card").width(),f=$(window).width();var b=$(S).height(),M=$(E).find("#zc-multimap-card").height(),T=$(window).height();var K=$(S).offset();var d=$(S).position();var V=(Z/2)-(R/2);var O=K.left-V;var X=K.top-M;var P=a+$(c).width();if((O+(V*2))>P){O=O-((O+(V*2)+R)-(P))}else{if((O-a)<0){var e=a;e=e<0?15:e+15;O=e}}if(M>(K.top-U)){X=K.top+b}$(Y).css({left:O+"px",top:X+"px"});$(Y).find("div[elname=zc-dem-card-more]").on("click",function(g){F.showRecordMenu(g,this);if(ZCGlobal.isMobileLayout){$(F.getReportDom().getFreezeLayer()).addClass("zc-filter-frz").show()}g.stopPropagation()});$(Y).find("[elname=zc-record]").on("mousedown",function(g){F.showReportContextMenu(g,this)});$("ul[elName=zc-recMenuActionList]").data("zcpo")!=undefined&&$("ul[elName=zc-recMenuActionList]").data("zcpo").hide();$("ul[elName=zc-moreRecActionFloat]").data("zcpo")!=undefined&&$("ul[elName=zc-moreRecActionFloat]").data("zcpo").hide();$(Y).find("[elname=zc-record] .recordTab a").off("click").on("click",function(g){stopPropogation(g)});$(E).find("#zc-card-cont").find("[elname=zc-record]").off("click").on("click",function(g){var h=this;F.handleOnClickAction({element:h,event:g})});if(!ZCGlobal.isMobileLayout){$(E).find(".zc-marker-div").off("click").on("click",function(k){var l=$(this).attr("lat"),n=$(this).attr("lon");var g=$(E).find("div[lat='"+l+"'][lon='"+n+"']");if(g.length>1){return false}var h=$(this).attr("recordLinkId");var m=$(E).find("#zc-card-cont [elname='zc-record'][reclinkid='"+h+"']");if($(m).length==0){return }F.handleOnClickAction({element:m,event:k})})}},500)}).on("mouseout",function(H){var G=H.relatedTarget||H.toElement;if($(G).closest(".zc-multimap-card").length>0||$(G).hasClass("pin")||$(G).hasClass("zc-map-inner-icon")){clearTimeout(timer);return }$("#zc-card-cont").removeAttr("style");$("#zc-card-cont").fadeOut(300);$("ul[elName=zc-recMenuActionList]").data("zcpo")!=undefined&&$("ul[elName=zc-recMenuActionList]").data("zcpo").hide();$("ul[elName=zc-moreRecActionFloat]").data("zcpo")!=undefined&&$("ul[elName=zc-moreRecActionFloat]").data("zcpo").hide();clearTimeout(timer)});if(ZCGlobal.isMobileLayout){B="touchend"}$(".mapboxgl-canvas").on(B,function(G){if($(G.toElement).closest(".zc-multimap-card").length>0){return }$("#zc-card-cont").removeAttr("style");$("#zc-card-cont").fadeOut(300);$("ul[elName=zc-recMenuActionList]").data("zcpo")!=undefined&&$("ul[elName=zc-recMenuActionList]").data("zcpo").hide();$("ul[elName=zc-moreRecActionFloat]").data("zcpo")!=undefined&&$("ul[elName=zc-moreRecActionFloat]").data("zcpo").hide()})}function fillLayoutInfo(A,B){$(A).each(function(C){var E=$(this).attr("recordlinkid");var D=B.getQVLayout(E);$(this).attr("layout",D)})}var Model={ApplicationModel:{create:function(A){return new ApplicationModel(A)}},FormModel:{create:function(C,B,A){return new FormModel(C,B,A)}},FormButtonModel:{create:function(A){return new FormButtonModel(A)}},ReportModel:{create:function(A){return new ReportModel(A)}},RecordModel:{create:function(A,B){return new RecordModel(A,B)}},PageModel:{create:function(A){return new PageModel(A)}},ApprovalModel:{create:function(A){return new ApprovalModel(A)}}};function ModelFactory(D,A){var B;if(D!=undefined){var C=new ModelAudit(D);B=D}this.getMeta=function(){return B}}function ModelAudit(F){var E=[],C=["APPLINKNAME"];E.push(new MandatoryPredicate(F,C));E.push(new AlphaPredicate(F,C));var D=[],B=["APPLINKNAME","formLinkName"];D.push(new MandatoryPredicate(F,B));D.push(new AlphaPredicate(F,B));function A(G){if(G.length>0){for(i in G){G[i].evaluate()}}}return{auditDefault:function(){A([new NonEmptyPredicate(F)])},auditApp:function(){A(E)},auditForm:function(){A(D)}}}var Predicate=Class.extend({isNull:function(A){if(!A||A==undefined||A==""){return true}return false},isAlpha:function(A){if(/[^a-zA-Z]/.test(A)){return true}return false}});var NonEmptyPredicate=Predicate.extend({construct:function(A){this.meta=A},evaluate:function(){if(this.isNull(this.meta)||typeof (this.meta)!="object"){throw new InvalidArgumentException("Given argument is empty or invalid : "+this.meta)}}});var MandatoryPredicate=Predicate.extend({construct:function(B,A){this.meta=B;this.mandatoryArgs=A},evaluate:function(){var D=[];for(var C=0,B=this.mandatoryArgs.length;C<B;C++){var A=this.mandatoryArgs[C];if(this.isNull(this.meta[A])){D.push(A)}}if(D.length>0){throw new MissingArgumentException(D+" cannot be empty")}}});var AlphaPredicate=Predicate.extend({construct:function(B,A){this.meta=B;this.alphaArgs=A},evaluate:function(){var D=[];for(var C=0,B=this.alphaArgs.length;C<B;C++){var A=this.alphaArgs[C];if(this.isNull(this.meta[A])){D.push(A)}}if(D.length>0){throw new AlphaOnlyException(D+" cannot be empty")}}});var ApplicationModel=(function(A){ModelFactory.call(this,A,ObjectType.APP);this.getAppLinkName=function(){return A.APPLINKNAME};this.getAppDisplayName=function(){return A.appDispName};this.getComponents=function(){return A.appComponents};this.getAppDateFormat=function(){return A.appDateFormat};this.getAppTheme=function(){return A.APPTHEME};this.getAppThemeColor=function(){return A.APPTHEMECOLOR};this.isTabPane=function(){return AppTheme.isTab(A.APPTHEME)};this.isGridPane=function(){return AppTheme.isGrid(A.APPTHEME)};this.isSection=function(C){for(var B in A.APPPAGES){if(C==B){return true}}return false};this.hasDefaultComp=function(){return(A.componentName&&A.componentType)};this.getDefaultComp=function(){return A.componentName};this.fillCompMap=function(){LIB._pagesList=A.PAGESLIST;var C=[];for(var B in A.APPPAGES){C.push(B)}LIB._sectionsList=C};this.getDefaultCompType=function(){if(A.componentType=="form"){return"Form"}else{if(A.componentType=="report"){return"Report"}else{if(A.componentType=="page"){return"Page"}}}return A.componentName};this.isPaymentCallback=function(){return A.isPaymentCallback};this.getPaymentInfo=function(){var B="isPaymentCallback=true&pmt_returnType="+A.returnType+"&pmt_transactionId="+A.transactionId+"&recLinkId="+A.recLinkId;if(!LIB._isNull(A.zc_NextUrl)){B+="&zc_NextUrl="+A.zc_NextUrl}if(!LIB._isNull(A.zc_OpenUrlIn)){B+="&zc_OpenUrlIn="+A.zc_OpenUrlIn}if(!LIB._isNull(A.zc_SuccMsg)){B+="&zc_SuccMsg="+A.zc_SuccMsg}return B};this.getPaymentReturnType=function(){return };this.getTransactionId=function(){return };this.getRecLinkId=function(){return };this.hasCustomTheme=function(){return A.CUSTOMTHEME};this.getFeatures=function(){return A.FEATURES};this.isPreviewAction=function(){return A.ISPREVIEWACTION};this.showConnectionInLive=function(){return A.showConnectionInLive}});ApplicationModel.prototype=Object.create(ModelFactory.prototype);ApplicationModel.prototype.constructor=ApplicationModel;function DOMFactory(A){var B=A;this.getModel=function(){return B}}var DOM={ApplicationDOM:{get:function(A){return new ApplicationDOM(A)}},FormDOM:{get:function(A){return new FormDOM(A)}},ReportDOM:{get:function(A){return new ReportDOM(A)}},RecordDOM:{get:function(A){return new RecordDOM(A)}},PageDOM:{get:function(A){return A.isNewPages()?new NewPageDOM(A):new OldPageDOM(A)}},ApprovalDOM:{get:function(A){return new ApprovalDOM(A)}}};var ApplicationDOM=(function(K){var P=$("body"),B=document.getElementById("zc_inner_nav_menu"),M=document.getElementById("pane_nav_menu"),H=document.getElementById("zc_nav_menu"),Z=document.getElementById("app_search_box"),D=document.getElementById("searchInput"),A=document.getElementById("zc-account-settings"),R=document.getElementById("zc-account-dropdown"),X=document.getElementById("oldLiveSwitchEle"),O=document.getElementById("zc-adminpanel"),W=document.getElementById("adminPanel"),S=document.getElementById("editAppEl"),G=document.getElementById("zc-app-settings"),C=document.getElementById("zc-chat-settings"),Y=document.getElementById("zc-chat-dropdown"),T=document.getElementById("zc-searchform-settings"),E=document.getElementById("zc-searchform-dropdown"),V=document.getElementById("zc-app-dropdown");_headerTopBar=document.getElementsByClassName("header_top_bar");_selectLanguage=document.getElementById("zc-lang-select");_authorizeConnection=document.getElementById("zc-authorizeConnection");_selectLanguageDropDown=document.getElementById("zc-language-dropdown");_tooltipEl=$("[zc-tooltip=true]");_selectLanguageDropDowndup=document.getElementById("zc-language-dropdown-dup");_appAdminSettings=document.getElementById("zc-appadmin-settings");_appAdminDropdown=document.getElementById("zc-appadmin-dropdown");_appViewOption=document.getElementById("viewOption");var I=document.getElementById("backToSection");var Q=document.getElementById("zc-applicationHeaderBar"),F=document.getElementById("zc-applicationHeaderDiv"),J=document.getElementById("appViewContainer"),U=document.getElementById("zc-app-notification"),N=document.getElementById("zc-notification-dropdown");_appBetaNotificationUpdate=document.getElementsByClassName("beta_feature_update");_profilePreview=document.getElementById("zc-profile-preview");this.getOldLiveSwitch=function(){return X};this.getEditLink=function(){return S};this.getContainer=function(){return P};this.getNavbar=function(){return M};this.getNavbarComponents=function(){return $(M).find("ul.zc_tab_comp a")};this.getAppNavMenu=function(){return $(M).parent()};this.getNavMenu=function(){return H};this.getAdminPanelLink=function(){return O};this.getAdminPanel=function(){return W};this.getAppSettingsLink=function(){return G};this.getAppSettingsMenu=function(){return V};this.getAccountSettingLink=function(){return A};this.getAccountSettingMenu=function(){return R};this.getChatSettingLink=function(){return C};this.getChatSettingMenu=function(){return Y};this.getAppDataSearchBox=function(){return Z};this.getAppDataSearchInput=function(){return D};this.getSearchSettingsLink=function(){return T};this.getSearchSettingsMenu=function(){return E};this.getLanguageLink=function(){return _selectLanguage};this.getAuthorizationLink=function(){return _authorizeConnection};this.getLanguageDropDown=function(){return _selectLanguageDropDown};this.getLanguageDropDownDup=function(){return _selectLanguageDropDowndup};this.getTabs=function(){return $(M).find("a.zc_tab")};this.getNavbarTabComps=function(){return $(M).find("ul.zc_tab_comp")};_componentContainer=document.getElementById("zc-component");this.getComponentContainer=function(){return _componentContainer};this.getTab=function(a){return document.getElementById("tab_"+a)};this.getParentTab=function(a){return $(this.getNavbarComponents()).filter("a[id='"+a+"']").parents("ul:first").prev()};this.getSelectComponent=function(a){return $(this.getNavbarComponents()).filter("a[id='"+a+"']")};this.getCurrentSelectedComponent=function(){return $(this.getNavbarComponents()).filter("a.selected")};this.getCurrentSelectedTab=function(){return $(this.getNavMenu()).find("li.zc_nav_section > a.selected")};this.getSelectAllComponent=function(a){var b=$(this.getNavbarComponents()).filter("a[id='"+a+"']").parents("ul:first");return $(b).find("a")};this.getFirstComponent=function(a){var b=document.getElementById("tab_"+a);return $(b).next().find("a:first")};this.getFirstTab=function(){return $(H).find("li.zc_nav_section:first > a.zc_tab:first")};this.getHeaderMenus=function(){return $(".topbar_dropdown")};this.getAppTopBar=function(){return _headerTopBar};this.getToolTipEl=function(){return _tooltipEl};this.getAppAdminSettings=function(){return _appAdminSettings};this.getAppAdminDropdown=function(){return _appAdminDropdown};this.getAppViewOption=function(){return _appViewOption};this.getProfilePreview=function(){return _profilePreview};this.getDemoUserList=function(){return $(_profilePreview).find("ul.zc-demo-user-list-container")};this.getBackToGridButton=function(){return I};this.getApplicationHeaderBar=function(){return Q};this.getApplicationHeaderDiv=function(){return F};this.getApplicationViewContainer=function(){return J};this.getAppNotificationLink=function(){return U};this.getAppNotification=function(){return N};this.getAppBetaNotificationUpdateElem=function(){return _appBetaNotificationUpdate};this.getNotificationCloseElem=function(){$("#zc-notification-dropdown").find(".fa-close")};this.getNotificationCont=function(){return $(".zc-beta-notification")};this.getAppNavbarContainer=function(){return $(B)};this.getSharedAnalyticsCreateReportElement=function(){return document.getElementById("tSharedAnalyticsCreatenew")}});ApplicationDOM.prototype=Object.create(DOMFactory.prototype);ApplicationDOM.prototype.constructor=ApplicationDOM;var View={ApplicationView:{create:function(A,B){var C=DOM.ApplicationDOM.get(A);return new ApplicationView(C,B)}},FormView:{create:function(A,C){var B=DOM.FormDOM.get(A);return new FormView(B,C)}},ReportView:{create:function(C,A){var B=DOM.ReportDOM.get(C);return new ReportView(B,A)}},RecordView:{create:function(A,D,C){var B=DOM.RecordDOM.get(A,C.getDOM());return new RecordView(B,D,C)}},FieldView:{create:function(B,C,A){switch(B.getComponentType()){case FieldType.DATE:case FieldType.DATE_TIME:var D=new DateTimeDOM(B,A.getDOM());return new DateTimeView(D,C,A);case FieldType.TIME:var D=new TimeDOM(B,A.getDOM());return new TimeView(D,C,A);case FieldType.IMAGE:var D=new ImageDOM(B,A.getDOM());return new ImageView(D,C,A);case FieldType.SIGNATURE:var D=new SignatureDOM(B,A.getDOM());return new SignatureView(D,C,A);case FieldType.DROPDOWN:case FieldType.INLINE_PICK_LIST:case FieldType.POPUP_SINGLE:case FieldType.SYSTEM_LOOKUP:case FieldType.EXTERNAL_FIELD:var D=new DropdownDOM(B,A.getDOM());return new DropdownView(D,C,A);case FieldType.RADIO:case FieldType.INLINE_RADIO:var D=new RadioDOM(B,A.getDOM());return new RadioView(D,C,A);case FieldType.LIST:var D=new DropdownDOM(B,A.getDOM());return new MultiSelectView(D,C,A);case FieldType.CHECK_BOXES:var D=new CheckboxDOM(B,A.getDOM());return new CheckBoxView(D,C,A);case FieldType.FILE_UPLOAD:var D=new FileUploadDOM(B,A.getDOM());return new FileUploadView(D,C,A);case FieldType.AUDIO:var D=new AudioDOM(B,A.getDOM());return new MediaUploadView(D,C,A);case FieldType.VIDEO:var D=new VideoDOM(B,A.getDOM());return new MediaUploadView(D,C,A);case FieldType.RICH_TEXT_AREA:var D=new RichTextDOM(B,A.getDOM());return new RichTextView(D,C,A);case FieldType.MULTI_LINE:var D=new TextAreaDOM(B,A.getDOM());return new FieldView(D,C,A);case FieldType.ADDRESS:var D=new AddressDOM(B,A.getDOM());return new AddressView(D,C,A);case FieldType.NAME:var D=new NameDOM(B,A.getDOM());return new NameView(D,C,A);case FieldType.PHONE_NUMBER:var D=new PhoneNumberDOM(B,A.getDOM());return new PhoneNumberView(D,C,A);case FieldType.SUB_FORM_GRID:var D=new SubformDOM(B,A.getDOM());return new SubformView(D,C,A);case FieldType.DECISIONBOX:var D=new DecisionBoxDOM(B,A.getDOM());return new DecisionBoxView(D,C,A);case FieldType.URL:var D=new URLDOM(B,A.getDOM());return new URLView(D,C,A);case FieldType.PLAIN_TEXT:var D=new PlainTextDom(B,A.getDOM());return new PlainTextView(D,C,A);case FieldType.CURRENCY:var D=new CurrencyDOM(B,A.getDOM());return new CurrencyView(D,C,A);case FieldType.SECTION:var D=new SectionDom(B,A.getDOM());return new SectionView(D,C,A);case FieldType.SINGLE_SELECT:if(B.isIntegrationField()){var D=new IntegrationDOM(B,A.getDOM());return new IntegrationView(D,C,A)}case FieldType.ZIA_TEXT:var D=new FieldDOM(B,A.getDOM());return new ZiaTextView(D,C,A);case FieldType.ZIA_MULTILINE:var D=new TextAreaDOM(B,A.getDOM());return new ZiaMultiLineView(D,C,A);default:var D=new FieldDOM(B,A.getDOM());return new FieldView(D,C,A)}}},PageView:{create:function(A,C){var B=DOM.PageDOM.get(A);return A.isPreviewAction()?new PreviewPageView(B,C):A.isNewPages()?new NewPageView(B,C):new OldPageView(B,C)}},ApprovalView:{create:function(C,A){var B=DOM.ApprovalDOM.get(C);return new ApprovalView(B,A)}}};function ViewFactory(B){var A=B;this.getDOM=function(){return A}}var ApplicationView=(function(C,D){var E=true;var A=this;if(arguments.length==0){E=false}ViewFactory.call(this,C);var C=this.getDOM();var B=undefined;this._Events={_LoadComponent:function(H,Q,T,O,G){var S=this;if(E&&LIB._isNull(H)){if(!LIB._isNull(O)&&!O.isPreviewAction()){$(C.getBackToGridButton()).removeClass("zc-dem-back-active");$(C.getApplicationHeaderDiv()).hide();if(O.isGridPane()){if(ZCGlobal.isMobileLayout){$(".zc-mobile-back-button").hide();$("#zc-component").css("visibility","hidden")}LIB._stopLoading();return }}if(ZCGlobal.isMobileLayout){$(".zc-mobile-back-button").hide();$("#zc-component").empty();$("#zc-component").css("visibility","hidden");$(C.getAppNavMenu()).show();LIB._stopLoading();return }if(C.getTabs().length==0){return }H=C.getTabs().eq(0).attr("href");var J=location.href;if(J.lastIndexOf("#")==J.length-1){J=J.substr(0,J.length-1)}history.replaceState({},document.title,J+H)}if(E&&!LIB._isNull(H)){$(C.getBackToGridButton()).addClass("zc-dem-back-active")}if(ZCGlobal.isMobileLayout){$(".zc-mobile-back-button").hide()}var V=H==undefined?location.hash:H;if(V!==undefined){var F=V.indexOf("?");if(F>=0){V=decodeURIComponent(V.substring(0,F))+V.substring(F,V.length)}else{V=decodeURIComponent(V)}}var K=V.toLowerCase();if(K.indexOf("#form-publish:")==0||K.indexOf("#report-publish:")==0||K.indexOf("#page-publish:")==0){S._ShowPublishComp(K,$(Q));return false}var R=K.indexOf("#form:")!=-1?1:(K.indexOf("#report:")!=-1||K.indexOf("#view:")!=-1)?2:K.indexOf("#page:")!=-1?3:K.indexOf("#approvals:")!=-1?5:K.indexOf("#sharedanalytics:")!=-1?6:(K.indexOf(":")==-1&&K.substring(1).length!=0)?4:-1;var X=(R==1||R==2||R==3||R==5||R==6)?V.substr(V.indexOf(":")+1):V.substring(1);var N=X;if(N.indexOf("?")!=-1){N=N.substring(0,N.indexOf("?"))}if(R==3&&!LIB._isHtmlPage(N)&&LIB._isSection(N)){R=4;X=V.substr(V.indexOf(":")+1)}if(E&&R==4){var U=C.getFirstComponent(X);if(U.length){V=U.attr("href")}else{var M=C.getFirstTab();if(M.length){V=M.attr("href")}}if(LIB._isNull(V)){location=window.ZCPrevURL;return }K=V.toLowerCase();R=K.indexOf("#form:")!=-1?1:(K.indexOf("#report:")!=-1||K.indexOf("#view:")!=-1)?2:K.indexOf("#page:")!=-1?3:K.indexOf("#approvals:")!=-1?5:(K.indexOf(":")==-1&&K.substring(1).length!=0)?4:-1;X=(R==1||R==2||R==3||R==5)?V.substr(V.indexOf(":")+1):V.substring(1);if(R==4){location.hash=V;return }}var P=X;if(P.indexOf("?")!=-1){P=P.substring(0,P.indexOf("?"))}if(R==2&&LIB._isHtmlPage(P)){R=3}var I=function(k,h,d){var c=$("a[elname=zc-saveViewRecsEl]").attr("status");if(c=="enable"){$.confirm({message:i18n.spreadsheetcnfm,success:function(){$("a[elname=zc-saveViewRecsEl]").attr("status","disables");S._LoadComponent(H,Q,T,O)},failure:function(){return }});return false}var a=getConfig();var e=function(o,q){var p=(h.indexOf("?")!=-1)?h.substr(0,h.indexOf("?")):h;if(o.indexOf("#")>-1){Console.log(o);o=o.replace(/#/g,encodeURIComponent("#"));Console.log(o)}if(k==2){q.urlParams=getURLParamsJSON(o)}return $.zcAjax({url:o,method:"GET",beforeSend:function(r){LIB._startLoading();if(O!=undefined&&O.isPreviewAction()){$(".zc-dem-customize-fixed").hide()}if(E){S._SelectComponent(p)}},data:q,success:function(t){t=randomStringCalculator(t,Q,k);if(T){S._SetEditLink(R,X);S._SetSwitchLink(R,X)}if(getConfig().useCompression){var s=new Requires(k);require(s.get(),s.getPromise(function(){f(t,Q,k);Y(O)}))}else{f(t,Q,k);Y(O)}if(!LIB._isNull(C)){$(C.getAppNavMenu()).addClass("zc-dem-full-page-nav")}if(!LIB._isNull(O)&&O.isGridPane()&&!ZCGlobal.isMobileLayout){$(C.getApplicationHeaderDiv()).show()}},error:function(v,s,u){if(ZCGlobal.isMobileLayout){$(".zc-mobile-back-button").show()}LIB._stopLoading();if(!LIB._isNull(Q)){$(Q).html(v.responseText);if(ZCGlobal.isMobileLayout){$("#zc-component").css("visibility","visible");$(C.getAppNavMenu()).hide()}if(!LIB._isNull(O)&&O.isPreviewAction()&&!$(".zc-dem-customize-fixed").length){var r=$('<div class="zc-dem-customize-fixed">').append($("<a/>").text(i18n.openbuilder));$(Q).append(r);var t=k==1?"formbuilder":(k==2?"reportbuilder":(k==3?"pagebuilder":""));$('.zc-dem-customize-fixed a[elname="showFieldMapping"]').attr("href",ZCGlobal.appbuilderserverprefix+"/appbuilder/"+GlobalUrls.getAppUrlFragment()+"/"+t+"/"+p+"/edit");$("#zc-component, .zc-dem-customize-fixed").off("click").on("click",function(y){var x="showBuilder";if(y.target.nodeName==="A"){if($(y.target).attr("elname")=="showFieldMapping"){x="showFieldMapping"}}else{if($(this).find("[elname=reportpreviewcontent]").length==1){x="showFieldMapping"}}y.preventDefault();var z={};z.isInitBuilder=D.initBuilder;z.compName=p;z.type=k;z.callFunc=x;var w=ZCGlobal.appbuilderserverprefix;parent.postMessage(z,w);stopEventBubbling(y)})}}}})};var f=function(s,p,r){if(!LIB._isNull(p)){$(p).html(s.HTML)}var o;switch(r){case 1:o=Controller.FormController;previewType=FormControllerType.PREVIEWFORM;break;case 2:o=Controller.ReportController;previewType=ReportType.PREVIEW_REPORT;break;case 3:o=Controller.PageController;previewType=PageType.PREVIEW_PAGE;break;case 5:o=Controller.ApprovalController;break}ApplicationView.componentModel=s.MODEL;if(o!=undefined){if(O!=undefined&&O.isPreviewAction()){o=o.create({model:s.MODEL,type:previewType,html:s.HTML,container:p,data:s.RECORD})}else{o=o.create({model:s.MODEL,html:s.HTML,container:p,data:s.RECORD,dynamicMeta:s.DYNAMIC_META});if(ZCGlobal.isMobileLayout){$(".zc-mobile-home-button").hide();$("#zc-component").css("visibility","visible");if(!LIB._isNull(C)){$(C.getAppNavMenu()).hide()}}}}if(r==3&&typeof doaction==="function"){doaction()}if(window.self!==window.top&&O!=undefined&&O.isPreviewAction()){var q=r==1?"formbuilder":(r==2?"reportbuilder":(r==3?"pagebuilder":""));$('.zc-dem-customize-fixed a[elname="showFieldMapping"]').attr("href",ZCGlobal.appbuilderserverprefix+"/appbuilder/"+GlobalUrls.getAppUrlFragment()+"/"+q+"/"+P+"/edit");$("#appViewContainer").on("click",function(t){var u={};u.callFunc="documentClick";parent.postMessage(u,ZCGlobal.appbuilderserverprefix)});$("#zc-component, .zc-dem-customize-fixed").off("click").on("click",function(v){var u="showBuilder";if(v.target.nodeName==="A"){if($(v.target).attr("elname")=="showFieldMapping"){u="showFieldMapping"}else{if($(v.target).attr("elname")=="renameReport"){u="renameReport"}else{if($(v.target).attr("elname")=="deleteReport"){u="deleteReport"}}}}else{if($(this).find("[elname=reportpreviewcontent]").length==1){u="showFieldMapping"}}v.preventDefault();var w={};w.isInitBuilder=D.initBuilder;w.compName=P;w.type=r;if(r==1){w.isThirdPartyModule=$(".zc-dem-customize-fixed a").attr("isthirdpartyform")}w.callFunc=u;var t=ZCGlobal.appbuilderserverprefix;parent.postMessage(w,t);stopEventBubbling(v)})}initWalkThrough();if(ZCGlobal.isMobileLayout){$(".zc-mobile-back-button").show()}if(r!=1&&o.removeLoading()){LIB._stopLoading()}};var Y=function(o){if(!LIB._isNull(o)&&o.isPreviewAction()){$(".zc-dem-customize-fixed").hide();setTimeout(function(){$(".zc-dem-customize-fixed").fadeIn(50)},500)}};var g=function(){if(window.sheetInstances!=undefined){var p=window.sheetInstances;var o=p.length;for(i=0;i<o;i++){if((p[i]!=undefined)&&(p[i].container!=null)){p[i].destroy()}}window.sheetInstances=[]}};var n=(ZCGlobal.isPreviewAction)?ZCGlobal.previewAppurl:ZCGlobal.appurl;var m=function(){e(n+LIB._componentUrlPrefix.form+h,d)};var l=function(){e(n+LIB._componentUrlPrefix.report+h,d)};var b=function(){if(ZCGlobal.isReadOnly){$.alert({msg:i18n["readonly.noaccessforpages"]});LIB._stopLoading();return }e(n+LIB._componentUrlPrefix.page+h,d)};var Z=function(){e(n+LIB._componentUrlPrefix.approval+h)};switch(k){case 1:return m();case 2:return l();case 3:return b();case 5:return Z();default:return function(){}}}(R,X,{});var W={Type:R,Name:X};if(D!=undefined&&D.isBuildPreview&&!G){S._notifyBuilder(W)}return W},_loadConnectionAuthorizePopup:function(){var G={wrapperClass:"zc-connection-popup",bodyClass:"zc-auth-connection",type:ZCModalConstants.JIT_MODAL,zcmodalId:"connectionAuthPopup",title:i18n["zc.live.connections.authorize.header"],showPreloader:true,buttons:[{name:i18n.done,type:ZCModalConstants.MODAL_SUBMIT}],buildDOM:function(){return getModalProgress()},afterOpen:function(M){$(M).parents(".popupbox-wrapper").addClass("zc-popup-fixed-header");$(M).parents(".popupbox").addClass("formWithinPopup")},afterClose:function(){if(ZCGlobal.isMobileLayout){unfreeze({container:$("body")});$(".zc-mobile-back-button").hide()}}};var J=$.zcmodal(G);var F=J.getBody();I(F);function I(N){var O={contextLoader:{showAuthorizeLoader:H,showAuthLoader:K,hideAuthLoader:function(P){if(P!=undefined){$.alert({msg:i18n["zc.live.connections.authorize.service.fail"].replace("{0}",P),desc:i18n["zc.live.connections.authorize.service.fail.tryagain"]})}},showAuthSuccess:function(P){if($zcmodal.getModal("authPopup")!=undefined){$zcmodal.getModal("authPopup").close()}I($zcmodal.getModal("connectionAuthPopup").getBody())}},integContext:IntegrationContext.LIVE};var M=$("#connectionAuthorization").html();$.ajax({url:"/"+GlobalUrls.getAppUrlFragment()+"/connection/references",type:"GET",dataType:"json",success:function(Q,P,S){Q.componentName=ZCGlobal.appDisplayName;Q.isSuperAdmin=ZCGlobal.isAdmin;var R=Handlebars.compile(M);$(N).html(R(Q));ZCIntegAuthorize.bindAuthEvents(N,O)},error:function(P){closeFirstPopup()}})}function K(){var M=$.zcmodal({type:ZCModalConstants.JIT_MODAL,showPreloader:true,showClose:false,closeOnEsc:false,closeOnAnyClick:false,hideFooter:true,bodyClass:"show-import-dialog",wrapperClass:"zc-import-dialog",buildDOM:function(){return getModalProgress()}})}function H(){var M=$.zcmodal({type:ZCModalConstants.JIT_MODAL,showPreloader:true,showClose:false,closeOnEsc:false,closeOnAnyClick:false,hideFooter:true,buildDOM:function(){return'<div class="zc-authorizing-popup"><div class="zc-dem-loader-container"><div class="ball-pulse-container"><div></div><div></div><div></div><div></div><p class="zc-authorizing-load-txt">'+i18n["zc.live.connections.authorize.processing"]+"</p></div></div></div>"}})}},_sharedanalytics:function(){var F=(ZCGlobal.isPreviewAction)?ZCGlobal.previewAppurl:ZCGlobal.appurl;$.ajax({type:"GET",url:"/"+GlobalUrls.getAppUrlFragment()+"/sharedanalytics/createnew",success:function(G){LIB._stopLoading();$.zcmodal({type:ZCModalConstants.JIT_MODAL,showPreloader:true,popupboxClass:"zc-shared-analytics-popup",buildDOM:function(){return G},beforeShow:function(H){new SharedAnalyticsController(F).bindEvents();$(".zc-shared-analytics-popup").closest(".popupbox-wrapper").addClass("zc-shared-analytics-wrapper")},closeOnEsc:false,closeOnAnyClick:false})}})},_LoadScript:function(){closeFirstPopup();var H=location.hash;var Q=H.substr(H.indexOf(":")+1);var S=false;if(window.ZCCurrURL&&window.ZCCurrURL.split("?")[1]){var G=window.ZCCurrURL.split("?")[1];var I=G.split("&");for(var M=0;M<I.length;M++){var P=(I[M]).split("=");if(P[0]=="zc_LoadIn"&&P[1]=="dialog"){S=true;break}}}if(Q=="page.back"){window.location=window.ZCPrevURL}else{if(Q=="page.reload"||Q=="page.refresh"){if(!S){window.location=window.ZCCurrURL}else{window.location=window.ZCPrevURL}}else{if(Q=="page.close"){window.close()}else{if(Q=="dialog.close"){if(!S){if((window.ZCCurrURL).indexOf("#Script:")!=-1&&(window.ZCCurrURL).indexOf("#")!=(window.ZCCurrURL).indexOf("#Script:")){window.location=window.ZCCurrURL}else{history.replaceState({},document.title,window.ZCCurrURL)}}else{window.location=window.ZCPrevURL}}else{if(Q=="dialog.closeAll"){closeAllPopup();if(!S){if((window.ZCCurrURL).indexOf("#Script:")!=-1&&(window.ZCCurrURL).indexOf("#")!=(window.ZCCurrURL).indexOf("#Script:")){window.location=window.ZCCurrURL}else{history.replaceState({},document.title,window.ZCCurrURL)}}else{window.location=window.ZCPrevURL}}else{if(Q.indexOf("page.open")!=-1){var O=Q.indexOf('"');var K=Q.lastIndexOf(",");var T=Q.slice(O+1,K);T=T.slice(0,T.lastIndexOf('"'));var R=Q.slice(K+1,Q.lastIndexOf('"'));R=R.slice(R.indexOf('"')+1);var F=$.trim(T);var N=$.trim(R);var J=F.slice(0,F.indexOf(":"));if(J=="Form"||J=="Report"||J=="Page"||J=="View"||J=="Script"){F="#"+F}openWindowTask(F,N)}else{if(Q=="page.parent.close"){getParentWindow().close()}else{if(Q=="page.parent.back"){getParentWindow().location=getParentWindow().ZCPrevURL}else{if(Q=="page.parent.reload"||Q=="page.parent.refresh"){getParentWindow().location=getParentWindow().ZCCurrURL}}}}}}}}}},_ShowPublishComp:function(G,F){$(C.getTabs()).removeClass("selected zc_expand zc_expand_active");Controller.PublishComponentController.create(G,F)},_ChangeHash:function(H){var G=this;window.ZCPrevURL=window.location.href;window.ZCCurrURL=window.location.href;$(window).off("hashchange").on("hashchange",function(J){if(ZCGlobal.isMobileLayout){if(location.hash==""){hidePopover();closeAllPopup();$(".zc-date-picker-enabled").data("dtpicker")!=undefined?$(".zc-date-picker-enabled").data("dtpicker").destroy():null;$("#ze_popups").remove();$(".intl-tel-input.iti-container").trigger("click");$(".zc-mobile-back-button").hide();if(!$(".zc-mobile-home-button").is(":visible")){$(".zc-mobile-home-button").show()}var M=$(".full_pane_nav");if(!$(M).is(":visible")){$(M).show()}if($("#zc-component").is(":visible")){$("#zc-component").empty();$("#zc-component").css("visibility","hidden");$(C.getAppNavMenu()).show()}}}if(H.isGridPane()){if(location.hash==""){$(C.getBackToGridButton()).removeClass("zc-dem-back-active");$(C.getAppNavMenu()).removeClass("zc-dem-full-page-nav");$(C.getApplicationHeaderDiv()).hide()}else{$(C.getBackToGridButton()).addClass("zc-dem-back-active")}}var K=true;var I=location.hash.toLowerCase();if((location.hash).indexOf("#Script:")!=-1&&(location.hash).indexOf("#")==(location.hash).indexOf("#Script:")){G._LoadScript();return false}else{if(I.indexOf("#form-publish:")==0||I.indexOf("#report-publish:")==0||I.indexOf("#page-publish:")==0){G._ShowPublishComp(I,$(C.getComponentContainer()));return false}}try{if($.IsLoadInDialog(location.hash)){var N=location.hash;history.replaceState({},document.title,window.ZCCurrURL);G._LoadInDialog(J,N,H);K=false;return }if(!$.browser.msie&&J.originalEvent.oldURL.indexOf("#Script:")==-1){window.ZCPrevURL=J.originalEvent.oldURL}window.ZCCurrURL=(!$.browser.msie)?J.originalEvent.newURL:"/"+GlobalUrls.getAppUrlFragment()}catch(J){Console.log(J)}G._LoadComponent(location.hash,C.getComponentContainer(),true,H)});$(C.getNavbarComponents()).add(C.getTabs()).on("click",function(){if($(this).attr("id")!=undefined&&$(this).attr("id")=="sanavigationelement"){A._Events._sharedanalytics();event.preventDefault();return }if(location.hash==$(this).attr("href")){G._LoadComponent(location.hash,C.getComponentContainer(),true,H)}if(!LIB._isNull(H)&&H.isGridPane()){$(C.getBackToGridButton()).addClass("zc-dem-back-active")}});var F=$(C.getBackToGridButton());$(F).off("click").on("click",function(){var I=$($(C.getApplicationViewContainer()).find(".inner #zc-component"));$(C.getBackToGridButton()).removeClass("zc-dem-back-active");$(C.getAppNavMenu()).removeClass("zc-dem-full-page-nav");$(C.getComponentContainer()).empty();$(C.getApplicationHeaderDiv()).hide();history.pushState("",document.title,window.location.pathname+window.location.search)})},_LoadInDialog:function(J,K,H){var G=this;var I=$(getModalProgress()).zcmodal({closeOnEsc:false});var F=I.getBody();G._LoadComponent(K,F,false,H)},_NavigateHeader:function(){var F=this;var H=function(J,M){var I=function(){$(C.getHeaderMenus()).hide();$(C.getAppNotification()).hide();$(M).hide();$(".top_navbar a.selected").removeClass("selected")};$(J).on("click",function(O){var N=$(M).is(":visible");I();$(this).addClass("selected");if(N){$(M).hide()}else{if(ZCGlobal.isMobileLayout){if(!$("body").hasClass("zc-freeze-scroll-mask")){ifreeze({container:$("body"),clickCallBack:function(){unfreeze({container:$("body")})}})}if($(this).attr("id")=="zc-account-settings"){$("#zc-account-dropdown .popupClose").off("click").on("click",function(P){$(this).hide();unfreeze({container:$("body")})});$("#zc-account-dropdown .popupClose").show()}}$(M).show()}LIB._stopPropagation(O)});$("#changeUserEmail").unbind("click").bind("click",function(N){$.zcmodal({title:$("#emailChangePopupHeader").html(),type:ZCModalConstants.JIT_MODAL,width:500,bodyClass:"zc-change-email-popup",buttons:[{id:"proceedBTN",name:$("#emailChangePopupProceed").html(),type:ZCModalConstants.MODAL_SUBMIT,action:function(){K()}},{id:"cancelBTN",name:i18n.cancel,type:ZCModalConstants.MODAL_CANCEL,action:function(){}}],buildDOM:function(){return $("#emailChangePopupBody").html()}})});function K(){var O=$("#changeUserEmail").attr("portalUrl");var N={};N.zccpn=ZCGlobal.csrfToken;$("#loadingEl").show();$.ajax({type:"POST",data:N,url:O+"/u/e/sendVerificationCode",success:function(){$("#loadingEl").hide();window.location.href=O+"/u/e"},failure:function(){$("#loadingEl").hide()}})}$($(C.getContainer())).on("click",function(N){if(!(($(N.target).parents("#zc-app-dropdown").length==1)||($(N.target).parents("#zc-account-dropdown").length==1)||($(N.target).parents("#zc-notification-dropdown").length==1))){I()}});$(document).on("click",function(N){if(!(($(N.target).parents("#zc-notification-dropdown").length==1)||$(N.target).hasClass("Profile-info")||($(N.target).parents(".Profile-info").length==1))){I()}})};if(C.getDemoUserList().length==0||C.getDemoUserList()[0].querySelector("a[selected=selected]")==null){$(C.getProfilePreview()).find("#zc-current-demo-user-name").text("-MySelf-");H(C.getAccountSettingLink(),C.getAccountSettingMenu())}H(C.getAppSettingsLink(),C.getAppSettingsMenu());H(C.getChatSettingLink(),C.getChatSettingMenu());H(C.getSearchSettingsLink(),C.getSearchSettingsMenu());H(C.getLanguageLink(),C.getLanguageDropDown());H(C.getAppAdminSettings(),C.getAppAdminDropdown());H(C.getAppNotificationLink(),C.getAppNotification());if(!ZCGlobal.isMobileLayout){$(C.getChatSettingLink()).on("mouseover",function(){var I=C.getChatSettingMenu();if($(C.getLanguageLink()).length){I.style.top="123px"}});$(C.getLanguageLink()).on("mouseover",function(){langDropdown=$(C.getLanguageDropDown()).find("ul");var J=langDropdown.children().length;var I=C.getLanguageDropDown();if(J<=2){I.style.height="81px"}})}$(C.getAuthorizationLink()).off("click").on("click",function(){F._loadConnectionAuthorizePopup()});$(C.getLanguageDropDown()).find("ul li").on("click",function(){var J=$(this).attr("langvalue");if(!LIB._isNull(J)){var I="zc_"+ZCGlobal.applicationId+"_"+ZCGlobal.loginName+"_language";$._setCookie(I,J);window.location.reload()}});$(C.getLanguageDropDownDup()).find("a").on("click",function(){var J=$(this).attr("langvalue");if(!LIB._isNull(J)){var I="zc_"+ZCGlobal.applicationId+"_"+ZCGlobal.loginName+"_language";$._setCookie(I,J);window.location.reload()}});$(C.getEditLink()).on("click",function(J){var I=(J.ctrlKey||J.metaKey)&&!J.altKey;if(!I){LIB._startLoading()}});$(C.getAppNotificationLink()).on("click",function(){A._Events._betaNotificationUpdate(this)});$(C.getAppBetaNotificationUpdateElem()).off("click").on("click",function(){A._Events._betaFeatureUpdate(this)});$(".zc-my-account-link").off("click").on("click",function(){$(C.getHeaderMenus()).hide()});var G;if(!ZCGlobal.isMobileLayout){$(C.getAccountSettingLink()).find(".zc-acc-settings-user-name").on("mouseover",function(M){var I=10;var K=$(this).parent().width();var N=$(this).width();var O=$(this).parent().find("img").outerWidth(true);if(K<=(N+O+I)){var J=this;G=setTimeout(function(){$(J).width($(J).width());$(J).height($(J).height());$(J).find(".navbar_user_name").css({position:"absolute",width:"auto"});var Q=$(J).find(".navbar_user_name").width();$(J).parent().addClass("zc-tool-marquee");var P=parseInt($(J).width()-Q);$(J).find(".navbar_user_name").css({left:P+"px"})},700)}}).on("mouseout",function(){clearTimeout(G);var I=this;setTimeout(function(){$(I).css({width:"auto",height:"auto"});$(I).find(".navbar_user_name").css({position:"relative",width:"100%"})},600);$(this).parent().removeClass("zc-tool-marquee");$(this).find(".navbar_user_name").css({left:0+"px"})})}postListener=function(I){if(I.origin){var J=I.data;if(J!=undefined&&J.type=="xml"){SharedAnalyticsZCReportEditor.saveView(J.data)}else{if(J!=undefined&&J.type=="addColumn"){SharedAnalyticsZCReportEditor.openReportBuilder()}}}};postListenerRemove=function(I){return false};if(window.addEventListener){window.addEventListener("message",postListener,false)}else{window.attachEvent("onmessage",postListener)}$(C.getSharedAnalyticsCreateReportElement()).off("click").on("click",function(I){A._Events._sharedanalytics();I.preventDefault()});$(C.getAppViewOption()).find("li a").off("click").on("click",function(){$(".zc-live-deviceMenu").removeClass("liveHeader-menu-active");$(this).addClass("liveHeader-menu-active");var J=$(this).attr("viewchoice");var I=$("#appViewContainer");$.ajax({type:"GET",data:{appViewOption:J},url:"/"+GlobalUrls.getAppUrlFragment(),beforeSend:function(){$(".zc_live_adminbar").addClass("mob-tablet-bg");I.fadeOut("500",function(){I.empty()});$("#loadingEl").toggle()},success:function(K){I.fadeIn("slow",function(){I.html(K);A._Events._AppSendMail();if(J=="1"){var O=new ZCBoot(bootConfig);O.boot();setTimeout(function(){cssLoaded=true},500);Preview.Live.reset();try{if(ZCPath.appJs.mobileLiveJs!=undefined){var M=document.head.querySelectorAll("script[src='"+ZCPath.appJs.mobileLiveJs+"']");if(M!=null){M.forEach(function(R){R.parentNode.removeChild(R)})}window.console.log("Removed unused JS!")}}catch(Q){window.console.log(Q)}}else{var N=false;try{N=document.head.querySelector("script[src='"+ZCPath.appJs.mobileLiveJs+"']")!=null;if(N){window.console.log("File already loaded!")}}catch(Q){window.console.log(Q)}var P=function(){A._Events._initializePreviewCSS(J,K)};if(N){P()}else{loadFiles([ZCPath.appJs.mobileLiveJs]).then(function(){P()})}}});$("#loadingEl").toggle();if(J=="1"){$(".zc_live_adminbar").removeClass("mob-tablet-bg")}}})});$(C.getDemoUserList()).find(".zc-demo-user-id-link").off("click").on("click",function(){var I=this.getAttribute("userid");if(I==null){I=";expires="+new Date().toUTCString()}document.cookie=ZCGlobal.applicationId+"="+I+";path=/";window.location.reload()});if(ZCGlobal.isMobileLayout){$(".zc-mobile-back-button").on("click",function(I){$("#zc-component").empty();$("#zc-component").css("visibility","hidden");$(C.getAppNavMenu()).show();$(this).hide();$(".zc-mobile-home-button").show();$(".zc-mobile-frz-layer").hide();history.pushState("",document.title,window.location.pathname+window.location.search);hidePopover()})}},_AppSendMail:function(){$("#zc-sendMailConfirm").on("click",function(){var F=$("#zc-sendMail").val();$.ajax({type:"GET",data:{sendMailId:F},url:"/"+GlobalUrls.getAppUrlFragment()+"/sendAppLinkMail",success:function(G){$.successMsg("Sent Successfully!",1000);$("#zc-sendMail").val("")}})})},_initializePreviewCSS:function(N,G){var F=$(G);var I=[];var O=[];var K=(new ZCAppearance({}));$('link[href*="mobile-themes"]').remove();if(F.length>0){for(var H=F.length-1;H>=0;H--){var M=F[H];if(M.tagName==="LINK"){I.push(M.getAttribute("href"))}}for(var H=0,J=I.length;H<J;H++){O.push(new Promise(function(Q,P){K.appendStylesheet(I[H],function(){Q()})}))}Promise.all(O).then(function(P){A._Events._initializePreviewLive(N)})}},_initializePreviewLive:function(F){setTimeout(function(){if(typeof liveComponents!=="undefined"){Preview.Live.reset();var G={liveComponents:liveComponents,mobileCompsJSON:liveComponents,mobileContent:liveComponents.liveContents[0],deviceType:F};$Device.init(G);$Device.isLiveMode=true;Preview.Live.initialize()}})},_SelectComponent:function(F){if(F==undefined){var I=location.hash;var H=I.toLowerCase();var G=H.indexOf("#form:")!=-1?1:(H.indexOf("#report:")!=-1||H.indexOf("#view:")!=-1)?2:H.indexOf("#page:")!=-1?3:(H.indexOf(":")==-1&&H.substring(1).length!=0)?4:-1;var F=(G==1||G==2||G==3||G==5)?I.substr(I.indexOf(":")+1):I.substring(1);F=F.indexOf("?")!=-1?F.substring(0,F.indexOf("?")):F}$(C.getTabs()).removeClass("selected zc_expand zc_expand_active");$(C.getParentTab(F)).addClass("selected zc_expand zc_expand_active");$(C.getSelectAllComponent(F)).removeClass("selected");$(C.getCurrentSelectedComponent()).removeClass("selected");$(C.getSelectComponent(F)).addClass("selected")},_SetEditLink:function(F,H){var G=window.location.protocol+"//"+ZCGlobal.oldliveserver+"/appbuilder/"+ZCGlobal.scopeName+"/"+ZCGlobal.appLinkName;if(F==5){G=G+"/workflow/edit"}else{F=F==1?"form":F==2?"report":F==3?"page":"";componentName=H.indexOf("?")!=-1?H.substring(0,H.indexOf("?")):H;G=G+"/"+F+"/"+componentName+"/edit"}$(C.getEditLink()).attr("href",G)},_SetSwitchLink:function(F,H){var G=window.location.protocol+"//"+ZCGlobal.oldliveserver+"/"+GlobalUrls.getAppUrlFragment();F=F==1?"#Form":F==2?"#View":F==3?"#View":"";G=G+"/"+F+":"+H;$(C.getOldLiveSwitch()).attr("slink",G)},_switchToOldLive:function(){$.ajax({beforeSend:function(){this.data=this.data+"&"+ZCGlobal.csrfTokenName+"="+ZCGlobal.csrfToken;LIB._startLoading()},method:"POST",data:"newlive=false",url:"/"+ZCGlobal.contextName+"/"+GlobalUrls.getAppUrlFragment()+"/switchlive",success:function(){window.location=$(C.getOldLiveSwitch()).attr("slink")}})},_betaFeatureUpdate:function(F){var G;if($(F).text().trim()==="apply"){G=1;$(F).removeClass("zc-live-primary-btn").addClass("zc-live-secondary-btn");$(F).text("rollback");$(F).closest("li").find(".zc_notification_header .zc-beta-check").show()}else{G=0;$(F).removeClass("zc-live-secondary-btn").addClass("zc-live-primary-btn");$(F).text("apply");$(F).closest("li").find(".zc_notification_header .zc-beta-check").hide()}$.ajax({beforeSend:function(){this.data=this.data+"&"+ZCGlobal.csrfTokenName+"="+ZCGlobal.csrfToken;LIB._startLoading()},method:"POST",data:{featureId:$(F).attr("featureId"),mode:G},url:"/"+GlobalUrls.getAppUrlFragment()+"/betaFeatureUpdate",success:function(){LIB._stopLoading();$(C.getAppNotification()).hide();var H=$(F).parents(".zc_feature_list").find(".zc_notification_header").text().trim();msg=(G==1)?'"'+H+'" '+i18n["zc.live.notification.applysuccessmsg"]:'"'+H+'" '+i18n["zc.live.notification.rollbacksuccessmsg"];var I=(G==1)?i18n["zc.live.notification.successcontactmsg"]:i18n["zc.live.notification.rollbackcontactmsg"];$.alert({msg:msg,desc:I});if($(F).attr("featureId")=="299"){D.reload()}}})},_betaNotificationUpdate:function(G){var F=ZCGlobal.csrfTokenName+"="+ZCGlobal.csrfToken;$.ajax({method:"POST",url:"/"+GlobalUrls.getAppUrlFragment()+"/betaNotificationUpdate",data:F,success:function(){$("#notifyCount").hide()}})},_AdjustTabPane:function(O){if(!cssLoaded){setTimeout(function(){A._Events._AdjustTabPane(O)},100);return false}var M=$(C.getNavMenu()).width(),I=0,K=false,F=[];if(O==4){M=M-$(C.getAppTopBar()).width()}var G=$('<li class="pane_hidden_menu"><a href="javascript:none;" class="hidden_menu_icon"><i class="fa fa-ellipsis-v"></i></a></li>').append('<ul class="hidden_menu"><ul/>');$(C.getNavMenu()).find("li.zc_nav_section").each(function(){I+=$(this).width();if((I+80)>M){F.push(this);K=true}});if(K){$(C.getNavMenu()).append(G);for(var J=0,H=F.length;J<H;J++){var N=F[J];$(G).find("ul.hidden_menu").append(N)}}},_BindJscroll:function(F){if(!cssLoaded){setTimeout(function(){A._Events._BindJscroll()},100);return false}B=$(C.getAppNavMenu()).zcScrollPane({VerticalBarWidth:4,scrollPosition:ZCGlobal.appDirectionMeta.scrollerPosition});if(F.getAppTheme()=="9"){A._Events._setDynamicComponentTop()}A._Events._ScrollToSelectedTab()},_ScrollToSelectedTab:function(){var G=C.getCurrentSelectedTab();if(B!=undefined&&!LIB._isNull(G)){var F=$(B.scrollWrapperDiv()).height();var H=$(G).parent().position().top;if(F<H){B.scrollToPosition(H,false,0)}}},_bindAppDataSearchEvent:function(){var F=$(C.getAppDataSearchInput()).is(":visible");$(C.getAppDataSearchBox()).on("click",function(G){G.stopPropagation();if(!F){$(C.getAppDataSearchInput()).show();$(C.getAppDataSearchBox()).addClass("search_container_selected")}$(C.getAppDataSearchInput()).focus()});$(document).on("click",function(){if(!F){$(C.getAppDataSearchInput()).hide();$(C.getAppDataSearchBox()).removeClass("search_container_selected")}})},_bindToolTip:function(G){if(!ZCGlobal.isMobileLayout){$(C.getToolTipEl()).on("mouseover",function(H){$(this).find("span").show()});$(C.getToolTipEl()).on("mouseout",function(H){$(this).find("span").hide()});var F;$(C.getNavMenu()).find(".zc-nav-title").on("mouseover",function(M){var H=10;var I=$(this).parents("ul:first").hasClass("pane_nav_submenu");if(I){H=0}var K=$(this).parent().width();var N=$(this).width();var O=$(this).parent().find("i").outerWidth(true);if(G.isTabPane()){if(!I&&N<(208-O)){return }if(I&&N<(218-O)){return }}var O=$(this).parent().find("i").outerWidth(true);if(K<=(N+O+H)){var J=this;F=setTimeout(function(){$(J).width($(J).width());$(J).height($(J).height());$(J).find(".title").css({position:"absolute",width:"auto"});var Q=$(J).find(".title").width();$(J).parent().addClass("zc-tool-marquee");var P=parseInt($(J).width()-Q);$(J).find(".title").css({left:P+"px"})},700)}}).on("mouseout",function(){clearTimeout(F);var H=this;setTimeout(function(){$(H).css({width:"auto",height:"auto"});$(H).find(".title").css({position:"relative",width:"100%"})},600);$(this).parent().removeClass("zc-tool-marquee");$(this).find(".title").css({left:0+"px"})})}},_showDynamicToolTip:function(H){var G=$('<span class="zc-dynamic-tooltip">'+$(H).text()+"</span>");$("body").append(G);var F=$(H).offset().top+$(H).height()+5;$(G).css({top:F+"px"}).show()},_preventSection:function(G){var F=this;$(C.getTabs()).on("click",function(H){$(".selected-init").removeClass("selected-init");if($(this).attr("id")!=undefined&&$(this).attr("id")!=="tab_sharedanalticsreports"){if($(this).next().find("li").length==1){return }else{if(G.getAppTheme()=="8"){return }}}H.preventDefault();if($(this).hasClass("zc_expand")){$(this).removeClass("zc_expand");F._navBarScrollReinit(G);return }$(C.getTabs()).removeClass("zc_expand").removeClass("zc_expand_active");$(this).addClass("zc_expand").addClass("zc_expand_active");F._navBarScrollReinit(G)})},_selfTopCheck:function(I){var N=$(I).find("ul");var J=$(I).offset().top;var M=$(I).height();var H=$(N).height();var F=$("#zc-component").height();var K=$("#zc-component").offset().top;var S=Math.floor(F*85/100);var Q=$(N).find("li").length;var P=0;if($(N).find("li").height()>0){$(N).find("li").each(function(){P=P+$(this).outerHeight(true)})}else{var G=39;P=Q*G}P=P+22;if(P>S){P=S}if(((J+H)<F)&&J>K){$(N).css({top:J+"px",height:P+"px","max-height":S+"px"})}else{var O=J+M;var R=O-H-20;if(R<$("#zc-component").offset().top){if($("#zc-component").offset().top>0){R=$("#zc-component").offset().top}else{R=50}}$(N).css({top:R+"px",height:P+"px","max-height":S+"px"})}},_setDynamicTop:function(){var F=this;$(C.getTabs().parent("li")).each(function(H){var G=this;F._selfTopCheck(G)})},_delay:function(){var F=0;return function(H,G){clearTimeout(F);F=setTimeout(H,G)}},_setSectionCompScroll:function(){$(C.getTabs().siblings("ul")).each(function(){$(this).zcScrollPane({VerticalBarWidth:4,autoReinit:true,reinitInterval:50,scrollPosition:ZCGlobal.appDirectionMeta.scrollerPosition})})},_setDynamicComponentTop:function(){var F=this;F._setDynamicTop();var H;$(C.getTabs().parent("li")).off("mouseenter.navPaneTop").on("mouseenter.navPaneTop",function(J){var I=this;$(C.getNavMenu()).find("li a.zc-dynamic-component-overlay").removeClass("zc-dynamic-component-overlay");$(I).find("a:first").addClass("zc-dynamic-component-overlay");F._selfTopCheck(I);$(C.getAppNavbarContainer()).addClass("zc-hide-custom-zcscrollpane")});$(C.getNavbar()).off("mouseleave").on("mouseleave",function(I){$(C.getNavMenu()).find("li a.zc-dynamic-component-overlay").removeClass("zc-dynamic-component-overlay");$(C.getAppNavbarContainer()).removeClass("zc-hide-custom-zcscrollpane")});if($(C.getAppNavbarContainer()).data("zcsp")){var G=$(C.getAppNavbarContainer()).data("zcsp").scrollDiv();$(G).off("scroll.n	avBarScrollSetTop").on("scroll.navBarScrollSetTop",function(){F._delay(function(){F._setDynamicTop()},300)})}},_navBarScrollReinit:function(G){var F=this;if(B!=undefined){B.reinit()}if(G.getAppTheme()=="9"){F._setDynamicComponentTop()}},_notifyBuilder:function(G){if(window.self!==window.top){var H={};H.isInitBuilder=D.initBuilder;H.compName=G.Name;H.type=G.Type;H.callFunc="showAppearance";var F=ZCGlobal.appbuilderserverprefix;parent.postMessage(H,F)}},_bindDemoUserListScroll:function(){var G=C.getProfilePreview();var F=$(C.getDemoUserList()).zcScrollPane({VerticalBarWidth:4});$(G).find(".zc-current-demo-user").off("click").on("click",function(H){if(!$(G).hasClass("active")){$(G).addClass("active")}});$(G).off("mouseleave").on("mouseleave",function(I){var H=I.toElement||I.relatedTarget;if(!(H!=undefined&&$(H).parents("#zc-profile-preview").length)){$(this).removeClass("active")}})}}});ApplicationView.prototype=Object.create(ViewFactory.prototype);var Upgrade=new function(){this.sharedByDisp="";this.redirectUpgradePage=function(A,B){var C={};if(A!==undefined){C.subscriptionaccessfrom=A}showLoading();$.ajax({type:"GET",url:"/userhome/"+Upgrade.sharedByDisp+"/showPlan",data:C,success:function(E,D,F){hideLoading();if(B){window.open(E.storeurl,"_blank")}else{window.location.href=E.storeurl}}})};this.redirectToUpgradePage=function(D,A,C){if(ZCGlobal.isOnPremiseVersion){getLicenseContent()}else{var B={};if(A!==undefined){B.subscriptionaccessfrom=A}B.fromupgradepopup=true;$.ajax({type:"GET",beforeSend:function(){if(C){LIB._startLoading()}else{showLoading()}},url:"/userhome/"+D+"/showPlan",data:B,success:function(F,E,G){if(C){LIB._stopLoading()}else{hideLoading()}window.location.href=F.storeurl}})}};this.upgradePopup=function(C){var A=getCookie(C+"-upgradeprompt");if(A!=""){return }else{var E=new Date();E.setDate(E.getDate()+15);var B=C+"-upgradeprompt";var D="true";D=escape(D)+";expires="+E.toUTCString()+";path=/";document.cookie=B+"="+D}$("body").freeze(function(F){var G='<div class="upgrade-container"><div class="upgrade-header"><div class="content-heading pull-left">'+i18n["zc.onboarding.upgradeheading"]+'</div><div class="flRight appNameClose"><a id="upgradeClose" class="CrepopupClose" href="javascript:;"></a></div></div><div class="upgrade-content"><p>'+i18n["zc.onboarding.upgradedesc1"]+"<p>"+i18n["zc.onboarding.upgradedesc2"]+'</p></div><div class="upgrade-footer"><a class="btn primary-btn" zctlbl="reminder-popup-dashboard" href="javascript:void(0);" onclick="Upgrade.redirectUpgradePage(\'FREE_UPGRADE_POPUP\');">'+i18n["zc.onboarding.upgradebutton"]+"</a></div></div>";F.append(G);$(".upgrade-container").find("a#upgradeClose").click(function(H){$("body").unfreeze();H.preventDefault()});$(F).find(".upgrade-container").animate({top:0},1000)})}};$.upgradepopup={_p:"",create:function(B){var C=B.value;var A=B.type!==undefined?B.type:"addons";function D(){this.settings=B==undefined?{}:B;this.popup=null;this.freezer=null}D.prototype.open=function(){var F=this;var I=function(){if(F.settings.sharedby===undefined){$.error("Syntax Error :  Usage :- \n$.upgradepopup.create({\n\taction: addon name (TEXT),\n\tsharedby: sharedBy,\n\tdata: Ajax request extra params [csrf]\n});");return false}F.settings.data=F.settings.data===undefined?{}:F.settings.data;F.settings.upgradeType=F.settings.upgradeType===undefined?"addons":F.settings.upgradeType;F.settings.action=F.settings.action===undefined?"users":F.settings.action;F.settings.isEditMode=F.settings.isEditMode===undefined?false:true;F.settings.trackingpage=F.settings.action+"-"+F.settings.currentpage;F.settings.isTemplate=true;F.settings.isDashboard=F.settings.isDashboard===undefined?false:F.settings.isDashboard};var H=function(){F.settings.data.zcaction=F.settings.action;F.settings.data.type=A;F.settings.data[F.settings.secretKey]=F.settings.secretVal;$.ajax({url:"/userhome/"+F.settings.sharedby+"/upgradepopup",type:"POST",data:F.settings.data,success:function(M,K,N){if(M.result!==undefined){if(M.result==="success"){F.popup=$('<div class="zs_widget zc-dem-store-upgradepopup"></div>');F.settings.isTemplate=$(F.popup).find(".pricing_upgrade_outer_table").length===1;F.settings.successLabel=M.label;F.settings.title=M.title;F.settings.message=M.message;F.settings.previousCount=M.previousCount;F.settings.currentCount=M.currentCount;J();E(M);G(M.code)}else{if(M.result==="redirection"){if(isCreatorPlusAcc){window.open(M.storeurl,"_blank")}else{window.location.href=M.storeurl}}else{if(F.settings.template!==undefined&&M.result!=="skip"){F.settings.template()}}}}else{if(M!=undefined){if(F.settings.template!==undefined){F.settings.template()}else{iCustomizePopup({body:M,containerClass:"zc-dem-upgrade-plan",parentClass:"zc-dem-upgrade-popup-container"});if(!B.isDashboard){$(".zc-dem-upgrade-popup-wrapper").zcScrollPane({autoReinit:true})}if(B.successCallBk!=undefined){B.successCallBk()}}}}}})};var E=function(M){var K={serviceId:901,customId:M.customid,secretKey:F.settings.secretKey,secretVal:F.settings.secretVal,itemList:[{code:M.code,action:"upgrade",type:F.settings.upgradeType}],settings:{upgradeTitle:F.settings.title,upgradeInfo:F.settings.message,successTitle:"License Upgraded Successfully",successActionLabel:F.settings.successLabel,successSecondaryAction:"disable"}};if(M.discountArr!=undefined&&M.discountArr.length>0){var N={};N.discounts=M.discountArr;N.title="Special year-end offer";K.settings.applyPromotion=N;K.settings.onFailure="closePopup"}zs_widget.init(K)};var G=function(K){zs_store=(function(){return{onSuccess:function(N){var M=N[K];var O=F.settings.previousCount+M;if(F.settings.action==="files"){var Q=M*3*1024;var P=F.settings.previousCount/(1024*1024);O=Q+P}var R={};R.status="success";R.maximumCount=O;R.currentCount=F.settings.currentCount;R.action=F.settings.action;F.settings.success(R);$.upgradepopup.remove()},onCancel:function(){$.upgradepopup.remove()}}}())};var J=function(){$(F.popup).show();F.freezer=$.upgradepopup.freeze(F.settings.isEditMode,F.settings.isDashboard).append(F.popup)};I();H()};D.prototype.load=function(F){var E=this;if(F){$(E.popup).find(".upgradeloading").show()}else{$(E.popup).find(".upgradeloading").hide()}};D.prototype.close=function(){var E=this;if(E.settings.close!==undefined){E.settings.close()}$(E.popup).find(".upgradeloading").hide();$.upgradepopup.defreeze(E.freezer)};_p=new D();_p.open()},freeze:function(B,C){var A;if(C){A=$('<div class="upgradepopup_zcOverlay"><div class="upgradepopup_centerLay"></div></div>')}else{A=$('<div class="upgradepopup_zcOverlay"><div class="upgradepopup_leftLay"></div><div class="upgradepopup_topLay"></div><div class="upgradepopup_centerLay"></div><div>');if(!B){$(A).find(".upgradepopup_leftLay").css("background","rgba(255, 255, 255, 0.38)")}}$("body").append(A);$(A).fadeIn(400);return A},defreeze:function(A){$(A).fadeOut(400,function(){$(this).remove()})},remove:function(){if(_p!=undefined){_p.close()}},loading:function(A){if(_p!=undefined){_p.load(A)}},settings:function(){if(_p!=undefined){return _p.settings}}};$.upgrade={create:function(A){var B={};B.zcFeatureName=A.zcFeatureName;B.featureType=A.featureType;B.zccpn=A.zccpn;$.ajax({url:"/userhome/"+A.sharedBy+"/upgradepopup",type:"POST",beforeSend:showLoading(),data:B,success:function(D,C,E){hideLoading();if(D!=undefined){iCustomizePopup({body:D,containerClass:"zc-dem-upgrade-plan",parentClass:"zc-dem-upgrade-popup-container"});if(!A.isDashboard){$(".zc-dem-upgrade-popup-wrapper").zcScrollPane({autoReinit:true})}if(A.successCallBk!=undefined){A.successCallBk()}}}})}};CacheType={CACHESTORAGE:1,INDEXEDDB:2,INMEMORY:3};var CacheFactory=(function(){_cacheFactory=this;this.getCache=function(J){var I={type:CacheType.CACHESTORAGE,NeededFallback:true};J.type===undefined?I.type:J.type;J.NeededFallback===undefined?I.NeededFallback:J.NeededFallback;var K=undefined;if(J.poolName===undefined){throw new Error("poolname is not specified")}K=C(J.type,J.poolName);if(K===undefined){if(J.NeededFallback){K=B(J.type,J.poolName)}else{return null}}return new H(K)};this.deleteCache=function(I){return I.deleteCache().then(function(){delete I})};function E(){return"caches" in self}function F(){return"indexedDB" in self}function C(I,J){switch(I){case CacheType.CACHESTORAGE:return(E())?new G(J):undefined;case CacheType.INDEXEDDB:return(F())?new A(J):undefined;case CacheType.INMEMORY:return new D(J);default:throw new Error("Invalid CacheType")}}function B(K,M){var J;if(K===CacheType.CACHESTORAGE){J=CacheType.INDEXEDDB}else{if(K===CacheType.INDEXEDDB){J=CacheType.INMEMORY}else{throw new Error("Problem in fallback")}}var I=C(J,M);if(I===undefined){return B(J,M)}return I}var H=(function(I){this.get=function(J){return I.get(J)};this.put=function(J,K){return I.put(J,K)};this.init=function(){return I.initCache()};this.remove=function(J){return I.remove(J)};this.deleteCache=function(){return I.deleteCachePool()};this.getAllKeys=function(){return I.getAllKeys()};this.getCacheType=function(){return I.getCacheType()}});var G=(function(P){this.poolName=P;var O=this,N;this.get=function(R){return I(R).then(J)};this.put=function(R,S){return K(R,S)};this.initCache=function(){return Q()};this.remove=function(R){return deleteCache_CacheStorage(N,R)};this.deleteCachePool=function(){return deleteCachePool_CacheStorage(O.poolName)};this.getAllKeys=function(){return N.keys()};this.getCacheType=function(){return CacheType.CACHESTORAGE};function Q(){return caches.open(O.poolName).then(function(R){N=R},function(R){return R})}function I(R){return N.match(R)}function K(S,R){return N.put(S,new Response(R))}function J(R){return R!==undefined?R.text():undefined}function M(R){return R.map(function(S){var T=S.url;var U=T.lastIndexOf("/")+1;return T.substring(U)})}});var A=(function(R){this.storeName=R;var P=this,J=undefined;dbName="KEY_VALUE_STOREDB",read_write_tx_mode="readwrite";this.get=function(T){return M().then(function(){var U=O(false);return I(U.objectStore(P.storeName),T)})};this.put=function(T,U){return M().then(function(){var V=O(true);return K(V.objectStore(P.storeName),T,U)})};this.initCache=function(){return M().then(function(){J.close()})};this.remove=function(T){return M().then(function(){var U=O(true);var V=U.objectStore(P.storeName);return Q(V,T)})};this.deleteCachePool=function(T){return M().then(N)};this.getAllKeys=function(){return M().then(function(){var T=O(false);var V=T.objectStore(P.storeName);var U=V.getAllKeys();return S(U)})};this.getCacheType=function(){return CacheType.INDEXEDDB};function M(T){return new Promise(function(W,V){var U=(T)?indexedDB.open(dbName,T):indexedDB.open(dbName);U.onsuccess=function(Y){J=Y.target.result;if(!J.objectStoreNames.contains(R)){var X=J.version;J.close();M(++X).then(W)}else{W()}};U.onupgradeneeded=function(Y){var X=Y.target.result;X.createObjectStore(P.storeName)};U.onerror=function(X){V(X.error)}})}function I(V,T){var U=V.get(T);return S(U)}function K(W,T,V){var U=W.put(V,T);return S(U)}function O(U){var T=[P.storeName];return(U)?J.transaction(T,read_write_tx_mode):J.transaction(T)}function Q(U,T){var V=deleteObject_IndexedDB(U,T);return S(V)}function S(T){return new Promise(function(V,U){T.onsuccess=function(W){V(W.target.result);J.close()};T.onerror=function(W){U(W.error);J.close()}})}function N(){return new Promise(function(V,U){var T=J.version;console.log(T);J.close();var W=indexedDB.open(dbName,++T);W.onupgradeneeded=function(Y){var X=Y.target.result;X.deleteObjectStore(P.storeName);V("success")};W.onerror=function(X){U(X.error)};W.onblocked=function(X){console.log(X);U("blocked")}})}});var D=function(J){this.poolName=J,maxSize=20,currSize=0;var I=[],K={};this.get=function(M){return new Promise(function(Q,P){var N=K[M];if(N===undefined||N===null||N<0){Q(undefined);return }var O=I[N];if(O!==undefined){var S=O.val,R;if(typeof S==="array"){R=$.extend(true,[],S)}else{if(typeof S==="object"){R=$.extend(true,{},S)}else{R=S}}O.last_used_time=new Date().getTime();Q(R)}else{Q(undefined)}})};this.put=function(M,N){return new Promise(function(S,R){if(N===undefined||N===null){R()}var T={key:M,val:N,last_used_time:new Date().getTime()};if(currSize<maxSize){I.push(T);K[M]=currSize;++currSize}else{var P=I[0].last_used_time,O=0;for(var Q=1;Q<I.length;++Q){if(P>I[Q].last_used_time){P=I[Q].last_used_time;O=Q}}delete K[I[O].key];I[O]=T;K[M]=O}S(T.val)})};this.initCache=function(){return Promise.resolve()};this.remove=function(){return Promise.reject()};this.deleteCachePool=function(){I=[];K={}};this.getAllKeys=function(){return new Promise(function(O,N){var M=Object.keys(K);O(M)})};this.getCacheType=function(){return CacheType.INMEMORY}}});RequestInterceptors={ZC_PUBLIC:1,FORM_HASH:3};ResponseInterceptor={FORM_CACHE:2};InterceptorExecutor={execute:function(B){var C=[];for(var A=0;A<B.length;++A){C.push(B[A].execute())}return C}};InterceptorFactory={getInterceptor:function(D,C,B,A){switch(D){case RequestInterceptors.ZC_PUBLIC:return new ZCPublicSuffixInterceptor(C);case RequestInterceptors.FORM_HASH:return new FormHashInterceptor(C);case ResponseInterceptor.FORM_CACHE:return new FormCacheInterceptor(C,B,A)}}};function interceptAJAXRequest(B){var A=[];for(var C in RequestInterceptors){A.push(InterceptorFactory.getInterceptor(RequestInterceptors[C],B))}return Promise.all(InterceptorExecutor.execute(A))}function interceptAJAXResponse(D,B,A){var F=[];var C=Date.now();for(var E in ResponseInterceptor){F.push(InterceptorFactory.getInterceptor(ResponseInterceptor[E],D,B,A))}return Promise.all(InterceptorExecutor.execute(F))}var AJAXRequestInterceptor=function(A){this.options=A};AJAXRequestInterceptor.prototype.execute=function(){};var ZCPublicSuffixInterceptor=function(A){AJAXRequestInterceptor.call(this,A);this.execute=function(){var C=this.options.type;if(C.toUpperCase()=="POST"&&window.location.host===zcNewLivePublicDomain){var D=this.options.url;var B=D.indexOf("?");if(B>=0){this.options.url=D.substring(0,B)+"/zc_public"+D.substring(B)}else{if(D.endsWith("/")){this.options.url=D+"zc_public"}else{this.options.url=D+"/zc_public"}}}return Promise.resolve()}};ZCPublicSuffixInterceptor.prototype=Object.create(AJAXRequestInterceptor);var FormHashInterceptor=function(A){AJAXRequestInterceptor.call(this,A);this.execute=function(){if(A.data!=undefined&&FormAccessType.VIEW_EDIT_RECORD!=A.data.formAccessType){return Promise.resolve()}try{formCacheHelper}catch(C){if(C instanceof ReferenceError){return Promise.resolve()}}var B=this;if(!isFormAccessURL(B.options.url)||!formCacheHelper.isCacheAvailable()){return Promise.resolve()}return new Promise(function(F,E){var D=formCacheHelper.generateKey(B.options.url,B.options.data);formCacheHelper.getFormHash(D).then(function(G){if(G!==undefined){B.options.data=B.options.data||{};B.options.headers={formHash:G}}F()},function(){F()})})}};FormHashInterceptor.prototype=Object.create(AJAXRequestInterceptor);var AJAXResponseInterceptor=function(B,C,A){this.options=B;this.data=C;this.status=A};AJAXResponseInterceptor.prototype.execute=function(){};var FormCacheInterceptor=function(B,C,A){AJAXResponseInterceptor.call(this,B,C,A);this.execute=function(){if(B.data!=undefined&&FormAccessType.VIEW_EDIT_RECORD!=B.data.formAccessType){return Promise.resolve()}try{formCacheHelper}catch(E){if(E instanceof ReferenceError){return Promise.resolve()}}var D=this;if(!isFormAccessURL(D.options.url)||!formCacheHelper.isCacheAvailable()||A!=="success"){return Promise.resolve()}return new Promise(function(I,H){var G=D.options.url;if(!C.HTML&&!C.MODEL){var F=formCacheHelper.getFormCache(formCacheHelper.generateKey(D.options.url,D.options.data)).then(function(J){$.extend(true,D.data,J);I()},function(J){throw new Error(J)})}else{formCacheHelper.cacheForm(C,D.options.url,D.options.data);I()}})}};FormCacheInterceptor.prototype=Object.create(AJAXResponseInterceptor);var Upgrade=new function(){this.sharedByDisp="";this.redirectUpgradePage=function(A,B){var C={};if(A!==undefined){C.subscriptionaccessfrom=A}showLoading();$.ajax({type:"GET",url:"/userhome/"+Upgrade.sharedByDisp+"/showPlan",data:C,success:function(E,D,F){hideLoading();if(B){window.open(E.storeurl,"_blank")}else{window.location.href=E.storeurl}}})};this.redirectToUpgradePage=function(D,A,C){if(ZCGlobal.isOnPremiseVersion){getLicenseContent()}else{var B={};if(A!==undefined){B.subscriptionaccessfrom=A}B.fromupgradepopup=true;$.ajax({type:"GET",beforeSend:function(){if(C){LIB._startLoading()}else{showLoading()}},url:"/userhome/"+D+"/showPlan",data:B,success:function(F,E,G){if(C){LIB._stopLoading()}else{hideLoading()}window.location.href=F.storeurl}})}};this.upgradePopup=function(C){var A=getCookie(C+"-upgradeprompt");if(A!=""){return }else{var E=new Date();E.setDate(E.getDate()+15);var B=C+"-upgradeprompt";var D="true";D=escape(D)+";expires="+E.toUTCString()+";path=/";document.cookie=B+"="+D}$("body").freeze(function(F){var G='<div class="upgrade-container"><div class="upgrade-header"><div class="content-heading pull-left">'+i18n["zc.onboarding.upgradeheading"]+'</div><div class="flRight appNameClose"><a id="upgradeClose" class="CrepopupClose" href="javascript:;"></a></div></div><div class="upgrade-content"><p>'+i18n["zc.onboarding.upgradedesc1"]+"<p>"+i18n["zc.onboarding.upgradedesc2"]+'</p></div><div class="upgrade-footer"><a class="btn primary-btn" zctlbl="reminder-popup-dashboard" href="javascript:void(0);" onclick="Upgrade.redirectUpgradePage(\'FREE_UPGRADE_POPUP\');">'+i18n["zc.onboarding.upgradebutton"]+"</a></div></div>";F.append(G);$(".upgrade-container").find("a#upgradeClose").click(function(H){$("body").unfreeze();H.preventDefault()});$(F).find(".upgrade-container").animate({top:0},1000)})}};$.upgradepopup={_p:"",create:function(B){var C=B.value;var A=B.type!==undefined?B.type:"addons";function D(){this.settings=B==undefined?{}:B;this.popup=null;this.freezer=null}D.prototype.open=function(){var F=this;var I=function(){if(F.settings.sharedby===undefined){$.error("Syntax Error :  Usage :- \n$.upgradepopup.create({\n\taction: addon name (TEXT),\n\tsharedby: sharedBy,\n\tdata: Ajax request extra params [csrf]\n});");return false}F.settings.data=F.settings.data===undefined?{}:F.settings.data;F.settings.upgradeType=F.settings.upgradeType===undefined?"addons":F.settings.upgradeType;F.settings.action=F.settings.action===undefined?"users":F.settings.action;F.settings.isEditMode=F.settings.isEditMode===undefined?false:true;F.settings.trackingpage=F.settings.action+"-"+F.settings.currentpage;F.settings.isTemplate=true;F.settings.isDashboard=F.settings.isDashboard===undefined?false:F.settings.isDashboard};var H=function(){F.settings.data.zcaction=F.settings.action;F.settings.data.type=A;F.settings.data[F.settings.secretKey]=F.settings.secretVal;$.ajax({url:"/userhome/"+F.settings.sharedby+"/upgradepopup",type:"POST",data:F.settings.data,success:function(M,K,N){if(M.result!==undefined){if(M.result==="success"){F.popup=$('<div class="zs_widget zc-dem-store-upgradepopup"></div>');F.settings.isTemplate=$(F.popup).find(".pricing_upgrade_outer_table").length===1;F.settings.successLabel=M.label;F.settings.title=M.title;F.settings.message=M.message;F.settings.previousCount=M.previousCount;F.settings.currentCount=M.currentCount;J();E(M);G(M.code)}else{if(M.result==="redirection"){if(isCreatorPlusAcc){window.open(M.storeurl,"_blank")}else{window.location.href=M.storeurl}}else{if(F.settings.template!==undefined&&M.result!=="skip"){F.settings.template()}}}}else{if(M!=undefined){if(F.settings.template!==undefined){F.settings.template()}else{iCustomizePopup({body:M,containerClass:"zc-dem-upgrade-plan",parentClass:"zc-dem-upgrade-popup-container"});if(!B.isDashboard){$(".zc-dem-upgrade-popup-wrapper").zcScrollPane({autoReinit:true})}if(B.successCallBk!=undefined){B.successCallBk()}}}}}})};var E=function(M){var K={serviceId:901,customId:M.customid,secretKey:F.settings.secretKey,secretVal:F.settings.secretVal,itemList:[{code:M.code,action:"upgrade",type:F.settings.upgradeType}],settings:{upgradeTitle:F.settings.title,upgradeInfo:F.settings.message,successTitle:"License Upgraded Successfully",successActionLabel:F.settings.successLabel,successSecondaryAction:"disable"}};if(M.discountArr!=undefined&&M.discountArr.length>0){var N={};N.discounts=M.discountArr;N.title="Special year-end offer";K.settings.applyPromotion=N;K.settings.onFailure="closePopup"}zs_widget.init(K)};var G=function(K){zs_store=(function(){return{onSuccess:function(N){var M=N[K];var O=F.settings.previousCount+M;if(F.settings.action==="files"){var Q=M*3*1024;var P=F.settings.previousCount/(1024*1024);O=Q+P}var R={};R.status="success";R.maximumCount=O;R.currentCount=F.settings.currentCount;R.action=F.settings.action;F.settings.success(R);$.upgradepopup.remove()},onCancel:function(){$.upgradepopup.remove()}}}())};var J=function(){$(F.popup).show();F.freezer=$.upgradepopup.freeze(F.settings.isEditMode,F.settings.isDashboard).append(F.popup)};I();H()};D.prototype.load=function(F){var E=this;if(F){$(E.popup).find(".upgradeloading").show()}else{$(E.popup).find(".upgradeloading").hide()}};D.prototype.close=function(){var E=this;if(E.settings.close!==undefined){E.settings.close()}$(E.popup).find(".upgradeloading").hide();$.upgradepopup.defreeze(E.freezer)};_p=new D();_p.open()},freeze:function(B,C){var A;if(C){A=$('<div class="upgradepopup_zcOverlay"><div class="upgradepopup_centerLay"></div></div>')}else{A=$('<div class="upgradepopup_zcOverlay"><div class="upgradepopup_leftLay"></div><div class="upgradepopup_topLay"></div><div class="upgradepopup_centerLay"></div><div>');if(!B){$(A).find(".upgradepopup_leftLay").css("background","rgba(255, 255, 255, 0.38)")}}$("body").append(A);$(A).fadeIn(400);return A},defreeze:function(A){$(A).fadeOut(400,function(){$(this).remove()})},remove:function(){if(_p!=undefined){_p.close()}},loading:function(A){if(_p!=undefined){_p.load(A)}},settings:function(){if(_p!=undefined){return _p.settings}}};$.upgrade={create:function(A){var B={};B.zcFeatureName=A.zcFeatureName;B.featureType=A.featureType;B.zccpn=A.zccpn;$.ajax({url:"/userhome/"+A.sharedBy+"/upgradepopup",type:"POST",beforeSend:showLoading(),data:B,success:function(D,C,E){hideLoading();if(D!=undefined){iCustomizePopup({body:D,containerClass:"zc-dem-upgrade-plan",parentClass:"zc-dem-upgrade-popup-container"});if(!A.isDashboard){$(".zc-dem-upgrade-popup-wrapper").zcScrollPane({autoReinit:true})}if(A.successCallBk!=undefined){A.successCallBk()}}}})}};function zcScrollPane(AG){var g={showBar:false,autoReinit:false,reinitInterval:500,vGutter:0,hGutter:0,domReinit:false,VerticalBarWidth:6,HorizontalBarHeight:6,scrollPosition:"right",reinitCallback:function(){}};$.extend(g,AG);var D=g.target;var AI=D.css("overflow");if(g.height){D.css({height:g.height})}if(g.width){D.css({width:g.width})}var AO=function(c){return true};if(!AO(g)){var AP=window.console;if(AP){AP.warn("Improper scroll pane configuration for the element --> ");AP.warn(D)}return true}var f;var v;var a;var AA;var e;var E;var S;var b;var w;var q;var AC;var k;var T;var m;var Q;var C;var AK;var P;var J;var AD=0;var AB=0;var F;var A;var l;var u;var y=false;var O;var AJ;var W;var x;var N;var I;var h;var Z=1000;var AQ;var Y;var H;var M;var K=function(c,AR){c.addClass(AR)};var B=function(c,AR){c.append(AR)};var s=function(c,AR,AS){c.css({width:AR,height:AS})};var X=function(c,AR){c.css({left:AR})};var d=function(AR,c){AR.css({top:c})};var AN=function(c,AR){c.css({overflow:AR})};var r=$(".scrollBarWidthCalculateContainer");if(!r.length){r=$("<div>").css({visibility:"hidden"}).prependTo("body");r.addClass("scrollBarWidthCalculateContainer");outer=$("<div>").appendTo(r);widthWithScroll=$("<div>").appendTo(outer)}var n=function(){$(r).show();outer.css({position:"absolute",width:100,overflow:"scroll"});var c=widthWithScroll.css({width:"100%"}).outerWidth();$(r).hide();return 100-c};AN(D,"hidden");var G=function(){AC=g.VerticalBarWidth;k=g.HorizontalBarHeight;l=g.vGutter;u=g.hGutter;T=20;PADDING=20;m=null;Q=null;q=Date.now();f=document.createElement("div");f.id="mainDiv_"+q;f=$(f);K(f,"ZCScrollMain");(g.autoReinit)?$(f).attr("scrollpane","auto"):$(f).attr("scrollpane","manual");v=document.createElement("div");v=$(v);K(v,"ZCScrollable");a=document.createElement("div");a=$(a);K(a,"ZCScrollableWrapper");s(f,D.width(),D.height());s(v,D.width(),D.height());s(a,D.width(),D.height());B(a,D.children());D.children().detach();B(D,f);B(f,v);B(v,a);P=false;J=false;AH(true)};var AH=function(AU){var AV=P;var AX=J;if(!AU){s(f,D.width(),D.height());s(v,D.width(),D.height());s(a,D.width(),D.height())}h=D.width();I=D.height();b=a[0].scrollHeight;w=a[0].scrollWidth;O=Math.ceil(n());AJ=b;W=w;var AS=3;var AR=3;var AW=false;if(D.height()<b){if(AU||AA==undefined){z()}F=Math.ceil(n());if(F){var c=v.outerWidth()+F;v.css({width:c})}else{F=0;var c=v.outerWidth()+15;v.css({width:c});w=v[0].scrollWidth-15}P=false}else{P=true;if(AA!=undefined){AA.remove();AA=undefined}}if(D.width()<w){if(e==undefined){AE()}A=Math.ceil(n());if(A){var AT=v.outerHeight()+A;v.css({height:AT})}else{A=0;var AT=v.outerHeight()+15;v.css({height:AT});b=v[0].scrollHeight-15}J=false}else{J=true;if(e!=undefined){e.remove();e=undefined}}if(P&&J){v.css({overflow:""})}if(!P){if(J){s(AA,AC,f.outerHeight())}else{s(AA,AC,f.outerHeight()-k-2*AR)}if(g.scrollPosition=="right"){X(AA,f.outerWidth()-AA.outerWidth()-l)}AQ=f.outerHeight();Y=AA.outerHeight()*AQ/b;s(E,AC,Y);v.scrollTop(AD);if((AU&&!P)||(!AU&&AV!=P&&!P)){U();AW=true}}if(!J){if(P){s(e,f.outerWidth(),k)}else{s(e,f.outerWidth()-AC-2*AS,k)}d(e,f.outerHeight()-e.outerHeight()-u);H=f.outerWidth();M=e.outerWidth()*H/w;s(S,M,k);v.scrollLeft(AB);if((AU&&!J)||(!AU&&AX!=J&&!J)){V();AW=true}}if(AW){AM()}};var z=function(){AA=document.createElement("div");E=document.createElement("div");AA=$(AA);E=$(E);K(AA,"ZCVerticalBar");K(E,"ZCVerticalScrollBar");B(f,AA);B(AA,E)};var AE=function(){e=document.createElement("div");S=document.createElement("div");e=$(e);S=$(S);K(e,"ZCHorizontalBar");K(S,"ZCHorizontalScrollBar");B(f,e);B(e,S)};var U=function(){if(!P){if(g.showBar){AA.addClass("ZCVerticalBarBgColor");E.addClass("ZCVerticalScrollBarBgColor")}AA.on("click",function(AR){if(!g.showBar){AA.removeClass("ZCVerticalBarBgTransparent");AA.addClass("ZCVerticalBarBgColor")}var AS=AR.pageY-AA.offset().top;var c=E.position().top;if(AS<c){v.scrollTop(v.scrollTop()-T)}else{v.scrollTop(v.scrollTop()+T)}});E.on("click",function(c){c.stopPropagation()});if(!g.showBar){AA.on("mouseenter",function(){AA.removeClass("ZCVerticalBarBgTransparent");AA.addClass("ZCVerticalBarBgColor");E.removeClass("ZCVerticalScrollBarBgTransparent");E.addClass("ZCVerticalScrollBarBgColor")});AA.on("mouseleave",function(){AA.removeClass("ZCVerticalBarBgColor");AA.addClass("ZCVerticalBarBgTransparent");E.removeClass("ZCVerticalScrollBarBgColor");E.addClass("ZCVerticalScrollBarBgTransparent")})}E.on("mousedown",function(c){if(!g.showBar){AA.removeClass("ZCVerticalBarBgTransparent");AA.addClass("ZCVerticalBarBgColor");E.removeClass("ZCVerticalScrollBarBgTransparent");E.addClass("ZCVerticalScrollBarBgColor")}v.addClass("ZCNoSelect");m=$(this);C=null;$(window).on("mouseup.zcmouseup"+q,function(AR){if(!g.showBar){AA.removeClass("ZCVerticalBarBgColor");AA.addClass("ZCVerticalBarBgTransparent");E.removeClass("ZCVerticalScrollBarBgColor");E.addClass("ZCVerticalScrollBarBgTransparent")}m=null;Q=null;v.removeClass("ZCNoSelect");$(window).off("mouseup.zcmouseup"+q)})})}};var V=function(){if(!J){if(g.showBar){e.addClass("ZCHorizontalBarBgColor");S.addClass("ZCHorizontalScrollBarBgColor")}e.on("click",function(AS){if(!g.showBar){e.removeClass("ZCHorizontalBarBgTransparent");e.addClass("ZCHorizontalBarBgColor")}var AR=AS.pageX-e.offset().left;var c=S.position().left;if(AR<c){v.scrollLeft(v.scrollLeft()-T)}else{v.scrollLeft(v.scrollLeft()+T)}});if(!g.showBar){e.on("mouseenter",function(){e.removeClass("ZCHorizontalBarBgTransparent");e.addClass("ZCHorizontalBarBgColor");S.removeClass("ZCHorizontalScrollBarBgTransparent");S.addClass("ZCHorizontalScrollBarBgColor")});e.on("mouseleave",function(){e.removeClass("ZCHorizontalBarBgColor");e.addClass("ZCHorizontalBarBgTransparent");S.removeClass("ZCHorizontalScrollBarBgColor");S.addClass("ZCHorizontalScrollBarBgTransparent")})}S.on("click",function(c){c.stopPropagation()});S.on("mousedown",function(c){if(!g.showBar){e.removeClass("ZCHorizontalBarBgTransparent");e.addClass("ZCHorizontalBarBgColor");S.removeClass("ZCHorizontalScrollBarBgTransparent");S.addClass("ZCHorizontalScrollBarBgColor")}v.addClass("ZCNoSelect");Q=$(this);AK=null;$(window).on("mouseup.zcmouseup"+q,function(AR){if(!g.showBar){e.removeClass("ZCHorizontalBarBgColor");e.addClass("ZCHorizontalBarBgTransparent");S.removeClass("ZCHorizontalScrollBarBgColor");S.addClass("ZCHorizontalScrollBarBgTransparent")}m=null;Q=null;v.removeClass("ZCNoSelect");$(window).off("mouseup.zcmouseup"+q)})})}};var AM=function(){var AR=null;var c=v.scrollTop();var AS=v.scrollLeft();v.on("scroll",function(){if(AR){clearTimeout(AR)}if(!(P)){if(!g.showBar){if(c<v.scrollTop()||c>v.scrollTop()){E.removeClass("ZCVerticalScrollBarBgTransparent");E.addClass("ZCVerticalScrollBarBgColor")}}d(E,v.scrollTop()/AQ*Y)}if(!(J)){if(!g.showBar){if(AS<v.scrollLeft()||AS>v.scrollLeft()){S.removeClass("ZCHorizontalScrollBarBgTransparent");S.addClass("ZCHorizontalScrollBarBgColor")}}X(S,v.scrollLeft()/H*M)}c=v.scrollTop();AS=v.scrollLeft();AR=setTimeout(function(){if(!(P)){if(!g.showBar){if(AA.hasClass("ZCVerticalBarBgColor")){AA.removeClass("ZCVerticalBarBgColor");AA.addClass("ZCVerticalBarBgTransparent");E.removeClass("ZCVerticalScrollBarBgColor");E.addClass("ZCVerticalScrollBarBgTransparent")}else{E.removeClass("ZCVerticalScrollBarBgColor");E.addClass("ZCVerticalScrollBarBgTransparent")}}}if(!(J)){if(!g.showBar){if(e.hasClass("ZCHorizontalBarBgColor")){e.removeClass("ZCHorizontalBarBgColor");e.addClass("ZCHorizontalBarBgTransparent");S.removeClass("ZCHorizontalScrollBarBgColor");S.addClass("ZCHorizontalScrollBarBgTransparent")}else{S.removeClass("ZCHorizontalScrollBarBgColor");S.addClass("ZCHorizontalScrollBarBackgroundTransparent")}}}},Z)});$(window).on("mousemove.clk",function(AW){if(m){if(!g.showBar){AA.removeClass("ZCVerticalBarBgTransparent");AA.addClass("ZCVerticalBarBgColor");E.removeClass("ZCVerticalScrollBarBgTransparent");E.addClass("ZCVerticalScrollBarBgColor")}var AT=AA.offset().top;var Aa=Math.ceil(AA.offset().top+AA.outerHeight()-E.outerHeight());if(C){if(C<AW.pageY){if(Math.ceil(m.offset().top+(AW.pageY-C))<=Aa){m.offset({top:m.offset().top+(AW.pageY-C)});var AU=m.position().top;var AV=AA.outerHeight();v.scrollTop(b*AU/AV)}}else{if(Math.ceil(m.offset().top+(AW.pageY-C))>=AT){m.offset({top:m.offset().top+(AW.pageY-C)});var AU=m.position().top;var AV=AA.outerHeight();v.scrollTop(b*AU/AV)}}}C=AW.pageY}if(Q){if(!g.showBar){e.removeClass("ZCHorizontalBarBgTransparent");e.addClass("ZCHorizontalBarBgColor");S.removeClass("ZCHorizontalScrollBarBgTransparent");S.addClass("ZCHorizontalScrollBarBgColor")}var AY=e.offset().left;var AX=Math.ceil(e.offset().left+e.outerWidth()-S.outerWidth());if(AK){if(AK<AW.pageX){if(Math.ceil(Q.offset().left+(AW.pageX-AK))<=AX){Q.offset({left:Q.offset().left+(AW.pageX-AK)});var Ab=Q.position().left;var AZ=e.outerWidth();v.scrollLeft(w*Ab/AZ)}}else{if(Math.ceil(Q.offset().left+(AW.pageX-AK))>=AY){Q.offset({left:Q.offset().left+(AW.pageX-AK)});var Ab=Q.position().left;var AZ=e.outerWidth();v.scrollLeft(w*Ab/AZ)}}}AK=AW.pageX}})};G();$(window).on("resize.removescroll"+q,function(c){t();if(g.domReinit){$(window).off("resize.removescroll"+q)}});var t=function(){AD=v.scrollTop();AB=v.scrollLeft();if(g.domReinit){B(D,a.children());a.children().detach();f.remove();G()}else{AH(false)}g.reinitCallback()};var R=null;var AL=function(){R=setTimeout(function(){if(!y){var c=a[0].scrollWidth;var AT=a[0].scrollHeight;var AS=D.width();var AR=D.height();if(I!=AR||h!=AS){t()}if(AJ!=AT||W!=c){t()}}AL()},g.reinitInterval)};var p=null;function o(){p=setTimeout(function(){if(!y){if(Math.ceil(n())!=O){t()}o()}},500)}var AF=navigator.platform!=undefined&&navigator.platform.toUpperCase().indexOf("MAC")>=0;if(AF){o()}if(g.autoReinit){AL()}return{scrollToPosition:function(c,AS,AR){AR=(AR!=undefined)?AR:800;if(AS){v.animate({scrollLeft:c},AR)}else{v.animate({scrollTop:c},AR)}},reinit:t,destroy:function(){B(D,a.children());a.children().detach();f.remove();y=true;AN(D,AI);$(window).off("resize.removescroll"+q);$(D).removeData("zcsp")},scrollDiv:function(){return v},scrollWrapperDiv:function(){return a}}}$.fn.zcScrollPane=function(C){var B=C;if(B==undefined){B={}}var A=function(F,H){var G=$(F).data("zcsp");if(G!=undefined){return G}else{H.target=F;var E=zcScrollPane(H);$(F).data("zcsp",E);B.success&&B.success();return E}};if($(this).length==1){return A(this,B)}else{var D=[];$.each($(this),function(F,E){var G=A(E,$.extend({},B));D.push(G)});return D}};$.fn.zcScrollpane=function(A){return $(this).zcScrollPane(A)};function LayoutViewUrl(C){var B=C.url;var A=C.viewLinkName;this.getLayoutDisplayProperties=function(){return B+"/"+A+"/getLayoutDisplayProperties"};this.changeLayout=function(){return B+"/"+A+"/changeLayout"};this.saveRecordsPerRow=function(){return B+"/"+A+"/saveRecordsPerRow"};this.saveLayoutDisplayType=function(){return B+"/"+A+"/saveLayoutDisplayType"};this.saveDataBlockSize=function(){return B+"/"+A+"/saveDataBlockSize"};this.getFieldProperty=function(){return B+"/"+A+"/showFieldProperty"};this.getSaveViewCompDispName=function(){return B+"/"+A+"/saveViewCompDispName"};this.saveEncryptionProperties=function(){return B+"/"+A+"/saveEncryptionProperties"};this.deleteViewField=function(){return B+"/"+A+"/deleteViewField"};this.isCustomActionPresent=function(){return B+"/"+A+"/isCustomActionPresent"};this.modifyCompositeProperties=function(){return B+"/"+A+"/modifyCompositeProperties"};this.saveViewFieldProperty=function(){return B+"/"+A+"/saveViewFieldProperty"};this.saveLinkedView=function(){return B+"/"+A+"/saveLinkedView"};this.addViewField=function(){return B+"/"+A+"/addViewField"};this.addSubFormViewField=function(){return B+"/"+A+"/addSubFormViewField"};this.rearrangeViewField=function(){return B+"/"+A+"/rearrangeViewField"}}function FilterViewUrl(C){var B=C.url;var A=C.viewLinkName;this.getCriteriaBuilder=function(){return B+"/"+A+"/showCriteriaBuilder"};this.getSetCriteriaUrl=function(){return B+"/"+A+"/setCriteria"}}function GroupSortViewUrl(C){var B=C.url;var A=C.viewLinkName;this.getSortingConfiguration=function(){return B+"/"+A+"/getCustomSorting"};this.getAddSortOrGroup=function(){return B+"/"+A+"/addSortOrGroup"};this.updateAscOrDesc=function(){return B+"/"+A+"/updateAscOrDesc"}}function ReportPropertiesUrl(C){var B=C.url;var A=C.viewLinkName;this.saveProperties=function(){return B+"/"+A+"/saveReportProperties"}}function AnalyticsUrl(C){var B=C.url;var A=C.viewLinkName;this.setLoginUserCheck=function(){return B+"/"+A+"/setLoginUserCheck"};this.restrictPivotData=function(){return B+"/"+A+"/restrictPivotData"};this.addPivotColumn=function(){return B+"/"+A+"/addPivotColumn"};this.updatePivotColumn=function(){return B+"/"+A+"/updatePivotColumn"}}var SharedAnalyticsController=(function(B){var A=this;this.container="#zc-create-report-content";this.url=B+"sharedanalytics";this.viewType=1;this.bindEvents=function(){$(A.container+" [elname=reporttypescontainerback]").on("click",function(C){$(A.container+" [elname=reportcreationcontainer]").addClass("hide");$(A.container+" [elname=reporttypescontainer]").removeClass("hide");A.clearErrorContainerAndReset()});$(A.container+" [elname=report-container]").on("click",function(C){A.viewType=$(this).attr("type");var D=$(A.container+" [elname=reportcreationcontainer]");$(D).find("[elname=zc-sa-report-title]").text($(this).attr("reportname"));$(A.container+" [elname=reporttypescontainer]").addClass("hide");$(D).removeClass("hide")});$(A.container+" input[name=sharedanalyticsshareto]").on("change",function(F){var C=$(A.container+" select[name=profilename]");var G=$(C).data("zcdd");var E=$(A.container+" div[elname=permissionsetsoption]");if(parseInt($(this).val())==0){G.clear();$(C).val("").trigger("change");$(E).addClass("hide");var D=$(C).prev(".zc-dem-error-container");if($(D).length>0){errorClearCallback(D);$(A.container+" span[elname=permissionsetshelptext]").removeClass("hide")}}else{$(E).removeClass("hide");setTimeout(function(){G.open()},0)}});$(A.container+" input[name=permissionsetoption]").on("change",function(D){var C=$(this).val();if(C==="onlyme"){$(A.container+" [elname=profilelistcontainer]").addClass("hide")}else{$(A.container+" [elname=profilelistcontainer]").removeClass("hide")}});$(A.container+" [elname=reportbuttoncontainer] input[type=button]").on("click",function(C){var M=this;if($(M).attr("buttontype")==="createcustomize"){var D=false;var G=$(A.container+" select[name=baseformname]");var J=$(G).val();if(J==0){$(G).showError("Choose a form to proceed");D=true}var N=$(A.container+" input[name=reportdisplayname]");var H=$(N).val();if(H===""){$(N).showError("Report name cannot be empty.");D=true}var K=$(A.container+" select[name=profilename]");var E=$(K).val();if($(E).length==0&&parseInt($(A.container+" input[name=sharedanalyticsshareto]:checked").val())==1){$(K).showError("Choose permission-sets to proceed");var O=$(K).data("zcdd");O.onFocus(function(P){$(A.container+" span[elname=permissionsetshelptext]").removeClass("hide")});O.beforeOpen(function(Q){var P=$(K).prev(".zc-dem-error-container");if($(P).length>0){errorClearCallback(P)}});$(A.container+" span[elname=permissionsetshelptext]").addClass("hide");D=true}if(D){return }$(A.container+" [elname=reportcreationcontainer]").addClass("hide");$(A.container+" [elname=reportcustomizationcontainer]").removeClass("hide");var I;if(A.viewType==1){I=$("div[elname=listpreviewloader]");$(A.container).append(I);$(I).removeClass("hide")}else{I=$("div[elname=pivotreportpreviewloader]");$(A.container).append(I);$(I).removeClass("hide");if(A.viewType==7){$(A.container).find("div[elname=chartpreviewcontainer]").removeClass("hide")}else{$(A.container).find("div[elname=tablepreviewcontainer]").removeClass("hide")}}var F={};F.displayName=H;F.baseFormName=J;F.profileIds=$(E).length==0?undefined:JSON.stringify(E);F.viewType=A.viewType;F.zccpn=ZCGlobal.csrfToken;$(M).css("pointer-events","none");$.ajax({type:"POST",data:F,url:A.url+"/addReport",success:function(R){$(".zc-shared-analytics-popup .popupClose").addClass("hide");var Q=R;if(A.viewType==1){$.ajax({type:"GET",url:A.url+"/"+Q+"/showReportConfiguration?deviceType=1&templateType=1",success:function(T){$(I).remove();$(A.container).html(T);A.bindReportCustomization(Q);$(A.container+" input[buttontype='finish']").on("click",function(){$(this).css("pointer-events","none");A.closePopup();history.pushState("","",B+"#Report:"+Q);location.reload()})}})}else{var P=true;try{R=JSON.parse(R)}catch(S){P=false}if(P){if(R.value!=""&&R.value=="duplicateReport"){$.alert({msg:"This report name already presented in this application. Please use a different name for the report."});$(A.container).find("div[elname=pivotreportpreviewloader]").addClass("hide");$(A.container+" [elname=reportcreationcontainer]").removeClass("hide");$(A.container+" [elname=reportcustomizationcontainer]").addClass("hide");$(M).css("pointer-events","")}}else{if(R.indexOf("PIVOT_REPORT_ERROR")!=-1){$(A.container).find("div[elname=pivotreportpreviewloader]").addClass("hide");$(A.container+" [elname=reportcreationcontainer]").removeClass("hide");$(A.container+" [elname=reportcustomizationcontainer]").addClass("hide");$(M).css("pointer-events","");$.alert({msg:(A.viewType==8)?i18n["zc.report.createfirstpivotchart.contactadmin"]:i18n["zc.report.createfirstpivottable.contactadmin"],handleFocus:false,callback:function(){$(A.container+" [elname=reportcreationcontainer]").addClass("hide");$(A.container+" [elname=reporttypescontainer]").removeClass("hide");A.clearErrorContainerAndReset();$(".zc-shared-analytics-popup .popupClose").removeClass("hide")}});$(".popupbox-wrapper").addClass("zc-shared-analytics-wrapper");$(".zc-freezer").eq(1).addClass("zc-active-freezer")}else{$(A.container).html(R);ReportBuilderUtils.applySelect2($(A.container+" select"));$(A.container+" input[buttontype='finish']").on("click",function(){SharedAnalyticsZCReportEditor.getXMLConfigDetails()})}}}}})}else{if($(M).attr("buttontype")==="resetbutton"){A.clearErrorContainerAndReset()}else{if($(M).attr("buttontype")==="finish"){A.closePopup()}}}});ReportBuilderUtils.applySelect2($(A.container+" select"))};this.clearErrorContainerAndReset=function(){$(A.container+" input[name=permissionsetoption]:first").trigger("click");$(A.container+" form[name=addReport]").trigger("reset");$(A.container+" select[name=baseformname]").val("").trigger("change");$(A.container+" select[name=profilename]").val("").trigger("change");var C=$(A.container+" div[elname=permissionsetsoption]");$(C).addClass("hide");$(A.container+" span[elname=permissionsetshelptext]").removeClass("hide");$(A.container+" .zc-dem-error-container").each(function(){errorClearCallback(this)})};this.closePopup=function(){$zcmodal.getTopPopup().close();$(".zc-freezer-layer").remove()};this.bindReportCustomization=function(C){$(A.container+" [elname=shared-analytics-tab]").off("click").on("click",function(E){$(A.container+" [elname=shared-analytics-tab]").removeClass("selected");$(this).addClass("selected");var G=$(A.container+" [tabcontentname=shared-analytics-tab-content]");var D=$(this).attr("actiontype");var F={};if(D==="showLayout"){F.deviceType=1}$.ajax({type:"GET",data:F,url:A.url+"/"+C+"/"+D,success:function(H){LIB._stopLoading();var I=$("<div elname='zc-sa-scroll-container'></div>");$(I).html(H);$(G).html(I);A.bindModuleEvents(C,D)}})});$(A.container+" [elname=shared-analytics-tab][actiontype=showLayout]").trigger("click")};this.bindModuleEvents=function(C,F){var D={};D.url=A.url;D.viewLinkName=C;switch(F){case"showLayout":D.deviceType=1;D.templateType=1;D.viewID=$(A.container+" [elname=reportcustomizationcontainer]").attr("viewid");D.dataBlockIdentifier="datablock1";D.type=ReportBuilderConfigurationTypes.LAYOUT;ReportBuilderController.LayoutController.create(D);break;case"showCriteriaFilter":D.type=ReportBuilderConfigurationTypes.FILTER;ReportBuilderController.FilterController.create(D);break;case"showGrouping":D.type=ReportBuilderConfigurationTypes.GROUPSORT;D.isGrouping=true;ReportBuilderController.GroupSortController.create(D);break;case"showSorting":D.type=ReportBuilderConfigurationTypes.GROUPSORT;D.isGrouping=false;ReportBuilderController.GroupSortController.create(D);break;case"showSettings":D.type=ReportBuilderConfigurationTypes.REPORTPROPERTIES;ReportBuilderController.ReportPropertiesController.create(D);break}var E=$("select[elname='fieldFlatSelect']");E.zcDropDown({showSearch:true,placeholder:"Choose field",dropdownCssClass:"zc-sharedanalytics-select2 zc-select2-addfield"})};this.bindFilterEvents=function(){$(A.container+" [elname=reportbuilderaddfilter]").off("click").on("click",function(C){$("#criteriaStr").addClass("hide");$("#nocriteriaStr").addClass("hide");$("#editCricCont").addClass("hide");$("#saveCricCont").removeClass("hide");$("#cancelCricCont").removeClass("hide");$("#createCriteria").removeClass("hide");$("#criteriaMainCont").removeClass("hide");$("#criteriaMainCont").find("[elNAme=actionLink]").removeClass("hide");$.ajax({type:"GET",url:A.url+"/showCriteriaBuilder",success:function(D){LIB._stopLoading();$("#critBuilder").html(D);$("#create_report_button_con").show();$("#zcToastClear").trigger("click");var F={context:Constants.REPORT};CriteriaBuilderNew.initConfig(F);var E=$("#critBuilder").find(".zc-rule-main");CriteriaBuilderNew.init(E);$("[elName=viewCrit]").find(":input[type=radio]").each(function(H,G){$(G).customRadio()})}})})};this.bindGroupingEvents=function(){var D=$("#sortableCont li").length;if(D>0){var C=$("ul#sortableCont li[formcomponentid]").length;if(C>0){$(".selectFieldLi").hide();$("ul#sortableCont li[formcomponentid]").first().trigger("click")}$(A.container+" li[formcomponentid] [elName='addSort']").on("click",function(H){$("#sortableCont .active").removeClass("active");var G=$(this).parent("li[viewComponentId]");var F=$(".selectFieldLi");G.after(F);$(".selectFieldLi").fadeIn();E.data("zcdd").open();E.data("zcdd").afterClose(function(){var I=E.find("option:selected").length;if(I==0){lastClicked.addClass("active");$(".selectFieldLi").hide()}});H.stopPropagation()});var E=$("select[elname='sortColumns']");E.zcDropDown({showSearch:true,placeholder:"Choose field",dropdownCssClass:"zc-sharedanalytics-select2 zc-sort-select2-drop"})}$(A.container+" #sortableCont li[formComponentId]").off("click").on("click",function(){$(A.container+" #sortableCont .active").removeClass("active");$(this).addClass("active");$.ajax({type:"POST",url:A.url+"/getCustomSorting",success:function(F){LIB._stopLoading();$("#critBuilder").html(F);$("#create_report_button_con").show();$("#zcToastClear").trigger("click");var H={context:Constants.REPORT};CriteriaBuilderNew.initConfig(H);var G=$("#critBuilder").find(".zc-rule-main");CriteriaBuilderNew.init(G);$("[elName=viewCrit]").find(":input[type=radio]").each(function(J,I){$(I).customRadio()})}})})}});SharedAnalyticsZCReportEditor=new function(){this.MODE="NEWREPORT";this.saveView=function(B){if(B==""){alert("No changes");return false}var D;var A;var C=$("#zc-create-report-content");if(isNewPivotReport){D=GlobalUrls.getAppUrlPrefix()+"/sharedanalytics/savereport";$(C).find("input[buttontype=finish]").css("pointer-events","none")}else{var A=$(C).attr("reportLinkName");D=GlobalUrls.getAppUrlPrefix()+"/sharedanalytics/"+A+"/savereport"}SharedAnalyticsLoader.showLoader();$("#zc-sa-loadcontiner").css("margin-right","88px");$.ajax({url:D,type:"POST",data:{zccpn:ZCGlobal.csrfToken,profileIds:profileIds===""?undefined:profileIds,zrConfigXML:B,viewDisplayName:ZCREPORTNAME,viewType:ZCREPORTTYPE,zcReportParentID:ZCREPORTPARENTID,pageID:ZCREPORTPAGEID,sectionID:ZCREPORTSECTIONID,baseFormID:FORMID},success:function(G,F,H){var E=SharedAnalyticsZCReportEditor.getRespArr(G);if(E.ZCSTATUS=="SUCCESS"){SharedAnalyticsLoader.showSavedStatus();if(E.EXISTREPORT=="FALSE"){var I=E.REPORTLINKNAME;$(document).one("ajaxStop",function(){$zcmodal.getTopPopup().close();history.pushState("","",GlobalUrls.getAppUrlPrefix()+"/#Report:"+I);location.reload()})}if(!isNewPivotReport){$(".zc_nav_com a[id='"+A+"']").trigger("click");$zcmodal.getTopPopup().close()}}}})};this.getXMLConfigDetails=function(){var B=document.getElementById("dbFrame").contentWindow;var A="xmlConfig";B.postMessage(A,"*")};this.refreshColumnList=function(){var B=document.getElementById("dbFrame").contentWindow;var A="refreshColumnList";B.postMessage(A,"*")};this.closeEditorWindow=function(){window.history.back()};this.openReportBuilder=function(){if($("span[elName='popupsettingsicon']").length>0){$("#reportPropArea").addClass("zc-dem-slider active")}};this.getRespArr=function(B){var A=new Array();for(var D in B){var E=B[D];for(var C in E){A[C]=E[C]}}return A}};var ReportBuilderConfigurationTypes=new function(){this.LAYOUT=1;this.FILTER=2;this.GROUPSORT=3;this.REPORTPROPERTIES=4;this.ANAYTICSBUILDER=5};var ReportBuilderUtils=new function(){this.getFieldIcon=function(A,C,B){switch(A){case Fields.SINGLE_LINE:return"zc-fb-field-icon zc-em zc-fb-single-line";case Fields.MULTI_LINE:return"zc-fb-field-icon zc-em zc-fb-multi-line";case Fields.NUMBER:if(C==Fields.NUMBER){return"zc-fb-field-icon zc-em zc-fb-number"}else{if(C==Fields.DECIMAL){return"zc-fb-field-icon zc-em zc-fb-decimal"}}break;case Fields.PERCENTAGE:return"zc-fb-field-icon zc-em zc-fb-percentage";case Fields.CURRENCY:return"zc-fb-field-icon zc-em zc-fb-currency";case Fields.EMAIL_ADDRESS:return"zc-fb-field-icon zc-em zc-fb-mail";case Fields.DATE:return"zc-fb-field-icon zc-em zc-fb-date";case Fields.DATE_TIME:return"zc-fb-field-icon zc-em zc-fb-date-Time";case Fields.CHECK_BOX:return"zc-fb-field-icon zc-em zc-fb-decision";case Fields.FILE_UPLOAD:return"zc-fb-field-icon zc-em zc-fb-file-upload";case Fields.AUDIO:return"zc-fb-field-icon zc-em zc-fb-audio";case Fields.VIDEO:return"zc-fb-field-icon zc-em zc-fb-video";case Fields.IMAGE:return"zc-fb-field-icon zc-em zc-fb-image";case Fields.URL:return"zc-fb-field-icon zc-em zc-fb-url";case Fields.RICH_TEXT_AREA:return"zc-fb-field-icon zc-em zc-fb-rich-text";case Fields.SCRIPT:return"zc-fb-field-icon zc-em zc-fb-formula";case Fields.AUTO_NUMBER:return"zc-fb-field-icon zc-em zc-fb-auto-number";case Fields.SYSTEM_LOOKUP:return"zc-fb-field-icon zc-em zc-fb-look-up";case Fields.SINGLE_SELECT:case Fields.INLINE_SINGLE_SELECT:if(B==Fields.RELATED_FORM){return"zc-fb-field-icon zc-em zc-fb-look-up"}else{if(C==Fields.PICK_LIST||C==Fields.INLINE_PICK_LIST){return"zc-fb-field-icon zc-em zc-fb-drop-down"}else{if(C==Fields.RADIO||C==Fields.INLINE_RADIO){return"zc-fb-field-icon zc-em zc-fb-radio"}else{return"zc-fb-field-icon zc-em zc-wb-integration"}}}case Fields.MULTI_SELECT:if(B==Fields.RELATED_FORM){if(C==Fields.SUB_FORM_GRID){return""}else{return"zc-fb-field-icon zc-em zc-fb-look-up"}}else{if(C==Fields.LIST){return"zc-fb-field-icon zc-em zc-fb-multiselect"}else{if(C==Fields.CHECK_BOXES){return"zc-fb-field-icon zc-em zc-fb-check-box"}}}break;case Fields.NAME:return"zc-fb-field-icon zc-em zc-fb-name";case Fields.ADDRESS:return"zc-fb-field-icon zc-em zc-fb-address";case Fields.PHONE_NUMBER:return"zc-fb-field-icon zc-em zc-fb-phone";case Fields.SIGNATURE:return"zc-fb-field-icon zc-em zc-fb-signature";case Fields.RECORD_STATUS:return"zc-fb-field-icon zc-em zc-fb-drop-down";default:return""}};this.applySelect2=function(A){A.zcDropDown({dropdownCssClass:"zc-sharedanalytics-select2"})}};var SharedAnalyticsLoader=new function(){this.showLoader=function(){var A='<div id="zc-sa-loadcontiner" class="zc-save-status"><div id="zc-sa-load" class="zc-save-loader" style="display: none;"></div><div id="zc-sa-msg" class="zc-saved-msg" style="display: none;"><div class="zc-save-checkmark"></div><span>Saved</span></div></div>';$("[elname='zc-sa-dialog-heading']").append(A);$("#zc-sa-load").fadeIn(500)};this.showSavedStatus=function(){$("#zc-sa-load").hide();$("#zc-sa-msg").fadeIn(500);setTimeout(function(){$("#zc-sa-loadcontiner").remove()},500)}};$.reportBuilderAjax=(function(A){var B=A.data;if(A.method==="POST"){if(typeof (B)==="string"){B+="&"+ZCGlobal.csrfTokenName+"="+ZCGlobal.csrfToken}else{B[ZCGlobal.csrfTokenName]=ZCGlobal.csrfToken}}$.ajax({beforeSend:function(){if(A.loader){if(ZCGlobal.contextName==undefined){showPreloader()}else{SharedAnalyticsLoader.showLoader()}}},type:A.method,url:A.url,data:B,success:function(C){if(A.loader){if(ZCGlobal.contextName==undefined){showStatus(i18n.saved)}else{SharedAnalyticsLoader.showSavedStatus()}}A.callback(C)}})});var LayoutController=(function(B){ReportBuilderControllerFactory.call(this,B);var A=this;var C=this.getURL();this.getLayoutDisplayProperties=function(D){$.reportBuilderAjax({method:"GET",data:D.data,url:C.getLayoutDisplayProperties(),loader:false,callback:function(E){D.callback(E)}})};this.changeLayout=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.changeLayout(),loader:true,callback:function(E){D.callback(E)}})};this.saveRecordsPerRow=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.saveRecordsPerRow(),loader:true,callback:function(E){D.callback(E)}})};this.saveLayoutDisplayType=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.saveLayoutDisplayType(),loader:true,callback:function(E){D.callback(E)}})};this.saveDataBlockSize=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.saveDataBlockSize(),loader:true,callback:function(E){D.callback(E)}})};this.showFieldProperty=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.getFieldProperty(),loader:false,callback:function(E){D.callback(E)}})};this.saveViewCompDispName=function(D){$.reportBuilderAjax({method:"POST",data:D.data,loader:true,url:C.getSaveViewCompDispName(),callback:function(E){D.callback(E)}})};this.deleteViewField=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.deleteViewField(),loader:true,callback:function(E){D.callback(E)}})};this.isCustomActionPresent=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.isCustomActionPresent(),loader:true,callback:function(E){D.callback(E)}})};this.modifyCompositeProperties=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.modifyCompositeProperties(),loader:true,callback:function(E){D.callback(E)}})};this.saveViewFieldProperty=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.saveViewFieldProperty(),loader:true,callback:function(E){D.callback(E)}})};this.saveEncryptionProperties=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.saveEncryptionProperties(),loader:true,callback:function(E){D.callback(E)}})};this.saveLinkedView=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.saveLinkedView(),loader:true,callback:function(E){D.callback(E)}})};this.addViewField=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.addViewField(),loader:true,callback:function(E){D.callback(E)}})};this.addSubFormViewField=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.addSubFormViewField(),loader:true,callback:function(E){D.callback(E)}})};this.rearrangeViewField=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.rearrangeViewField(),loader:true,callback:function(E){D.callback(E)}})}});var FilterController=(function(B){ReportBuilderControllerFactory.call(this,B);var A=this;var C=this.getURL();this.showCriteriaBuilder=function(D){$.reportBuilderAjax({method:"GET",url:C.getCriteriaBuilder(),loader:false,callback:function(E){D.callback(E)}})};this.setCriteria=function(D){$.reportBuilderAjax({method:"POST",data:D.data,url:C.getSetCriteriaUrl(),loader:true,callback:function(E){D.callback(E)}})}});var GroupSortController=function(B){ReportBuilderControllerFactory.call(this,B);var A=this;var C=this.getURL();this.showSortingConfiguration=function(D){$.reportBuilderAjax({method:"POST",url:C.getSortingConfiguration(),loader:false,data:D.data,callback:function(E){D.callback(E)}})};this.addOrSort=function(D){$.reportBuilderAjax({method:"POST",url:C.getAddSortOrGroup(),data:D.data,loader:true,callback:function(E){D.callback(E)}})};this.updateAscOrDesc=function(D){$.reportBuilderAjax({method:"POST",url:C.updateAscOrDesc(),data:D.data,loader:true,callback:function(E){D.callback(E)}})}};var ReportPropertiesController=(function(B){ReportBuilderControllerFactory.call(this,B);var A=this;var C=this.getURL();this.saveProperties=function(D){$.reportBuilderAjax({method:"POST",url:C.saveProperties(),data:D.data,loader:true,callback:function(E){D.callback(E)}})}});var AnalyticsController=(function(B){ReportBuilderControllerFactory.call(this,B);var A=this;var C=this.getURL();this.setLoginUserCheck=function(D){$.reportBuilderAjax({method:"POST",url:C.setLoginUserCheck(),data:D.data,loader:true,callback:function(E){D.callback(E)}})};this.restrictPivotData=function(D){$.reportBuilderAjax({method:"POST",url:C.restrictPivotData(),data:D.data,loader:true,callback:function(E){D.callback(E)}})};this.addPivotColumn=function(D){$.reportBuilderAjax({method:"POST",url:C.addPivotColumn(),data:D.data,loader:true,callback:function(E){D.callback(E)}})};this.updatePivotColumn=function(D){$.reportBuilderAjax({method:"POST",url:C.updatePivotColumn(),data:D.data,loader:true,callback:function(E){D.callback(E)}})}});var _reportBuilderContainer="#zc-create-report-content";var LayoutDOM=(function(){var A=this;this.getReportBuilderContainer=function(){return $(_reportBuilderContainer)};this.getLayoutDisplayPropertyElement=function(){return $(_reportBuilderContainer).find("a[elname=layoutdisplayproperties]")};this.getLayoutPropertiesContainer=function(){return $(".zc-dem-customlayout-properties")};this.getLayoutPropertiesDoneElement=function(){return $(A.getLayoutPropertiesContainer()).find("#proceedBtn")};this.getLayoutPropertyConfigElement=function(){return $(A.getLayoutPropertiesContainer()).find("div[elname=layoutPropertyConfig]")};this.getRecordsPerRowContainerElement=function(){return $(A.getLayoutPropertiesContainer()).find("ul[elname=recordsperRowUlEle]")};this.getRecordsPerRowElement=function(){return $(A.getRecordsPerRowContainerElement()).find("li")};this.getSelectedRecordsPerRowElement=function(){return $(A.getRecordsPerRowContainerElement()).find("li.selected")};this.getLayoutWidthConfigElement=function(){return $(A.getLayoutPropertiesContainer()).find("a[elname=layoutwidthconfigEle]")};this.getCustomLayoutSizeElement=function(){return $(A.getLayoutPropertiesContainer()).find("input[elname=customlayoutsize]")};this.getCustomRowConfig=function(){return $(A.getLayoutPropertiesContainer()).find("div[elname=customrowconfig]")};this.getCustomRowConfigBasedOnType=function(B){return $(A.getLayoutPropertiesContainer()).find("div[elname=customrowconfig][type='"+B+"']")};this.getFreezeColumnElement=function(){return $(A.getLayoutPropertyConfigElement()).find("ul[elname=freezeColumnContainer] li")};this.getCardDisplayElement=function(){return $(A.getLayoutPropertyConfigElement()).find("ul[elname=layoutdisplayas] li")};this.getCardLayoutConfigurationContainer=function(){return $(A.getLayoutPropertyConfigElement()).find("ul[elname=cardlayoutconfiguation]")};this.getCardLayoutConfigurationElement=function(){return $(A.getCardLayoutConfigurationContainer()).find("li")};this.getCardLayoutConfigurationSelectedElement=function(){return $(A.getCardLayoutConfigurationContainer()).find("li.selected")};this.getFieldElement=function(){return $(_reportBuilderContainer).find("ul li[elname=layoutFieldEle]")};this.getLastFieldElement=function(){return $(_reportBuilderContainer).find("ul li[elname=layoutFieldEle]").last()};this.getIdentifierBasedFieldElement=function(C,B){return $(C).find("li[identifier='"+B+"']")};this.getCardLayoutFieldElement=function(){return $(_reportBuilderContainer).find("div[elname=zc-dem-qv-field-el]")};this.getCardLayoutImageFieldElement=function(C,B){return $(_reportBuilderContainer).find("[elname=zc-dem-qv-field-el][isimage=true][viewid="+C+"][datablockidentifier="+B+"]")};this.getDataBlockWrapper=function(C,B){return $(_reportBuilderContainer).find("[elname=datablockwrapper][viewid="+C+"][datablockidentifier="+B+"]")};this.getDataBlockWrapperBasedOnResponse=function(B,D,C){return $(B).find("[elname=datablockwrapper][viewid="+D+"][datablockidentifier="+C+"]")};this.getCardLayoutFieldContainerElement=function(){return $(_reportBuilderContainer).find("div[elname=zc-dem-qv-field-container]")};this.getCustomActionWorkFlowEditElement=function(){return $(_reportBuilderContainer).find("div[elname=customactionworkflowedit]")};this.getLayoutScrollContainer=function(){return $(_reportBuilderContainer).find("[elname=zc-sa-layoutscrollcontainer]")};this.getFieldDisplayScrollContainer=function(){return $(_reportBuilderContainer).find("[elname=fieldpropertycontainerscroll]")};this.getFieldStyleScrollContainer=function(){return $(_reportBuilderContainer).find("[elname=stylecontainerscroll]")};this.getCustomActionAvailabilityElement=function(B){return $(B).find("div[elname='customactionavailability']")};this.getConditionalAddRuleElement=function(){return $(_reportBuilderContainer).find("[elname=addconditionalformattingevent]")};this.getConditionalEditRuleElement=function(){return $(_reportBuilderContainer).find("i[elname=editformatting]")};this.getConditionalDeleteRuleElement=function(){return $(_reportBuilderContainer).find("i[elname=deleteformatting]")};this.getLayoutFieldEleDelete=function(){return $(_reportBuilderContainer).find("[elname='layoutFieldEleDelete']")};this.getActiveFieldElement=function(){var B=$(_reportBuilderContainer).find("ul li[elname=layoutFieldEle].active");if($(B).length==0){B=A.getLayoutActiveFieldDisplayName()}return $(B)};this.getInlineSubFormLinkView=function(){return $(_reportBuilderContainer).find("[elname=subformLinkView]")};this.getLinkedViewEl=function(){return $(_reportBuilderContainer).find("[elname=lookupLinkedView]")};this.getFieldFlatSelect=function(C,B){return $(_reportBuilderContainer).find("#fieldFlatSelect[viewid='"+C+"'][datablockidentifier='"+B+"']")};this.getFieldFlatSelectOption=function(D,B,C){return $(A.getFieldFlatSelect(D,B)).find("option[delugename='"+C+"']")};this.getFlatPopupFieldsUlElement=function(C,B){return $(_reportBuilderContainer).find("#flatPopupFieldsUl[viewid='"+C+"'][datablockidentifier='"+B+"']")};this.getFlatPopupFieldsUlElementFromResponse=function(C,D,B){return $(C).find("#flatPopupFieldsUl[viewid='"+D+"'][datablockidentifier='"+B+"']")};this.getFlatPopupFieldsLiElement=function(C,B){return $(A.getFlatPopupFieldsUlElement(C,B)).find("li")};this.getFlatPopupFieldsUlSortElement=function(){return $(_reportBuilderContainer).find("[elname='flatPopupFieldsUl']")};this.getAddFieldPlaceHolderLiEle=function(){return $("#addFieldPlaceHolder li")};this.getFieldFlatSelectElement=function(){return $(_reportBuilderContainer).find("#fieldFlatSelect")};this.getCustomizationDoneElement=function(){return $(_reportBuilderContainer).find("input[buttontype='finish']")};this.getActiveFieldElementUl=function(){return $(A.getActiveFieldElement()).parent()};this.getActiveFieldLabelElement=function(){return $(A.getActiveFieldElement()).find("label")};this.getActiveFieldTooltip=function(){return $(A.getActiveFieldElement()).find("[elname=tooltipDispName]")};this.getFieldToolTipHeader=function(B){return $(B).closest("[elname=tooltipDispNameHeader]")};this.getFieldToolTipOutter=function(B){return $(B).closest("[elname=zc-dem-layout-tooltip-outter]")};this.getFirstFieldElement=function(){return $(A.getFieldElement()).first()};this.getFieldPropertyContainer=function(){return $(_reportBuilderContainer).find("div [elname=fieldpropertycontainer]")};this.getFieldTabContainer=function(){return $(_reportBuilderContainer).find("div[elname=fieldpropertytab] a[elname!=single-header-tab]")};this.getFieldSingleTabContiner=function(){return $(_reportBuilderContainer).find("div[elname=fieldpropertytab] a[elname=single-header-tab]")};this.getFieldDisplayContainer=function(){return $(_reportBuilderContainer).find("div[elname=displaytabcontainer]")};this.getFieldStyleContainer=function(){return $(_reportBuilderContainer).find("div[elname=conditionalformattingcontainer]")};this.getFieldStyleContainerFromResponse=function(B){return $(B).filter("div[elname=conditionalformattingcontainer]")};this.getFieldPropertyConfig=function(){return $(_reportBuilderContainer).find("[elname=fieldpropertyconfig]")};this.getImageFieldShapeSelect2=function(){return $(_reportBuilderContainer).find("select[elname=zc-shape-layout-select]")};this.getFieldPropertySelect2=function(){return $(A.getFieldPropertyContainer()).find("select")};this.getLayoutFieldDisplayName=function(){return $(A.getFieldPropertyContainer()).find("#layoutFieldDisplayName")};this.getFieldEncryptionDisplayTypeElement=function(){return $(A.getFieldPropertyContainer()).find("select[elname=fieldEncryption]")};this.getEncryptionShowOnClickElement=function(){return $(A.getFieldPropertyContainer()).find("div[elname=encryptionshowonclick]")};this.getEncryptionChractersElement=function(){return $(A.getFieldPropertyContainer()).find("div[elname=encryptionchracters]")};this.getEncrptionCharacterInputElement=function(){return $(A.getFieldPropertyContainer()).find("input[elname=encrvalue]")};this.getDisplayEncryptionOption=function(){return $(A.getFieldPropertyContainer()).find("input[elname=displayEncryptionOption]")};this.getFieldEncryptionSelectedDisplayType=function(){return $(A.getFieldEncryptionDisplayTypeElement()).find("option:selected")};this.getDisplayNamePropertyElement=function(){return $(A.getFieldPropertyContainer()).find("input#layoutFieldDisplayName")};this.getLayoutActiveFieldContainer=function(){return $(_reportBuilderContainer).find("[elname=zc-dem-qv-field-el].active")};this.getCardLayoutFieldSelect2=function(){return $(A.getFieldPropertyConfig().find("select[elname=fieldSelect]"))};this.getCardLayoutFieldSelectedOption=function(){return $(A.getCardLayoutFieldSelect2().find("option:selected"))};this.getLayoutSelectedFieldContainerBasedOnIdentifier=function(B){return $(A.getCardLayoutFieldElement()).find("[elname=zc-dem-qv-fieldname][fieldselectidentifier='"+B+"']").closest("[elname=zc-dem-qv-fieldname]")};this.getLayoutActiveFieldDisplayName=function(){return $(A.getLayoutActiveFieldContainer()).find("[elname=zc-dem-qv-fieldname]")};this.getFieldNameElementBasedOnIdentifier=function(D,B,C){return $(_reportBuilderContainer).find("[elname=zc-dem-qv-fieldname][viewid='"+D+"'][datablockidentifier='"+B+"'][fieldselectidentifier="+C+"]")};this.getFieldNameElementBasedOnColumnName=function(D,B,C){return $(_reportBuilderContainer).find("[elname=zc-dem-qv-fieldname][viewid='"+D+"'][datablockidentifier='"+B+"'][columnname='"+C+"']")};this.getFieldNameElementBasedOnSeqNo=function(D,C,B){return $(_reportBuilderContainer).find("[elname=zc-dem-qv-fieldname][viewid='"+D+"'][datablockidentifier='"+C+"'][seqno="+B+"]")};this.getLayoutFieldElements=function(C,B){return $(_reportBuilderContainer).find("[elname=zc-dem-qv-fieldname][viewid='"+C+"'][datablockidentifier='"+B+"']")};this.getLayoutContainer=function(){return $(_reportBuilderContainer).find("[elname=zc-dem-qv-field-container]").find(".zc-dem-cont-placeholder")};this.getLayoutMappedField=function(B){return $(B).find(".zc-dem-qv-form-group").find("div:not([linkname=-zc_none-])")};this.getChoosedSelect2=function(){return $(_reportBuilderContainer).find(".zc-dem-sa-qv-form-control").find("a").find(".select2-chosen")};this.getCompositeFieldDiplayValueContainer=function(){return $(A.getFieldPropertyContainer()).find("[elname=compositeFieldDiplayValueConfig]")};this.getCompositeFieldDiplayValueElement=function(){return $(A.getCompositeFieldDiplayValueContainer()).find("input")};this.getCheckedCompositeField=function(){return $(A.getCompositeFieldDiplayValueContainer()).find("input:checked")};this.getNameFieldDisplayOption=function(){return $(A.getFieldPropertyContainer()).find("[elname=nameFieldDisplayOption]")};this.getViewComponentAttributeElement=function(B){return $(_reportBuilderContainer).find("[viewcomponentid="+B+"]")};this.getViewCompAttributeElement=function(B){return $(_reportBuilderContainer).find("[viewcompid="+B+"]")};this.getPrimaryViewcompIdElement=function(B){return $(_reportBuilderContainer).find("[primaryviewcompid="+B+"]")};this.getLocationFieldDisplayOption=function(){return $(A.getFieldPropertyContainer()).find("[elname=locationFieldDisplayOption]")};this.getLocationFieldSelectedDisplayOption=function(){return $(A.getLocationFieldDisplayOption()).find("option:selected")};this.getCompositeFieldDiplayValueEle=function(){return $(A.getFieldPropertyContainer()).find("[elname=compositeFieldDiplayValueEle]")};this.getLocationFieldDisplayFormat=function(){return $(A.getFieldPropertyContainer()).find("[elname=locationFieldDisplayFormat]")};this.getCoordinateDisplayFormat=function(){return $(A.getFieldPropertyContainer()).find("[elname=coordinateDisplayFormat]")};this.getLinkToMap=function(){return $(A.getFieldPropertyContainer()).find("[elname=linkToMap]")};this.getPhoneDispProps=function(){return $(A.getFieldPropertyContainer()).find("[elname=phoneDispProps]")};this.getPhoneDisplaySelectionOption=function(){return $((A.getPhoneDispProps())[0]).find("option:selected")};this.getPhoneDisplayLinkToDial=function(){return $((A.getPhoneDispProps())[1])};this.getFieldPropertySelectElements=function(){return $(A.getFieldPropertyContainer()).find("select")};this.getNumericFieldConfigContainer=function(){return $(A.getFieldPropertyContainer()).find("[elname=numericFieldConfig]")};this.getNumericFieldConfigInput=function(){return $(A.getNumericFieldConfigContainer()).find("input")};this.getDateDisplayOption=function(){return $(A.getFieldPropertyContainer()).find("select[elname=dateDisplayOption]")};this.getChoiceDelimiter=function(){return $(A.getFieldPropertyContainer()).find("select[elname=choiceDelimiter]")};this.getLinkedViewElName=function(B){return $(A.getFieldPropertyContainer()).find("[elname='"+B+"']")};this.getDecisionProps=function(){return $(A.getFieldPropertyContainer()).find("[elname=decisionProps]")};this.getDecisionTrueElement=function(){return $(A.getFieldPropertyContainer()).find("#decisiontrue")};this.getDecisionFalseElement=function(){return $(A.getFieldPropertyContainer()).find("#decisionfalse")};this.getRichtextEle=function(){return $(A.getFieldPropertyContainer()).find("[elname=richtextEle]")};this.getImageDimension=function(){return $(A.getFieldPropertyContainer()).find("select[elname=imageDimension]")};this.getCustomDimensionConfiguration=function(){return $(A.getFieldPropertyContainer()).find("[elname=customDimensionConfiguration]")};this.getImagePropValueEle=function(){return $(A.getFieldPropertyContainer()).find("input[elname=propvalue]")};this.getFirstImagePropValueEle=function(){return $(A.getFieldPropertyContainer()).find("input[elname=propvalue]:first")};this.getWidthTxtCont=function(){return $(A.getFieldPropertyContainer()).find("#widthtxtcont")};this.getHeightTxtCont=function(){return $(A.getFieldPropertyContainer()).find("#heighttxtcont")};this.getSubFormFormFields=function(){return $(A.getFieldPropertyContainer()).find("select[elname=subFormFormFields]")};this.getSubFormFormFieldsOptions=function(){return $(A.getSubFormFormFields()).find("option")};this.getSubFormFormFieldsOption=function(B){return $(A.getSubFormFormFields()).find("option[value="+B+"]")};this.getSubFormDelimiterContainer=function(){return $(A.getFieldPropertyContainer()).find("div[elname=subFormDelimiterContainer]")};this.getSubFormDelimiter=function(){return $(A.getSubFormDelimiterContainer()).find("select[elname=subFormDelimiter]")};this.getSubFormCustomDelimiterContainer=function(){return $(A.getFieldPropertyContainer()).find("div[elname=subFormCustomDelimiter]")};this.getSubFormCustomDelimiter=function(){return $(A.getFieldPropertyContainer()).find("#customdelimiter")};this.getSubFormFieldUIElement=function(){var B='<li class="subFormViewField" elname="subFormViewField"><i class="zc-common-drag zc-em"></i><span></span><i elname="subFormViewFieldDelete" class="zc-pb zc-pb-delete"></i></li>';return B};this.getSubFormDelimiterSelectedOption=function(){return $(A.getSubFormDelimiter()).find("option:selected")};this.getSubFormViewField=function(){return $(A.getSubFormViewFieldsContainer()).find("li[elname=subFormViewField]")};this.getSubFormViewFieldSpan=function(B){return $(B).find("span")};this.getSubFormViewFieldsContainer=function(){return $(A.getFieldPropertyContainer()).find("ul[elname=subFormViewFieldsContainer]")};this.getSubFormViewFieldDelete=function(){return $(A.getSubFormViewFieldsContainer()).find("i[elname=subFormViewFieldDelete]")}});var FilterDOM=(function(){var A=this;this.getScrollContainer=function(){return $(_reportBuilderContainer).find("div[elname=zc-sa-scroll-container]")};this.getReportAddFilterElement=function(){return $(_reportBuilderContainer).find("a[elname=reportbuilderaddfilter]")};this.getEditCriteriaElement=function(){return $(_reportBuilderContainer).find("a[elname=editCrit]")};this.getDeleteCriteriaElement=function(){return $(_reportBuilderContainer).find("a[elname=deleteCrit]")};this.getReportHeaderElement=function(){return $(_reportBuilderContainer).find(".zc-dem-report-header")};this.getCriteriaStrElement=function(){return $(_reportBuilderContainer).find("#criteriaStr")};this.getDeleteCrit=function(){return $(A.getCriteriaStrElement).find("[elName='deleteCrit']")};this.conDiv=function(){return $(_reportBuilderContainer).find("[elename='conDiv']")};this.conOprDiv=function(){return $(_reportBuilderContainer).find("[elename='conOprDiv']")};this.getNoCriteriaStrElement=function(){return $(_reportBuilderContainer).find("#nocriteriaStr")};this.getEditCricCont=function(){return $(_reportBuilderContainer).find("#editCricCont")};this.getSaveCricCont=function(){return $(_reportBuilderContainer).find("#saveCricCont")};this.getCancelCricCont=function(){return $(_reportBuilderContainer).find("#cancelCricCont")};this.getCreateCriteria=function(){return $(_reportBuilderContainer).find("#createCriteria")};this.getCriteriaMainCont=function(){return $(_reportBuilderContainer).find("#criteriaMainCont")};this.getBaseCriteriaStr=function(){return $(_reportBuilderContainer).find("#baseCricStr")};this.getCritBuilderTextCont=function(){return""};this.getCriteriaMainContActionLink=function(){return $(A.getCriteriaMainCont()).find("[elNAme=actionLink]")};this.getEditCont=function(){return $(_reportBuilderContainer).find("#editCont")};this.getSaveCont=function(){return $(_reportBuilderContainer).find("#saveCont")};this.getCancelCont=function(){return $(_reportBuilderContainer).find("#cancelCont")};this.getReportCrtFrm=function(){return $(_reportBuilderContainer).find("[name=reportCrtFrm]")};this.getCritBuilder=function(){return $(_reportBuilderContainer).find("#critBuilder")};this.getFilterButtonContainer=function(){return $(_reportBuilderContainer).find("#create_report_button_con")};this.getZCToastClear=function(){return $(_reportBuilderContainer).find("#zcToastClear")};this.getCriteriaBuilderRuleMain=function(){return $(A.getCritBuilder()).find(".zc-rule-main")};this.getCriteriaBuilderFirstTabIndex=function(){var B=$(A.getCritBuilder()).find(".zc-rule-builder").find("select:first");return $(B).parent().attr("tabindex","0").find("input[type=text]:first")};this.getViewCriteriaRadio=function(){return $(_reportBuilderContainer).find("[elName=viewCrit]").find(":input[type=radio]")};this.getCriteriaOption=function(){return $(_reportBuilderContainer).find("input[name=criteriaOption]")[0]};this.getCriteriaId=function(){return $(A.getReportCrtFrm()).find("input[name=criteriaId]").val()}});var GroupSortDOM=(function(){var A=this;this.getScrollContainer=function(){return $(_reportBuilderContainer).find("div[elname=zc-sa-scroll-container]")};this.getSortableActiveUserFilter=function(){return $(_reportBuilderContainer).find("#sortableActiveUserFilter .active")};this.getGroupOrSortAddFieldElement=function(){return $(_reportBuilderContainer).find("li[formcomponentid] [elName='addSort']")};this.getGroupOrSortDeleteElement=function(){return $(_reportBuilderContainer).find("li[formcomponentid] [elName='delete']")};this.getGroupOrSortAddFieldElementFromLi=function(B){return B.find("[elName='addSort']")};this.getGroupOrSortDeleteElementFromLi=function(B){return B.find("[elName='delete']")};this.getSortableContentElement=function(){return $(_reportBuilderContainer).find("#sortableCont")};this.getSortableContentFormComponentLiElement=function(){return $(A.getSortableContentElement()).find("li[formcomponentid]")};this.getSortableContentLiElement=function(){return $(A.getSortableContentElement()).find("li")};this.getSingleSortColumns=function(){return $(_reportBuilderContainer).find("select[elname='singleSortColumns']")};this.getGroupCheckElement=function(){return $(_reportBuilderContainer).find(".zc-dem-groupcheck")};this.getFirstSingleSortColumn=function(){return $(A.getSingleSortColumns())[0]};this.getAddGroupingElement=function(){return $(_reportBuilderContainer).find("#addField")};this.getSelectOptionSingleSortColumns=function(){return $(A.getSingleSortColumns()).find("option:selected")};this.getSortUlElement=function(){return $(_reportBuilderContainer).find("#sortList ul")};this.getSortingContainer=function(){return $(_reportBuilderContainer).find(".zc-dem-sorting")};this.getGroupSortElement=function(){return $(A.getSortableContentElement()).find("li[elname='groupsortelement']")};this.getAddGroupSortElement=function(B){return $(B).parent("li[elname='groupsortelement']")};this.getGroupSortFieldIconElement=function(B){return $(B).find("span.zc-dem-field-icon i")};this.getSortableContentActiveElement=function(){return $(A.getSortableContentElement()).find(".active")};this.getSortableFieldParentElement=function(B){return $(B).parent("li")};this.getSortableFieldNextAllElement=function(B){return $(B).nextAll("li[elname='groupsortelement']")};this.getSortableFieldPreviousAllElement=function(B){return $(B).prevAll("li[elname='groupsortelement']")};this.getSelectedOptionElement=function(B){return $(A.getGroupSortSelectFieldElement()).find("option[delugeName='"+B+"']")};this.getSortableContainmentElement=function(){return $(_reportBuilderContainer).closest("[elname=sortingWrapper]")};this.getGroupSortFieldLiElement=function(){return $(A.getSortableContentElement()).find("li[elname='groupsortelement']")};this.getGroupSortFieldFirstLiElement=function(){return $(A.getGroupSortFieldLiElement()).first()};this.getGroupSortSelectFieldElement=function(){return $(_reportBuilderContainer).find(".selectFieldLi")};this.getGroupSortSelectFieldTextElement=function(){return $(A.getGroupSortSelectFieldElement()).find(".addText")};this.getGroupSortSelectFieldSelect2Container=function(){return $(A.getGroupSortSelectFieldElement()).find(".select2-container")};this.getGroupSortSelectFieldLiElement=function(){return $(_reportBuilderContainer).find("li.selectFieldLi select")};this.getAddGroupSortAddFieldElement=function(B){return B.item.find(".zc-dem-sorting-add-btn")};this.getSortColumns=function(){return $(_reportBuilderContainer).find("select[elname='sortColumns']")};this.getSortColumnSelectedOption=function(){return $(A.getSortColumns()).find("option:selected")};this.getSortDeleteElement=function(){return $(A.getSortableContentElement()).find("li a[elName='delete']")};this.getSortAddElement=function(){return $(A.getSortableContentElement()).find("li a[elName='addSort']")};this.getCustomSortingWrapper=function(){return $(_reportBuilderContainer).find("div[elname=zc-customSortingWrapper]")};this.getCustomSortingOrderContainer=function(){return $(_reportBuilderContainer).find("#zc-updateSortOrder")};this.getCustomSortingOrderIconElement=function(){return $(_reportBuilderContainer).find("#zc-updateSortOrder i")};this.getCustomSortingOrderElement=function(){return $(A.getCustomSortingOrderContainer()).find("li")};this.getCustomSortingOrderSpanElement=function(B){return $(B).find("span")};this.getCheckIconHtml=function(){return"<i class='zc-common-check zc-em'></i>"};this.getGroupSortSelectedElementFromFormcomponentid=function(B){return $(A.getSortableContentElement()).find("li[formcomponentid="+B+"]")};this.getGroupSortSelectedElement=function(B){return $(A.getSortableContentElement()).find("li[viewcomponentid="+B+"]")};this.getGroupSortLabelElement=function(B){return $(B).find("label[elname=sortText]")};this.getCustomSortingOrderCompositeFieldContainer=function(){return $(_reportBuilderContainer).find("#zc-updateCompositeSortOrder")};this.getCustomSortingOrderCompositeFieldElement=function(){return $(A.getCustomSortingOrderCompositeFieldContainer()).find("li")};this.getSortNameElement=function(B){return B.find("p.zc-sort-name")};this.getGroupingOrSortingTab=function(){return $(_reportBuilderContainer).find("[elname=shared-analytics-tab].selected")};this.getGroupSortElementDOM=function(C){var B=$("<li>");for(attr in C){B.attr(attr,C[attr])}if(C.isGroup=="true"){title="Add Grouping"}else{title="Add Sorting"}if(C.isCoordinateFormat=="true"){B.attr("class","zc-dem-field-withinfo")}B.append($("<span>").attr("class","zc-customsorting-move").append($("<i>").attr("class","zc-common-drag zc-em").attr("elname","dragger")),$("<span>").attr("class","zc-dem-field-icon").append($("<i>").attr("class",ReportBuilderUtils.getFieldIcon(C.fieldType,C.displayType,C.selectType))),$("<div>").attr("class","flLeft zc-sorting-label-content").append($("<label>").attr("class","zc-dem-text-ellipsis").append($("<p>").attr("class","zc-sort-name")),$("<label>").attr("elname","sortText").append("Sorted in Ascending Order"),$("<div>").attr("class","zc-dem-help").append($("<a>").attr("href","javascript:;").append($("<i>").attr("class","zc-common-info-alt zc-em")))),$("<a>").attr("class","zc-dem-rb-delete").attr("href","javascript:;").attr("title","Delete").attr("elName","delete").append($("<i>").attr("class","zc-em zc-wb-delete-workflow")),$("<a>").attr("class","zc-dem-sorting-add-btn").attr("href","javascript:;").attr("title",title).attr("elName","addSort").attr("hcElemName","addField").append($("<i>").attr("class","zc-em zc-common-plus")));return B}});var ReportPropertiesDOM=(function(){var A=this;this.getReportPropertiesContainer=function(){return $(_reportBuilderContainer).find("[elname=reportpropertiescontainer]")};this.getSelectElement=function(){return $(A.getReportPropertiesContainer()).find("select[name='profilename']")};this.getReportDisplayName=function(){return $(A.getReportPropertiesContainer()).find("input[name=reportdisplayname]")};this.getShareToElement=function(){return $(A.getReportPropertiesContainer()).find("input[name=sharedanalyticsshareto]")};this.getShareToSelectedElement=function(){return $(A.getReportPropertiesContainer()).find("input[name=sharedanalyticsshareto]:checked")};this.getPermissionSetElement=function(){return $(A.getReportPropertiesContainer()).find("div[elname=permissionsetsoption]")};this.getPermissionSetHelpTextElement=function(){return $(A.getReportPropertiesContainer()).find("span[elname=permissionsetshelptext]")}});var AnalyticsDOM=(function(){var A=this;this.getPivotReportPropertyContainer=function(){return $(_reportBuilderContainer).find("#reportPropArea")};this.getRecordVisibilityElement=function(){return $(_reportBuilderContainer).find("input[name='pivotdatavisibilityopts']")};this.getRecordRestrictionElement=function(){return $(_reportBuilderContainer).find("input[elName='restrictdataopt']")};this.getExportOptionElement=function(){return $(_reportBuilderContainer).find('input[name="isExportOption"]')};this.getUnderlyingElement=function(){return $(_reportBuilderContainer).find('input[name="isViewUnderlyingdata"]')};this.getZiaInsightsElement=function(){return $(_reportBuilderContainer).find('input[name="isZiaInsights"]')};this.getRenameElement=function(){return $(_reportBuilderContainer).find("li[elName='reportsFieldEle'] i[elname='renameAction']")};this.getReportsFieldEle=function(B){return $(B).parent("li[elName='reportsFieldEle']")};this.getCompositeRenameElement=function(){return $(_reportBuilderContainer).find("#reportPropArea #composite-column-con [elname='renameAction']")};this.getCompositeFieldDataElement=function(B){return $(B).parent("div#compositeFieldData")};this.getNearestCompositeFieldDataElement=function(B){return $(B).closest("div#compositeFieldData")};this.getCompositeViewDisplayName=function(){return $(_reportBuilderContainer).find("input[name='compositeViewDisplayName']")};this.getFieldDivCompositeViewDisplayName=function(B){return $(B).find("input[name='compositeViewDisplayName']")};this.getViewFieldDisplayName=function(){return $(_reportBuilderContainer).find("input[name='viewFieldDisplayName']")};this.getViewFieldDisplayNameFromElement=function(B){return $(B).find("input[name='viewFieldDisplayName']")};this.getCompositeFieldToggleCompositeSelection=function(B){return $(B).find('input[name="toggleCompositeSelection"]')};this.getInputElement=function(B){return $(B).find('input[type="text"]')};this.getPivotSettingElement=function(){return $("span[elName='popupsettingsicon']")};this.getPivotCloseElement=function(){return $(A.getPivotReportPropertyContainer()).find("a[elname=zc-dem-right-close]")};this.getDeleteFieldElement=function(){return $(_reportBuilderContainer).find("li[elName='reportsFieldEle'] i#deleteReportField")};this.getPivotSelectElements=function(){return $(A.getPivotReportPropertyContainer()).find("select")};this.getPivotSelectColumn=function(){return $(A.getPivotReportPropertyContainer()).find("select[elname=pivotColumns]")};this.getCompositeFieldCheckboxElement=function(){return $(A.getPivotReportPropertyContainer()).find("input[name='toggleCompositeSelection']")};this.getAnalyticsSliderContainer=function(){return $(A.getPivotReportPropertyContainer()).find(".zc-dem-participated-column")}});var ReportBuilderController={LayoutController:{create:function(B){var A=new LayoutController(B);A.bindEvents();return A}},FilterController:{create:function(A){var B=new FilterController(A);B.bindEvents();return B}},GroupSortController:{create:function(B){var A=new GroupSortController(B);A.bindEvents();return A}},ReportPropertiesController:{create:function(A){var B=new ReportPropertiesController(A);B.bindEvents();return B}},AnalyticsController:{create:function(B){var A=new AnalyticsController(B);A.bindEvents();return A}}};function ReportBuilderControllerFactory(A){var B,C;switch(A.type){case ReportBuilderConfigurationTypes.LAYOUT:C=ReportBuilderView.LayoutView.create(this,A);B=new LayoutViewUrl(A);break;case ReportBuilderConfigurationTypes.FILTER:C=ReportBuilderView.FilterView.create(this,A);B=new FilterViewUrl(A);break;case ReportBuilderConfigurationTypes.GROUPSORT:C=ReportBuilderView.GroupSortView.create(this,A);B=new GroupSortViewUrl(A);break;case ReportBuilderConfigurationTypes.REPORTPROPERTIES:C=ReportBuilderView.ReportPropertiesView.create(this,A);B=new ReportPropertiesUrl(A);break;case ReportBuilderConfigurationTypes.ANAYTICSBUILDER:C=ReportBuilderView.AnalyticsView.create(this,A);B=new AnalyticsUrl(A);break}this.bindEvents=function(){C.bindEvents();return this};this.getView=function(){return C};this.getURL=function(){return B}}var ReportBuilderView={LayoutView:{create:function(A,B){var C=ReportBuilderDOM.LayoutDOM.get();return new LayoutView(C,A,B)}},FilterView:{create:function(C,B){var A=ReportBuilderDOM.FilterDOM.get();return new FilterView(A,C,B)}},GroupSortView:{create:function(A,B){var C=ReportBuilderDOM.GroupSortDOM.get();return new GroupSortView(C,A,B)}},ReportPropertiesView:{create:function(C,B){var A=ReportBuilderDOM.ReportPropertiesDOM.get();return new ReportPropertiesView(A,C,B)}},AnalyticsView:{create:function(A,B){var C=ReportBuilderDOM.AnalyticsDOM.get();return new AnalyticsView(C,A,B)}}};function ReportBuilderViewFactory(B){var A=B;this.getDOM=function(){return A}}var ReportBuilderDOM={LayoutDOM:{get:function(){return new LayoutDOM()}},FilterDOM:{get:function(){return new FilterDOM()}},ReportPropertiesDOM:{get:function(){return new ReportPropertiesDOM()}},GroupSortDOM:{get:function(){return new GroupSortDOM()}},AnalyticsDOM:{get:function(){return new AnalyticsDOM()}}};var LayoutView=(function(D,B,C){ReportBuilderViewFactory.call(this,D);var A=this;this.isGrouping=C.isGrouping;this.deviceType=C.deviceType;this.templateType=C.templateType;this.dataBlockIdentifier=C.dataBlockIdentifier;this.viewID=C.viewID;this.bindEvents=function(){A.bindFieldContainerEvents(true);A.bindLayoutPropertyEvents();$(D.getFirstFieldElement()).trigger("click")};this.bindLayoutPropertyEvents=function(){$(D.getLayoutScrollContainer()).zcScrollPane({autoReinit:true});var E=A.deviceType;$(D.getLayoutDisplayPropertyElement()).off("click").on("click",function(){B.getLayoutDisplayProperties({data:{deviceType:E},callback:function(F){iCustomizePopup({title:i18n["zc.reports.builder.quickview.customlayout.layoutproperties"],body:F,buttons:[{name:i18n["zc.edit.done"],type:ZCModalConstants.MODAL_SUBMIT}],parentClass:"zc-dem-customlayout-properties",afterOpen:function(){var G=$(D.getLayoutPropertyConfigElement()).attr("viewType");if(E==1){if(G==Constants.VIEW_LIST){A.bindFreezeColumnEvents()}else{if(G==Constants.VIEW_CUSTOM||G==Constants.VIEW_SUMMARY){A.bindRecordsPerRow()}if(G==Constants.VIEW_CUSTOM||G==Constants.VIEW_KANBAN||G==Constants.VIEW_CALENDAR||G==Constants.VIEW_TIMELINE||G==Constants.VIEW_MAP){A.bindCardLayoutProperties()}if(G==Constants.VIEW_CUSTOM){A.bindCardDisplayEvents()}}}else{A.bindCardLayoutProperties();A.bindCardDisplayEvents()}},success:function(){return true}})}})})};this.invokeBindCardDisplayEvents=function(E){var F={};F.deviceType=A.deviceType;F.templateType=A.templateType;F.dataBlockIdentifier=A.dataBlockIdentifier;F.viewID=A.viewID;F.displayType=E;B.saveLayoutDisplayType({data:F,callback:function(G){}})};this.bindCardDisplayEvents=function(){$(D.getCardDisplayElement()).off("click").on("click",function(F){$(D.getCardDisplayElement()).removeClass("selected");$(this).addClass("selected");var E=$(this).attr("displaytype");A.invokeBindCardDisplayEvents(E);$(D.getLayoutDisplayPropertyElement()).attr("displaytype",E)})};this.bindFreezeColumnEvents=function(){$(D.getFreezeColumnElement()).off("click").on("click",function(){$(D.getFreezeColumnElement()).removeClass("selected");$(this).addClass("selected");var G=$(D.getLayoutPropertyConfigElement());var E=$(this).attr("layoutType");var F={};F.viewID=$(G).attr("viewid");F.layoutTypeIdentifier=A.getLayoutTypeIdentifier(E);F.templateType=A.templateType;F.layoutType=E;F.layoutTypeIdentifier=A.getLayoutTypeIdentifier(E);F.viewType=$(G).attr("viewtype");F.isViewBlockChange=false;F.deviceType=A.deviceType;F.dataBlockIdentifier=$(G).attr("dataBlockIdentifier");B.changeLayout({data:F,callback:function(H){}})})};this.bindLayoutChangeEvents=function(I){$(D.getCardLayoutConfigurationElement()).removeClass("selected");$(I).addClass("selected");var K=$(D.getLayoutPropertyConfigElement());var P=$(I).attr("layout_type");var M=$(I).attr("base_layout_type");var F=A.viewID;var E=A.dataBlockIdentifier;var J=true;var G;var O=$(D.getCardLayoutImageFieldElement(F,E));if($(O).length!=0){if($(I).parent().attr("isShapeSelect")==="true"){$(O).attr("shapetype",$(I).attr("type"));$(O).attr("layout_type",$(I).attr("layout_type"));J=false}G=$(O).attr("shapetype");P=$(O).attr("layout_type")}else{G=Constants.LAYOUT_SQUARE_SHAPE}var Q=$(D.getCardLayoutConfigurationSelectedElement()).attr("type");if(Q==undefined){Q=$(D.getLayoutDisplayPropertyElement()).attr("type")}var N=P+"."+Q+"."+G;var H={};H.viewID=F;H.dataBlockIdentifier=E;H.templateType=A.templateType;H.layoutType=M;H.viewType=9;H.isViewBlockChange=false;H.layoutTypeIdentifier=N;H.deviceType=A.deviceType;B.changeLayout({data:H,callback:function(S){var U=$(D.getLayoutActiveFieldDisplayName()).attr("fieldselectidentifier");var R=$(D.getDataBlockWrapper(F,E));$(R).empty();$(R).append($(D.getDataBlockWrapperBasedOnResponse(S,F,E)).children());A.bindFieldContainerEvents(false);$(D.getLayoutSelectedFieldContainerBasedOnIdentifier(U)).trigger("click");$(D.getLayoutDisplayPropertyElement()).attr("type",Q);if(A.deviceType!=Constants.DEVICE_WEB&&(N=="5.3.3"||N=="5.4.3")){var T=$(D.getLayoutDisplayPropertyElement()).attr("displaytype");if(T=="1"){A.invokeBindCardDisplayEvents(0)}}}})};this.bindCardLayoutProperties=function(){$(D.getCardLayoutConfigurationElement()).off("click").on("click",function(){A.bindLayoutChangeEvents(this)})};this.bindRecordsPerRow=function(){$(D.getCustomLayoutSizeElement()).spinner({min:0,max:999,stop:function(E){$(this).attr("isSpinned",true)}}).on("blur",function(E){if($(this).attr("isSpinned")){A.saveDataBlockSize($(this).val(),true);$(this).removeAttr("isSpinned");E.stopPropagation()}});$(D.getLayoutWidthConfigElement()).on("click",function(G){var H=$(this).attr("type");var F=$(D.getCustomRowConfigBasedOnType(H));$(D.getCustomRowConfig()).removeClass("hide");$(F).addClass("hide");var E=$(D.getLayoutPropertyConfigElement());if(H==1){A.invokeSaveRecordsPerRow(-1);var J=$(D.getCustomLayoutSizeElement());$(J).val("350");A.saveDataBlockSize($(J).val(),false)}else{var I=$(D.getSelectedRecordsPerRowElement());if($(I).length==0){$(D.getRecordsPerRowElement()).first().addClass("selected")}A.invokeSaveRecordsPerRow($(D.getSelectedRecordsPerRowElement()).attr("rowsize"),false)}});$(D.getRecordsPerRowElement()).on("click",function(E){$(D.getRecordsPerRowElement()).removeClass("selected");$(this).addClass("selected");A.invokeSaveRecordsPerRow($(D.getSelectedRecordsPerRowElement()).attr("rowsize"),true)})};this.saveDataBlockSize=function(F,H){var E=$(D.getLayoutPropertyConfigElement());var G={};G.viewID=$(E).attr("viewid");G.deviceType=A.deviceType;G.templateType=A.templateType;G.dataBlockIdentifier=$(E).attr("dataBlockIdentifier");G.width=F;B.saveDataBlockSize({data:G,callback:function(I){if(H){}}})};this.invokeSaveRecordsPerRow=function(F,H){var G=$(D.getLayoutPropertyConfigElement());var E={};E.viewID=$(G).attr("viewid");E.viewType=$(G).attr("viewtype");E.templateType=A.templateType;E.deviceType=A.deviceType;E.dataBlockIdentifier=$(G).attr("dataBlockIdentifier");E.recordPerRow=F;B.saveRecordsPerRow({data:E,callback:function(I){if(H){}}})};this.getLayoutTypeIdentifier=function(F){var E=F+".1.1";if(F==10){E=11+".1.2"}return E};this.bindFieldContainerEvents=function(E){$(D.getFieldTabContainer()).off("click").on("click",function(){$(D.getFieldTabContainer()).removeClass("selected");$(this).addClass("selected");var F=$(this).attr("tabname");if(F==="displaytab"){$(D.getFieldPropertyConfig()).removeClass("hide");$(D.getFieldStyleContainer()).addClass("hide")}else{$(D.getFieldStyleContainer()).removeClass("hide");$(D.getFieldPropertyConfig()).addClass("hide")}});$(D.getFieldElement()).off("click").on("click",function(H){if($(this).hasClass("active")){stopEventBubbling(H);return }$(D.getFieldElement()).removeClass("active");$(this).addClass("active");var I={};I.deviceType=A.deviceType;I.templateType=A.templateType;I.viewID=A.viewID;I.dataBlockIdentifier=A.dataBlockIdentifier;I.fieldIndex=$(this).attr("seqno");var G=$(this).attr("issubform");var F=G=="true"?Constants.SUB_FORM_GRID:parseInt($(this).attr("fieldtype"));A.getFieldProperty({data:I,callback:function(J){$(D.getFieldPropertyContainer()).html(J);$(D.getFieldDisplayScrollContainer()).zcScrollPane();$(D.getFieldStyleScrollContainer()).zcScrollPane({autoReinit:true});A.bindFieldPropertyEvents(H,F);$(D.getFieldStyleContainer()).zcScrollPane({autoReinit:true});A.bindConditionalFormatting();A.bindDeleteFieldEvent();if($(D.getActiveFieldElement()).attr("actionid")){A.bindFieldCustomAction();$(D.getFieldSingleTabContiner()).css("display","block");$(D.getFieldTabContainer()).css("display","none")}else{$(D.getFieldTabContainer()).css("display","block");$(D.getFieldSingleTabContiner()).css("display","none")}if($(D.getFieldTabContainer()).length!=0){$($(D.getFieldTabContainer())[0]).trigger("click")}$(D.getFieldPropertySelect2()).zcDropDown({dropdownCssClass:"zc-sharedanalytics-select2 zc-field-select2-drop",callout:true})}})});$(D.getCardLayoutFieldElement()).off("click").on("click",function(F){if($(this).hasClass("active")){stopEventBubbling(F);return }$(D.getCardLayoutFieldContainerElement()).removeClass("active");$(D.getCardLayoutFieldElement()).removeClass("active");$(D.getFieldElement()).removeClass("active");$(this).addClass("active");var R=$(this).find("[elname=zc-dem-qv-fieldname]");var M=$(R).attr("fieldSelectIdentifier");var P=$(R).attr("seqNo");var H=$(this).find("[elname=zc-dem-qv-fieldname]");var O=$(H).attr("issubform");var N=O=="true"?Constants.SUB_FORM_GRID:parseInt($(H).attr("fieldtype"));var I=$(R).attr("viewId");var G=$(R).attr("dataBlockIdentifier");var J="";var Q;var K={};K.deviceType=A.deviceType;K.templateType=A.templateType;K.viewID=I;K.dataBlockIdentifier=G;K.fieldIndex=P;A.getFieldProperty({data:K,callback:function(S){$(D.getFieldPropertyContainer()).html(S);$(D.getFieldDisplayScrollContainer()).zcScrollPane();$(D.getFieldStyleScrollContainer()).zcScrollPane({autoReinit:true});A.bindFieldPropertyEvents(F,N);$(D.getFieldStyleContainer()).zcScrollPane({autoReinit:true});A.bindConditionalFormatting();A.bindDeleteFieldEvent();var T=$(D.getCardLayoutFieldSelect2());if($(D.getActiveFieldElement()).attr("actionid")||$(D.getCardLayoutFieldSelectedOption()).attr("columnname")===Constants.VIEW_NONE){A.bindFieldCustomAction();$(D.getFieldSingleTabContiner()).css("display","block");$(D.getFieldTabContainer()).css("display","none")}else{$(D.getFieldTabContainer()).css("display","block");$(D.getFieldSingleTabContiner()).css("display","none")}if($(D.getFieldTabContainer()).length!=0){$($(D.getFieldTabContainer())[0]).trigger("click")}$(D.getFieldPropertySelect2()).zcDropDown({dropdownCssClass:"zc-sharedanalytics-select2 zc-field-select2-drop",callout:true});var T=$(D.getCardLayoutFieldSelect2());$(T).data("zcdd").onSelect(function(U){Q=$(U.target).find("option:selected").attr("columnName");J=$(U.target).find("option:selected").attr("displayname")});$(T).off("change").on("change",function(){var e=this;var p=[];var m={};var W=Q;var V=$(e).find("option:selected");var f=$(V).val();var d=$(this).attr("viewid");var o=$(e).attr("datablockidentifier");var k=$(this).attr("fieldselectidentifier");var a=$(this).attr("seqno");var l=$(D.getFieldNameElementBasedOnIdentifier(d,o,k));var Y=$(V).attr("columnname");var X=$(D.getLayoutFieldElements(d,o));if(f==Constants.VIEW_NONE){var c=$(D.getLayoutContainer());var h=$(D.getLayoutMappedField(c)).length;if(h==1){var g=$(D.getChoosedSelect2());$(g).text(J);iAlert(i18n["zc.report.edit.layout.deletefield"]);return false}}if(f!=Constants.VIEW_NONE){var U=$(D.getFieldNameElementBasedOnColumnName(d,o,Q));var Z=$(U).attr("layoutFieldType");var b=$(U).attr("fieldType");X.each(function(){var q=$(this).attr("columnname");if(q===Y&&q!==Q&&$(this).attr("isspeciallayoutfield")=="false"){if(Z==Constants.LAYOUT_FIELDTYPE_DESCRIPTION){W=A.getRelevantValue(e,X);if(b==Constants.MULTI_LINE||b==Constants.ADDRESS||b==Constants.MULTI_SELECT||b==Constants.SUB_FORM||b==Constants.RICH_TEXT_AREA){U=undefined}}A.setAttributeValues(this,U,Q)}})}A.setAttributeValues(l,V,Y);X.each(function(q,r){m={};m.display_name=$(this).attr("displayName")==""?Constants.VIEW_NONE:$(this).attr("displayName");m.link_name=$(this).attr("linkName")==""?Constants.VIEW_NONE:$(this).attr("linkName");if($(this).attr("isMappingField")=="true"){m.mappingFormCompId=$(this).attr("mappingFormCompId")}if($(this).attr("isSubForm")!="true"&&$(this).attr("isMappingField")=="true"){m.mappingCompLinkName=$(this).attr("mappingCompLinkName")}m.identifier=$(e).attr("dataBlockIdentifier")+"."+(q+1);p.push(m)});var n={};n.templateType=A.templateType;n.deviceType=A.deviceType;n.dataBlockIdentifier=A.dataBlockIdentifier;n.viewID=A.viewID;n.layoutFields=JSON.stringify(p);B.addViewField({data:n,callback:function(r){var q=$(D.getDataBlockWrapper(d,o));$(q).empty();$(q).append($(D.getDataBlockWrapperBasedOnResponse(r,d,o)).children());A.bindFieldContainerEvents(false);var s=$(D.getFieldNameElementBasedOnSeqNo(d,o,a));$(s).trigger("click")}})})}})});if(E){$($(D.getCardLayoutFieldElement())[0]).trigger("click")}A.bindAddFieldEvent();A.bindSortEvent();A.bindCustomActionEvents()};this.getRelevantValue=function(G,F){var E;$(G).find("option").each(function(){var I=$(this).attr("columnname");if(I!==Constants.VIEW_NONE){var H=false;F.each(function(){var J=$(this).attr("columnname");if(J===I){H=true}});if(!H){E=I;return false}}});return E};this.setAttributeValues=function(F,G,E){$(F).text($.trim($(G).attr("displayName")));$(F).attr("displayName",$.trim($(G).attr("displayName")));$(F).attr("columnname",E);$(F).attr("isspeciallayoutfield",$(G).attr("isspeciallayoutfield"));$(F).attr("fieldtype",$(G).attr("fieldtype"));$(F).attr("linkName",$(G).attr("linkname")==undefined?Constants.VIEW_NONE:$(G).attr("linkname"));$(F).attr("value",$(G).attr("value"));$(F).attr("issubform",$(G).attr("issubform"));$(F).attr("ismappingfield",$(G).attr("ismappingfield"));$(F).attr("mappingformcompid",$(G).attr("mappingformcompid"));$(F).attr("mappingCompLinkName",$(G).attr("mappingCompLinkName"))};this.getFieldProperty=function(E){B.showFieldProperty({data:E.data,callback:function(F){E.callback(F)}})};this.bindAddFieldEvent=function(){$(D.getFieldFlatSelectElement()).off("change").on("change",function(R){var V=$(this).attr("datablockidentifier");var M=$(this).attr("viewid");var E=$(D.getFlatPopupFieldsUlElement(M,V));var I=$(D.getFlatPopupFieldsLiElement(M,V)).length+1;I=V+"."+I;var H=$(this).find("option:selected").attr("isCustomAction");var Q=$(this).find("option:selected");var P=$(Q).attr("actionid");var G=$(Q).attr("displayname");var N=(P)?true:false;var F=$(D.getAddFieldPlaceHolderLiEle()).clone();$(F).attr("identifier",I);$(E).append(F);var W=A.getFieldList(this,I);$(this).find("option:selected").prop("selected",false);A.hideEmptyOptGroup($(_reportBuilderContainer));if(H){var O=$(D.getIdentifierBasedFieldElement(E,I));var T=variable;T.isNewUI=true;var J=new QuickViewController(T);J.createCustomAction({workflowId:"",actionEle:$(O),callback:function(X){A.bindFieldContainerEvents(false);$(D.getLastFieldElement()).trigger("click")}})}else{if(N){var K=self.templateType;var S={};S.callback=function(X){A.bindFieldContainerEvents(false);$(D.getLastFieldElement()).trigger("click")};var T=variable;T.isNewUI=true;var J=new QuickViewController(T);J.isConfirmMessagePresent({isFromLayout:true,fieldIdentifier:I,viewID:M,dataBlockIdentifier:V,fieldList:W,isLoadNeed:true,workflowId:P,selectedEl:Q,actionName:G,templateType:K,fieldObj:S})}else{var U={};U.fieldIdentifier=I;U.viewID=M;U.dataBlockIdentifier=V;U.layoutFields=JSON.stringify(W);U.templateType=A.templateType;U.deviceType=A.deviceType;B.addViewField({data:U,callback:function(X){var Z=$(D.getFlatPopupFieldsUlElementFromResponse(X,M,V));var a=$(D.getIdentifierBasedFieldElement(E,I));var Y=$(D.getIdentifierBasedFieldElement(Z,I));$(a).after(Y);$(a).remove();A.bindFieldContainerEvents(false);var b=$(D.getIdentifierBasedFieldElement(E,I));$(b).trigger("click")}})}}})};this.bindCustomActionEvents=function(){$(D.getCustomActionWorkFlowEditElement()).off("click").on("click",function(){var E=variable;E.isNewUI=true;var F=new QuickViewController(E);F.createCustomAction({workflowId:$(this).attr("actionid"),actionEle:this,callback:function(G){A.bindFieldContainerEvents(false)}})})};this.bindSortEvent=function(){$(D.getFlatPopupFieldsUlSortElement()).sortable({scrollSensitivity:100,forcePlaceholderSize:true,placeholder:"zc-dem-field-placeholder",containment:"parent",tolerance:"pointer",axis:"y",start:function(F,E){E.item.toggleClass("zc-dem-ui-sortable-helper")},stop:function(F,E){E.item.toggleClass("zc-dem-ui-sortable-helper")},update:function(K,J){var F=[];var G=1;var I=this;$(D.getFieldElement()).each(function(){$(this).removeAttr("style");var N={};N.display_name=$(this).attr("displayname");N.link_name=$(this).attr("linkname");N.identifier=$(this).attr("identifier").replace(/[.][0-9]{1,3}/,"."+G);if($(this).attr("isMappingField")=="true"){N.mappingFormCompId=$(this).attr("mappingFormCompId")}if($(this).attr("isSubForm")!="true"&&$(this).attr("isMappingField")=="true"){N.mappingCompLinkName=$(this).attr("mappingCompLinkName")}if($(this).attr("actionId")!=false){N.actionId=$(this).attr("actionId")}if($(this).attr("viewcompId")!=false){N.viewcompid=$(this).attr("viewcompId")}F.push(N);G+=1});var E=$(I).attr("datablockidentifier");A.adjustSeqNo(I,E);var M=$(I).attr("viewid");var H={};H.viewID=M;H.dataBlockIdentifier=E;H.layoutFields=JSON.stringify(F);H.templateType=A.templateType;H.deviceType=A.deviceType;B.rearrangeViewField({data:H,callback:function(N){return }})}})};this.getFieldList=function(K,J){var H=$(K).find("option:selected");if($(H).val()=="-zc_none-"){return }var E=$(K).attr("viewid");var I=$(K).attr("datablockidentifier");var G=$(H).attr("delugename");$(D.getFieldFlatSelectOption(E,I,G)).addClass("hide");var F=[];var M={};M.display_name=$(H).attr("displayname");M.link_name=$(H).attr("linkname");if($(H).attr("isMappingField")=="true"){M.mappingFormCompId=$(H).attr("mappingFormCompId")}if($(H).attr("isSubForm")!="true"&&$(H).attr("isMappingField")=="true"){M.mappingCompLinkName=$(H).attr("mappingCompLinkName")}M.identifier=J;if($(H).attr("actionId")!=false){M.actionId=$(H).attr("actionId")}if($(H).attr("viewcompId")!=false){M.viewcompid=$(H).attr("viewcompId")}F.push(M);return F};this.bindFieldCustomAction=function(){};this.conditionalFormattingCallBack=function(H){var G=$(D.getActiveFieldElement());var I={};I.deviceType=A.deviceType;I.templateType=A.templateType;I.viewID=A.viewID;I.dataBlockIdentifier=A.dataBlockIdentifier;I.fieldIndex=$(G).attr("seqno");var F=$(G).attr("issubform");var E=F=="true"?Constants.SUB_FORM_GRID:parseInt($(G).attr("fieldtype"));A.getFieldProperty({data:I,callback:function(J){var K=$(D.getFieldStyleContainerFromResponse(J)).html();$(D.getFieldStyleContainer()).html(K);A.bindConditionalFormatting()}})};this.bindConditionalFormatting=function(){$(D.getConditionalAddRuleElement()).off("click").on("click",function(F){var E=new QuickViewController(variable);E.createConditionalFormatting({viewCompId:$(this).attr("viewcomponentid"),callback:function(G){A.conditionalFormattingCallBack(G)}})});$(D.getConditionalEditRuleElement()).off("click").on("click",function(F){var E=new QuickViewController(variable);var G=(this).closest("li");E.editFormatting({ruleId:$(G).attr("ruleid"),viewCompId:$(G).attr("viewcomponentid"),callback:function(H){A.conditionalFormattingCallBack(H)}})});$(D.getConditionalDeleteRuleElement()).off("click").on("click",function(F){var E=new QuickViewController(variable);var G=(this).closest("li");E.deleteConditionalFormatting({ruleId:$(G).attr("ruleid"),viewCompId:$(G).attr("viewcomponentid"),criteriaExpId:$(G).attr("criteriaExpId"),callback:function(H){A.conditionalFormattingCallBack(H)}})})};this.deleteViewField=function(F){var G=F.fieldList[0];var E=F.viewID;if(G.actionId!=undefined){A.isCustomActionPresent({actionId:G.actionId,viewId:E,callback:function(I,H){F.isDeleteViewAction=I;F.viewFieldCustomActionCount=H;A.invokeDeleteViewFieldAjax(F)}})}else{A.invokeDeleteViewFieldAjax(F)}};this.invokeDeleteViewFieldAjax=function(P){var J=P.fieldElement;var Q=$(J).parent();var G=P.dataBlockIdentifier;var H=P.viewID;var F=P.delugeName;var N=P.fieldList;var E=N[0].actionId;$(J).remove();A.adjustSeqNo(Q,G);var I=$(D.getFieldFlatSelect(H,G));var K=$(D.getFieldFlatSelectOption(H,G,F));var O=$(J).attr("issubform");if(O=="true"){var R=$(J).attr("mappingformcompid");$(I).find("option[mappingformcompid='"+R+"']").removeClass("hide")}else{$(K).removeClass("hide")}if(E!=undefined&&P.viewFieldCustomActionCount<=1){$(K).attr("viewcompid","")}A.showOptGroup($(_reportBuilderContainer));var M={};M.layoutFields=JSON.stringify(N);M.templateType=A.templateType;M.viewID=H;M.deviceType=A.deviceType;M.dataBlockIdentifier=G;M.isDeleteViewAction=P.isDeleteViewAction;B.deleteViewField({data:M,callback:function(S){if(E!=undefined){var T=$(D.getCustomActionAvailabilityElement()).attr("iscustomactionpresent");if(E!=undefined&&T!="true"){$("[elname='remaingAction']").find('li[actiontype=0][workflowid="'+E+'"]').remove();$(P.fieldFlatSelect).find("option[delugeName='"+F+"']").addClass("hide")}}P.callback(S)}})};this.bindDeleteFieldEvent=function(){$(D.getLayoutFieldEleDelete()).on("click",function(J){var H=[];var O=$(D.getActiveFieldElement());var K=$(D.getActiveFieldElementUl());var N={};var I=$(O).attr("formcompid");var E=$(O).attr("delugeName");N.display_name=$(O).attr("displayname");N.viewcompid=$(O).attr("viewcompId");N.link_name=$(O).attr("linkName");N.identifier=$(O).attr("identifier");if($(O).attr("actionId")!=false){N.actionId=$(O).attr("actionId")}H.push(N);var F=$(K).attr("datablockidentifier");var G=$(K).attr("viewid");var M=$(O).prev();if($(M).length==0){M=$(O).next()}if($(M).length==0){if(ZCGlobal.contextName==undefined){iAlert("At least one field needs to be displayed")}else{$.alert({msg:"At least one field needs to be displayed"})}return false}A.deleteViewField({templateType:A.templateType,dataBlockIdentifier:F,fieldList:H,delugeName:E,viewID:G,fieldElement:$(O),callback:function(P){$(M).trigger("click");return }})})};this.isCustomActionPresent=function(E){var F={};F.workflowId=E.actionId;F.viewId=E.viewId;B.isCustomActionPresent({data:F,callback:function(H){var G=JSON.parse(H);if(G.iscustomactionpresent){E.callback(false,G.viewFieldCustomActionCount)}else{iCustomizePopup({title:i18n["zc.dem.report.deleteaction"],body:"<p>"+i18n["zc.dem.report.deleteaction.message"]+"</p>",buttons:[{name:i18n["zc.dem.report.deleteaction.savelater"],type:ZCModalConstants.MODAL_BUTTON,action:function(){E.callback(false,G.viewFieldCustomActionCount);return true}},{name:i18n["delete"],type:ZCModalConstants.MODAL_SUBMIT}],parentClass:"zc-dem-deleteaction-popup",success:function(){E.callback(true);return true}})}}})};this.hideEmptyOptGroup=function(E){var G=$(E).find("select optgroup");for(i=0;i<G.length;i++){var F=G.get(i);if($(F).find("option[class!=hide]").length==0){$(F).hide()}}};this.showOptGroup=function(E){var G=$(E).find("select optgroup");for(i=0;i<G.length;i++){var F=G.get(i);if($(F).find("option[class!=hide]").length>0){$(F).show()}}};this.adjustSeqNo=function(G,E){var F=1;$(G).find("li").each(function(){var H=E+"."+F;$(this).attr("identifier",H);$(this).attr("seqno",F);F+=1})};this.bindFieldDisplayName=function(E){$(D.getLayoutFieldDisplayName()).on("change",function(J){var I=$(this).val();if(I.trim().length!=0){var G=$(D.getActiveFieldElement()).attr("viewCompId");$(D.getActiveFieldLabelElement()).text(I);var M=$(D.getActiveFieldTooltip());if($(M).length>0){var F=$(D.getFieldToolTipHeader(M));var K=$(D.getFieldToolTipOutter(M));if(I==$(M).text()){$(K).addClass("hide");$(F).hide()}else{$(K).removeClass("hide");$(F).show()}}var H={};H.viewCompDispName=I;H.viewCompId=G;H.isZohoReport=false;B.saveViewCompDispName({data:H,callback:function(N){return false}})}else{$(D.getLayoutFieldDisplayName()).showError("Please add a column name")}})};this.bindCompositeField=function(E){$(D.getCompositeFieldDiplayValueElement()).on("change",function(M){var N=$(D.getFieldPropertyConfig()).attr("primaryviewcompid");var I=$(this).attr("viewcompid");var J=[];var G=parseInt($(this).attr("comptype"));var H=(G==Constants.ADDRESS)?2:0;if($(D.getCheckedCompositeField()).length==H){$(this).prop("checked",true);return }$(D.getCompositeFieldDiplayValueElement()).each(function(){if($(this).is(":checked")){J.push($(this).attr("formCompId"))}});var F=$(D.getDisplayNamePropertyElement()).val();if($(D.getLayoutActiveFieldDisplayName()).length>0){F=$(D.getLayoutActiveFieldDisplayName()).attr("displayname")}var O=A.viewID;var K={};K.primaryViewCompId=N;K.viewCompId=I;K.enabledFormCompIds=JSON.stringify(J);K.viewID=O;K.displayName=F;B.modifyCompositeProperties({data:K,callback:function(Q){var P=JSON.parse(Q);if(P.isZohoReportBaseView){$.alert({msg:"An error has occurred. Please contact support@zohocreator.com for assistance."})}else{A.updateViewComponentId(N,P.modifiedViewComponentId)}}})});$(D.getNameFieldDisplayOption()).on("change",function(J){var F=$(this).attr("viewCompId");var I=$(this).attr("property");var H=$(this).find("option:selected").val();var G={};G.property=I;G.value=H;G.viewCompId=F;B.saveViewFieldProperty({data:G,callback:function(M){var K=JSON.parse(M);if(K.hasOwnProperty("isZohoReportBaseView")){$.alert({msg:"An error has occurred. Please contact support@zohocreator.com for assistance."})}else{if(K.hasOwnProperty("modifiedViewComponentId")){A.updateViewComponentId(primaryViewCompId,K.modifiedViewComponentId)}}}})});$(D.getLocationFieldDisplayOption()).on("change",function(M){var H=$(this).attr("viewCompId");var K=$(this).attr("property");var G=$(this).find("option:selected").val();if(G==0){var F=$(D.getCompositeFieldDiplayValueEle());$(F).show();$(D.getLocationFieldDisplayFormat()).hide();$(F).find("input").prop("checked",true);var J={};J.property=K;J.value=G;J.viewCompId=H;B.saveViewFieldProperty({data:J,callback:function(O){var N=JSON.parse(O);A.updateViewComponentId(H,N.modifiedViewComponentId)}})}else{if(G==1){$(D.getCompositeFieldDiplayValueEle()).hide();$(D.getLocationFieldDisplayFormat()).show();var I=$(D.getCoordinateDisplayFormat());$(I).data("zcdd").destroy();$(I).zcDropDown({dropdownCssClass:"zc-sharedanalytics-select2 zc-field-select2-drop",callout:true});$(I).data("zcdd").setValue("0");$(I).trigger("change")}}});$(D.getCoordinateDisplayFormat()).on("change",function(M){var G=$(this).attr("viewCompId");var K=$(this).attr("property");var F=$(this).find("option:selected").val();var J=$(D.getLocationFieldSelectedDisplayOption()).val();var I=parseInt(J)+parseInt(F);var H={};H.property=K;H.value=I;H.viewCompId=G;B.saveViewFieldProperty({data:H,callback:function(O){var N=JSON.parse(O);A.updateViewComponentId(G,N.modifiedViewComponentId)}})});$(D.getLinkToMap()).on("change",function(M){var H=$(this).attr("viewCompId");var K=$(this).attr("property");var G=$(this).is(":checked")?"1":"2";var F=1+G+0;var J=(parseInt(Number(F),2));var I={};I.property=K;I.value=J;I.viewCompId=H;B.saveViewFieldProperty({data:I,callback:function(O){var N=JSON.parse(O);A.updateViewComponentId(H,N.modifiedViewComponentId)}})})};this.updateViewComponentId=function(E,F){$(D.getViewCompAttributeElement(E)).each(function(){$(this).attr("viewcompid",F)});$(D.getViewComponentAttributeElement(E)).each(function(){$(this).attr("viewcomponentid",F)});$(D.getPrimaryViewcompIdElement(E)).each(function(){$(this).attr("primaryviewcompid",F)})};this.bindSubFormField=function(F){$(D.getSubFormFormFields()).off("change").on("change",function(I){var H=$(this).find("option:selected");if($(H).val()==="0"){return }$(H).addClass("hide");$(D.getSubFormViewFieldsContainer()).append($(D.getSubFormFieldUIElement()));var G=$(D.getSubFormViewFieldSpan($(D.getSubFormViewField().last())));$(G).attr("labelName",$(H).val());$(G).text($(H).text());A.saveSubFormField(this);A.bindSubFormField(I)});$(D.getSubFormViewFieldsContainer()).off("sortable").sortable({tolerance:"pointer",scrollSensitivity:100,revert:true,placeholder:"dragHoverMedium",containment:"parent",axis:"y",start:function(H,G){G.item.toggleClass("zc-dem-ui-sortable-helper")},stop:function(H,G){G.item.toggleClass("zc-dem-ui-sortable-helper")},update:function(G,H){A.saveSubFormField()}});$(D.getSubFormDelimiter()).off("change").on("change",function(K){var J=$(this).find("option:selected");var H=$(J).val();var G=$(this).attr("viewid");var I=$(D.getSubFormCustomDelimiterContainer());if(H==2){$(I).removeClass("hide");$(D.getSubFormCustomDelimiter()).trigger("focus")}else{$(I).addClass("hide")}A.saveSubFormField(K)});$(D.getSubFormViewFieldDelete()).off("click").on("click",function(I){if($(D.getSubFormViewField()).length==1){return }var J=$(this).parent();var H=$(J).find("span");var G=$(H).attr("labelname");$(D.getSubFormFormFieldsOption(G)).removeClass("hide");$(J).remove();$(D.getSubFormFormFieldsOptions()).prop("selected",false);A.saveSubFormField(I)});$(D.getSubFormCustomDelimiter()).off("change").on("change",function(G){A.saveSubFormField(G)});var E=$(D.getInlineSubFormLinkView()).length!=0?"subformLinkView":"lookupLinkedView";A.bindLinkedView(E)};this.saveSubFormField=function(){var O=$(D.getActiveFieldElement());if($(D.getLayoutActiveFieldDisplayName()).length>0){O=$(D.getLayoutActiveFieldDisplayName())}var H=$(O).attr("mappingcomplinkname");var I=$(O).attr("mappingformcompid");var T=$(O).attr("displayname");var U=$(D.getSubFormViewFieldsContainer());var K=$(U).attr("formlinkname");var J={};var G=0;var R={};var F=parseInt($(U).attr("lastseqno"))+1;var S=1;var N;var P=$(D.getInlineSubFormLinkView());if(P.length!=0&&$(P)[0].tagName==="INPUT"){N=$(P).is(":checked")?"1":"2"}else{N=$(D.getLinkedViewEl()).val()}J.linkedToCompId=N;var E=$(D.getSubFormDelimiterSelectedOption());var Q=$(E).val();var M;if(Q<2){M=$(E).attr("delimiterval")}else{M=$(D.getSubFormCustomDelimiter()).val()}$(D.getSubFormViewField()).each(function(V,Y){var W=$(D.getSubFormViewFieldSpan(this)).attr("labelname");var X=S==1?T:T+"."+W;J["colIdVsProps("+S+").colProps(viewDispName)"]=X;J["colIdVsProps("+S+").colProps(formCompLinkName)"]=W;J["colIdVsProps("+S+").colProps(seqNo)"]=V;J["colIdVsProps("+S+").colProps(separator)"]=M;J["colIdVsProps("+S+").colProps(mergeOrder)"]=V;if(V>0){J["colIdVsProps("+S+").colProps(isMergeField)"]=true}S+=1});J.isZohoReport="false";J.formLinkName=K;J.mappingFormCompID=I;J.isSubFormFieldAdd="true";J.subFormCompLinkName=H;B.addSubFormViewField({data:J,callback:function(V){var W=$(D.getFieldPropertyConfig()).attr("viewCompId");if($(D.getSubFormViewField()).length>1){$(D.getSubFormDelimiterContainer()).removeClass("hide");if(M==2){$(D.getSubFormCustomDelimiterContainer()).removeClass("hide")}}else{$(D.getSubFormDelimiterContainer()).addClass("hide");$(D.getSubFormCustomDelimiterContainer()).addClass("hide")}A.updateViewComponentId(W,V);return }})};this.bindPhoneNumberField=function(E){$(D.getPhoneDispProps()).on("change",function(K){var G=$(this).attr("viewCompId");var J=$(this).attr("property");var I=0;var M=$(D.getPhoneDisplayLinkToDial()).is(":checked")?"2":"0";var F=$(D.getPhoneDisplaySelectionOption()).val();I=parseInt(I)+parseInt(F)+parseInt(M);var H={};H.property=J;H.value=I;H.viewCompId=G;B.saveViewFieldProperty({data:H,callback:function(N){return }})})};this.bindDateTimeField=function(E){$(D.getDateDisplayOption()).on("change",function(K){var F=$(this).attr("viewid");var G=$(this).attr("viewCompId");var J=$(this).attr("property");var I=$(this).find("option:selected").val();var H={};H.property=J;H.value=I;H.viewCompId=G;B.saveViewFieldProperty({data:H,callback:function(M){return }})})};this.bindImageField=function(E){$(D.getImageFieldShapeSelect2()).on("change",function(F){A.bindLayoutChangeEvents($(this).find("option:selected"))});$(D.getImageDimension()).on("change",function(M){var I=$(this).find("option:selected");var N=$(I).val();var O=$(this).attr("viewid");var F=$(this).attr("datablockidentifier");var G=$(this).attr("viewCompId");if(N==2){$(D.getCustomDimensionConfiguration()).removeClass("hide");$(D.getImagePropValueEle()).val(100);$(D.getFirstImagePropValueEle()).trigger("focus");var H=$(D.getWidthTxtCont());var K=$(D.getHeightTxtCont());var J={};J.property=$(H).attr("property");J.value=$(H).val();J.viewCompId=G;B.saveViewFieldProperty({data:J,callback:function(P){return }});J={};J.property=$(K).attr("property");J.value=$(K).val();J.viewCompId=G;B.saveViewFieldProperty({data:J,callback:function(P){return }})}else{$(D.getCustomDimensionConfiguration()).addClass("hide");var J={};J.property=$(this).attr("property");J.value=N;J.viewCompId=G;B.saveViewFieldProperty({data:J,callback:function(P){return }})}});$(D.getImagePropValueEle()).on("change",function(H){var G=$(this).val();if(G.trim().length!=0){var F={};F.property=$(this).attr("property");F.value=$(this).val();F.viewCompId=$(D.getFieldPropertyConfig()).attr("viewCompId");B.saveViewFieldProperty({data:F,callback:function(I){return }})}})};this.bindMultiSelectField=function(E){$(D.getChoiceDelimiter()).on("change",function(J){var F=$(this).attr("viewCompId");var I=$(this).attr("property");var H=$(this).find("option:selected").val();var G={};G.property=I;G.value=H;G.viewCompId=F;B.saveViewFieldProperty({data:G,callback:function(K){return }})})};this.bindLookupField=function(E){A.bindLinkedView("lookupLinkedView")};this.bindLinkedView=function(E){$(D.getLinkedViewElName(E)).off("change").on("change",function(I){var G=$(this).attr("viewCompId");var F;if($(D.getLinkedViewElName(E))[0].tagName==="INPUT"){F=$(this).is(":checked")?"1":"2"}else{F=$(this).find("option:selected").val()}var H={};H.linkedToCompId=F;H.viewCompId=G;B.saveLinkedView({data:H,callback:function(J){return }})})};this.bindNumericField=function(E){$(D.getNumericFieldConfigInput()).on("change",function(J){var I=$(this).is(":checked");var H=$(this).attr("property");var F=$(D.getNumericFieldConfigContainer()).attr("viewCompId");var G={};G.property=H;G.value=I;G.viewCompId=F;B.saveViewFieldProperty({data:G,callback:function(K){return }})})};this.bindDecisionBoxField=function(E){$(D.getDecisionProps()).on("change",function(J){var K=$(this).val();if(K.trim().length==0){var G="Please add display value";$(this).showError(G);return false}var F=$(D.getFieldPropertyConfig()).attr("viewCompId");var I=$(this).attr("property");if(K.length>50){$.alert({msg:"Display value can be up to 50 characters."});return false}else{if(K==""){$(D.getDecisionTrueElement()).val("true");$(D.getDecisionFalseElement()).val("false");K=13;I=13}}var H={};H.property=I;H.value=K;H.viewCompId=F;B.saveViewFieldProperty({data:H,callback:function(M){return }});J.stopPropagation()})};this.bindRichTextField=function(E){$(D.getRichtextEle()).on("change",function(J){var F=$(this).attr("viewCompId");var I=$(this).attr("property");var H=$(this).find("option:selected").val();var G={};G.property=I;G.value=H;G.viewCompId=F;B.saveViewFieldProperty({data:G,callback:function(K){return }})})};this.bindFieldEncryptionType=function(E){$(D.getFieldEncryptionDisplayTypeElement()).off("change").on("change",function(Q){var O=$(D.getFieldEncryptionSelectedDisplayType());var H=$(O).val();var J=$(this).attr("viewCompId");var K;var N;var I=$(D.getEncryptionShowOnClickElement());if(H!=2){$(I).removeClass("hide")}else{$(I).addClass("hide")}var M=$(D.getEncryptionChractersElement());if(H<2){$(M).removeClass("hide");var F=$(D.getEncrptionCharacterInputElement());$(F).val("3");N=$(F).attr("property");K=$(F).val()}else{$(M).addClass("hide");N=$(this).attr("property");K=H}var P={};P.property=N;P.displaytype=H;P.value=K;P.viewCompId=J;var G=/^\d+$/;if(!G.test(H)){return false}B.saveEncryptionProperties({data:P,callback:function(R){return }})});$(D.getEncrptionCharacterInputElement()).off("change").on("change",function(I){var H=$(this).val();var F=/^\d+$/;if(!F.test(H)){return false}var G={};G.property=$(this).attr("property");G.displaytype=$(D.getFieldEncryptionSelectedDisplayType()).val();G.value=H;G.viewCompId=$(this).attr("viewCompId");B.saveEncryptionProperties({data:G,callback:function(J){return }})});$(D.getDisplayEncryptionOption()).off("change").on("change",function(G){var F={};F.property=$(this).attr("property");F.value=$(this).is(":checked")?"1":"0";F.viewCompId=$(this).attr("viewCompId");B.saveViewFieldProperty({data:F,callback:function(H){return }})})};this.bindFieldPropertyEvents=function(F,E){A.bindFieldDisplayName(F);switch(E){case Constants.NAME:case Constants.ADDRESS:A.bindCompositeField(F);break;case Constants.DATE:case Constants.DATE_TIME:A.bindDateTimeField(F);A.bindFieldEncryptionType(F);break;case Constants.TIME:A.bindFieldEncryptionType(F);break;case Constants.EMAIL_ADDRESS:A.bindFieldEncryptionType(F);break;case Constants.SINGLE_LINE:A.bindFieldEncryptionType(F);break;case Constants.INTEGRATION:case Constants.EXTERNAL_LINK_FIELD:case Constants.EXTERNAL_FIELD:case Constants.LOOKUP:break;case Constants.FILE_UPLOAD:break;case Constants.IMAGE:A.bindImageField(F);break;case Constants.MULTI_SELECT:A.bindMultiSelectField(F);A.bindLookupField(F);break;case Constants.NUMBER:case Constants.PERCENTAGE:case Constants.CURRENCY:case Constants.DECIMAL:case Constants.SCRIPT:A.bindNumericField(F);A.bindFieldEncryptionType(F);break;case Constants.PHONE_NUMBER:A.bindPhoneNumberField(F);A.bindFieldEncryptionType(F);break;case Constants.CHECK_BOX:A.bindDecisionBoxField(F);break;case Constants.RICH_TEXT_AREA:A.bindRichTextField(F);break;case Constants.SINGLE_SELECT:A.bindLookupField(F);break;case Constants.SYSTEM_LOOKUP:break;case Constants.SUB_FORM_INLINE:case Constants.SUB_FORM_POPUP:case Constants.SUB_FORM_GRID:A.bindSubFormField(F);break;default:break}}});var FilterView=(function(B,D,C){ReportBuilderViewFactory.call(this,B);var A=this;this.showCricEdit=false;this.showCricSave=false;this.bindEvents=function(){A.bindAddFilterEvents();A.bindEditFilterEvents();A.bindDeleteFilter();A.bindCancelCriteriaEvent();A.bindSaveCriteriaEvent();$(B.getScrollContainer()).zcScrollPane()};this.bindSaveCriteriaEvent=function(){$(B.getSaveCricCont()).on("click",function(){var E=$(B.getCriteriaOption());var G=$(B.getCriteriaBuilderRuleMain());var F=CriteriaBuilderNew.updateInput($(G));var H=$(B.getCriteriaId()).val();if(F!=""&&H!=undefined&&H!=""){F="criteriaId="+H+"&"+F}if(!CriteriaBuilderNew.frmSubmit){if(typeof (CriteriaBuilderNew.errorBannerObj)!=="undefined"){CriteriaBuilderNew.errorBannerObj.hide()}return false}F+="&criteriaOption=true";D.setCriteria({data:F,callback:function(J){var I=CriteriaBuilderNew.getRespArr(J);if(I.STATUS=="NoCriteria"){$(B.getCritBuilder()).addClass("hide");$(B.getCritBuilderTextCont()).removeClass("hide");$(B.getNoCriteriaStrElement()).removeClass("hide");$(B.getCriteriaStrElement()).addClass("hide");$(B.getCriteriaMainContActionLink()).addClass("hide");A.showCricEdit=true;A.showCricSave=true;$(B.getFilterButtonContainer()).hide()}else{if(I.STATUS=="success"){$(B.getCreateCriteria()).addClass("hide");$(B.getBaseCriteriaStr()).text("");$(B.getBaseCriteriaStr()).text(I.VALUE);$(B.getCriteriaStrElement()).removeClass("hide");$(B.getCriteriaMainContActionLink()).removeClass("hide");A.showCricEdit=true;A.showCricSave=true;$(B.getFilterButtonContainer()).hide();var K=$(B.getCriteriaId()).val();$(B.getDeleteCrit()).attr("critid",K)}else{if(I.STATUS=="error"){$.alert({msg:I.VALUE})}}}}})})};this.hideDisProp=function(){$(B.getEditCont()).addClass("hide");if(A.showSave){$(B.getSaveCont()).addClass("hide");$(B.getCancelCont()).addClass("hide")}else{$(B.getSaveCont()).removeClass("hide");$(B.getCancelCont()).removeClass("hide")}};this.bindCancelCriteriaEvent=function(){$(B.getCancelCricCont()).on("click",function(E){$(B.getReportCrtFrm()).each(function(){this.reset()});A.showCricEdit=true;A.showCricSave=true;A.hideDisProp();$(B.getCreateCriteria()).addClass("hide");if($(B.getBaseCriteriaStr()).text()==""){$(B.getNoCriteriaStrElement()).removeClass("hide");$(B.getReportHeaderElement()).addClass("hide");$(B.getCriteriaMainContActionLink()).addClass("hide")}else{$(B.getCriteriaStrElement()).removeClass("hide")}})};this.hideCriteriaElements=function(){$(B.getCriteriaStrElement()).addClass("hide");$(B.getNoCriteriaStrElement()).addClass("hide");$(B.getEditCricCont()).addClass("hide");$(B.getSaveCricCont()).removeClass("hide");$(B.getCancelCricCont()).removeClass("hide");$(B.getCreateCriteria()).removeClass("hide");$(B.getCriteriaMainCont()).removeClass("hide");$(B.getCriteriaMainContActionLink()).removeClass("hide")};this.bindAddFilterEvents=function(){$(B.getReportAddFilterElement()).on("click",function(E){A.hideCriteriaElements();D.showCriteriaBuilder({callback:function(F){A.showCriteriaBuilder(F)}})})};this.showCriteriaBuilder=function(E){$(B.getCritBuilder()).html(E);$(B.getFilterButtonContainer()).show();$(B.getZCToastClear()).trigger("click");var G={context:Constants.REPORT,isSharedAnalytics:true,dateformat:ZCGlobal.uiDateFormate,is24HrFormat:true};CriteriaBuilderNew.initConfig(G);var F=$(B.getCriteriaBuilderRuleMain());CriteriaBuilderNew.init(F);setTimeout(function(){$(B.getCriteriaBuilderFirstTabIndex()).trigger("focus")},300);$(B.getViewCriteriaRadio()).each(function(I,H){$(H).customRadio()})};this.bindEditFilterEvents=function(){$(B.getEditCriteriaElement()).on("click",function(E){A.hideCriteriaElements();D.showCriteriaBuilder({callback:function(F){A.showCriteriaBuilder(F)}})})};this.bindDeleteFilter=function(){$(B.getDeleteCriteriaElement()).on("click",function(E){$.confirm({message:"Do you really want to delete this Filter?",success:function(){var F={};F.criteriaOption=false;D.setCriteria({data:F,callback:function(H){var G=CriteriaBuilderNew.getRespArr(H);if(G.STATUS=="NoCriteria"){$(B.conDiv()).not(":first").remove();$(B.conOprDiv()).remove()}$(B.getReportHeaderElement()).addClass("hide");$(B.getCreateCriteria()).addClass("hide");$(B.getNoCriteriaStrElement()).removeClass("hide");$(B.getCriteriaStrElement()).addClass("hide");$(B.getCriteriaMainContActionLink()).addClass("hide");$(B.getBaseCriteriaStr()).text("");A.showCricEdit=true;A.showCricSave=true}})},failure:function(){return }})})}});var GroupSortView=(function(D,B,C){ReportBuilderViewFactory.call(this,D);var A=this;this.isGrouping=C.isGrouping;this.bindEvents=function(){A.addFieldIcons();A.bindSortableEvents(A.isGrouping);$(D.getScrollContainer()).zcScrollPane()};this.addFieldIcons=function(){$(D.getGroupSortElement()).each(function(I,J){var F=parseInt($(J).attr("fieldType"));var H=parseInt($(J).attr("displayType"));var G=parseInt($(J).attr("selectType"));var E=ReportBuilderUtils.getFieldIcon(F,H,G);$(D.getGroupSortFieldIconElement(J)).addClass(E)})};this.bindSortableEvents=function(I){$(D.getSortableContentElement()).sortable({tolerance:"pointer",scrollSensitivity:100,revert:true,placeholder:"dragHoverMedium",containment:"parent",update:function(M,N){A.addSortOrGroup(I,N.item,true,false)},start:function(N,M){M.item.find(".zc-dem-sorting-add-btn").css("display","none");$(M.item).addClass("zc-dem-hover-hide")},stop:function(N,M){M.item.find(".zc-dem-sorting-add-btn").css("display","");$(M.item).removeClass("zc-dem-hover-hide")}});var K=$(D.getGroupSortFieldLiElement()).length;var J="Choose field";if(K>0){var H=$(D.getSortColumns());H.zcDropDown({showSearch:true,placeholder:J,dropdownCssClass:"zc-sharedanalytics-select2 zc-sort-select2-dragadd"});var E=function(M){$(M).on("click",function(T){var R=$(D.getSortableFieldParentElement(this));var Q;if(R.hasClass("active")){var S=$(D.getSortableFieldNextAllElement(R));var N=$(D.getSortableFieldPreviousAllElement(R));if($(S).length>0){Q=$(S).first()}else{if($(N).length>0){Q=$(N).first()}}}$(D.getSortableContentElement()).find(R).smoothRemove(400,function(){if(Q!==undefined&&Q.length>0){$(Q).trigger("click")}});var P=R.attr("delugeName");$(D.getSelectedOptionElement(P)).removeClass("hide");var O=$(D.getGroupSortFieldLiElement()).length==1?true:false;A.addSortOrGroup(I,R,false,O);T.stopPropagation()})};var G=function(M){$(M).off("click").on("click",function(P){$(D.getSortableActiveUserFilter()).removeClass("active");var O=$(this).parent("li[formComponentId]");var N=$(".selectFieldLi");O.after(N);$(".selectFieldLi").fadeIn();H.data("zcdd").open();H.data("zcdd").afterClose(function(){var Q=H.find("option:selected").length;if(Q==0){$(".selectFieldLi").hide()}});P.stopPropagation()})};$(D.getGroupSortFieldLiElement()).off("click").on("click",function(){A.getCustomSorting(this)});E($(D.getGroupOrSortDeleteElement()));G($(D.getGroupOrSortAddFieldElement()));$(D.getSortableContentElement()).disableSelection();$(D.getGroupSortSelectFieldTextElement()).hide();var F=$(D.getSortableContentFormComponentLiElement());if($(F).length>0){$(D.getGroupSortSelectFieldElement()).hide();$(F).first().trigger("click")}$(D.getSortColumns()).off("change").on("change",function(){var P=$(D.getSortColumnSelectedOption());var O={};O.displayName=$(P).text().trim();O.delugeName=$(P).attr("delugeName").trim();O.viewComponentId=$(P).attr("viewComponentId");O.fieldType=parseInt($(P).attr("fieldType"));O.displayType=parseInt($(P).attr("displayType"));O.selectType=parseInt($(P).attr("selectType"));O.formComponentId=$(P).attr("formComponentId");O.mappingcomplinkname=$(P).attr("mappingcomplinkname");O.mappingFormComponentId=$(P).attr("mappingFormComponentId");O.isGroup=$(P).attr("isGroup");var Q=$(P).attr("isGroup");if(Q=="true"){O.isCoordinateFormat=$("option:selected",this).attr("isCoordinateFormat")}else{O.isCoordinateFormat="false"}var M=D.getGroupSortElementDOM(O);var N=$(this).parent("li");N.after(M);$(D.getSortNameElement(M)).text(O.displayName);M.hide();E($(D.getGroupOrSortDeleteElementFromLi(M)));G($(D.getGroupOrSortAddFieldElementFromLi(M)));A.resetSelect2($(D.getGroupSortSelectFieldLiElement()));$(D.getGroupSortSelectFieldSelect2Container()).hide();$(D.getSelectedOptionElement(O.delugeName)).addClass("hide");$(D.getGroupSortSelectFieldTextElement()).show();A.addSortOrGroup(Q,M,true,false)})}else{$(D.getSingleSortColumns()).zcDropDown({showSearch:true,placeholder:J,dropdownCssClass:"zc-sharedanalytics-select2 zc-sort-select2-drop"});$(D.getAddGroupingElement()).on("click",function(){var O=$(D.getSelectOptionSingleSortColumns());if(D.getFirstSingleSortColumn().selectedIndex>0){var N={};N.displayName=O.text().trim();N.delugeName=O.attr("delugeName").trim();N.viewComponentId=O.attr("viewComponentId");N.fieldType=parseInt(O.attr("fieldType"));N.displayType=parseInt(O.attr("displayType"));N.selectType=parseInt(O.attr("selectType"));N.formComponentId=O.attr("formComponentId");N.mappingcomplinkname=O.attr("mappingcomplinkname");N.mappingFormComponentId=O.attr("mappingFormComponentId");N.isGroup=O.attr("isGroup");var P=O.attr("isGroup");var M=$(D.getGroupSortElementDOM(N));$(D.getSortUlElement()).append(M);$(D.getSortNameElement(M)).text(N.displayName);M.hide();A.addSortOrGroup(P,M,true,true)}else{$(D.getSingleSortColumns()).showError("Please select a field")}})}};this.addSortOrGroup=function(J,E,M,F){var K={};var I=0;var G=0;var H=$(E).attr("formcomponentid");$(D.getSortableContentLiElement()).each(function(S,O){if($(O).hasClass("selectFieldLi")){return true}var R=$(O).attr("formcomponentid");var W=$(O).attr("viewcomponentid");if(isNull(W)){W=1}var T=$(O).attr("isAdded");var X=$(O).attr("svId");var Q=$(O).attr("mappingFormComponentId");var P=$(O).attr("mappingcomplinkname");if(Q!=undefined){K["colIdVsProps("+W+").colProps(mappingformComponentId)"]=Q;K["colIdVsProps("+W+").colProps(mappingcomplinkname)"]=P}var U=true;if(R!=null&&R!=undefined){var V=I+1;I++;K["colIdVsProps("+W+").colProps(sortOrder)"]=V;K["colIdVsProps("+W+").colProps(isAsc)"]=U;K["colIdVsProps("+W+").colProps(formComponentId)"]=R;if(X!=""){K["colIdVsProps("+W+").colProps(subViewComponentId)"]=X}G++;K["colIdVsProps("+W+").colProps(isAdded)"]=T}});if(!M){var N=$(E).attr("viewComponentId");if(N!=null&&N!=undefined){K["colIdVsProps("+N+").colProps(delgroupsortcomp)"]=true}}K.isGroup=J;var J=(J==="true"||J===true);B.addOrSort({data:K,callback:function(O){if(!F){if(M){$(D.getGroupSortSelectFieldElement()).hide();$(D.getGroupSortSelectFieldSelect2Container()).show();$(D.getGroupSortSelectFieldTextElement()).hide();E.fadeIn()}if(O!="error"){if(M){var P=$(D.getGroupSortSelectedElementFromFormcomponentid(H));if(O!="-1"){$(P).attr("viewComponentId",O)}$(P).attr("isAdded","true");$(P).off("click").on("click",function(){A.getCustomSorting(this)});$(P).trigger("click")}if(J){if($(D.getSortableContentLiElement()).length>0){$(D.getGroupCheckElement()).show()}else{$(D.getGroupCheckElement()).hide()}}}}else{$(D.getGroupingOrSortingTab()).trigger("click")}}})};this.getCustomSorting=function(F){$(D.getSortableContentActiveElement()).removeClass("active");$(F).addClass("active");var E=$(F).attr("viewcomponentid");var H=$(F).attr("isGroup");var G={};G.viewCompId=E;G.isGroup=A.isGrouping;B.showSortingConfiguration({data:G,callback:function(I){if(I!="error"){var J=$(D.getCustomSortingWrapper());$(J).html(I);$(D.getCustomSortingOrderElement()).on("click",function(){A.updateCustomSorting(this)});$(D.getCustomSortingOrderCompositeFieldContainer()).on("click",function(){});$(D.getSortableContainmentElement()).addClass("zc-sort-rightpane-show");$(J).show();$(J).addClass("active")}}})};this.updateCustomSorting=function(I){var G=$(I).attr("sortOrder");var H=$(I).attr("viewcomponentid");var K=G=="1"?true:false;var J={};J.viewCompId=H;J.isAsc=K;B.updateAscOrDesc({data:J,callback:function(M){return }});$(D.getCustomSortingOrderContainer()).find("i").remove();$(I).find("span").html($(D.getCheckIconHtml()));var E=$(D.getGroupSortSelectedElement(H));var F=$(D.getGroupSortLabelElement(E));if(K){$(F).text("Sorted in Ascending Order")}else{$(F).text("Sorted in Descending Order")}};this.bindGroupSortOrderEvents=function(){$(D.getCustomSortingOrderElement()).on("click",function(){var I=this;var G=$(I).attr("sortOrder");if(G=="3"){var K=3}else{var H=$(I).attr("viewcomponentid");var J=G=="1"?true:false;$(D.getCustomSortingOrderIconElement()).remove();$(D.getCustomSortingOrderSpanElement(I)).html($(D.getCheckIconHtml()));var E=$(D.getGroupSortSelectedElement(H));var F=$(D.getGroupSortLabelElement(E));if(J){$(F).text("Sorted in Ascending Order")}else{$(F).text("Sorted in Descending Order")}}})};this.bindCompositeFieldGroupSortOrderEvents=function(){$(D.getCustomSortingOrderCompositeFieldElement()).on("click",function(){})};this.resetSelect2=function(E){E.data("zcdd").setValue([])}});var ReportPropertiesView=(function(C,B,D){ReportBuilderViewFactory.call(this,C);var A=this;this.config=D;this.bindEvents=function(){ReportBuilderUtils.applySelect2($(C.getSelectElement()));$(C.getSelectElement()).off("change").on("change",function(){A.saveProperties()});$(C.getReportDisplayName()).off("change").on("change",function(){A.saveProperties()});$(C.getShareToElement()).off("change").on("change",function(){var E=$(C.getSelectElement());var G=$(E).data("zcdd");var F=$(C.getPermissionSetElement());if(parseInt($(this).val())==0){G.clear();$(E).val("").trigger("change");$(F).addClass("hide")}else{$(F).removeClass("hide");setTimeout(function(){G.open()},0)}})};this.saveProperties=function(){var H=false;var G=$(C.getReportDisplayName());var F=$(G).val();if(F===""){$(G).showError("Report name cannot be empty.");H=true}var E=$(C.getSelectElement());var J=$(E).val();if($(J).length==0&&parseInt($(C.getShareToSelectedElement()).val())==1){var K=$(E).data("zcdd");K.onFocus(function(M){M.stopImmediatePropagation()});K.beforeOpen(function(N){var M=$(E).prev(".zc-dem-error-container");if($(M).length>0){errorClearCallback(M);$(C.getPermissionSetHelpTextElement()).removeClass("hide")}});$(E).showError("Choose permission-sets to proceed");$(C.getPermissionSetHelpTextElement()).addClass("hide");H=true}if(H){return }var I={};I.reportDisplayName=$(C.getReportDisplayName()).val();I.profileIds=$($(C.getSelectElement()).val()).length==0?undefined:JSON.stringify($(C.getSelectElement()).val());B.saveProperties({data:I,callback:function(M){var N=$(".zc_nav_com a[id='"+A.config.viewLinkName+"']");$(N).find(".zc-nav-title .title").text(I.reportDisplayName)}})}});var AnalyticsView=(function(D,B,C){ReportBuilderViewFactory.call(this,D);var A=this;this.config=C;this.bindEvents=function(){A.bindCommonEvent();A.bindRecordEvents();A.bindFieldFocusEvents();A.bindAddFieldEvents();A.bindCompositeAddOrDeleteEvent();A.bindRenameEvents();A.bindDeleteFieldEvents()};this.addPivotColumn=function(E){B.addPivotColumn({data:E,callback:function(F){$(D.getAnalyticsSliderContainer()).html(F);A.bindEvents();SharedAnalyticsZCReportEditor.refreshColumnList()}})};this.updatePivotColumn=function(E){B.updatePivotColumn({data:E,callback:function(F){if(E.isDelete){if(F.indexOf("error")!=-1){$.alert({msg:"An error has occurred. Please contact support@zohocreator.com for assistance."})}else{$(D.getAnalyticsSliderContainer()).html(F);SharedAnalyticsZCReportEditor.refreshColumnList()}}else{SharedAnalyticsZCReportEditor.refreshColumnList()}A.bindEvents()}})};this.bindAddFieldEvents=function(){$(D.getPivotSelectColumn()).off("change").on("change",function(){var E={};E.viewCompDisplayName=$("option:selected",this).attr("displayname");E.viewId=$(this).attr("viewid");E.formCompId=$("option:selected",this).attr("formcompid");E.isMappingComp=$("option:selected",this).attr("ismappingcomp");E.isRelatedField=$("option:selected",this).attr("isrelatedfield");E.mappingSelCompId=$("option:selected",this).attr("mappingselcompid");A.addPivotColumn(E)})};this.bindCompositeAddOrDeleteEvent=function(){$(D.getCompositeFieldCheckboxElement()).off("click").on("click",function(){var G={};var F=$(this).is(":checked");var E=$(D.getNearestCompositeFieldDataElement(this));if(!F){G.isDelete=true;G.viewCompId=$(E).attr("viewcompid");G.primaryViewCompId=$(E).attr("primaryviewcompid");A.updatePivotColumn(G)}else{G.viewId=$(E).attr("viewid");G.formCompId=$(E).attr("formcompid");G.viewCompDisplayName=$(D.getFieldDivCompositeViewDisplayName(E)).val();G.isRelatedField=false;G.isMappingComp=true;G.primaryViewCompId=$(E).attr("primaryviewcompid");A.addPivotColumn(G)}})};this.bindDeleteFieldEvents=function(){$(D.getDeleteFieldElement()).off("click").on("click",function(){var E=$(this).closest("li");var F={};F.isDelete=true;F.viewCompId=$(E).attr("viewcompid");F.viewCompDisplayName=$(D.getViewFieldDisplayNameFromElement(E)).val();A.updatePivotColumn(F)})};this.bindCommonEvent=function(){$(D.getPivotSettingElement()).off("click").on("click",function(){$(D.getPivotReportPropertyContainer()).addClass("zc-dem-slider active")});$(D.getPivotCloseElement()).off("click").on("click",function(){$(D.getPivotReportPropertyContainer()).removeClass("zc-dem-slider active")});ReportBuilderUtils.applySelect2($(D.getPivotSelectElements()));var E={};E.url=A.config.url;E.viewLinkName=A.config.viewLinkName;E.type=ReportBuilderConfigurationTypes.REPORTPROPERTIES;ReportBuilderController.ReportPropertiesController.create(E)};this.bindRecordEvents=function(){$(D.getRecordVisibilityElement()).off("change").on("change",function(){var E={};E.isLoginUserCheck=$(this).val()=="showallrecords"?false:true;B.setLoginUserCheck({data:E,callback:function(F){}})});$(D.getRecordRestrictionElement()).off("click").on("click",function(){var F=$(D.getExportOptionElement()).is(":checked");var H=$(D.getUnderlyingElement()).is(":checked");var G=$(D.getZiaInsightsElement()).is(":checked");var E={};E.isExportOption=F;E.isViewUnderlyingdata=H;E.isZiaInsights=G;B.restrictPivotData({data:E,callback:function(I){}})})};this.bindRenameEvents=function(){$(D.getViewFieldDisplayName()).off("change").on("change",function(){var E=$(this).closest("li");var F={};F.isDelete=false;F.viewCompId=$(E).attr("viewcompid");F.viewCompDisplayName=$(this).val();A.updatePivotColumn(F)});$(D.getCompositeViewDisplayName()).off("change").on("change",function(){var F=$(D.getNearestCompositeFieldDataElement(this));var E={};E.isDelete=false;E.viewCompId=$(F).attr("viewcompid");E.viewCompDisplayName=$(this).val();A.updatePivotColumn(E)})};this.bindFieldFocusEvents=function(){$(D.getRenameElement()).off("click").on("click",function(){var E=$(D.getReportsFieldEle(this));$(E).addClass("zc-dem-field-edit");var G=$(D.getInputElement(E));$(G).attr("readonly",false);$(G).trigger("focus");var F=$(G).val().length;$(G)[0].setSelectionRange(F,F)});$(D.getCompositeRenameElement()).off("click").on("click",function(){var J=$(D.getCompositeFieldDataElement(this));var E=$(D.getCompositeFieldToggleCompositeSelection(J));if($(J).length==0){J=$(D.getReportsFieldEle(this))}if(!$(E).is(":checked")){var H=$(D.getNearestCompositeFieldDataElement(this));var G={};G.viewId=$(H).attr("viewid");G.formCompId=$(H).attr("formcompid");G.viewCompDisplayName=$(D.getFieldDivCompositeViewDisplayName(H)).val();G.isRelatedField=false;G.isMappingComp=true;G.primaryViewCompId=$(H).attr("primaryviewcompid");A.addPivotColumn(G)}else{var I=$(D.getInputElement(J));$(I).attr("readonly",false);$(I).trigger("focus");$(I).addClass("zc-dem-field-edit");var F=$(I).val().length;$(I)[0].setSelectionRange(F,F)}});$(D.getCompositeViewDisplayName()).off("click").on("click",function(){if($(this).is("[readonly]")){var E=$(D.getCompositeFieldDataElement(this));$(D.getCompositeFieldToggleCompositeSelection(E)).trigger("click")}});$(D.getCompositeViewDisplayName()).on("focusout",function(){$(D.getCompositeFieldDataElement(this)).removeClass("zc-dem-field-edit");$(this).attr("readonly",true)});$(D.getViewFieldDisplayName()).on("focusout",function(){$(D.getReportsFieldEle(this)).removeClass("zc-dem-field-edit");$(this).attr("readonly",true)})}});var $CriteriaBuilder={};var CriteriaBuilderNew=new function(){this.frmSubmit=true;this.groupEl=null;this.zohoVarList=["zoho.loginuser","zoho.adminuser","zoho.loginuserid","zoho.adminuserid","zoho.currentdate","zoho.currenttime","zoho.appname","zoho.ipaddress","zoho.appuri"];this.inputVar="input";this.initConfig=function(A){if(A){$CriteriaBuilder.context=A.context?A.context:Constants.REPORT;$CriteriaBuilder.inputVariables=A.inputVariables?A.inputVariables:false;if(A.pageParam){$CriteriaBuilder.pageParam=A.pageParam}delete $CriteriaBuilder.searchParam;if(A.searchParam){$CriteriaBuilder.searchParam=A.searchParam}if(A.isSharedAnalytics){$CriteriaBuilder.dateformat=A.dateformat.toUpperCase();$CriteriaBuilder.is24HrFormat=A.is24HrFormat}else{$CriteriaBuilder.dateformat=variable.uiDateFormat;$CriteriaBuilder.is24HrFormat=variable.is24HrFormat}}};this.init=function(A){var B=function(){CriteriaBuilderNew.handleDeleteForSingleCriteria(A);CriteriaBuilderNew.bindEvents(A)};try{if(getConfig().useCompression&&Modules.DATETIMEPICKER!=undefined){var C=new Requires(Modules.DATETIMEPICKER);require(C.get(),C.getPromise(function(){B()}))}else{B()}}catch(D){var E=window.console;E.log(D)}};this.handleDeleteForSingleCriteria=function(A){var C=A.find(".zc-rule-builder .zc-rule").length;if(C==1){var B=A.find(".zc-rule-builder").find(".zc-rule-delete")[0];$(B).css("display","none")}else{var B=A.find(".zc-rule-builder").find(".zc-rule-delete")[0];$(B).css("display","block")}};this.bindEvents=function(A){var B=A.find(".zc-rule-sample");var C=A.find(".zc-rule-builder");CriteriaBuilderNew.bindSelect2(C);CriteriaBuilderNew.bindInputEvents(A);C.on("click",".zc-rule-act",function(){var D="AND";var J="&&";if($(this).hasClass("zc-rule-or")){D="OR";J="||"}CriteriaBuilderNew.groupEl=$(this).parents(".zc-rule-group");var E=CriteriaBuilderNew.getRuleBind();var K=false;if(E!=RuleBind.SINGLE&&(E==RuleBind.ANDBIND&&D=="OR")||(E==RuleBind.ORBIND&&D=="AND")){K=true}if(K){var G='<div class="zc-rule-table-row"><div class="zc-rule-table-cell"><div class="zc-rule-mid-opts zc-rule-opt-'+D.toLowerCase()+'"><input type="hidden" elname="conditionalOperator" name="" value="'+J+'"><div class="zc-rule-mid-divider">'+D+"</div></div></div></div>";var I=$(this).parents(".zc-rule");var F=B.find(".zc-rule").clone();I.after([G,F]);CriteriaBuilderNew.bindSelect2(F)}else{var G='<div class="zc-rule-mid-opts zc-rule-subgroup-opt-'+D.toLowerCase()+'"><input type="hidden" elname="conditionalOperator" name="" value="'+J+'"><div class="zc-rule-mid-divider">'+D+"</div></div>";var H=B.find(".zc-rule-subgroup").clone();$(this).parents(".zc-rule-subgroup").after([G,H]);CriteriaBuilderNew.bindSelect2(H)}CriteriaBuilderNew.handleDeleteForSingleCriteria(A)});C.on("change",".zc-rule-group-opt",function(){C.find(".zc-rule-group-opt").val($(this).val());$.each(C.find('select[elname="conditionalOperator"]'),function(){$(this).data("zcdd").setValue($(this).val())})});C.on("change","select[elname=criteriaField]",function(){CriteriaBuilderNew.changeCritField(this)});C.on("change","select[elname=relOperator]",function(){CriteriaBuilderNew.changeRelOperator(this)});C.on("click",".zc-rule-delete",function(){var E=$(this).parents(".zc-rule"),D=E.parent();if(E.prev().length!=0){E.prev().remove();E.remove()}else{if(E.next().length!=0){E.next().remove();E.remove()}else{if(D.prev().length!=0){D.prev().remove();D.remove()}else{if(D.next().length!=0){D.next().remove();D.remove()}else{if(D.parent().prev().length!=0){D.parent().prev().remove();D.parent().remove()}else{if(D.parent().next().length!=0){D.parent().next().remove();D.parent().remove()}}}}}}CriteriaBuilderNew.handleDeleteForSingleCriteria(A)});A.find(".zc-rule-group-new").off("click").on("click",function(){var E=B.find(".zc-rule-group").clone();var D='<div class="zc-rule-mid-opts"> <div class="zc-rule-mid-divider"> <div class="zc-dem-field-group zc-dem-selectbox"> <select elname="conditionalOperator" class="zc-rule-group-opt zc-dem-field zc-dem-select zc-dem-box-sizing zc-dem-border-radius-0"><option value="&&">AND</option><option value="||">OR</option></select></div> </div></div>';C.append([D,E]);CriteriaBuilderNew.bindSelect2(E);CriteriaBuilderNew.handleDeleteForSingleCriteria(A);C.find("select[elname=conditionalOperator]").zcDropDown()})};this.bindInputEvents=function(A){var B=A.find("select[elname=criteriaField]");$.each(B,function(F){var D=B[F];var E=$(D).find("option:selected").attr("fctype");var K=$(D).find("option:selected").attr("showSeconds");var I=$(D).parents(".zc-rule-table-cell").next().next();var G=I.find("input[elname=inputValue]");var C=$(D).parent().parent().next().find("option:selected").attr("value");var J=$(D).find("option:selected").parent().attr("compositeField");var M=[];if(typeof ($CriteriaBuilder)!="undefined"&&typeof ($CriteriaBuilder.searchParam)!="undefined"){$(G).attr("disabled",true);$(G).val("input.searchString");if(typeof $(G).data("zcdd")!=="undefined"){$(G).data("zcdd").setValue("")}}if((E==Constants.DATE||E==Constants.DATE_TIME||E==Constants.TIME)&&C>=Constants.EQUAL&&C<=Constants.AFTER){CriteriaBuilderNew.dateTimePickerHandling(I,G,E,K);M=["zoho.currentdate","zoho.currenttime"];CriteriaBuilderNew.autoCompleteSystemVariables(G,M)}else{if(((E==Constants.SINGLE_SELECT&&typeof ($CriteriaBuilder)!="undefined"&&$CriteriaBuilder.context!=Constants.WORKFLOW)||E==Constants.LINK_FIELD||E==Constants.MULTI_SELECT||E==Constants.INLINE_SINGLE_SELECT)&&!J){var H=$(D).val();CriteriaBuilderNew.bindPicklistEvent(H,E,G)}else{if(E==Constants.CHECK_BOX){CriteriaBuilderNew.appendDecisionBoxChoices(G)}else{if(E==Constants.EMAIL_ADDRESS){M=["zoho.loginuserid","zoho.adminuserid"];CriteriaBuilderNew.autoCompleteSystemVariables(G,M)}else{if(E==Constants.NUMBER||E==Constants.CURRENCY||E==Constants.PERCENTAGE||E==Constants.AUTO_NUMBER){CriteriaBuilderNew.autoCompleteSystemVariables(G,M)}else{M=["zoho.loginuser","zoho.adminuser","zoho.loginuserid","zoho.adminuserid","zoho.appname","zoho.ipaddress","zoho.appuri","zoho.currentdate","zoho.currenttime"];CriteriaBuilderNew.autoCompleteSystemVariables(G,M)}}}}}})};this.bindDateTimeEvent=function(A,C,B){var E=getTimeFormat((B=="true"),$CriteriaBuilder.is24HrFormat);var D=null;if(C==Constants.DATE){D=$CriteriaBuilder.dateformat}else{if(C==Constants.DATE_TIME){D=$CriteriaBuilder.dateformat+" "+E}else{if(C==Constants.TIME){D=E}}}$(A).dtPicker({format:D,keepInvalid:true,defaultDate:false,customInput:true})};this.bindSelect2=function(A){if(A==undefined){A=$(".zc-rule-main")}if($(A).find(".select2-container").length==0){$.each($(A).find("select"),function(){$(this).zcDropDown()});select2FocusField($(A).find("select:first"))}};this.isNewGroupPossible=function(B){var A=B.find(".zc-rule-subgroup").length;if(B.find(".zc-rule").length>A){return true}return false};this.updateInput=function(A){var C=A.find(".zc-rule-builder");var B="";CriteriaBuilderNew.frmSubmit=true;C.find(".zc-rule-group").each(function(E){var D="";if(C.find(".zc-rule-group").length>1){D="groupMap(c"+(E+1)+")."}B=CriteriaBuilderNew.updateOperatorName(B,$(this).prev(),D);$($(this).find(".zc-rule-subgroup")).each(function(G){var F=$(this).find(".zc-rule");if(F.length==1){var H=D+"conditionMap(c"+(G+1)+")";B=CriteriaBuilderNew.updateRuleInput(B,H,$(this))}else{var I=D+"groupMap(c"+(G+1)+")";B=CriteriaBuilderNew.updateSubgroupInput(B,I,$(this),F)}})});if(!CriteriaBuilderNew.frmSubmit){return false}else{return B}};this.updateSubgroupInput=function(D,B,C,A){D=CriteriaBuilderNew.updateOperatorName(D,C.prev(),B);$(A).each(function(G,E){var F=B+".conditionMap(c"+(G+1)+")";D=CriteriaBuilderNew.updateRuleInput(D,F,$(this))});return D};this.updateRuleInput=function(W,H,J){W=CriteriaBuilderNew.updateOperatorName(W,J.prev(),H);var D=J.find("select[elname=criteriaField]");var V=J.find("select[elname=relOperator]");var K=J.find("input[elname=inputValue]");var Q=D.find("option:selected").attr("fctype");var S="";var E=$(K).val();var M=$(V).val();if(Q==Constants.NONE){S=Constants.EMPTY_FIELD;setTimeout(function(){$(D).showError(Constants.EMPTY_FIELD)})}if(M==Constants.SELECT){S=Constants.EMPTY_OPERATOR;$(V).showError(Constants.EMPTY_OPERATOR)}if(M>=Constants.EQUAL&&M<=Constants.LIKE){if(Q==Constants.NUMBER||Q==Constants.CURRENCY||Q==Constants.PERCENTAGE||Q==Constants.AUTO_NUMBER||Q==Constants.DATE||Q==Constants.TIME||Q==Constants.DATE_TIME){if(E==""){S=Constants.EMPTY_VALUE;$(K).showError(Constants.EMPTY_VALUE)}}}if(S!=""){CriteriaBuilderNew.frmSubmit=false;return false}else{if(CriteriaBuilderNew.frmSubmit){var N=H+".criteriaField";var O=H+".relOperator";var R=H+".inputValue";$(D).attr("name",N);$(V).attr("name",O);$(K).attr("name",R);CriteriaBuilderNew.frmSubmit=true;if(W!=""){W+="&"}W+=N+"="+$(D).val();W+="&"+O+"="+$(V).val();var G=CriteriaBuilderNew.zohoVarList.indexOf(E.toLocaleLowerCase());var C=(CriteriaBuilderNew.inputVar==E.substr(0,E.indexOf(".")))?true:false;if(E!="null"&&E!=null&&G==-1&&!C){var Y=E.charAt(0);var U=E.charAt(E.length-1);if(Y!='"'&&U!='"'&&Y!="'"&&U!="'"){var I="";if(Q==Constants.SINGLE_LINE||Q==Constants.MULTI_LINE||Q==Constants.EMAIL_ADDRESS||Q==Constants.RICH_TEXT_AREA||Q==Constants.INLINE_SINGLE_SELECT||(Q==Constants.SINGLE_SELECT&&typeof ($CriteriaBuilder)!="undefined"&&$CriteriaBuilder.context!=Constants.WORKFLOW)||Q==Constants.LINK_FIELD||Q==Constants.MULTI_SELECT||Q==Constants.PHONE_NUMBER||Q==Constants.EXTERNAL_FIELD){I='"'}else{if(Q==Constants.DATE||Q==Constants.DATE_TIME||Q==Constants.TIME){var X=E;var B=["yesterday","today","tomorrow"];if(B.indexOf(X.toLocaleLowerCase())==-1&&M>=Constants.EQUAL&&M<=Constants.GREATER_EQUAL){var P=$CriteriaBuilder.dateformat.replace("E","ddd");var T=$(D).find("option:selected").attr("showSeconds");if(T==undefined){T="true"}var A=getTimeFormat((T=="true"),$CriteriaBuilder.is24HrFormat);if(Q==Constants.DATE_TIME){P=P+" "+A}else{if(Q==Constants.TIME){P=A}}var F=moment(X,P,"en-US",true).isValid();if(F){I="'"}}}}E=I+encodeURIComponent(E)+I;W+="&"+R+"="+E}else{W+="&"+R+"="+encodeURIComponent(E)}}else{W+="&"+R+"="+encodeURIComponent(E)}}return W}};this.updateOperatorName=function(B,C,D){if(C.length!=0&&B!=false){var F=C.find("[elname=conditionalOperator]");var E=$(F).attr("elname");var A=D+"."+E;if(D.endsWith(".")){A=D+E}F.attr("name",A);B+="&"+A+"="+encodeURIComponent($(F).val())}return B};this.getRuleBind=function(){var B=CriteriaBuilderNew.groupEl.find(".zc-rule-subgroup-opt-and");var A=CriteriaBuilderNew.groupEl.find(".zc-rule-subgroup-opt-or");if(B.length!=0){return RuleBind.ANDBIND}else{if(A.length!=0){return RuleBind.ORBIND}else{return RuleBind.SINGLE}}};this.changeCritField=function(J){var E=CriteriaBuilderNew.operatorOptions(J);var D=$(J).parent().parent().next();var B=D.find("select[elname=relOperator]");var A=$(J).find("option:selected");var C=A.attr("fcType");var H=$(A).parent().attr("compositeField");var F=$(D.next()).find("input[elname=inputValue]");if(typeof ($CriteriaBuilder)!="undefined"&&typeof ($CriteriaBuilder.searchParam)=="undefined"){if(typeof $(F).data("zcdd")!=="undefined"){$(F).data("zcdd").destroy()}if($(F).data("dtpicker")!=undefined){$(F).data("dtpicker").destroy()}$(F).val("");if($(F).parent().has(".calcIcon").length){$(F).parent().find(".calcIcon").remove();if($(F).hasClass("zc-dtpicker-field")){$(F).removeClass("zc-dtpicker-field")}}var I=[];if(((C==Constants.SINGLE_SELECT&&typeof ($CriteriaBuilder)!="undefined"&&$CriteriaBuilder.context!=Constants.WORKFLOW)||C==Constants.LINK_FIELD||C==Constants.MULTI_SELECT||C==Constants.INLINE_SINGLE_SELECT)&&!H){var G=$(J).val();CriteriaBuilderNew.bindPicklistEvent(G,C,F)}else{if(C==Constants.CHECK_BOX){CriteriaBuilderNew.appendDecisionBoxChoices(F)}else{if(C==Constants.DATE||C==Constants.DATE_TIME){I=["zoho.currentdate","zoho.currenttime"];CriteriaBuilderNew.autoCompleteSystemVariables(F,I)}else{if(C==Constants.TIME){I=["zoho.currenttime"];CriteriaBuilderNew.autoCompleteSystemVariables(F,I)}else{if(C==Constants.EMAIL_ADDRESS){I=["zoho.loginuserid","zoho.adminuserid"];CriteriaBuilderNew.autoCompleteSystemVariables(F,I)}else{if(C==Constants.NUMBER||C==Constants.CURRENCY||C==Constants.PERCENTAGE||C==Constants.AUTO_NUMBER){CriteriaBuilderNew.autoCompleteSystemVariables(F,I)}else{I=["zoho.loginuser","zoho.adminuser","zoho.loginuserid","zoho.adminuserid","zoho.appname","zoho.ipaddress","zoho.appuri","zoho.currentdate","zoho.currenttime"];CriteriaBuilderNew.autoCompleteSystemVariables(F,I)}}}}}}}B.data("zcdd").destroy();B.replaceWith(E);CriteriaBuilderNew.bindSelect2(D);if(C!=Constants.NONE){E.data("zcdd").open()}};this.appendDecisionBoxChoices=function(B){var C={"1":"true","2":"false"};var A=(B).attr("value");var D=CriteriaBuilderNew.convertSelect2Data(C);_config={data:D,openOnEnter:false,createSearchChoice:function(E){return{id:$.trim(E),text:$.trim(E)}},initSelection:function(E,F){F({id:$.trim(A),text:$.trim(A)})}};$(B).zcDropDown(_config)};this.bindPicklistEvent=function(M,D,K){var J=M.replace(".","_")+"_options";var G=CriteriaBuilderNew[J];var C=(K).attr("value");var I=CriteriaBuilderNew.convertSelect2DataWithOptGroup(G,"Choices");var H=["zoho.loginuser","zoho.adminuser","zoho.loginuserid","zoho.adminuserid","zoho.appname","zoho.ipaddress","zoho.appuri","zoho.currentdate","zoho.currenttime"];I=I.concat(CriteriaBuilderNew.convertSelect2DataWithOptGroup(H,"Deluge System Variables"));if(typeof ($CriteriaBuilder)!="undefined"&&$CriteriaBuilder.inputVariables){var E=CriteriaBuilderNew.input_options;I=I.concat(CriteriaBuilderNew.convertSelect2DataWithOptGroup(E,"Input Variables"))}var B=(D==Constants.MULTI_SELECT)?true:false;var A=(D==Constants.INLINE_SINGLE_SELECT||D==Constants.SINGLE_SELECT||D==Constants.LINK_FIELD)?true:false;var F={data:I,openOnEnter:false,multiple:B,createSearchChoice:function(N){return{id:$.trim(N),text:$.trim(N)}},initSelection:function(O,Q){if(B||A){var P=C.split(",");var N=[];$.each(P,function(){N.push({id:this,text:this})});if(A){Q(N[0])}else{Q(N)}}}};$(K).zcDropDown(F)};this.convertSelect2Data=function(B){var A=new Array();$.each(B,function(C,D){D=$("<div>").html(D).text();A.push({id:D,text:D})});return A};this.convertSelect2DataWithOptGroup=function(B,C){var A=new Array();A.push({text:C,children:CriteriaBuilderNew.convertSelect2Data(B)});return A};this.operatorOptions=function(J){var D=$(J).find("option:selected");var C=D.attr("fctype");var E=D.attr("isencrypted")=="true"?true:false;var H=$(J).parents(".zc-rule").find("input[elname=inputValue]");var F="cbsamplestrlist";if(E){F="cbsampleencrypt_optlist"}else{if(C==Constants.NUMBER||C==Constants.CURRENCY||C==Constants.PERCENTAGE||C==Constants.AUTO_NUMBER){F="cbsamplenumlist"}else{if(C==Constants.CHECK_BOX){F="cbsamplechecklist"}else{if(C==Constants.DATE||C==Constants.DATE_TIME){F="cbsampledatelist"}else{if(C==Constants.TIME){F="cbsampletimelist"}else{if(C==Constants.INLINE_SINGLE_SELECT||C==Constants.MULTI_SELECT){F="cbsamplepicklist_optlist"}else{if(C==Constants.LINK_FIELD){F="cbsampleblueprint_optlist"}else{if(C==Constants.SINGLE_SELECT&&typeof ($CriteriaBuilder)!="undefined"&&$CriteriaBuilder.context==Constants.WORKFLOW){F="cbsamplelookup_optlist"}}}}}}}}if(C==Constants.CHECK_BOX){$($(J).parents("div.cb-conDiv").find("span").get(2)).replaceWith('<span class="custom_drop_double_arrow"><select class="width220"><option value="true" selected="true">true</option><option value="false">false</option></select></span>')}else{$($(J).parents("div.cb-conDiv").find("span").get(2)).replaceWith('<span><input type="text" class="cp-inputField"></span>')}var A=$(J).parent().next().next();var B=A.children();B.val("");var G=$("#"+F).clone();if(parseInt(C)!=Constants.NONE){var I=D.attr("value");var G=$("#"+F).clone();if(I=="Added_User"||I=="Modified_User"){G.append($(CriteriaBuilder.delugeVar))}G.off("change");if(C==Constants.CHECK_BOX){$(G).find("option[value=18]").attr("selected",true)}}G.removeAttr("id");return G};this.changeRelOperator=function(J){var E=$(J).find("option:selected");var B=E.attr("value");var H=$(J).parent().parent().next();var F=H.children("input")[1];var A=$(J).parent().parent().prev().find("select[elname=criteriaField]");var E=$(A).find("option:selected");var C=E.attr("fctype");var I=E.attr("showSeconds");var G=$(E).parent().attr("compositeField");var D=$(F).val();if(typeof ($CriteriaBuilder)!="undefined"&&typeof ($CriteriaBuilder.searchParam)=="undefined"){if($(F).data("dtpicker")!=undefined){$(F).data("dtpicker").destroy()}if(C!=Constants.CHECK_BOX){D.replace('/"/g',"")}if((C==Constants.DATE||C==Constants.DATE_TIME||C==Constants.TIME)&&B>=Constants.EQUAL&&B<=Constants.AFTER){CriteriaBuilderNew.dateTimePickerHandling(H,F,C,I)}else{if($(H).has(".calcIcon").length!=0){$(H).find(".calcIcon").remove()}}if(D==null||D==""){if(C!=Constants.CHECK_BOX){F.setSelectionRange(1,1)}}$(F).prop("disabled",false);if((B>=Constants.LIKE&&B<=Constants.CURRENT_NEXT_WEEK)||B>=Constants.ISADMIN){$(F).attr("disabled",true);$(F).val("");if(typeof $(F).data("zcdd")!=="undefined"){$(F).data("zcdd").setValue("")}}else{if(B>=Constants.LAST_N_DAYS&&B<=Constants.N_YEARS_AGO){$(F).val("")}}if(((C==Constants.SINGLE_SELECT&&typeof ($CriteriaBuilder)!="undefined"&&$CriteriaBuilder.context!=Constants.WORKFLOW)||C==Constants.LINK_FIELD||C==Constants.MULTI_SELECT||C==Constants.INLINE_SINGLE_SELECT)&&B!=Constants.ISNULL&&B!=Constants.ISNOTNULL&&!G){$(F).data("zcdd").open()}else{$(F).trigger("focus")}}};this.dateTimePickerHandling=function(D,B,A,C){if($(D).has(".calcIcon").length==0){$(D).addClass("zc-dem-field-withicon-right");if(A==Constants.DATE||A==Constants.DATE_TIME){calIcon='<i elname="datePickerIcon" class="zc-dem-date-picker-icon calcIcon zc-em zc-common-calendar"></i>'}else{if(A==Constants.TIME){calIcon='<i elname="timePickerIcon" class="zc-dem-date-picker-icon calcIcon zc-em zc-common-time"></i>'}}$(B).addClass("zc-dtpicker-field");$(B).after(calIcon)}$(D).find(".calcIcon").off("click").on("click",function(){$(B).trigger("focus")});$(B).off("keyup").on("keyup",function(){if($(this).data("dtpicker")!=undefined){$(this).data("dtpicker").destroy()}});$(B).off("mouseup").on("mouseup",function(){if($(this).data("dtpicker")!=undefined){$(this).data("dtpicker").destroy()}});$(D).find(".calcIcon").off("mouseover").on("mouseover",function(){if(C==undefined){C="true"}CriteriaBuilderNew.bindDateTimeEvent(B,A,C)})};this.autoCompleteSystemVariables=function(B,C){var D=CriteriaBuilderNew.getwithLabel(C);if(typeof ($CriteriaBuilder)!="undefined"&&$CriteriaBuilder.inputVariables){var A=CriteriaBuilderNew.input_options;D=D.concat(CriteriaBuilderNew.getwithLabel(A))}if(typeof ($CriteriaBuilder)!="undefined"&&typeof ($CriteriaBuilder.pageParam)!="undefined"){var E=JSON.parse($CriteriaBuilder.pageParam);E=CriteriaBuilderNew.constructPageParameterOptions(E);D=D.concat(E)}$(B).autocomplete({autoFocus:true,minLength:2,delay:0,max:10,source:D})};this.getwithLabel=function(B){var A=new Array();$.each(B,function(C,D){A.push({label:D,value:D})});return A};this.getRespArr=function(B){var A=new Array();for(var D in B){var E=B[D];for(var C in E){A[C]=E[C]}}return A};this.constructPageParameterOptions=function(B){var A=new Array();$.each(B,function(C,D){A.push({label:"input."+D.paramName,value:"input."+D.paramName})});return A};this.constructPageParameterWithOptGroup=function(B,C){var A=new Array();A.push({text:C,children:CriteriaBuilderNew.constructPageParameterOptions(B)});return A}};var RuleBind=new function(){this.SINGLE=0;this.ANDBIND=1;this.ORBIND=2};