REACHUS={DASHBOARD:1,BUILDER:2,LIVE:3};REACHUS.getInstance=function(A){switch(A){case 1:return new ReachUsDashboard();break;case 2:return new ReachUsBuilder();break;case 3:return new ReachUsLive();break}};function ReachUsDashboard(){ReachUsSupport.call(this);var A=this;A.isEditSupport=false;A.userName=ZCGlobal.scopeName;A.emailId=ZCGlobal.loginEmail;A.csrfParamName=ZCGlobal.csrfTokenName;A.csrfToken=ZCGlobal.csrfToken;A.alertMsg=function(B){iAlert(B)};A.successMsg=function(B){showToast(B,ZCType.SUCCESS,2000)};A.initFeedbackSupport()}function ReachUsBuilder(){ReachUsSupport.call(this);var A=this;A.isEditSupport=true;A.userName=ZCGlobal.scopeName;A.emailId=ZCGlobal.loginEmail;A.csrfParamName=ZCGlobal.csrfTokenName;A.csrfToken=ZCGlobal.csrfToken;A.editSupportURL=location.origin+"/appbuilder/"+ZCGlobal.scopeName+"/"+ZCGlobal.appLinkName+"/appEditSupportBuilder";A.alertMsg=function(B){iAlert(B)};A.successMsg=function(B){showToast(B,ZCType.SUCCESS,2000)};A.initFeedbackSupport()}function ReachUsLive(){ReachUsSupport.call(this);var A=this;A.isEditSupport=true;A.userName=ZCGlobal.scopeName;A.emailId=ZCGlobal.loginEmail;A.csrfParamName=ZCGlobal.csrfTokenName;A.csrfToken=ZCGlobal.csrfToken;A.editSupportURL=location.origin+"/"+ZCGlobal.scopeName+"/"+ZCGlobal.appLinkName+"/appEditSupportLive";A.alertMsg=function(B){$.alert({msg:B})};A.successMsg=function(B){$.successMsg(B,2000)};A.initFeedbackSupport()}function ReachUsSupport(){var A=this;this.editPermCall=false;this.isOpen=false;this.initFeedbackSupport=function(){A.bindFeedbackSupport()};this.switchMainTab=function(B){$(B).siblings(".selected").removeClass("selected");$(B).addClass("selected")};this.closeContent=function(){this.isOpen=false;if(typeof (ZCGlobal.appDirectionMeta)!="undefined"&&ZCGlobal.appDirectionMeta.isRTL){$("#reachUs").animate({opacity:1,left:"-=715"},750)}else{$("#reachUs").animate({opacity:1,right:"-=715"},750)}};this.showContent=function(){this.isOpen=true;$("#reachUs").animate({opacity:1,right:"0"},750,function(){$(".zls-small").removeClass("flt-left");$(".help-slider").hide()});$("#reachUs").show()};this.editAccessShowMenu=function(){var B={};B.appId=ZCGlobal.applicationId;B.zccpn=ZCGlobal.csrfToken;B.editSupportAction="check";A.supportAjaxCall(B,function(){},function(){$("#zc-reachus-editaccess-revoke").removeClass("hide").addClass("show");$("#zc-reachus-editaccess-enable").removeClass("show").addClass("hide")},function(){$("#zc-reachus-editaccess-enable").removeClass("hide").addClass("show");$("#zc-reachus-editaccess-revoke").removeClass("show").addClass("hide");A.editPermCall=true})};this.platformEditSupport=function(C){if(ZCGlobal.isPlatformServer){var B={};B.appId=ZCGlobal.productionAppId;B.zccpn=ZCGlobal.csrfToken;B.editSupportAction=C;$.ajax({url:A.editSupportURL,type:"POST",data:B,success:function(E,D,F){}})}};this.openFeedbackSupport=function(){var B={formType:"feedback",sendTo:"support+c5@zohocreator.com",submitURL:"/fcomponents/sendfeedback.do",attachmentURL:"/fcomponents/fileaction.do",appearance:"inline",appendTo:"#feedBackMenu",onScreengrabberOpen:function(){$("#reachUs").hide()},onScreengrabberClose:function(){$("#reachUs").show()},onScreengrabberDone:function(){$("#reachUs").show()},customData:{zccpn:ZCGlobal.csrfToken}};ZFeedback.open(B)};this.supportAjaxCall=function(D,C,E,B){$.ajax({url:A.editSupportURL,type:"POST",data:D,beforeSend:function(){if(C){C()}},success:function(F){if(F=="true"){E()}else{B()}}})};this.bindFeedbackSupport=function(){$("#zc-reachus-live-support").off("click").on("click",function(){A.showContent();$("#criticality").show();if($("#zc-more-help").hasClass("selected")){$("#zc_helpPanel-close").trigger("click")}A.switchMainTab($("#zc-reachus-feedback-tab"));$("#zc-reachus-chat").removeClass("show").addClass("hide");$("#zc-reachus-edit-access").removeClass("show").addClass("hide");$("#zc-reachus-feedback").removeClass("hide").addClass("show");A.openFeedbackSupport();var B=$("select[name=supportType]").val();if(B=="feedback"){$("#criticality").hide()}else{$("#criticality").show();$(".ui-zfb-critical-popup span").text(i18n["zc.reachus.critical.label"])}if($("#supportTypeSpan").length==0){$("#ui-zfb-form-top").wrap('<div class="zc-dem-clearfix zc-dem-label-top"></div>');$("<label>"+i18n["zc.reachus.subject"]+"</label>").insertBefore("#ui-zfb-form-top");$("#zfb-input-message").wrap('<div class="zc-dem-clearfix zc-dem-label-top"></div>');$("#zfb-input-message").wrap('<div class="zc-dem-field-group"></div>');$("<label>"+i18n["zc.reachus.message"]+"</label>").insertBefore("#ui-zfb-form-middle .zc-dem-field-group");$("#ui-zfb-form-top").addClass("zc-dem-field-group");$("#zfb-input-message").addClass("zc-dem-field");$("#zfb-input-subject").addClass("zc-dem-field")}$("#feedBackMenu #screenGrabLabel i").addClass("zc-li-outline ui-3-card-add");$("#feedBackMenu #attachment i").addClass("zc-li-outline ui-1-attach-86");$("#ui-zfb-form-others button").attr("tabindex",1);$("#zfb-input-message").attr("tabindex",1);$("#ui-zfb-form-others button").removeAttr("title");$("#ui-zfb-form-others button").addClass("zc-dem-tooltip");$("#ui-zfb-form-others button#attachment").append(" <span class='zc-dem-tooltiptext'>"+i18n["zc.reachus.critical.attachfile"]+"</span>");$("#ui-zfb-form-others button#screenGrabLabel").append(" <span class='zc-dem-tooltiptext'>"+i18n["zc.reachus.critical.grabscreen"]+"</span>");$("#ui-zfb-form-others button#criticality").append(" <span class='zc-dem-tooltiptext'>"+i18n["zc.reachus.critical.criticality"]+"</span>");$("#ui-zfeedback-send").hide();if(!A.isEditSupport){$("#zc-enable-appedit").remove();$("#zc-reachus-editaccess-tab").remove()}else{A.editAccessShowMenu();$("#feedBackMenu").addClass("zc-c5-feedback-support-builder")}});$("#zc-help-livechat").off("click").on("click",function(){$(".zls-small").removeClass("flt-left");$(".help-slider").hide();$zoho.salesiq.floatwindow.visible("show")});$("#zc-reachus-live-chat").off("click").on("click",function(){$("#zc_helpPanel-close").trigger("click");ZCLiveChat.load()});if(ZCGlobal.zcChatEnabled||ZCGlobal.zcPreSalesEnabled||ZCGlobal.zcUpgradeChatEnabled||ZCGlobal.zcPremiumChatEnabled){$("#zcChat").off("click").on("click",function(){ZCLiveChat.load()})}$("#zc-reachus-feedback-tab").off("click").on("click",function(){A.switchMainTab(this);$("#zc-reachus-feedback").removeClass("hide").addClass("show");$("#zc-reachus-chat").removeClass("show").addClass("hide");$("#zc-reachus-edit-access").removeClass("show").addClass("hide")});$("#zc-reachus-chat-tab").off("click").on("click",function(){A.switchMainTab(this);$("#zc-reachus-feedback").removeClass("show").addClass("hide");$("#zc-reachus-chat").removeClass("hide").addClass("show");$("#zc-reachus-edit-access").removeClass("show").addClass("hide")});$("#zc-reachus-editaccess-tab").off("click").on("click",function(){A.switchMainTab(this);$("#zc-reachus-feedback").removeClass("show").addClass("hide");$("#zc-reachus-chat").removeClass("show").addClass("hide");$("#zc-reachus-edit-access").removeClass("hide").addClass("show")});$("#reachUsExit").on("click",function(B){ZFeedback.close();A.closeContent()});$("#feedbackSupportSubmit").on("click",function(){var F=$("#editSupportPerm").is(":checked");if(ZCGlobal.isPlatformServer){var E="[Solutions] - "+$("#zfb-input-subject").val();$("#ui-zfb-form-top").prepend('<input id="zfb-input-subject" type="hidden" maxlength="500" class="ztextbox" tabindex="1" placeholder="Subject">');$("#zfb-input-subject").val(E)}else{var D=$("select[name=supportType]").val();var E=$("#zfb-input-subject").val();if(E.length>0&&D=="feedback"){E="Feedback : "+E;$("#zfb-input-subject").val(E)}}if(F){var C={};C.appId=ZCGlobal.applicationId;C.zccpn=ZCGlobal.csrfToken;C.editSupportAction="enable";var B=location.protocol+"//"+ZCGlobal.oldliveserver+"/"+ZCGlobal.scopeName+"/"+ZCGlobal.appLinkName+"/edit";ZFeedback.send({customHeaders:{"Edit Link":B},beforesend:function(){if(A.editPermCall){A.supportAjaxCall(C,function(){$("#feedbackSupportSubmit").addClass("reachus-creating")},function(){},function(){A.alertMsg(i18n["zc.general.erralert1msg"])});A.platformEditSupport(C.editSupportAction)}else{$("#feedbackSupportSubmit").addClass("reachus-creating")}},send:function(){ZFeedback.close();$("#feedbackSupportSubmit").removeClass("reachus-creating");A.closeContent();A.successMsg(i18n["zc.reachus.successMsg"])},fail:function(){A.alertMsg(i18n["zc.general.erralert1msg"]);$("#feedbackSupportSubmit").removeClass("reachus-creating")}})}else{ZFeedback.send({beforesend:function(){$("#feedbackSupportSubmit").addClass("reachus-creating")},send:function(){ZFeedback.close();$("#feedbackSupportSubmit").removeClass("reachus-creating");A.closeContent();A.successMsg(i18n["zc.reachus.successMsg"])},fail:function(){$("#feedbackSupportSubmit").removeClass("reachus-creating");A.alertMsg(i18n["zc.general.erralert1msg"])}})}});$("#zc-reachus-editaccess-enable-button").off("click").on("click",function(){var B={};B.appId=ZCGlobal.applicationId;B.zccpn=ZCGlobal.csrfToken;B.editSupportAction="enable";A.supportAjaxCall(B,function(){},function(){A.editAccessShowMenu()},function(){A.alertMsg(i18n["zc.general.erralert1msg"])});A.platformEditSupport(B.editSupportAction)});$("#zc-reachus-editaccess-revoke-button").off("click").on("click",function(){var B={};B.appId=ZCGlobal.applicationId;B.zccpn=ZCGlobal.csrfToken;B.editSupportAction="revoke";A.supportAjaxCall(B,function(){},function(){A.editAccessShowMenu()},function(){A.alertMsg(i18n["zc.general.erralert1msg"])});A.platformEditSupport(B.editSupportAction)});$("#reachUsStartChat").off("click").on("click",function(){A.closeContent();var B={userName:A.userName,emailId:A.emailId,question:$("#reachusChatDescription").val()};ZCLiveChat.start(B)});$("select[name=supportType]").zcDropDown({dropdownCssClass:"zc-dem-reachus-supporttype"});$("select[name=supportType]").on("change",function(){var B=$(this).val();if(B=="feedback"){$("#criticality").hide()}else{$("#criticality").show();$(".ui-zfb-critical-popup span").text(i18n["zc.reachus.critical.label"])}});$(document).on("keyup",function(B){if(B.keyCode==27){if(A.isOpen){$("#reachUsExit").trigger("click")}}})}};