/*
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   3.0.2
 */
(function(){function u(AQ){return typeof AQ==="function"||(typeof AQ==="object"&&AQ!==null)}function m(AQ){return typeof AQ==="function"}function k(AQ){return typeof AQ==="object"&&AQ!==null}var K;if(!Array.isArray){K=function(AQ){return Object.prototype.toString.call(AQ)==="[object Array]"}}else{K=Array.isArray}var X=K;var Z=0;var AM={}.toString;var Y;var x;var y=function t(AR,AQ){l[Z]=AR;l[Z+1]=AQ;Z+=2;if(Z===2){if(x){x(v)}else{h()}}};function f(AQ){x=AQ}function r(AQ){y=AQ}var AA=(typeof window!=="undefined")?window:undefined;var B=AA||{};var AE=B.MutationObserver||B.WebKitMutationObserver;var U=typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var G=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function AJ(){return function(){process.nextTick(v)}}function d(){return function(){Y(v)}}function g(){var AS=0;var AQ=new AE(v);var AR=document.createTextNode("");AQ.observe(AR,{characterData:true});return function(){AR.data=(AS=++AS%2)}}function q(){var AQ=new MessageChannel();AQ.port1.onmessage=v;return function(){AQ.port2.postMessage(0)}}function M(){return function(){setTimeout(v,1)}}var l=new Array(1000);function v(){for(var AR=0;AR<Z;AR+=2){var AS=l[AR];var AQ=l[AR+1];AS(AQ);l[AR]=undefined;l[AR+1]=undefined}Z=0}function J(){try{var AR=require;var AQ=AR("vertx");Y=AQ.runOnLoop||AQ.runOnContext;return d()}catch(AS){return M()}}var h;if(U){h=AJ()}else{if(AE){h=g()}else{if(G){h=q()}else{if(AA===undefined&&typeof require==="function"){h=J()}else{h=M()}}}}function n(){}var N=void 0;var V=1;var AN=2;var i=new j();function w(){return new TypeError("You cannot resolve a promise with itself")}function T(){return new TypeError("A promises callback cannot return that same promise.")}function c(AR){try{return AR.then}catch(AQ){i.error=AQ;return i}}function AF(AU,AS,AR,AQ){try{AU.call(AS,AR,AQ)}catch(AT){return AT}}function D(AS,AQ,AR){y(function(AV){var AU=false;var AT=AF(AR,AQ,function(AW){if(AU){return }AU=true;if(AQ!==AW){AL(AV,AW)}else{AK(AV,AW)}},function(AW){if(AU){return }AU=true;AD(AV,AW)},"Settle: "+(AV._label||" unknown promise"));if(!AU&&AT){AU=true;AD(AV,AT)}},AS)}function AG(AR,AQ){if(AQ._state===V){AK(AR,AQ._result)}else{if(AQ._state===AN){AD(AR,AQ._result)}else{p(AQ,undefined,function(AS){AL(AR,AS)},function(AS){AD(AR,AS)})}}}function S(AS,AQ){if(AQ.constructor===AS.constructor){AG(AS,AQ)}else{var AR=c(AQ);if(AR===i){AD(AS,i.error)}else{if(AR===undefined){AK(AS,AQ)}else{if(m(AR)){D(AS,AQ,AR)}else{AK(AS,AQ)}}}}}function AL(AR,AQ){if(AR===AQ){AD(AR,w())}else{if(u(AQ)){S(AR,AQ)}else{AK(AR,AQ)}}}function R(AQ){if(AQ._onerror){AQ._onerror(AQ._result)}AH(AQ)}function AK(AR,AQ){if(AR._state!==N){return }AR._result=AQ;AR._state=V;if(AR._subscribers.length!==0){y(AH,AR)}}function AD(AR,AQ){if(AR._state!==N){return }AR._state=AN;AR._result=AQ;y(R,AR)}function p(AQ,AV,AU,AT){var AS=AQ._subscribers;var AR=AS.length;AQ._onerror=null;AS[AR]=AV;AS[AR+V]=AU;AS[AR+AN]=AT;if(AR===0&&AQ._state){y(AH,AQ)}}function AH(AU){var AT=AU._subscribers;var AQ=AU._state;if(AT.length===0){return }var AW,AV,AS=AU._result;for(var AR=0;AR<AT.length;AR+=3){AW=AT[AR];AV=AT[AR+AQ];if(AW){e(AQ,AW,AV,AS)}else{AV(AS)}}AU._subscribers.length=0}function j(){this.error=null}var I=new j();function AP(AS,AQ){try{return AS(AQ)}catch(AR){I.error=AR;return I}}function e(AW,AY,AV,AS){var AQ=m(AV),AU,AT,AX,AR;if(AQ){AU=AP(AV,AS);if(AU===I){AR=true;AT=AU.error;AU=null}else{AX=true}if(AY===AU){AD(AY,T());return }}else{AU=AS;AX=true}if(AY._state!==N){}else{if(AQ&&AX){AL(AY,AU)}else{if(AR){AD(AY,AT)}else{if(AW===V){AK(AY,AU)}else{if(AW===AN){AD(AY,AU)}}}}}}function AI(AU,AT){try{AT(function AQ(AV){AL(AU,AV)},function AS(AV){AD(AU,AV)})}catch(AR){AD(AU,AR)}}function Q(AR,AQ){var AS=this;AS._instanceConstructor=AR;AS.promise=new AR(n);if(AS._validateInput(AQ)){AS._input=AQ;AS.length=AQ.length;AS._remaining=AQ.length;AS._init();if(AS.length===0){AK(AS.promise,AS._result)}else{AS.length=AS.length||0;AS._enumerate();if(AS._remaining===0){AK(AS.promise,AS._result)}}}else{AD(AS.promise,AS._validationError())}}Q.prototype._validateInput=function(AQ){return X(AQ)};Q.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")};Q.prototype._init=function(){this._result=new Array(this.length)};var z=Q;Q.prototype._enumerate=function(){var AU=this;var AS=AU.length;var AT=AU.promise;var AQ=AU._input;for(var AR=0;AT._state===N&&AR<AS;AR++){AU._eachEntry(AQ[AR],AR)}};Q.prototype._eachEntry=function(AR,AQ){var AT=this;var AS=AT._instanceConstructor;if(k(AR)){if(AR.constructor===AS&&AR._state!==N){AR._onerror=null;AT._settledAt(AR._state,AQ,AR._result)}else{AT._willSettleAt(AS.resolve(AR),AQ)}}else{AT._remaining--;AT._result[AQ]=AR}};Q.prototype._settledAt=function(AS,AQ,AR){var AU=this;var AT=AU.promise;if(AT._state===N){AU._remaining--;if(AS===AN){AD(AT,AR)}else{AU._result[AQ]=AR}}if(AU._remaining===0){AK(AT,AU._result)}};Q.prototype._willSettleAt=function(AR,AQ){var AS=this;p(AR,undefined,function(AT){AS._settledAt(V,AQ,AT)},function(AT){AS._settledAt(AN,AQ,AT)})};function P(AQ){return new z(this,AQ).promise}var E=P;function A(AQ){var AW=this;var AV=new AW(n);if(!X(AQ)){AD(AV,new TypeError("You must pass an array to race."));return AV}var AS=AQ.length;function AU(AX){AL(AV,AX)}function AT(AX){AD(AV,AX)}for(var AR=0;AV._state===N&&AR<AS;AR++){p(AW.resolve(AQ[AR]),undefined,AU,AT)}return AV}var b=A;function AB(AQ){var AS=this;if(AQ&&typeof AQ==="object"&&AQ.constructor===AS){return AQ}var AR=new AS(n);AL(AR,AQ);return AR}var o=AB;function W(AQ){var AS=this;var AR=new AS(n);AD(AR,AQ);return AR}var AO=W;var O=0;function s(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var a=AC;function AC(AQ){this._id=O++;this._state=undefined;this._result=undefined;this._subscribers=[];if(n!==AQ){if(!m(AQ)){s()}if(!(this instanceof AC)){H()}AI(this,AQ)}}AC.all=E;AC.race=b;AC.resolve=o;AC.reject=AO;AC._setScheduler=f;AC._setAsap=r;AC._asap=y;AC.prototype={constructor:AC,then:function(AU,AT){var AR=this;var AS=AR._state;if(AS===V&&!AU||AS===AN&&!AT){return this}var AW=new this.constructor(n);var AQ=AR._result;if(AS){var AV=arguments[AS-1];y(function(){e(AS,AW,AV,AQ)})}else{p(AR,AW,AU,AT)}return AW},"catch":function(AQ){return this.then(null,AQ)}};function C(){var AQ;if(typeof global!=="undefined"){AQ=global}else{if(typeof self!=="undefined"){AQ=self}else{try{AQ=Function("return this")()}catch(AS){throw new Error("polyfill failed because global object is unavailable in this environment")}}}var AR=AQ.Promise;if(AR&&Object.prototype.toString.call(AR.resolve())==="[object Promise]"&&!AR.cast){return }AQ.Promise=a}var L=C;var F={Promise:a,polyfill:L};if(typeof define==="function"&&define.amd){define(function(){return F})}else{if(typeof module!=="undefined"&&module.exports){module.exports=F}else{if(typeof this!=="undefined"){this["ES6Promise"]=F}}}L()}).call(this);