var Modules=new function(){this.FORM=1;this.REPORT=2;this.PAGE=3;this.ADMINPANEL=4;this.APPROVAL=5;this.NLP=6};function Requires(A){this.get=function(){switch(A){case Modules.FORM:var C=["intltelinput","tpForm","form","moment","datepicker"];return C;case Modules.REPORT:var B=["moment","datepicker","datatables","Handsontable","fullcalendar"];B.push("tpReport","report","handlebar","comment","pageresize","fileviewer");return B;case Modules.PAGE:return["@zohocharts/d3","tpPage","widgetFramework","page"];case Modules.ADMINPANEL:return["admin","font-awesome","nucleo"];case Modules.APPROVAL:return["approval"];case Modules.NLP:return["@zohocharts/d3","nlpautosuggest","nlp"]}};this.getPromise=function(B){switch(A){case Modules.FORM:return function(D,C,E,G,F){window.moment=G;B()};case Modules.REPORT:return function(I,F,J,E,H,G,C,D){window.Handsontable=E;window.moment=I;window.Handlebars=D;B()};case Modules.PAGE:return function(D,C,E){window.d3=D;require(["zcchart"],function(F){window.$ZC=F;B()})};case Modules.ADMINPANEL:return function(){B()};case Modules.APPROVAL:return function(){B()};case Modules.NLP:return function(E,C,D){window.d3=E;window.AutoSuggest=C;require(["zcchart"],function(F){window.$ZC=F;require(["zcchartexport"],function(){B()})})};default:return function(){B()}}};this.getCSSFilesList=function(C){var D=[];if(A==Modules.REPORT){D=[ZCPath.appCss.fileviewer]}if(D.length>0&&C){var B=document.styleSheets;if(B.length>0){return D.filter(function(F){for(var E=0;E<B.length;E++){if(B[E].href&&B[E].href.endsWith(F)){return false}}return true})}}return D}}function ZCBoot(B){var A=this;A.isAppMode=true;A.isMobile=B.isMobile;A.config=B;A.setup=B.setup;A.module;this.preprocess=function(){require.config({paths:B.pathMap,waitSeconds:120,packages:[{name:"cm",location:B.pathMap.cmpath,main:"lib/codemirror"},{name:"../lib/codemirror",location:ZCPath.appJs.codemirrorJs.substr(0,ZCPath.appJs.codemirrorJs.lastIndexOf("/")),main:ZCPath.appJs.codemirrorJs.substr(ZCPath.appJs.codemirrorJs.lastIndexOf("/")+1)},{name:"../../lib/codemirror",location:ZCPath.appJs.codemirrorJs.substr(0,ZCPath.appJs.codemirrorJs.lastIndexOf("/"))+"//",main:ZCPath.appJs.codemirrorJs.substr(ZCPath.appJs.codemirrorJs.lastIndexOf("/")+1)}]})};B.useCompression&&this.preprocess();this.mobileBoot=function(){resetViewport();A.config.isPWA&&initMobile()};this.boot=function(){A.mobileBoot();if(!B.useCompression){loadFile("/zohocreator/static_js/jquery-handsontable.js",true).then(function(){A.init()});return }if(A.module==Modules.PAGE){A.init()}else{require(["security"],function(){A.init()})}};this.init=function(){A.isAppMode&&A.loadPrefs();A.loadComponent();A.postprocess()};this.loadPrefs=function(){$(".user_image").attr("src",A.config.contactSRC);if(B.walkThrough&&isNull(getCookie("zc-walkthroughstep"))){setCookie("zc-walkthroughstep",17,30,"","/")}if(!B.isPrviewAction){B.zcReachConfig.isTipEnabled&&(new ZCTip(B.zcReachConfig).load());B.zcReachConfig.isMessageBoardEnabled&&(new ZCMessageBoard(B.zcReachConfig).load());!B.isFlatDashboardEnabled&&oldDashboardTracking(ZCGlobal.scopeName)}if($.isEmptyObject(B.managerConfig)!=true&&isNull(getCookie("zc-walkthroughstep"))&&B.managerConfig.hasOwnProperty("response")&&B.managerConfig.response.length>0){B.managerConfig.isAjax=false;try{Manager.create(B.managerConfig)}catch(C){Console.log(C)}}};this.loadComponent=function(){if(B.appMeta!=undefined){if(B.isPrviewAction){Controller.ApplicationController.create({type:ApplicationControllerType.PREVIEWAPPLICATION,model:B.appMeta})}else{Controller.ApplicationController.create({model:B.appMeta})}}};this.postprocess=function(){A.isAppMode&&A.initReachUs();A.initBanner();window.liveErrorHandler=new LiveErrorHandler({isMobile:A.isMobile,isReadOnly:typeof (ZCGlobal)!="undefined"?ZCGlobal.isReadOnly:false});if(!B.isC5&&A.isAppMode){C5MigrationConsole.showMigrationConsoleScreen()}};this.initZSWidget=function(){if(A.setup!="cn"&&A.setup!="dev"){loadFiles([ZCPath.storeJSUrl,ZCPath.storeCssUrl])}};this.initBanner=function(){if(B.isApiDeprecation&&!B.isPrviewAction){$(".zc-dem-container").apiDeprecationBanner();if(!B.isC5){$(".zc-common-banner-container .zc-api-banner").css("top","0px")}}if(B.isAccountMarkedForDeletion&&!B.isPrviewAction){$(".zc-dem-container").accountDeletionBanner()}if(B.isPlanDeprecated&&!B.isPrviewAction){$(".zc-dem-container").deprecatedPlanBanner(B.planVersion)}};this.registerWMS=function(){loadFile(ZCPath.wmsliteJs,true).then(function(){WmsLite.setWmsContext("_wms");WmsLite.setNoDomainChange();WmsLite.useSameDomain();WmsLite.useLongPolling();WmsLite.registerZuid("CE",ZCGlobal.loginZuid,ZCGlobal.loginUserId,false)})};this.initReachUs=function(){if(B.isC5){loadFiles([ZCPath.appCss.reachusCss,ZCPath.staticCss.supportCss,ZCPath.staticCss.zbuttonCss]);loadFiles([ZCPath.appJs.reachusJs,ZCPath.staticJs.supportJs]).then(function(){reachus=REACHUS.getInstance(REACHUS.LIVE)})}}}function ZCFormBoot(B){ZCBoot.call(this,B);var A=this;this.module=Modules.FORM;this.isAppMode=false;this.loadComponent=function(){var C=function(){jsLoaded=true;var E={};E.model=A.config.compMeta;E.html=$("#zc-component").html();E.container=$("#zc-component");E.data=A.config.data;E.dynamicMeta=A.config.dynMeta;if(A.config.isPrviewAction){E.type=FormControllerType.PREVIEWFORM}window.FORMCONTROLLER=Controller.FormController.create(E)};if(A.config.useCompression){var D=new Requires(Modules.FORM);require(D.get(),D.getPromise(function(){C()}))}else{C()}}}ZCFormBoot.prototype=Object.create(ZCBoot.prototype);ZCFormBoot.prototype.constructor=ZCFormBoot;function ZCReportBoot(B){ZCBoot.call(this,B);var A=this;this.isAppMode=false;this.module=Modules.REPORT;this.loadComponent=function(){var C=function(){jsLoaded=true;var E={};E.model=A.config.compMeta;if(A.config.isPrviewAction){E.type=ReportType.PREVIEW_REPORT}window.REPORTCONTROLLER=Controller.ReportController.create(E)};if(A.config.useCompression){var D=new Requires(Modules.REPORT);require(D.get(),D.getPromise(function(){C()}))}else{C()}}}ZCReportBoot.prototype=Object.create(ZCBoot.prototype);ZCReportBoot.prototype.constructor=ZCReportBoot;function ZCPageBoot(B){ZCBoot.call(this,B);var A=this;this.isAppMode=false;this.module=Modules.PAGE;this.loadComponent=function(){if(!A.config.isPrint){loadFiles([ZCPath.appCss.pageOldCss]);loadFiles([ZCPath.staticCss.pbfonticonCss]);loadFiles([ZCPath.appCss.pageCss])}var C=function(){Controller.PageController.create({model:A.config.compMeta,container:document.getElementById("zc-component")});if(typeof doaction==="function"){doaction()}};if(A.config.useCompression){var D=new Requires(Modules.PAGE);require(D.get(),D.getPromise(function(){C()}))}else{C()}}}ZCPageBoot.prototype=Object.create(ZCBoot.prototype);ZCPageBoot.prototype.constructor=ZCPageBoot;ZCBoot.prototype.appInit=function(C){var A=this;C=C||{};if(A.config.useCompression){require(["jquery"],function(){require(["jqueryui"],B)})}else{B()}if(A.isAppMode){loadFiles([ZCPath.appCss.pageOldCss]);loadFiles([ZCPath.staticCss.pbfonticonCss]);loadFiles([ZCPath.appCss.pageCss]);if(A.config.isPrviewAction){loadFiles([ZCPath.staticCss.fontpreviewCss])}}function B(){loadFiles([ZCPath.staticJs.tpLiveLibJs]).then(function(){var F=[ZCPath.appJs.liveLibJs];if(A.isAppMode&&C.loadBanner){F.push(ZCPath.appJs.bannerJs)}if(A.isAppMode&&!A.config.isPrviewAction){loadFile(ZCPath.appJs.livechatJs,true).then(function(){$("#zcChat").off("click").on("click",function(){ZCLiveChat.load()})});loadFile(ZCPath.appbuilderCss.livechatCss,true);if(A.config.showBetaFeatures=="true"){var E=[ZCPath.announcementJs.betafeatureJs,ZCPath.announcementCss.betafeatureCss];loadFiles(E).then(function(){new BetaFeaturePopup().init()})}}return loadFiles(F).then(function(){A.process()})});if(A.isAppMode){if(A.config.zcReachConfig.isTipEnabled&&!A.config.isPrviewAction){loadFiles([ZCPath.announcementCss.zcTipCss]);loadFiles([ZCPath.announcementJs.zcTipJs]);if(A.config.zcReachConfig.isInfoBotEnabled){loadFiles([ZCPath.announcementCss.zcInfoBotCss])}}if(A.config.zcReachConfig.isMessageBoardEnabled&&!A.config.isPrviewAction){loadFiles([ZCPath.announcementJs.zcMessageBoardJs])}if(C.isMarketingCampaign){var D={lastBotActivity:bootConfig.managerConfig.lastBotActivity,campaignContext:bootConfig.managerConfig.campaignContext,zccpn:bootConfig.managerConfig.csrfToken};if(bootConfig.managerConfig.installAppUniqueName!=undefined&&bootConfig.managerConfig.installAppUniqueName!="null"){D.appUniqueNameForChatCampaign=bootConfig.managerConfig.installAppUniqueName}$.ajax({url:"/userhome/"+bootConfig.managerConfig.sharedBy+"/evaluateRule",type:"POST",dataType:"json",data:D,beforeSend:function(){},success:function(F,E,G){if(F.length>0){loadFiles([ZCPath.appJs.campaignsJs]);loadFiles([ZCPath.campaignCss.assistbotCss])}bootConfig.managerConfig.response=F}})}if(A.config.isInstallAppOnboardEnabled&&!A.config.isPrviewAction){loadFiles([ZCPath.appJs.installAppOnboardJs]);loadFiles([ZCPath.appCss.installAppOnboardCss])}}}};ZCBoot.prototype.process=function(){var A=this;if(!A.config.useCompression){cssLoaded=true}var B=function(){var D=function(){A.boot();if(A.isAppMode){var E=new CustomIcon(customThemeMeta);E.setCustomThemeIcons();setTimeout(function(){hideWelcomeLoading();if(A.config.isInstallAppOnboardEnabled&&!A.config.isPrviewAction){startInstallAppOnboard(A.config.installAppUniqueName)}},500)}else{(typeof (hidePageLoading)=="function")&&hidePageLoading()}};if(A.isMobile){loadFiles([ZCPath.appCss.mobileCss]).then(function(){D()})}else{D()}};if(A.isAppMode){var C=function(){if(!cssLoaded){setTimeout(C,200)}else{B()}};C()}else{B()}};function CustomIcon(A,B){this.setCustomThemeIcons=function(){if(A&&A!=""){try{var F=JSON.parse(A);var D;var C;if(B=="2"){C=Object.keys(F[2]);D=F[2]}else{if(B=="3"){C=Object.keys(F[3]);D=F[3]}else{C=Object.keys(F[1]);D=F[1]}}$.each(C,function(G,H){var I=D[H];$("#t"+H).removeClass("fa-desktop tech-desktop fa-list-alt ui-3-playlist");$("#t"+H).addClass(I)})}catch(E){}}}};